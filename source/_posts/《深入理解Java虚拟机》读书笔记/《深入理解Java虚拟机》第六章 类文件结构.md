---
layout: post
title: ã€Šæ·±å…¥ç†è§£Javaè™šæ‹Ÿæœºã€‹ç¬¬å…­ç«  ç±»æ–‡ä»¶ç»“æ„ 
date: 2019-01-12 19:22:27
categories: JVM
tags:
- JVM
- è¯»ä¹¦ç¬”è®°
description: ã€Šæ·±å…¥ç†è§£Javaè™šæ‹Ÿæœºã€‹è¯»ä¹¦ç¬”è®° ç¬¬å…­ç«  ç±»æ–‡ä»¶ç»“æ„
---

# 6.1 æ¦‚è¿°

ä»£ç ç¼–è¯‘çš„ç»“æœä»æœ¬åœ°æœºå™¨ç è½¬å˜ä¸ºå­—èŠ‚ç ï¼Œæ˜¯å­˜å‚¨æ ¼å¼å‘å±•çš„ä¸€å°æ­¥ï¼Œå´æ˜¯ç¼–ç¨‹è¯­è¨€å‘å±•çš„ä¸€å¤§æ­¥ã€‚

# 6.2 æ— å…³æ€§çš„åŸºçŸ³

Javaè™šæ‹Ÿæœºæœ‰ä¸¤ä¸ªæ— å…³æ€§ï¼Œå³å¹³å°æ— å…³æ€§å’Œè¯­è¨€æ— å…³æ€§ã€‚å­—èŠ‚ç (ByteCode) æ˜¯æ„æˆå¹³å°æ— å…³æ€§çš„åŸºçŸ³ã€‚åœ¨ Java å‘å±•ä¹‹åˆï¼Œè®¾è®¡è€…å°±æ›¾ç»è€ƒè™‘è¿‡å¹¶å®ç°äº†è®©å…¶ä»–è¯­è¨€è¿è¡Œåœ¨ Java è™šæ‹Ÿæœºä¹‹ä¸Šçš„å¯èƒ½æ€§ï¼Œç”±æ­¤ Java è§„èŒƒæ‹†åˆ†æˆäº† Javaè¯­è¨€è§„èŒƒã€ŠThe Java Language Specificationã€‹åŠ Java è™šæ‹Ÿæœºè§„èŒƒã€ŠThe Java Virtual Machine Specificationã€‹ã€‚

> In the future, we will consider bounded extensions to the Java virtual machine to provide better support for the other languages.

- è¯­è¨€æ— å…³æ€§æ˜¯æŒ‡è™šæ‹Ÿæœºå¹¶ä¸æ­¢æ‰§è¡Œ Javaç¨‹åºï¼Œä¹Ÿè€ƒè™‘è®©å…¶æ”¯æŒå…¶ä»–è¯­è¨€(Groovy/Scala/Kotlinç­‰)çš„è¿è¡Œã€‚

- â€œä¸€æ¬¡ç¼–å†™ï¼Œåˆ°å¤„è¿è¡Œâ€ã€‚Javaçš„å¹³å°æ— å…³æ€§å³ä½“ç°åœ¨æ­¤å¤„ï¼Œå¯ä»¥åœ¨å¤šä¸ªå¹³å°ä¸Šè¿è¡Œã€‚



# 6.3 Class ç±»æ–‡ä»¶çš„ç»“æ„

Class æ–‡ä»¶æ˜¯`ä¸€ç»„ä»¥8ä½å­—èŠ‚ä¸ºåŸºç¡€å•ä½çš„äºŒè¿›åˆ¶æµ`ã€‚Class æ–‡ä»¶é‡‡ç”¨ä¸€ç§ç±»ä¼¼äº C è¯­è¨€ç»“æ„ä½“çš„ä¼ªç»“æ„æ¥å­˜å‚¨æ•°æ® :

- æ— ç¬¦å·æ•°
  - åŸºæœ¬çš„æ•°æ®ç±»å‹
  - u1 / u2 / u4 / u8 åˆ†åˆ«ä»£è¡¨1ä¸ªå­—èŠ‚ / 2ä¸ªå­—èŠ‚ / 4ä¸ªå­—èŠ‚ / 8ä¸ªå­—èŠ‚
  - å¯ä»¥ç”¨æ¥æè¿°æ•°å­— / ç´¢å¼•å¼•ç”¨ / æ•°é‡å€¼æˆ–è€…æŒ‰ç…§UTF-8ç¼–ç æ„æˆå­—ç¬¦ä¸²å€¼
- è¡¨
  - å¤åˆæ•°æ®ç±»å‹
  - ç”±å¤šä¸ªæ— ç¬¦å·æ•°æˆ–è€…å…¶ä»–è¡¨ä½œä¸ºæ•°æ®é¡¹æ„æˆï¼Œä¹ æƒ¯ä»¥â€œ_infoâ€ç»“å°¾
  - ç”¨äºæè¿°æœ‰å±‚æ¬¡å…³ç³»çš„å¤åˆç»“æ„çš„æ•°æ®ï¼Œæ•´ä¸ª Class æ–‡ä»¶æœ¬è´¨ä¸Šå°±æ˜¯ä¸€å¼ è¡¨

![](https://github.com/lujiahao0708/PicRepo/raw/master/blogPic/æ·±å…¥ç†è§£Javaè™šæ‹Ÿæœº/6.ç±»æ–‡ä»¶ç»“æ„/6.3_Classæ–‡ä»¶æ ¼å¼.png)

##  6.3.1 é­”æ•°ä¸ Class æ–‡ä»¶çš„ç‰ˆæœ¬

æ¯ä¸ª Class æ–‡ä»¶çš„å¤´4ä¸ªå­—èŠ‚ç§°ä¸ºé­”æ•°(Magic Number)ã€‚å”¯ä¸€ä½œç”¨æ˜¯ç¡®å®šè¿™ä¸ªæ–‡ä»¶æ˜¯å¦ä¸ºä¸€ä¸ªèƒ½è¢«è™šæ‹Ÿæœºæ¥å—çš„ Class æ–‡ä»¶ã€‚

ç´§æ¥ç€é­”æ•°çš„4ä¸ªå­—èŠ‚æ˜¯ Class æ–‡ä»¶çš„ç‰ˆæœ¬å· : ç¬¬5å’Œç¬¬6ä¸ªå­—èŠ‚æ˜¯æ¬¡ç‰ˆæœ¬å·(Minor Version)ï¼Œç¬¬7å’Œç¬¬8ä¸ªå­—èŠ‚æ˜¯ä¸»ç‰ˆæœ¬å·(Major Version)ã€‚

å°†HelloWorld.javaç¼–è¯‘æˆ Class æ–‡ä»¶åï¼Œä½¿ç”¨ Synalyze It 16è¿›åˆ¶ç¼–è¾‘å·¥å…·æŸ¥çœ‹

![](https://github.com/lujiahao0708/PicRepo/raw/master/blogPic/æ·±å…¥ç†è§£Javaè™šæ‹Ÿæœº/6.ç±»æ–‡ä»¶ç»“æ„/6.3.1_JavaClassæ–‡ä»¶ç»“æ„.png)

ä¹Ÿå¯ä»¥ä½¿ç”¨å‘½ä»¤æŸ¥çœ‹ Class æ–‡ä»¶çš„ç‰ˆæœ¬å·

```
# javap -v HelloWorld.class 
Classfile /Users/lujiahao/HelloWorld.class
  Last modified 2019-1-12; size 430 bytes
  MD5 checksum f6fad4e65a952d7f01272063b971c2f8
  Compiled from "HelloWorld.java"
public class HelloWorld
  minor version: 0
  major version: 52
  flags: ACC_PUBLIC, ACC_SUPER
...
```

åŒæ—¶æŸ¥çœ‹æœ¬æœº JDK ç‰ˆæœ¬ :

```
# java -version  
java version "1.8.0_161"
Java(TM) SE Runtime Environment (build 1.8.0_161-b12)
Java HotSpot(TM) 64-Bit Server VM (build 25.161-b12, mixed mode)
```

é€šè¿‡ä¸Šè¿°æ–¹å¼æˆ‘ä»¬å¯ä»¥çœ‹åˆ° Class æ–‡ä»¶çš„å‰9ä¸ªå­—èŠ‚çš„å«ä¹‰ã€‚ä¸‹é¢æ˜¯ Class æ–‡ä»¶çš„ç‰ˆæœ¬å·æ±‡æ€» :

| å‘å¸ƒç‰ˆæœ¬å· | å†…éƒ¨ç‰ˆæœ¬å·ï¼ˆåå…­è¿›åˆ¶ï¼‰ | å†…éƒ¨ç‰ˆæœ¬å·ï¼ˆåè¿›åˆ¶ï¼‰ |
| ---------- | ---------------------- | -------------------- |
| 1.5        | 31                     | 49                   |
| 1.6        | 32                     | 50                   |
| 1.7        | 33                     | 51                   |
| 1.8        | 34                     | 52                   |

### Tips

- [0xCAFEBABE çš„ç”±æ¥](https://en.wikipedia.org/wiki/Java_class_file#Magic_Number)
- [Synalyze It 16è¿›åˆ¶ç¼–è¾‘å·¥å…·](http://www.synalysis.net/)

## 6.3.2 å¸¸é‡æ± 



## 6.3.3 è®¿é—®æ ‡å¿—



## 6.3.4 ç±»ç´¢å¼•ã€çˆ¶ç±»ç´¢å¼•ä¸æ¥å£ç´¢å¼•é›†åˆ



## 6.3.5 å­—æ®µè¡¨é›†åˆ



## 6.3.6 æ–¹æ³•è¡¨é›†åˆ



## 6.3.7 å±æ€§è¡¨é›†åˆ


----
æ¬¢è¿å¤§å®¶å…³æ³¨ğŸ˜
![](https://github.com/lujiahao0708/PicRepo/raw/master/å…¬ä¼—å·äºŒç»´ç .jpg)