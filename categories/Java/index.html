<!doctype html>
<html lang="zh"><head><meta charset="utf-8"><meta name="generator" content="Hexo 4.2.0"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta><title>åˆ†ç±»: Java - åç«¯å°å“¥åšå®¢</title><meta description="ä¸€ä¸ª Java ç¨‹åºçŒ¿"><meta property="og:type" content="blog"><meta property="og:title" content="åç«¯å°å“¥åšå®¢"><meta property="og:url" content="http://lujiahao0708.github.io/"><meta property="og:site_name" content="åç«¯å°å“¥åšå®¢"><meta property="og:description" content="ä¸€ä¸ª Java ç¨‹åºçŒ¿"><meta property="og:locale" content="zh_CN"><meta property="article:author" content="åç«¯å°å“¥"><meta property="article:tag" content="åšå®¢"><meta property="article:tag" content="æŠ€æœ¯åšå®¢"><meta property="twitter:card" content="summary"><meta property="twitter:image" content="http://lujiahao0708.github.io/img/og_image.png"><script type="application/ld+json">{"@context":"https://schema.org","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"http://lujiahao0708.github.io"},"headline":"åç«¯å°å“¥åšå®¢","image":["http://lujiahao0708.github.io/img/og_image.png"],"author":{"@type":"Person","name":"åç«¯å°å“¥"},"description":"ä¸€ä¸ª Java ç¨‹åºçŒ¿"}</script><link rel="icon" href="/img/favicon.ico"><link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.12.0/css/all.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@9.12.0/styles/atom-one-light.css"><link rel="stylesheet" href="/css/default.css"><!--!--><script>var _hmt = _hmt || [];
        (function() {
            var hm = document.createElement("script");
            hm.src = "//hm.baidu.com/hm.js?cdef3b7efc8748063e32969cc0b8dedc";
            var s = document.getElementsByTagName("script")[0];
            s.parentNode.insertBefore(hm, s);
        })();</script><!--!--><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/lightgallery@1.6.8/dist/css/lightgallery.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/justifiedGallery@3.7.0/dist/css/justifiedGallery.min.css"><!--!--><!--!--><script src="https://cdn.jsdelivr.net/npm/pace-js@1.0.2/pace.min.js"></script></head><body class="is-2-column"><nav class="navbar navbar-main"><div class="container"><div class="navbar-brand justify-content-center"><a class="navbar-item navbar-logo" href="/"><img src="/img/logo.png" alt="åç«¯å°å“¥åšå®¢" height="28"></a></div><div class="navbar-menu"><div class="navbar-start"><a class="navbar-item" href="/">é¦–é¡µ</a><a class="navbar-item" href="/categories/Redis">Redis</a><a class="navbar-item" href="/archives">å½’æ¡£</a><a class="navbar-item" href="/categories">åˆ†ç±»</a><a class="navbar-item" href="/tags">æ ‡ç­¾</a><a class="navbar-item" href="/about">å…³äº</a></div><div class="navbar-end"><a class="navbar-item" target="_blank" rel="noopener" title="Download on GitHub" href="https://github.com/lujiahao0708"><i class="fab fa-github"></i></a><a class="navbar-item search" title="æœç´¢" href="javascript:;"><i class="fas fa-search"></i></a></div></div></div></nav><section class="section"><div class="container"><div class="columns"><div class="column order-2 column-main is-9-tablet is-9-desktop is-9-widescreen"><div class="card"><div class="card-content"><nav class="breadcrumb" aria-label="breadcrumbs"><ul><li><a href="/categories">åˆ†ç±»</a></li><li class="is-active"><a href="#" aria-current="page">Java</a></li></ul></nav></div></div><div class="card"><article class="card-content article" role="article"><div class="article-meta size-small is-uppercase level is-mobile"><div class="level-left"><time class="level-item" dateTime="2019-04-17T11:34:52.000Z" title="2019-04-17T11:34:52.000Z">2019-04-17</time><span class="level-item"><a class="link-muted" href="/categories/Java/">Java</a></span><span class="level-item">5 åˆ†é’Ÿ è¯»å®Œ (å¤§çº¦ 778 ä¸ªå­—)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/p/2d0ec2ca.html">ã€ŠElasticsearchæŠ€æœ¯è§£æä¸å®æˆ˜ã€‹Chapter 2.1 Elasticsearchç´¢å¼•å¢åˆ æ”¹æŸ¥</a></h1><div class="content"><h1 id="1-åˆ›å»ºç´¢å¼•"><a href="#1-åˆ›å»ºç´¢å¼•" class="headerlink" title="1. åˆ›å»ºç´¢å¼•"></a>1. åˆ›å»ºç´¢å¼•</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">PUT &#x2F;lujiahao123</span><br><span class="line">&#123;</span><br><span class="line">  &quot;acknowledged&quot;: true,</span><br><span class="line">  &quot;shards_acknowledged&quot;: true</span><br><span class="line">&#125;</span><br><span class="line">ç´¢å¼•é»˜è®¤çš„ä¸»åˆ†ç‰‡æ•°é‡æ˜¯5ï¼Œæ¯ä¸ªä¸»åˆ†ç‰‡çš„å‰¯æœ¬æ•°é‡æ˜¯1ã€‚</span><br></pre></td></tr></table></figure></div><a class="article-more button is-small size-small" href="/p/2d0ec2ca.html#more">é˜…è¯»æ›´å¤š</a></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta size-small is-uppercase level is-mobile"><div class="level-left"><time class="level-item" dateTime="2019-04-16T11:34:52.000Z" title="2019-04-16T11:34:52.000Z">2019-04-16</time><span class="level-item"><a class="link-muted" href="/categories/Java/">Java</a></span><span class="level-item">4 åˆ†é’Ÿ è¯»å®Œ (å¤§çº¦ 583 ä¸ªå­—)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/p/19f71057.html">ã€ŠElasticsearchæŠ€æœ¯è§£æä¸å®æˆ˜ã€‹Chapter 1.4 Spring Bootæ•´åˆElasticsearch</a></h1><div class="content"><h1 id="1-spring-boot-starter-data-elasticsearch"><a href="#1-spring-boot-starter-data-elasticsearch" class="headerlink" title="1. spring-boot-starter-data-elasticsearch"></a>1. spring-boot-starter-data-elasticsearch</h1><h2 id="1-1-pom-xmlå’Œapplication-yml"><a href="#1-1-pom-xmlå’Œapplication-yml" class="headerlink" title="1.1 pom.xmlå’Œapplication.yml"></a>1.1 pom.xmlå’Œapplication.yml</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- Spring Boot Elasticsearch ä¾èµ– --&gt;</span><br><span class="line">&lt;dependency&gt;</span><br><span class="line">    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;</span><br><span class="line">    &lt;artifactId&gt;spring-boot-starter-data-elasticsearch&lt;/artifactId&gt;</span><br><span class="line">&lt;/dependency&gt;</span><br><span class="line">spring:</span><br><span class="line">  data:</span><br><span class="line">    elasticsearch:</span><br><span class="line">      repositories:</span><br><span class="line">        enabled: <span class="keyword">true</span></span><br><span class="line">      cluster-name: docker-cluster</span><br><span class="line">      cluster-nodes: lujiahao.ml:<span class="number">9300</span></span><br></pre></td></tr></table></figure>

<h2 id="1-2-åˆ›å»ºRepository"><a href="#1-2-åˆ›å»ºRepository" class="headerlink" title="1.2 åˆ›å»ºRepository"></a>1.2 åˆ›å»ºRepository</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Repository</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">PersonEsRepository</span> <span class="keyword">extends</span> <span class="title">ElasticsearchRepository</span>&lt;<span class="title">Person</span>,<span class="title">Long</span>&gt; </span>&#123;</span><br><span class="line">    <span class="function">List&lt;Person&gt; <span class="title">findPersonByName</span><span class="params">(String name)</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="1-3-æ–‡æ¡£å®ä½“ç±»"><a href="#1-3-æ–‡æ¡£å®ä½“ç±»" class="headerlink" title="1.3 æ–‡æ¡£å®ä½“ç±»"></a>1.3 æ–‡æ¡£å®ä½“ç±»</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="meta">@Document</span>(indexName = <span class="string">"person"</span>, type = <span class="string">"chinese"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Person</span> <span class="keyword">implements</span> <span class="title">Serializable</span></span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">long</span> serialVersionUID = -<span class="number">6804453833406105286L</span>;</span><br><span class="line">    <span class="meta">@Id</span></span><br><span class="line">    <span class="keyword">private</span> Long id;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> Integer age;</span><br><span class="line">    <span class="keyword">private</span> String address;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="1-4-å¢åˆ æ”¹æŸ¥"><a href="#1-4-å¢åˆ æ”¹æŸ¥" class="headerlink" title="1.4 å¢åˆ æ”¹æŸ¥"></a>1.4 å¢åˆ æ”¹æŸ¥</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">EsStarterService</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> PersonEsRepository repository;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * å¢</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Person <span class="title">save</span><span class="params">(Person person)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> repository.save(person);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * åˆ </span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">delete</span><span class="params">(Person person)</span> </span>&#123;</span><br><span class="line">        repository.delete(person);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ”¹</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Person <span class="title">update</span><span class="params">(Person person)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> repository.save(person);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æŸ¥</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Iterable&lt;Person&gt; <span class="title">findAll</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> repository.findAll();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="1-5-å•å…ƒæµ‹è¯•"><a href="#1-5-å•å…ƒæµ‹è¯•" class="headerlink" title="1.5 å•å…ƒæµ‹è¯•"></a>1.5 å•å…ƒæµ‹è¯•</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RunWith</span>(SpringRunner<span class="class">.<span class="keyword">class</span>)</span></span><br><span class="line"><span class="class">@<span class="title">SpringBootTest</span></span></span><br><span class="line"><span class="class"><span class="title">public</span> <span class="title">class</span> <span class="title">EsStarterServiceTest</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> EsStarterService esStarterService;</span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">save</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        Person person = <span class="keyword">new</span> Person();</span><br><span class="line">        person.setId(<span class="keyword">new</span> Random().nextLong());</span><br><span class="line">        person.setName(<span class="string">"lujiahao"</span>);</span><br><span class="line">        esStarterService.save(person);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">delete</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        Person person = <span class="keyword">new</span> Person();</span><br><span class="line">        person.setId(-<span class="number">5264182431891613084L</span>);</span><br><span class="line">        person.setName(<span class="string">"lujiahao123456"</span>);</span><br><span class="line">        esStarterService.delete(person);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">update</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        Person person = <span class="keyword">new</span> Person();</span><br><span class="line">        person.setId(<span class="number">542136934419565287L</span>);</span><br><span class="line">        person.setName(<span class="string">"lujiahao123456"</span>);</span><br><span class="line">        esStarterService.update(person);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">findAll</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        Iterable&lt;Person&gt; all = esStarterService.findAll();</span><br><span class="line">        all.forEach(System.out::println);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="2-ElasticsearchTemplate"><a href="#2-ElasticsearchTemplate" class="headerlink" title="2. ElasticsearchTemplate"></a>2. ElasticsearchTemplate</h1><h2 id="2-1-pom-xmlå’Œapplication-ym"><a href="#2-1-pom-xmlå’Œapplication-ym" class="headerlink" title="2.1 pom.xmlå’Œapplication.ym"></a>2.1 pom.xmlå’Œapplication.ym</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&lt;!--elasticsearch--&gt;</span><br><span class="line">&lt;dependency&gt;</span><br><span class="line">    &lt;groupId&gt;org.springframework.data&lt;/groupId&gt;</span><br><span class="line">    &lt;artifactId&gt;spring-data-elasticsearch&lt;/artifactId&gt;</span><br><span class="line">&lt;/dependency&gt;</span><br><span class="line">spring:</span><br><span class="line">  data:</span><br><span class="line">    elasticsearch:</span><br><span class="line">      repositories:</span><br><span class="line">        enabled: <span class="keyword">true</span></span><br><span class="line">      cluster-name: docker-cluster</span><br><span class="line">      cluster-nodes: lujiahao.ml:<span class="number">9300</span></span><br></pre></td></tr></table></figure>

<h2 id="2-2-æ–‡æ¡£å®ä½“ç±»"><a href="#2-2-æ–‡æ¡£å®ä½“ç±»" class="headerlink" title="2.2 æ–‡æ¡£å®ä½“ç±»"></a>2.2 æ–‡æ¡£å®ä½“ç±»</h2><p>åŒä¸Š</p>
<h2 id="2-3-å¢åˆ æ”¹æŸ¥"><a href="#2-3-å¢åˆ æ”¹æŸ¥" class="headerlink" title="2.3 å¢åˆ æ”¹æŸ¥"></a>2.3 å¢åˆ æ”¹æŸ¥</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ElasticsearchTemplateService</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">public</span> ElasticsearchTemplate elasticsearchTemplate;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> String INDEX_NAME = <span class="string">"person"</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> String TYPE_NAME = <span class="string">"chinese"</span>;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * å¢</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">save</span><span class="params">(Person person)</span> </span>&#123;</span><br><span class="line">        IndexQuery indexQuery = <span class="keyword">new</span> IndexQueryBuilder()</span><br><span class="line">                .withIndexName(INDEX_NAME)</span><br><span class="line">                .withType(TYPE_NAME)</span><br><span class="line">                .withId(String.valueOf(person.getId()))</span><br><span class="line">                .withObject(person)</span><br><span class="line">                .build();</span><br><span class="line">        String index = elasticsearchTemplate.index(indexQuery);</span><br><span class="line">        System.out.println(<span class="string">"xxxxxxxxxxxx "</span> + index);</span><br><span class="line">        <span class="keyword">return</span> index;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * åˆ </span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">deleteByName</span><span class="params">(String name)</span> </span>&#123;</span><br><span class="line">        DeleteQuery deleteQuery = <span class="keyword">new</span> DeleteQuery();</span><br><span class="line">        deleteQuery.setQuery(QueryBuilders.matchQuery(<span class="string">"name"</span>, name));</span><br><span class="line">        deleteQuery.setIndex(INDEX_NAME);</span><br><span class="line">        deleteQuery.setType(TYPE_NAME);</span><br><span class="line">        elasticsearchTemplate.delete(deleteQuery);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ”¹</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> UpdateResponse <span class="title">update</span><span class="params">(Person person)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            UpdateRequest updateRequest = <span class="keyword">new</span> UpdateRequest()</span><br><span class="line">                    .index(INDEX_NAME)</span><br><span class="line">                    .type(TYPE_NAME)</span><br><span class="line">                    .id(String.valueOf(person.getId()))</span><br><span class="line">                    .doc(XContentFactory.jsonBuilder()</span><br><span class="line">                            .startObject()</span><br><span class="line">                            .field(<span class="string">"name"</span>, person.getName())</span><br><span class="line">                            .endObject());</span><br><span class="line">            UpdateQuery updateQuery = <span class="keyword">new</span> UpdateQueryBuilder()</span><br><span class="line">                    .withIndexName(INDEX_NAME)</span><br><span class="line">                    .withType(TYPE_NAME)</span><br><span class="line">                    .withId(String.valueOf(person.getId()))</span><br><span class="line">                    .withClass(Person<span class="class">.<span class="keyword">class</span>)</span></span><br><span class="line"><span class="class">                    .<span class="title">withUpdateRequest</span>(<span class="title">updateRequest</span>)</span></span><br><span class="line"><span class="class">                    .<span class="title">build</span>()</span>;</span><br><span class="line">            UpdateResponse update = elasticsearchTemplate.update(updateQuery);</span><br><span class="line">            <span class="keyword">return</span> update;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æŸ¥</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> List&lt;Person&gt; <span class="title">getAll</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        SearchQuery searchQuery = <span class="keyword">new</span> NativeSearchQueryBuilder()</span><br><span class="line">                .withQuery(QueryBuilders.matchAllQuery())</span><br><span class="line">                .build();</span><br><span class="line">        <span class="keyword">return</span> elasticsearchTemplate.queryForList(searchQuery, Person<span class="class">.<span class="keyword">class</span>)</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="2-4-å•å…ƒæµ‹è¯•"><a href="#2-4-å•å…ƒæµ‹è¯•" class="headerlink" title="2.4 å•å…ƒæµ‹è¯•"></a>2.4 å•å…ƒæµ‹è¯•</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RunWith</span>(SpringRunner<span class="class">.<span class="keyword">class</span>)</span></span><br><span class="line"><span class="class">@<span class="title">SpringBootTest</span></span></span><br><span class="line"><span class="class"><span class="title">public</span> <span class="title">class</span> <span class="title">ElasticsearchTemplateServiceTest</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> ElasticsearchTemplateService elasticsearchTemplateService;</span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">save</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        Person person = <span class="keyword">new</span> Person();</span><br><span class="line">        person.setId(<span class="keyword">new</span> Random().nextLong());</span><br><span class="line">        person.setName(<span class="string">"haha"</span>);</span><br><span class="line">        String save = elasticsearchTemplateService.save(person);</span><br><span class="line">        System.out.println(save);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">deleteByName</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        elasticsearchTemplateService.deleteByName(<span class="string">"lujiahao"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">update</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        Person person = <span class="keyword">new</span> Person();</span><br><span class="line">        person.setId(-<span class="number">5264182431891613084L</span>);</span><br><span class="line">        person.setName(<span class="string">"hahaaaaaaaaa"</span>);</span><br><span class="line">        UpdateResponse update = elasticsearchTemplateService.update(person);</span><br><span class="line">        System.out.println(update);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">getAll</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        List&lt;Person&gt; all = elasticsearchTemplateService.getAll();</span><br><span class="line">        System.out.println(all);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="3-ä»£ç ç¤ºä¾‹"><a href="#3-ä»£ç ç¤ºä¾‹" class="headerlink" title="3. ä»£ç ç¤ºä¾‹"></a>3. ä»£ç ç¤ºä¾‹</h1><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https:<span class="comment">//github.com/lujiahao0708/LearnSeries/tree/master/LearnElasticSerach</span></span><br></pre></td></tr></table></figure>


<h2 id="Tips"><a href="#Tips" class="headerlink" title="Tips"></a>Tips</h2><p>æœ¬æ–‡åŒæ­¥å‘è¡¨åœ¨å…¬ä¼—å·ï¼Œæ¬¢è¿å¤§å®¶å…³æ³¨ï¼ğŸ˜<br>åç»­ç¬”è®°æ¬¢è¿å…³æ³¨è·å–ç¬¬ä¸€æ—¶é—´æ›´æ–°ï¼<br><img src="https://raw.githubusercontent.com/lujiahao0708/PicRepo/master/%E5%85%AC%E4%BC%97%E5%8F%B7%E4%BA%8C%E7%BB%B4%E7%A0%81.jpg" alt=""></p>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta size-small is-uppercase level is-mobile"><div class="level-left"><time class="level-item" dateTime="2019-04-15T11:34:52.000Z" title="2019-04-15T11:34:52.000Z">2019-04-15</time><span class="level-item"><a class="link-muted" href="/categories/Java/">Java</a></span><span class="level-item">3 åˆ†é’Ÿ è¯»å®Œ (å¤§çº¦ 462 ä¸ªå­—)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/p/763a1549.html">ã€ŠElasticsearchæŠ€æœ¯è§£æä¸å®æˆ˜ã€‹Chapter 1.3 Elasticsearchå¢åˆ æ”¹æŸ¥</a></h1><div class="content"><h1 id="1-æ–°å¢æ–‡æ¡£ï¼Œå»ºç«‹ç´¢å¼•"><a href="#1-æ–°å¢æ–‡æ¡£ï¼Œå»ºç«‹ç´¢å¼•" class="headerlink" title="1. æ–°å¢æ–‡æ¡£ï¼Œå»ºç«‹ç´¢å¼•"></a>1. æ–°å¢æ–‡æ¡£ï¼Œå»ºç«‹ç´¢å¼•</h1><p>è¯­æ³•æ ¼å¼:</p>
<pre><code>PUT /index/type/id
{
  &quot;jsonæ•°æ®&quot;
}</code></pre><p>è¾“å…¥:</p>
<pre><code>PUT /person/chinese/1
{
  &quot;id&quot;:12345,
  &quot;name&quot;:&quot;lujiahao&quot;,
  &quot;age&quot;:18
}</code></pre><p>è¾“å‡º:</p>
<pre><code>{
  &quot;_index&quot;: &quot;person&quot;,
  &quot;_type&quot;: &quot;chinese&quot;,
  &quot;_id&quot;: &quot;1&quot;,
  &quot;_version&quot;: 1,
  &quot;result&quot;: &quot;created&quot;,
  &quot;_shards&quot;: {
    &quot;total&quot;: 2,
    &quot;successful&quot;: 1,
    &quot;failed&quot;: 0
  },
  &quot;created&quot;: true
}</code></pre><blockquote>
<p>esä¼šè‡ªåŠ¨å»ºç«‹indexå’Œtypeï¼Œä¸éœ€è¦æå‰åˆ›å»ºï¼Œè€Œä¸”esé»˜è®¤ä¼šå¯¹documentæ¯ä¸ªfieldéƒ½å»ºç«‹å€’æ’ç´¢å¼•ï¼Œè®©å…¶å¯ä»¥è¢«æœç´¢ã€‚</p>
</blockquote>
<h1 id="2-æ£€ç´¢æ–‡æ¡£"><a href="#2-æ£€ç´¢æ–‡æ¡£" class="headerlink" title="2. æ£€ç´¢æ–‡æ¡£"></a>2. æ£€ç´¢æ–‡æ¡£</h1><p>æ ¼å¼:</p>
<pre><code>GET /index/type/id</code></pre><p>è¾“å…¥:</p>
<pre><code>GET /person/chinese/1</code></pre><p>è¾“å‡º:</p>
<pre><code>{
  &quot;_index&quot;: &quot;person&quot;,
  &quot;_type&quot;: &quot;chinese&quot;,
  &quot;_id&quot;: &quot;1&quot;,
  &quot;_version&quot;: 1,
  &quot;found&quot;: true,
  &quot;_source&quot;: {
    &quot;id&quot;: 12345,
    &quot;name&quot;: &quot;lujiahao&quot;,
    &quot;age&quot;: 18
  }
}</code></pre><h1 id="3-æ›´æ–°æ–‡æ¡£"><a href="#3-æ›´æ–°æ–‡æ¡£" class="headerlink" title="3. æ›´æ–°æ–‡æ¡£"></a>3. æ›´æ–°æ–‡æ¡£</h1><h2 id="3-1-æ›¿æ¢æ–¹å¼"><a href="#3-1-æ›¿æ¢æ–¹å¼" class="headerlink" title="3.1 æ›¿æ¢æ–¹å¼"></a>3.1 æ›¿æ¢æ–¹å¼</h2><p>æ ¼å¼:</p>
<pre><code>PUT /index/type/id
{
    &quot;jsonæ•°æ®&quot;
}</code></pre><p>è¾“å…¥:</p>
<pre><code>PUT /person/chinese/1
{
  &quot;name&quot;:&quot;lujiahao123&quot;
}</code></pre><p>è¾“å‡º:</p>
<pre><code>{
  &quot;_index&quot;: &quot;person&quot;,
  &quot;_type&quot;: &quot;chinese&quot;,
  &quot;_id&quot;: &quot;1&quot;,
  &quot;_version&quot;: 2,
  &quot;result&quot;: &quot;updated&quot;,
  &quot;_shards&quot;: {
    &quot;total&quot;: 2,
    &quot;successful&quot;: 1,
    &quot;failed&quot;: 0
  },
  &quot;created&quot;: false
}</code></pre><p>æŸ¥è¯¢:</p>
<pre><code>{
  &quot;_index&quot;: &quot;person&quot;,
  &quot;_type&quot;: &quot;chinese&quot;,
  &quot;_id&quot;: &quot;1&quot;,
  &quot;_version&quot;: 2,
  &quot;found&quot;: true,
  &quot;_source&quot;: {
    &quot;name&quot;: &quot;lujiahao123&quot;
  }
}</code></pre><blockquote>
<p>æ›¿æ¢æ–¹å¼æ›´æ–°æ–‡æ¡£æ—¶ï¼Œå¿…é¡»å¸¦ä¸Šæ‰€æœ‰çš„fieldï¼Œæ‰èƒ½å»è¿›è¡Œä¿¡æ¯çš„ä¿®æ”¹ï¼›å¦‚æœç¼ºå°‘fieldå°±ä¼šä¸¢å¤±éƒ¨åˆ†æ•°æ®ã€‚å…¶åŸç†æ—¶æ›¿æ¢ï¼Œå› æ­¤éœ€è¦å…¨éƒ¨å­—æ®µã€‚ä¸æ¨èæ­¤ç§æ–¹å¼æ›´æ–°æ–‡æ¡£ã€‚</p>
</blockquote>
<h2 id="3-1-æ›´æ–°æ–¹å¼"><a href="#3-1-æ›´æ–°æ–¹å¼" class="headerlink" title="3.1 æ›´æ–°æ–¹å¼"></a>3.1 æ›´æ–°æ–¹å¼</h2><p>æ ¼å¼:</p>
<pre><code>POST /index/type/id/_update
{
    &quot;doc&quot;:{
        &quot;jsonæ•°æ®&quot;
    }
}</code></pre><p>è¾“å…¥:</p>
<pre><code>POST /person/chinese/1/_update
{
  &quot;doc&quot;:{
    &quot;name&quot;:&quot;lujiahao10010&quot;
  }
}</code></pre><p>è¾“å‡º:</p>
<pre><code>{
  &quot;_index&quot;: &quot;person&quot;,
  &quot;_type&quot;: &quot;chinese&quot;,
  &quot;_id&quot;: &quot;1&quot;,
  &quot;_version&quot;: 4,
  &quot;result&quot;: &quot;updated&quot;,
  &quot;_shards&quot;: {
    &quot;total&quot;: 2,
    &quot;successful&quot;: 1,
    &quot;failed&quot;: 0
  },
  &quot;created&quot;: false
}</code></pre><p>å†æ¬¡æŸ¥è¯¢ï¼š</p>
<pre><code>{
  &quot;_index&quot;: &quot;person&quot;,
  &quot;_type&quot;: &quot;chinese&quot;,
  &quot;_id&quot;: &quot;1&quot;,
  &quot;_version&quot;: 6,
  &quot;found&quot;: true,
  &quot;_source&quot;: {
    &quot;id&quot;: 12345,
    &quot;name&quot;: &quot;lujiahao10010&quot;,
    &quot;age&quot;: 18
  }
}</code></pre><h1 id="4-åˆ é™¤æ–‡æ¡£"><a href="#4-åˆ é™¤æ–‡æ¡£" class="headerlink" title="4. åˆ é™¤æ–‡æ¡£"></a>4. åˆ é™¤æ–‡æ¡£</h1><p>æ ¼å¼:</p>
<pre><code>DELETE /index/type/id/_update
{
    &quot;doc&quot;:{
        &quot;jsonæ•°æ®&quot;
    }
}</code></pre><p>è¾“å…¥:</p>
<pre><code>DELETE /person/chinese/1</code></pre><p>è¾“å‡º:</p>
<pre><code>{
  &quot;found&quot;: true,
  &quot;_index&quot;: &quot;person&quot;,
  &quot;_type&quot;: &quot;chinese&quot;,
  &quot;_id&quot;: &quot;1&quot;,
  &quot;_version&quot;: 7,
  &quot;result&quot;: &quot;deleted&quot;,
  &quot;_shards&quot;: {
    &quot;total&quot;: 2,
    &quot;successful&quot;: 1,
    &quot;failed&quot;: 0
  }
}</code></pre><p>å†æ¬¡æŸ¥è¯¢:</p>
<pre><code>{
  &quot;_index&quot;: &quot;person&quot;,
  &quot;_type&quot;: &quot;chinese&quot;,
  &quot;_id&quot;: &quot;1&quot;,
  &quot;found&quot;: false
}</code></pre><h1 id="5-å°ç»“"><a href="#5-å°ç»“" class="headerlink" title="5. å°ç»“"></a>5. å°ç»“</h1><p>æœ¬æ–‡æ‰€æœ‰æ“ä½œéƒ½æ˜¯åœ¨kibanaçš„Dev toolsä¸­è¿›è¡Œçš„ï¼Œç›¸è¾ƒäºElasticsearch-Headeæ’ä»¶ï¼Œkibanaä¸­æ›´åŠ æ–¹ä¾¿ä¸ç¾è§‚ï¼ˆä¸ªäººè§‚ç‚¹ï¼‰ï¼Œæ¨èå¤§å®¶ä½¿ç”¨ã€‚</p>
<h2 id="Tips"><a href="#Tips" class="headerlink" title="Tips"></a>Tips</h2><p>æœ¬æ–‡åŒæ­¥å‘è¡¨åœ¨å…¬ä¼—å·ï¼Œæ¬¢è¿å¤§å®¶å…³æ³¨ï¼ğŸ˜<br>åç»­ç¬”è®°æ¬¢è¿å…³æ³¨è·å–ç¬¬ä¸€æ—¶é—´æ›´æ–°ï¼<br><img src="https://raw.githubusercontent.com/lujiahao0708/PicRepo/master/%E5%85%AC%E4%BC%97%E5%8F%B7%E4%BA%8C%E7%BB%B4%E7%A0%81.jpg" alt=""></p>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta size-small is-uppercase level is-mobile"><div class="level-left"><time class="level-item" dateTime="2019-04-14T11:34:52.000Z" title="2019-04-14T11:34:52.000Z">2019-04-14</time><span class="level-item"><a class="link-muted" href="/categories/Java/">Java</a></span><span class="level-item">2 åˆ†é’Ÿ è¯»å®Œ (å¤§çº¦ 320 ä¸ªå­—)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/p/7251e71b.html">ã€ŠElasticsearchæŠ€æœ¯è§£æä¸å®æˆ˜ã€‹Chapter 1.2 Elasticsearchå®‰è£…</a></h1><div class="content"><h1 id="1-ä¸‹è½½å®‰è£…"><a href="#1-ä¸‹è½½å®‰è£…" class="headerlink" title="1. ä¸‹è½½å®‰è£…"></a>1. ä¸‹è½½å®‰è£…</h1><h2 id="1-1-ä¸‹è½½"><a href="#1-1-ä¸‹è½½" class="headerlink" title="1.1 ä¸‹è½½"></a>1.1 ä¸‹è½½</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">https://www.elastic.co/downloads/elasticsearch</span><br><span class="line">ä¸‹è½½ https://artifacts.elastic.co/downloads/elasticsearch/elasticsearch-6.7.0.tar.gz</span><br></pre></td></tr></table></figure>

<h2 id="1-2-è§£å‹"><a href="#1-2-è§£å‹" class="headerlink" title="1.2 è§£å‹"></a>1.2 è§£å‹</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tar -zxvf elasticsearch-6.7.0.tar.gz</span><br></pre></td></tr></table></figure>

<h2 id="1-3-è¿è¡Œ"><a href="#1-3-è¿è¡Œ" class="headerlink" title="1.3 è¿è¡Œ"></a>1.3 è¿è¡Œ</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cd elasticsearch-6.7.0</span><br><span class="line">bin/elasticsearch</span><br></pre></td></tr></table></figure>

<h2 id="1-4-æ£€éªŒ"><a href="#1-4-æ£€éªŒ" class="headerlink" title="1.4 æ£€éªŒ"></a>1.4 æ£€éªŒ</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">curl http://localhost:9200  æˆ–è€…æµè§ˆå™¨è®¿é—®</span><br><span class="line">&#123;</span><br><span class="line">    "name": "q9sdES9",</span><br><span class="line">    "cluster_name": "docker-cluster",</span><br><span class="line">    "cluster_uuid": "6klEi4d0Q6y0LC3YNYVXTQ",</span><br><span class="line">    "version": &#123;</span><br><span class="line">        "number": "5.5.0",</span><br><span class="line">        "build_hash": "260387d",</span><br><span class="line">        "build_date": "2017-06-30T23:16:05.735Z",</span><br><span class="line">        "build_snapshot": false,</span><br><span class="line">        "lucene_version": "6.6.0"</span><br><span class="line">    &#125;,</span><br><span class="line">    "tagline": "You Know, for Search"</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="2-Dockeréƒ¨ç½²"><a href="#2-Dockeréƒ¨ç½²" class="headerlink" title="2. Dockeréƒ¨ç½²"></a>2. Dockeréƒ¨ç½²</h1><blockquote>
<p>å®˜æ–¹æ–‡æ¡£ : <a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/docker.html">https://www.elastic.co/guide/en/elasticsearch/reference/current/docker.html</a></p>
</blockquote>
<h2 id="2-1-æ‹‰å–é•œåƒ"><a href="#2-1-æ‹‰å–é•œåƒ" class="headerlink" title="2.1 æ‹‰å–é•œåƒ"></a>2.1 æ‹‰å–é•œåƒ</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker pull docker.elastic.co/elasticsearch/elasticsearch:5.5.1</span><br></pre></td></tr></table></figure>

<h2 id="2-2-å¯åŠ¨å®¹å™¨"><a href="#2-2-å¯åŠ¨å®¹å™¨" class="headerlink" title="2.2 å¯åŠ¨å®¹å™¨"></a>2.2 å¯åŠ¨å®¹å™¨</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run -p 9200:9200 9300:9300 -e "http.host=0.0.0.0" -e â€œtransport.host=0.0.0.0" --name elasticsearch_5.5.0 -d docker.elastic.co/elasticsearch/elasticsearch:5.5.0</span><br></pre></td></tr></table></figure>

<h2 id="2-3-ä¿®æ”¹é…ç½®"><a href="#2-3-ä¿®æ”¹é…ç½®" class="headerlink" title="2.3 ä¿®æ”¹é…ç½®"></a>2.3 ä¿®æ”¹é…ç½®</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">è¿›å…¥åˆ°å®¹å™¨ä¸­ : docker exec -it elasticsearch_5.5.0 /bin/bash</span><br><span class="line">ä¿®æ”¹jvmé…ç½® : vi /config/jvm.options</span><br><span class="line">            -Xms2g  â€”&gt;  -Xms512m</span><br><span class="line">            -Xmx2g  â€”&gt;  -Xmx512m</span><br><span class="line">    ä¿®æ”¹å°ä¸€äº›,æœåŠ¡å™¨å†…å­˜æœ‰é™ğŸ˜‚</span><br></pre></td></tr></table></figure>

<h2 id="2-4-é‡å¯å®¹å™¨-æŸ¥çœ‹æ˜¯å¦æˆåŠŸ"><a href="#2-4-é‡å¯å®¹å™¨-æŸ¥çœ‹æ˜¯å¦æˆåŠŸ" class="headerlink" title="2.4 é‡å¯å®¹å™¨,æŸ¥çœ‹æ˜¯å¦æˆåŠŸ"></a>2.4 é‡å¯å®¹å™¨,æŸ¥çœ‹æ˜¯å¦æˆåŠŸ</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">http://æœåŠ¡å™¨ip:9200</span><br><span class="line">&#123;</span><br><span class="line">    "name": "q9sdES9",</span><br><span class="line">    "cluster_name": "docker-cluster",</span><br><span class="line">    "cluster_uuid": "6klEi4d0Q6y0LC3YNYVXTQ",</span><br><span class="line">    "version": &#123;</span><br><span class="line">        "number": "5.5.0",</span><br><span class="line">        "build_hash": "260387d",</span><br><span class="line">        "build_date": "2017-06-30T23:16:05.735Z",</span><br><span class="line">        "build_snapshot": false,</span><br><span class="line">        "lucene_version": "6.6.0"</span><br><span class="line">    &#125;,</span><br><span class="line">    "tagline": "You Know, for Search"</span><br><span class="line">&#125;</span><br><span class="line">æ­¤å¤„é›†ç¾¤çš„åç§°ä¸º docker-cluster, å¯ä»¥è‡ªè¡Œä¿®æ”¹ : vi /config/elasticsearch.yml</span><br></pre></td></tr></table></figure>

<h2 id="Tips"><a href="#Tips" class="headerlink" title="Tips"></a>Tips</h2><p>æœ¬æ–‡åŒæ­¥å‘è¡¨åœ¨å…¬ä¼—å·ï¼Œæ¬¢è¿å¤§å®¶å…³æ³¨ï¼ğŸ˜<br>åç»­ç¬”è®°æ¬¢è¿å…³æ³¨è·å–ç¬¬ä¸€æ—¶é—´æ›´æ–°ï¼<br><img src="https://raw.githubusercontent.com/lujiahao0708/PicRepo/master/%E5%85%AC%E4%BC%97%E5%8F%B7%E4%BA%8C%E7%BB%B4%E7%A0%81.jpg" alt=""></p>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta size-small is-uppercase level is-mobile"><div class="level-left"><time class="level-item" dateTime="2019-04-12T11:34:52.000Z" title="2019-04-12T11:34:52.000Z">2019-04-12</time><span class="level-item"><a class="link-muted" href="/categories/Java/">Java</a></span><span class="level-item">19 åˆ†é’Ÿ è¯»å®Œ (å¤§çº¦ 2874 ä¸ªå­—)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/p/864b09eb.html">ã€ŠElasticsearchæŠ€æœ¯è§£æä¸å®æˆ˜ã€‹Chapter 1.1ï¼šElasticsearchå…¥é—¨å’Œå€’æ’ç´¢å¼•</a></h1><div class="content"><h1 id="1-ç®€ä»‹"><a href="#1-ç®€ä»‹" class="headerlink" title="1. ç®€ä»‹"></a>1. ç®€ä»‹</h1><p>Elasticsearchæ˜¯ä¸€ä¸ªæœºé‡Luceneæ„å»ºçš„å¼€æºã€åˆ†å¸ƒå¼ã€RESTfulæ¥å£å…¨æ–‡æœç´¢å¼•æ“ã€‚åŒæ—¶ï¼ŒElasticsearchè¿˜æ˜¯ä¸€ä¸ªåˆ†å¸ƒå¼æ–‡æ¡£æ•°æ®åº“ï¼Œèƒ½å¤Ÿæ‰©å±•è‡³æ•°ç™¾ä¸ªæœåŠ¡å™¨å­˜å‚¨ä»¥å¤„ç†PBçº§æ•°æ®ï¼Œé€šå¸¸ä½œä¸ºå¤æ‚æœç´¢åœºæ™¯çš„é¦–é€‰åˆ©å™¨ã€‚</p>
<p>Elasticsearchçš„ä¼˜ç‚¹ï¼š</p>
<ol>
<li>æ¨ªå‘å¯æ‰©å±•æ€§ï¼šåªéœ€è¦å¢åŠ ä¸€å°æœåŠ¡å™¨ï¼Œé…ç½®å®Œæ¯•å³å¯åŠ å…¥é›†ç¾¤ã€‚</li>
<li>åˆ†ç‰‡æœºåˆ¶æä¾›æ›´å¥½çš„åˆ†å¸ƒæ€§ï¼šåŒä¸€ä¸ªç´¢å¼•åˆ†æˆå¤šä¸ªåˆ†ç‰‡ï¼Œç±»ä¼¼äºHDFSçš„å—æœºåˆ¶ï¼Œåˆ†è€Œæ²»ä¹‹çš„æ–¹å¼æå‡å¤„ç†æ•ˆç‡ã€‚</li>
<li>é«˜å¯ç”¨ï¼šæä¾›å¤åˆ¶æœºåˆ¶ï¼Œä¸€ä¸ªåˆ†ç‰‡å¯ä»¥è®¾ç½®å¤šä¸ªå‰¯æœ¬ï¼Œåœ¨æŸå°æœåŠ¡å™¨å®•æœºæƒ…å†µä¸‹ï¼Œé›†ç¾¤ä¾æ—§å¯ä»¥å·¥ä½œï¼Œå¹¶åœ¨å®•æœºæœåŠ¡å™¨é‡å¯åæ¢å¤æ•°æ®ã€‚</li>
<li>ä½¿ç”¨ç®€å•ï¼šå¼€ç®±å³ç”¨ï¼Œå¿«é€Ÿæ­å»ºæœç´¢æœåŠ¡ã€‚</li>
</ol>
<p><a href="https://zh.wikipedia.org/wiki/Elasticsearch">Elasticsearch wiki:https://zh.wikipedia.org/wiki/Elasticsearch</a></p>
<h1 id="2-æ•°æ®åº“æœç´¢"><a href="#2-æ•°æ®åº“æœç´¢" class="headerlink" title="2. æ•°æ®åº“æœç´¢"></a>2. æ•°æ®åº“æœç´¢</h1><p>åœ¨æ•°æ®é‡å°‘çš„æƒ…å†µä¸‹å¯ä»¥å½“åšæœç´¢æœåŠ¡æ¥ä½¿ç”¨ï¼Œç„¶è€Œæ•°æ®åº“å½’æ ¹ç»“åº•æ˜¯åšæŒä¹…åŒ–å­˜å‚¨ã€‚å¦‚æœæ•°æ®é‡å¤§å°±éœ€è¦åšæœç´¢æœåŠ¡ï¼Œåº•å±‚æ•°æ®è¿˜æ˜¯å…³ç³»æ•°æ®åº“ã€‚æˆ‘å¸è€ç³»ç»Ÿä¸­æœ‰ä¸€ä¸ªè®¢å•è¡¨ï¼Œæ•°æ®é‡å·²ç»é«˜è¾¾ä¸¤äº¿ï¼Œå®¢æœç­‰åå°ç³»ç»Ÿé€šå¸¸å¸¦æœ‰èŒƒå›´æˆ–æ‰¹é‡æ¡ä»¶ç­‰æŸ¥è¯¢ï¼Œè¿™æ—¶æ•°æ®åº“åŸºæœ¬ä¸Šå°±æ— æ³•å“åº”äº†ï¼ŒæŠ¥è­¦æ ¹æœ¬åœä¸ä¸‹æ¥ã€‚å› æ­¤ï¼Œç”¨æ•°æ®åº“æ¥å®ç°æœç´¢ï¼Œæ€§èƒ½å·®ï¼Œå¯ç”¨æ€§ä¸é«˜ã€‚</p>
<h1 id="3-Lucene"><a href="#3-Lucene" class="headerlink" title="3. Lucene"></a>3. Lucene</h1><p>Luceneæ˜¯ä¸€ä¸ªå¼€æºçš„å…¨æ–‡æœç´¢å¼•æ“å·¥å…·åŒ…ï¼Œå…¶ç›®çš„æ˜¯ä¸ºå¼€å‘è€…æä¾›ä¸€ä¸ªç®€å•å·¥å…·åŒ…ï¼Œä»¥å¿«é€Ÿå®ç°å…¨æ–‡æ£€ç´¢çš„åŠŸèƒ½ã€‚</p>
<p><a href="https://zh.wikipedia.org/wiki/Lucene">Lucene wiki:https://zh.wikipedia.org/wiki/Lucene</a></p>
<h1 id="4-å€’æ’ç´¢å¼•"><a href="#4-å€’æ’ç´¢å¼•" class="headerlink" title="4. å€’æ’ç´¢å¼•"></a>4. å€’æ’ç´¢å¼•</h1><p>å€’æ’ç´¢å¼•ä¸­çš„ç´¢å¼•å¯¹è±¡æ˜¯æ–‡æ¡£æˆ–è€…æ–‡æ¡£é›†åˆä¸­çš„å•è¯ç­‰ï¼Œç”¨æ¥å­˜å‚¨è¿™äº›å•è¯åœ¨ä¸€ä¸ªæ–‡æ¡£æˆ–è€…ä¸€ç»„æ–‡æ¡£ä¸­çš„å­˜å‚¨ä½ç½®ï¼Œæ˜¯å¯¹æ–‡æ¡£æˆ–è€…æ–‡æ¡£é›†åˆçš„ä¸€ç§æœ€å¸¸ç”¨çš„ç´¢å¼•æœºåˆ¶ã€‚æœç´¢å¼•æ“çš„å…³é”®æ­¥éª¤å°±æ˜¯å»ºç«‹å€’æ’ç´¢å¼•ï¼Œä¸‹é¢ä»‹ç»Luceneæ˜¯å¦‚ä½•å»ºç«‹å€’æ’ç´¢å¼•å’Œç›¸åº”çš„ç”Ÿæˆç®—æ³•ã€‚</p>
<blockquote>
<p>å‡è®¾æœ‰ä¸¤ç¯‡æ–‡ç« ï¼š<br>æ–‡ç« 1ï¼šTom lives in Guangzhou, I live in Guangzhou too.<br>æ–‡ç« 2ï¼šHe once lived in Shanghai.</p>
</blockquote>
<h2 id="4-1-å–å¾—å…³é”®è¯"><a href="#4-1-å–å¾—å…³é”®è¯" class="headerlink" title="4.1 å–å¾—å…³é”®è¯"></a>4.1 å–å¾—å…³é”®è¯</h2><p>Luceneæ˜¯åŸºäºå…³é”®è¯ç´¢å¼•å’ŒæŸ¥è¯¢çš„ï¼Œé¦–å…ˆè¦è¿›è¡Œå…³é”®è¯æå–ï¼š</p>
<ul>
<li><p>åˆ†è¯ï¼šè‹±æ–‡å•è¯ç”±ç©ºæ ¼åˆ†éš”ï¼Œè¾ƒå¥½å¤„ç†ï¼›ä¸­æ–‡è¯è¯­ç”±äºæ˜¯è¿åœ¨ä¸€èµ·çš„ï¼Œéœ€è¦è¿›è¡Œç‰¹æ®Šçš„åˆ†è¯å¤„ç†ï¼ˆåé¢ä¼šä»‹ç»åˆ†è¯å™¨ç›¸å…³çŸ¥è¯†ï¼‰ã€‚</p>
</li>
<li><p>è¿‡æ»¤æ— æ¦‚å¿µè¯è¯­ï¼šè‹±æ–‡ä¸­â€œinâ€â€œonceâ€â€œtooâ€ç­‰è¯æ²¡æœ‰å®é™…æ„ä¹‰ï¼›ä¸­æ–‡ä¸­â€œçš„â€â€œæ˜¯â€ç­‰ä¹Ÿæ— å®é™…æ„ä¹‰ï¼Œè¿™äº›æ— æ¦‚å¿µè¯è¯­å¯ä»¥è¿‡æ»¤æ‰ã€‚</p>
</li>
<li><p>ç»Ÿä¸€å¤§å°å†™ï¼šâ€œheâ€å’Œâ€œHEâ€è¡¨ç¤ºçš„å«ä¹‰ä¸€æ ·ï¼Œæ‰€ä»¥å•è¯éœ€è¦ç»Ÿä¸€å¤§å°å†™ã€‚</p>
</li>
<li><p>è¯­ä¹‰è¿˜åŸï¼šé€šå¸¸ç”¨æˆ·æŸ¥è¯¢â€œliveâ€æ—¶å¸Œæœ›èƒ½å°†â€œlivesâ€å’Œâ€œlivedâ€ä¹ŸæŸ¥è¯¢å‡ºæ¥ï¼Œæ‰€ä»¥éœ€è¦å°†â€œlivesâ€å’Œâ€œlivedâ€è¿˜åŸæˆâ€œliveâ€ã€‚</p>
</li>
<li><p>è¿‡æ»¤æ ‡ç‚¹ç¬¦å·</p>
<p>  ç»è¿‡ä»¥ä¸Šè¿‡æ»¤ï¼Œå¾—åˆ°å¦‚ä¸‹ç»“æœï¼š<br>  æ–‡ç« 1å…³é”®è¯ï¼štom live guangzhou i live guangzhou<br>  æ–‡ç« 2å…³é”®è¯ï¼šhe live shanghai</p>
</li>
</ul>
<h2 id="4-2-å»ºç«‹å€’æ’ç´¢å¼•"><a href="#4-2-å»ºç«‹å€’æ’ç´¢å¼•" class="headerlink" title="4.2 å»ºç«‹å€’æ’ç´¢å¼•"></a>4.2 å»ºç«‹å€’æ’ç´¢å¼•</h2><p>å…³é”®è¯å»ºç«‹å®Œæˆåï¼Œå°±å¯ä»¥è¿›è¡Œå€’æ’ç´¢å¼•å»ºç«‹äº†ã€‚è¿‡æ»¤åçš„å…³ç³»æ˜¯ï¼šâ€œæ–‡ç« å·â€œå¯¹â€æ–‡ç« ä¸­æ‰€æœ‰å…³é”®è¯â€œï¼Œå€’æ’ç´¢å¼•æŠŠè¿™ä¸ªå…³ç³»å€’è¿‡æ¥å˜æˆï¼šâ€å…³é”®è¯â€œå¯¹â€æ‹¥æœ‰å…³é”®è¯çš„æ‰€æœ‰æ–‡ç« å·â€œã€‚</p>
<p><img src="https://raw.githubusercontent.com/lujiahao0708/PicRepo/master/blogPic/%E3%80%8AElasticsearch%E6%8A%80%E6%9C%AF%E8%A7%A3%E6%9E%90%E4%B8%8E%E5%AE%9E%E6%88%98%E3%80%8B/Chapter%201%EF%BC%9AElasticsearch%E5%85%A5%E9%97%A8/%E5%80%92%E6%8E%92%E7%B4%A2%E5%BC%951.png" alt=""></p>
<p>é€šå¸¸ä»…çŸ¥é“å…³é”®è¯åœ¨å“ªäº›æ–‡ç« ä¸­å‡ºç°è¿˜ä¸å¤Ÿï¼Œè¿˜éœ€è¦çŸ¥é“å…³é”®è¯åœ¨æ–‡ç« ä¸­å‡ºç°çš„æ¬¡æ•°å’Œä½ç½®ï¼Œé€šå¸¸æœ‰ä¸¤ç§ä½ç½®ï¼š</p>
<ol>
<li>å­—ç¬¦ä½ç½®ï¼Œå³è®°å½•è¯¥è¯æ˜¯æ–‡ç« ä¸­ç¬¬å‡ ä¸ªå­—ç¬¦ï¼ˆä¼˜ç‚¹æ˜¯æ˜¾ç¤ºå¹¶å®šä½å…³é”®è¯å¿«ï¼‰ã€‚</li>
<li>å…³é”®è¯ä½ç½®ï¼Œå³è®°å½•è¯¥è¯æ˜¯æ–‡ç« ä¸­çš„ç¬¬å‡ ä¸ªå…³é”®è¯ï¼ˆä¼˜ç‚¹æ˜¯èŠ‚çº¦ç´¢å¼•ç©ºé—´ã€è¯ç»„æŸ¥è¯¢å¿«ï¼‰ï¼ŒLuceneä¸­è®°å½•çš„å°±æ˜¯è¿™ç§ä½ç½®ã€‚</li>
</ol>
<p><img src="https://raw.githubusercontent.com/lujiahao0708/PicRepo/master/blogPic/%E3%80%8AElasticsearch%E6%8A%80%E6%9C%AF%E8%A7%A3%E6%9E%90%E4%B8%8E%E5%AE%9E%E6%88%98%E3%80%8B/Chapter%201%EF%BC%9AElasticsearch%E5%85%A5%E9%97%A8/%E5%80%92%E6%8E%92%E7%B4%A2%E5%BC%952.png" alt=""></p>
<p>ä»¥ä¸Šå°±æ˜¯Luceneç´¢å¼•ç»“æ„ä¸­æœ€æ ¸å¿ƒçš„éƒ¨åˆ†ï¼Œå…³é”®å­—æ˜¯æŒ‰å­—ç¬¦é¡ºåºæ’åˆ—çš„ï¼ˆLuceneæ²¡æœ‰ä½¿ç”¨Bæ ‘ç»“æ„ï¼‰ï¼Œå› æ­¤Luceneå¯ä»¥ä½¿ç”¨äºŒå…ƒæœç´¢ç®—æ³•å¿«é€Ÿå®šä½å…³é”®è¯ã€‚</p>
<h2 id="4-3-å®ç°"><a href="#4-3-å®ç°" class="headerlink" title="4.3 å®ç°"></a>4.3 å®ç°</h2><p>Luceneå°†ä¸Šé¢ä¸‰åˆ—åˆ†åˆ«ä½œä¸ºè¯å…¸æ–‡ä»¶ï¼ˆTerm Dictionaryï¼‰ã€é¢‘ç‡æ–‡ä»¶ï¼ˆfrequenciesï¼‰ã€ä½ç½®æ–‡ä»¶ï¼ˆpositionsï¼‰ä¿å­˜ã€‚å…¶ä¸­è¯å…¸æ–‡ä»¶ä¸ä»…ä¿å­˜äº†æ¯ä¸ªå…³é”®è¯ï¼Œè¿˜ä¿ç•™äº†æŒ‡å‘é¢‘ç‡æ–‡ä»¶å’Œä½ç½®æ–‡ä»¶çš„æŒ‡é’ˆï¼Œé€šè¿‡æŒ‡é’ˆå¯ä»¥æ‰¾åˆ°è¯¥å…³é”®å­—çš„é¢‘ç‡ä¿¡æ¯å’Œä½ç½®ä¿¡æ¯ã€‚</p>
<p>Luceneä¸­ä½¿ç”¨äº†fieldçš„æ¦‚å¿µï¼Œç”¨äºè¡¨è¾¾ä¿¡æ¯æ‰€åœ¨çš„ä½ç½®ï¼ˆå¦‚æ ‡é¢˜ä¸­ã€æ–‡ç« ä¸­ã€urlä¸­ï¼‰ï¼Œåœ¨å»ºç´¢å¼•ä¸­ï¼Œè¯¥fieldä¿¡æ¯ä¹Ÿè®°å½•åœ¨è¯å…¸æ–‡ä»¶ä¸­ï¼Œæ¯ä¸ªå…³é”®è¯éƒ½æœ‰ä¸€ä¸ªfieldä¿¡æ¯ï¼Œå› ä¸ºæ¯ä¸ªå…³é”®å­—ä¸€å®šå±äºä¸€ä¸ªæˆ–å¤šä¸ªfieldã€‚</p>
<h2 id="4-4-å‹ç¼©ç®—æ³•"><a href="#4-4-å‹ç¼©ç®—æ³•" class="headerlink" title="4.4 å‹ç¼©ç®—æ³•"></a>4.4 å‹ç¼©ç®—æ³•</h2><p>ä¸ºäº†å‡å°ç´¢å¼•æ–‡ä»¶çš„å¤§å°ï¼ŒLuceneå¯¹ç´¢å¼•è¿˜æ˜¯ç”¨äº†å‹ç¼©æŠ€æœ¯ã€‚<br>é¦–å…ˆï¼Œå¯¹è¯å…¸æ–‡ä»¶ä¸­çš„å…³é”®è¯è¿›è¡Œå‹ç¼©ï¼Œå…³é”®è¯å‹ç¼©ä¸º&lt;å‰ç¼€é•¿åº¦,åç¼€&gt;ï¼Œä¾‹å¦‚ï¼šå½“å‰è¯ä¸ºâ€é˜¿æ‹‰ä¼¯è¯­â€œï¼Œä¸Šä¸€ä¸ªè¯ä¸ºâ€é˜¿æ‹‰ä¼¯â€œ,é‚£ä¹ˆâ€é˜¿æ‹‰ä¼¯è¯­â€œå‹ç¼©ä¸º&lt;3,è¯­&gt;ã€‚<br>å…¶æ¬¡å¤§é‡ç”¨åˆ°çš„æ˜¯å¯¹æ•°å­—çš„å‹ç¼©ï¼Œæ•°å­—åªä¿å­˜ä¸ä¸Šä¸€ä¸ªå€¼çš„å·®å€¼ï¼ˆè¿™æ ·å¯ä»¥å‡å°‘æ•°å­—çš„é•¿åº¦ï¼Œè¿›è€Œå‡å°‘ä¿å­˜è¯¥æ•°å­—éœ€è¦çš„å­—èŠ‚æ•°ï¼‰ã€‚ä¾‹å¦‚å½“å‰æ–‡ç« å·æ˜¯16389ï¼ˆä¸å‹ç¼©è¦ç”¨3ä¸ªå­—èŠ‚ï¼‰ï¼Œä¸Šä¸€æ–‡ç« å·æ˜¯16382ï¼Œå‹ç¼©åä¿å­˜7ï¼ˆåªç”¨ä¸€ä¸ªå­—èŠ‚ï¼‰ã€‚</p>
<p><a href="https://www.cnblogs.com/dreamroute/p/8484457.html">å‹ç¼©ç®—æ³•æ¨èé˜…è¯»:https://www.cnblogs.com/dreamroute/p/8484457.html</a></p>
<h2 id="4-5-å®æˆ˜"><a href="#4-5-å®æˆ˜" class="headerlink" title="4.5 å®æˆ˜"></a>4.5 å®æˆ˜</h2><p>æŸ¥è¯¢å•è¯â€liveâ€œï¼ŒLuceneå…ˆå¯¹è¯å…¸äºŒå…ƒæŸ¥æ‰¾ï¼Œæ‰¾åˆ°è¯¥è¯ï¼Œé€šè¿‡æŒ‡å‘é¢‘ç‡æ–‡ä»¶çš„æŒ‡é’ˆè¯»å‡ºæ‰€æœ‰æ–‡ç« å·ï¼Œç„¶åè¿”å›ç»“æœã€‚è¯å…¸é€šå¸¸éå¸¸å°ï¼Œå¯ä»¥è¾¾åˆ°æ¯«ç§’çº§è¿”å›ã€‚è€Œç”¨æ™®é€šçš„é¡ºåºåŒ¹é…ç®—æ³•ï¼Œä¸å»ºç«‹ç´¢å¼•ï¼Œè€Œæ˜¯å¯¹æ‰€æœ‰æ–‡ç« çš„å†…å®¹è¿›è¡Œå­—ç¬¦ä¸²åŒ¹é…ï¼Œè¿‡ç¨‹æ˜¯å¾ˆç¼“æ…¢çš„ï¼Œå½“æ•°æ®é‡å¾ˆå¤§æ—¶ï¼Œè€—æ—¶æ›´åŠ ä¸¥é‡ã€‚</p>
<h1 id="5-åŸºç¡€æ¦‚å¿µ"><a href="#5-åŸºç¡€æ¦‚å¿µ" class="headerlink" title="5. åŸºç¡€æ¦‚å¿µ"></a>5. åŸºç¡€æ¦‚å¿µ</h1><h2 id="5-1-ç´¢å¼•è¯ï¼ˆtermï¼‰"><a href="#5-1-ç´¢å¼•è¯ï¼ˆtermï¼‰" class="headerlink" title="5.1 ç´¢å¼•è¯ï¼ˆtermï¼‰"></a>5.1 ç´¢å¼•è¯ï¼ˆtermï¼‰</h2><p>Elasticsearchä¸­èƒ½å¤Ÿè¢«ç´¢å¼•çš„ç²¾ç¡®å€¼ã€‚fooã€Fooã€FOOå‡ ä¸ªå•è¯æ˜¯ä¸åŒçš„ç´¢å¼•è¯ã€‚ç´¢å¼•è¯å¯ä»¥é€šè¿‡termæŸ¥è¯¢è¿›è¡Œå‡†ç¡®çš„æœç´¢ã€‚</p>
<h2 id="5-2-æ–‡æœ¬ï¼ˆtextï¼‰"><a href="#5-2-æ–‡æœ¬ï¼ˆtextï¼‰" class="headerlink" title="5.2 æ–‡æœ¬ï¼ˆtextï¼‰"></a>5.2 æ–‡æœ¬ï¼ˆtextï¼‰</h2><p>æ–‡æœ¬ä¼šè¢«æ‹†åˆ†æˆä¸€ä¸ªä¸ªç´¢å¼•è¯å­˜å‚¨åœ¨ç´¢å¼•åº“ä¸­ï¼Œä¸ºåç»­æœç´¢æä¾›æ”¯æŒã€‚</p>
<h2 id="5-3-åˆ†æï¼ˆanalysisï¼‰"><a href="#5-3-åˆ†æï¼ˆanalysisï¼‰" class="headerlink" title="5.3 åˆ†æï¼ˆanalysisï¼‰"></a>5.3 åˆ†æï¼ˆanalysisï¼‰</h2><p>åˆ†ææ˜¯å°†æ–‡æœ¬è½¬æ¢ä¸ºç´¢å¼•è¯çš„è¿‡ç¨‹ï¼Œå…¶ç»“æœä¾èµ–äºåˆ†è¯å™¨ã€‚</p>
<h2 id="5-4-é›†ç¾¤ï¼ˆclusterï¼‰"><a href="#5-4-é›†ç¾¤ï¼ˆclusterï¼‰" class="headerlink" title="5.4 é›†ç¾¤ï¼ˆclusterï¼‰"></a>5.4 é›†ç¾¤ï¼ˆclusterï¼‰</h2><p>é›†ç¾¤ç”±ä¸€ä¸ªæˆ–å¤šä¸ªèŠ‚ç‚¹ç»„æˆï¼Œå¯¹å¤–æä¾›æœåŠ¡ã€‚ElasticsearchèŠ‚ç‚¹å¦‚æœæœ‰ç›¸åŒçš„é›†ç¾¤åç§°ä¼šè‡ªåŠ¨åŠ å…¥åˆ°åŒä¸€ä¸ªé›†ç¾¤ï¼Œå› æ­¤å¦‚æœä½ æ‹¥æœ‰å¤šä¸ªç‹¬ç«‹é›†ç¾¤ï¼Œæ¯ä¸ªé›†ç¾¤éƒ½è¦è®¾ç½®ä¸åŒçš„åç§°ã€‚</p>
<h2 id="5-5-èŠ‚ç‚¹ï¼ˆnodeï¼‰"><a href="#5-5-èŠ‚ç‚¹ï¼ˆnodeï¼‰" class="headerlink" title="5.5 èŠ‚ç‚¹ï¼ˆnodeï¼‰"></a>5.5 èŠ‚ç‚¹ï¼ˆnodeï¼‰</h2><p>èŠ‚ç‚¹æ˜¯ä¸€ä¸ªé€»è¾‘ä¸Šç‹¬ç«‹çš„æœåŠ¡ï¼Œæ˜¯é›†ç¾¤çš„ä¸€éƒ¨åˆ†ï¼Œå¯ä»¥å­˜å‚¨æ•°æ®ï¼Œå¹¶å‚ä¸é›†ç¾¤çš„ç´¢å¼•å’Œæœç´¢åŠŸèƒ½ã€‚</p>
<h2 id="5-6-è·¯ç”±ï¼ˆroutingï¼‰"><a href="#5-6-è·¯ç”±ï¼ˆroutingï¼‰" class="headerlink" title="5.6 è·¯ç”±ï¼ˆroutingï¼‰"></a>5.6 è·¯ç”±ï¼ˆroutingï¼‰</h2><p>æ–‡æ¡£å­˜å‚¨æ—¶æ˜¯é€šè¿‡æ•£åˆ—å€¼è¿›è¡Œè®¡ç®—ï¼Œæœ€ç»ˆé€‰æ‹©å­˜å‚¨åœ¨ä¸»åˆ†ç‰‡ä¸­ï¼Œè¿™ä¸ªå€¼é»˜è®¤æ˜¯ç”±æ–‡æ¡£çš„IDç”Ÿæˆã€‚</p>
<h2 id="5-7-åˆ†ç‰‡ï¼ˆshardï¼‰"><a href="#5-7-åˆ†ç‰‡ï¼ˆshardï¼‰" class="headerlink" title="5.7 åˆ†ç‰‡ï¼ˆshardï¼‰"></a>5.7 åˆ†ç‰‡ï¼ˆshardï¼‰</h2><p>åˆ†ç‰‡æ˜¯å•ä¸ªLuceneå®ä¾‹ï¼Œæ˜¯Elasticsearchç®¡ç†çš„æ¯”è¾ƒåº•å±‚çš„åŠŸèƒ½ã€‚å½“ç´¢å¼•å ç”¨ç©ºé—´å¾ˆå¤§è¶…è¿‡ä¸€ä¸ªèŠ‚ç‚¹çš„ç‰©ç†å­˜å‚¨ï¼ŒElasticsearchå°†ç´¢å¼•åˆ‡åˆ†æˆå¤šä¸ªåˆ†ç‰‡ï¼Œåˆ†æ•£åœ¨ä¸åŒçš„ç‰©ç†èŠ‚ç‚¹ä¸Šï¼Œä»¥è§£å†³å•ç‰©ç†èŠ‚ç‚¹å­˜å‚¨ç©ºé—´æœ‰é™çš„é—®é¢˜ã€‚</p>
<h2 id="5-8-ä¸»åˆ†ç‰‡ï¼ˆprimary-shardï¼‰"><a href="#5-8-ä¸»åˆ†ç‰‡ï¼ˆprimary-shardï¼‰" class="headerlink" title="5.8 ä¸»åˆ†ç‰‡ï¼ˆprimary shardï¼‰"></a>5.8 ä¸»åˆ†ç‰‡ï¼ˆprimary shardï¼‰</h2><p>æ¯ä¸ªæ–‡æ¡£éƒ½å­˜å‚¨åœ¨ä¸€ä¸ªåˆ†ç‰‡ä¸­ï¼Œå­˜å‚¨æ–‡æ¡£æ—¶ç³»ç»Ÿä¼šé¦–å…ˆå­˜å‚¨åœ¨ä¸»åˆ†ç‰‡ä¸­ï¼Œç„¶åå¤åˆ¶åˆ°ä¸åŒçš„å‰¯æœ¬ä¸­ã€‚é»˜è®¤æƒ…å†µä¸‹ä¸€ä¸ªç´¢å¼•æ‹¥æœ‰5ä¸ªä¸»åˆ†ç‰‡ï¼Œåˆ†ç‰‡ä¸€æ—¦å»ºç«‹ï¼Œä¸»åˆ†ç‰‡æ•°é‡å°±æ— æ³•ä¿®æ”¹ã€‚</p>
<h2 id="5-9-å‰¯æœ¬åˆ†ç‰‡ï¼ˆreplica-shardï¼‰"><a href="#5-9-å‰¯æœ¬åˆ†ç‰‡ï¼ˆreplica-shardï¼‰" class="headerlink" title="5.9 å‰¯æœ¬åˆ†ç‰‡ï¼ˆreplica shardï¼‰"></a>5.9 å‰¯æœ¬åˆ†ç‰‡ï¼ˆreplica shardï¼‰</h2><p>æ¯ä¸ªä¸»åˆ†ç‰‡æœ‰é›¶ä¸ªæˆ–å¤šä¸ªå‰¯æœ¬ï¼Œæ˜¯ä¸»åˆ†ç‰‡çš„å¤åˆ¶ï¼Œå…¶ä¸»è¦ç›®çš„æ˜¯ï¼š</p>
<ol>
<li>å¢åŠ é«˜å¯ç”¨æ€§ï¼šå½“ä¸»åˆ†ç‰‡å¤±è´¥æ—¶ï¼ŒæŸä¸€å‰¯æœ¬åˆ†ç‰‡æå‡ä¸ºä¸»åˆ†ç‰‡</li>
<li>æé«˜æ€§èƒ½ï¼šå‰¯æœ¬åˆ†ç‰‡æ•°é‡å¯ä»¥åŠ¨æ€é…ç½®ï¼Œå¯ä»¥ä¸ºä¸»åˆ†ç‰‡åˆ†æ‹…æŸ¥è¯¢å‹åŠ›ã€‚</li>
<li>å…è®¸æ°´å¹³åˆ†å‰²æ‰©å±•æ•°æ®</li>
<li>å…è®¸åˆ†é…å’Œå¹¶è¡Œæ“ä½œï¼Œä»è€Œæé«˜æ€§èƒ½å’Œååé‡ã€‚</li>
</ol>
<h2 id="5-10-å¤åˆ¶ï¼ˆreplicaï¼‰"><a href="#5-10-å¤åˆ¶ï¼ˆreplicaï¼‰" class="headerlink" title="5.10 å¤åˆ¶ï¼ˆreplicaï¼‰"></a>5.10 å¤åˆ¶ï¼ˆreplicaï¼‰</h2><p>ä¸»åˆ†ç‰‡çš„æ•°æ®ä¼šå¤åˆ¶åˆ°å‰¯æœ¬åˆ†ç‰‡ä¸­ï¼Œè¿™æ ·é¿å…äº†å•ç‚¹é—®é¢˜ï¼Œå½“æŸä¸ªèŠ‚ç‚¹å‘ç”Ÿæ•…éšœï¼Œå¤åˆ¶å¯ä»¥å¯¹æ•…éšœè¿›è¡Œè½¬ç§»ï¼Œä¿è¯ç³»ç»Ÿçš„é«˜å¯ç”¨ã€‚</p>
<h2 id="5-11-ç´¢å¼•ï¼ˆindexï¼‰"><a href="#5-11-ç´¢å¼•ï¼ˆindexï¼‰" class="headerlink" title="5.11 ç´¢å¼•ï¼ˆindexï¼‰"></a>5.11 ç´¢å¼•ï¼ˆindexï¼‰</h2><p>ç´¢å¼•æ˜¯å…·æœ‰ç›¸åŒç»“æ„çš„æ–‡æ¡£åˆé›†ã€‚</p>
<h2 id="5-12-ç±»å‹ï¼ˆtypeï¼‰"><a href="#5-12-ç±»å‹ï¼ˆtypeï¼‰" class="headerlink" title="5.12 ç±»å‹ï¼ˆtypeï¼‰"></a>5.12 ç±»å‹ï¼ˆtypeï¼‰</h2><p>ä¸€ä¸ªç´¢å¼•å¯ä»¥å®šä¹‰ä¸€ä¸ªæˆ–å¤šä¸ªç±»å‹ï¼Œç±»å‹æ˜¯ç´¢å¼•çš„é€»è¾‘åˆ†åŒºã€‚</p>
<h2 id="5-13-æ–‡æ¡£ï¼ˆdocumentï¼‰"><a href="#5-13-æ–‡æ¡£ï¼ˆdocumentï¼‰" class="headerlink" title="5.13 æ–‡æ¡£ï¼ˆdocumentï¼‰"></a>5.13 æ–‡æ¡£ï¼ˆdocumentï¼‰</h2><p>æ–‡æ¡£æ˜¯å­˜å‚¨åœ¨Elasticsearchä¸­çš„ä¸€ä¸ªJSONæ ¼å¼çš„å­—ç¬¦ä¸²ï¼Œå°±åƒå…³ç³»æ•°æ®åº“ä¸­è¡¨çš„ä¸€è¡Œè®°å½•ã€‚</p>
<h2 id="5-14-æ˜ å°„ï¼ˆmappingï¼‰"><a href="#5-14-æ˜ å°„ï¼ˆmappingï¼‰" class="headerlink" title="5.14 æ˜ å°„ï¼ˆmappingï¼‰"></a>5.14 æ˜ å°„ï¼ˆmappingï¼‰</h2><p>æ˜ å°„åƒå…³ç³»æ•°æ®åº“ä¸­çš„è¡¨ç»“æ„ï¼Œæ¯ä¸ªç´¢å¼•éƒ½æœ‰ä¸€ä¸ªæ˜ å°„ï¼Œå®ƒå®šä¹‰äº†ç´¢å¼•ä¸­çš„æ¯ä¸€ä¸ªå­—æ®µç±»å‹ã€‚æ˜ å°„å¯ä»¥äº‹å…ˆè¢«å®šä¹‰ï¼Œä¹Ÿå¯ä»¥åœ¨ç¬¬ä¸€æ¬¡å­˜å‚¨æ–‡æ¡£æ—¶è¢«è‡ªåŠ¨è¯†åˆ«ã€‚</p>
<h2 id="5-15-å­—æ®µï¼ˆfieldï¼‰"><a href="#5-15-å­—æ®µï¼ˆfieldï¼‰" class="headerlink" title="5.15 å­—æ®µï¼ˆfieldï¼‰"></a>5.15 å­—æ®µï¼ˆfieldï¼‰</h2><p>æ–‡æ¡£ä¸­åŒ…å«é›¶ä¸ªæˆ–å¤šä¸ªå­—æ®µï¼Œå­—æ®µå¯ä»¥æ˜¯ä¸€ä¸ªç®€å•çš„å€¼ï¼Œä¹Ÿå¯ä»¥æ˜¯ä¸€ä¸ªæ•°ç»„æˆ–å¯¹è±¡çš„åµŒå¥—ç»“æ„ã€‚å­—æ®µç±»ä¼¼äºå…³ç³»æ•°æ®åº“ä¸­è¡¨çš„åˆ—ï¼Œæ¯ä¸ªå­—æ®µéƒ½å¯¹åº”ä¸€ä¸ªå­—æ®µç±»å‹ã€‚</p>
<h2 id="5-16-æ¥æºå­—æ®µï¼ˆsource-fieldï¼‰"><a href="#5-16-æ¥æºå­—æ®µï¼ˆsource-fieldï¼‰" class="headerlink" title="5.16 æ¥æºå­—æ®µï¼ˆsource fieldï¼‰"></a>5.16 æ¥æºå­—æ®µï¼ˆsource fieldï¼‰</h2><p>é»˜è®¤æƒ…å†µä¸‹æºæ–‡æ¡£å°†è¢«å­˜å‚¨åœ¨_sourceå­—æ®µä¸­ï¼ŒæŸ¥è¯¢æ—¶è¿”å›è¯¥å­—æ®µã€‚</p>
<h2 id="5-17-ä¸»é”®ï¼ˆIDï¼‰"><a href="#5-17-ä¸»é”®ï¼ˆIDï¼‰" class="headerlink" title="5.17 ä¸»é”®ï¼ˆIDï¼‰"></a>5.17 ä¸»é”®ï¼ˆIDï¼‰</h2><p>IDæ˜¯æ–‡ä»¶çš„å”¯ä¸€æ ‡è¯†ï¼Œå¦‚æœæœªæŒ‡å®šï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨ç”Ÿæˆä¸€ä¸ªIDï¼Œæ–‡æ¡£çš„index/type/idå¿…é¡»æ˜¯å”¯ä¸€çš„ã€‚</p>
<h2 id="5-18-Elasticsearchæ ¸å¿ƒæ¦‚å¿µ-vs-æ•°æ®åº“æ ¸å¿ƒæ¦‚å¿µ"><a href="#5-18-Elasticsearchæ ¸å¿ƒæ¦‚å¿µ-vs-æ•°æ®åº“æ ¸å¿ƒæ¦‚å¿µ" class="headerlink" title="5.18 Elasticsearchæ ¸å¿ƒæ¦‚å¿µ vs. æ•°æ®åº“æ ¸å¿ƒæ¦‚å¿µ"></a>5.18 Elasticsearchæ ¸å¿ƒæ¦‚å¿µ vs. æ•°æ®åº“æ ¸å¿ƒæ¦‚å¿µ</h2><table>
<thead>
<tr>
<th>Elasticsearch</th>
<th>æ•°æ®åº“</th>
</tr>
</thead>
<tbody><tr>
<td>Document</td>
<td>row è¡Œ</td>
</tr>
<tr>
<td>Type</td>
<td>table è¡¨</td>
</tr>
<tr>
<td>Index</td>
<td>database åº“</td>
</tr>
</tbody></table>
<h2 id="Tips"><a href="#Tips" class="headerlink" title="Tips"></a>Tips</h2><p>æœ¬æ–‡åŒæ­¥å‘è¡¨åœ¨å…¬ä¼—å·ï¼Œæ¬¢è¿å¤§å®¶å…³æ³¨ï¼ğŸ˜<br>åç»­ç¬”è®°æ¬¢è¿å…³æ³¨è·å–ç¬¬ä¸€æ—¶é—´æ›´æ–°ï¼<br><img src="https://raw.githubusercontent.com/lujiahao0708/PicRepo/master/%E5%85%AC%E4%BC%97%E5%8F%B7%E4%BA%8C%E7%BB%B4%E7%A0%81.jpg" alt=""></p>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta size-small is-uppercase level is-mobile"><div class="level-left"><time class="level-item" dateTime="2019-03-26T11:34:52.000Z" title="2019-03-26T11:34:52.000Z">2019-03-26</time><span class="level-item"><a class="link-muted" href="/categories/Java/">Java</a></span><span class="level-item">27 åˆ†é’Ÿ è¯»å®Œ (å¤§çº¦ 3983 ä¸ªå­—)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/p/33416609.html">ã€ŠJava 8 in Actionã€‹Chapter 12ï¼šæ–°çš„æ—¥æœŸå’Œæ—¶é—´API</a></h1><div class="content"><ul>
<li>åœ¨Java 1.0ä¸­ï¼Œå¯¹æ—¥æœŸå’Œæ—¶é—´çš„æ”¯æŒåªèƒ½ä¾èµ–java.util.Dateç±»ã€‚åŒæ—¶è¿™ä¸ªç±»è¿˜æœ‰ä¸¤ä¸ªå¾ˆå¤§çš„ç¼ºç‚¹ï¼šå¹´ä»½çš„èµ·å§‹é€‰æ‹©æ˜¯1900å¹´ï¼Œæœˆä»½çš„èµ·å§‹ä»0å¼€å§‹ã€‚</li>
<li>åœ¨Java 1.1ä¸­ï¼ŒDateç±»ä¸­çš„å¾ˆå¤šæ–¹æ³•è¢«åºŸå¼ƒï¼Œå–è€Œä»£ä¹‹çš„æ˜¯java.util.Calendarç±»ã€‚ç„¶è€ŒCalendarç±»ä¹Ÿæœ‰ç±»ä¼¼çš„é—®é¢˜å’Œè®¾è®¡ç¼ºé™·ï¼Œå¯¼è‡´ä½¿ç”¨è¿™äº›æ–¹æ³•å†™å‡ºçš„ä»£ç éå¸¸å®¹æ˜“å‡ºé”™ã€‚</li>
</ul>
<blockquote>
<p>DateFormatæ–¹æ³•ä¹Ÿæœ‰å®ƒè‡ªå·±çš„é—®é¢˜ã€‚æ¯”å¦‚ï¼Œå®ƒä¸æ˜¯çº¿ç¨‹å®‰å…¨çš„ã€‚è¿™æ„å‘³ç€ä¸¤ä¸ªçº¿ç¨‹å¦‚æœå°è¯•ä½¿ç”¨åŒä¸€ä¸ªformatterè§£ææ—¥æœŸï¼Œä½ å¯èƒ½ä¼šå¾—åˆ°æ— æ³•é¢„æœŸçš„ç»“æœã€‚</p>
</blockquote>
<h1 id="1-ä½¿ç”¨LocalDate-å’ŒLocalTime"><a href="#1-ä½¿ç”¨LocalDate-å’ŒLocalTime" class="headerlink" title="1. ä½¿ç”¨LocalDate å’ŒLocalTime"></a>1. ä½¿ç”¨LocalDate å’ŒLocalTime</h1><h2 id="1-1-LocalDate"><a href="#1-1-LocalDate" class="headerlink" title="1.1 LocalDate"></a>1.1 LocalDate</h2><p>Java 8æä¾›æ–°çš„æ—¥æœŸå’Œæ—¶é—´API,LocalDateç±»å®ä¾‹æ˜¯ä¸€ä¸ªä¸å¯å˜å¯¹è±¡ï¼Œåªæä¾›ç®€å•çš„æ—¥æœŸå¹¶ä¸”ä¸å«å½“å¤©æ—¶é—´ä¿¡æ¯ã€‚æ­¤å¤–ä¹Ÿä¸é™„å¸¦ä»»ä½•ä¸æ—¶åŒºç›¸å…³çš„ä¿¡æ¯ã€‚</p>
<p>é€šè¿‡é™æ€å·¥å‚æ–¹æ³•ofåˆ›å»ºä¸€ä¸ªLocalDateå®ä¾‹ã€‚LocalDateå®ä¾‹æä¾›äº†å¤šç§æ–¹æ³•æ¥è¯»å–å¸¸ç”¨çš„å€¼ï¼Œæ¯”å¦‚å¹´ä»½ã€æœˆä»½ã€æ˜ŸæœŸå‡ ç­‰ï¼Œå¦‚ä¸‹æ‰€ç¤ºã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">LocalDate localDate = LocalDate.of(<span class="number">2014</span>, <span class="number">3</span>, <span class="number">18</span>);</span><br><span class="line"><span class="keyword">int</span> year = localDate.getYear();</span><br><span class="line">Month month = localDate.getMonth();</span><br><span class="line"><span class="keyword">int</span> day = localDate.getDayOfMonth();</span><br><span class="line">DayOfWeek dow = localDate.getDayOfWeek();</span><br><span class="line"><span class="keyword">int</span> len = localDate.lengthOfMonth();</span><br><span class="line"><span class="keyword">boolean</span> leap = localDate.isLeapYear();</span><br><span class="line"></span><br><span class="line"><span class="comment">// ä½¿ç”¨å·¥å‚æ–¹æ³•ä»ç³»ç»Ÿæ—¶é’Ÿä¸­è·å–å½“å‰çš„æ—¥æœŸ</span></span><br><span class="line">LocalDate today = LocalDate.now();</span><br><span class="line"></span><br><span class="line">System.out.println(String.format(<span class="string">"year:%s\nmonth:%s\nday:%s\ndow:%s\nlen:%s\nleap:%s"</span>, year, month, day, dow, len, leap));</span><br><span class="line">System.out.println(today);</span><br><span class="line"></span><br><span class="line">ç»“æœï¼š</span><br><span class="line">year:<span class="number">2014</span></span><br><span class="line">month:MARCH</span><br><span class="line">day:<span class="number">18</span></span><br><span class="line">dow:TUESDAY</span><br><span class="line">len:<span class="number">31</span></span><br><span class="line">leap:<span class="keyword">false</span></span><br><span class="line"><span class="number">2019</span>-<span class="number">03</span>-<span class="number">27</span></span><br></pre></td></tr></table></figure>

<p>Java 8æ—¥æœŸ-æ—¶é—´ç±»éƒ½æä¾›äº†ç±»ä¼¼çš„å·¥å‚æ–¹æ³•ã€‚é€šè¿‡ä¼ é€’TemporalFieldå‚æ•°ç»™getæ–¹æ³•æ‹¿åˆ°åŒæ ·çš„ä¿¡æ¯ã€‚TemporalFieldæ¥å£å®šä¹‰äº†å¦‚ä½•è®¿é—®temporalå¯¹è±¡æŸä¸ªå­—æ®µçš„å€¼ã€‚ChronoFieldæšä¸¾å®ç°TemporalFieldæ¥å£,å¯ä»¥ä½¿ç”¨getæ–¹æ³•å¾—åˆ°æšä¸¾å…ƒç´ çš„å€¼ã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> year = localDate.get(ChronoField.YEAR);</span><br><span class="line"><span class="keyword">int</span> month = localDate.get(ChronoField.MONTH_OF_YEAR);</span><br><span class="line"><span class="keyword">int</span> day = localDate.get(ChronoField.DAY_OF_MONTH);</span><br></pre></td></tr></table></figure>

<h2 id="1-2-LocalTime"><a href="#1-2-LocalTime" class="headerlink" title="1.2 LocalTime"></a>1.2 LocalTime</h2><p>ä½¿ç”¨LocalTimeç±»è¡¨ç¤ºæ—¶é—´,å¯ä»¥ä½¿ç”¨ofé‡è½½çš„ä¸¤ä¸ªå·¥å‚æ–¹æ³•åˆ›å»ºLocalTimeçš„å®ä¾‹ã€‚</p>
<ul>
<li>ç¬¬ä¸€ä¸ªé‡è½½å‡½æ•°æ¥æ”¶å°æ—¶å’Œåˆ†é’Ÿ</li>
<li>ç¬¬äºŒä¸ªé‡è½½å‡½æ•°åŒæ—¶è¿˜æ¥æ”¶ç§’ã€‚</li>
</ul>
<p>LocalTimeç±»ä¹Ÿæä¾›äº†ä¸€äº›getæ–¹æ³•è®¿é—®è¿™äº›å˜é‡çš„å€¼ï¼Œå¦‚ä¸‹æ‰€ç¤ºã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">LocalTime localTime = LocalTime.of(<span class="number">13</span>, <span class="number">45</span>, <span class="number">20</span>);</span><br><span class="line"><span class="keyword">int</span> hour = localTime.getHour();</span><br><span class="line"><span class="keyword">int</span> minute = localTime.getMinute();</span><br><span class="line"><span class="keyword">int</span> second = localTime.getSecond();</span><br><span class="line">System.out.println(String.format(<span class="string">"hour:%s\nminute:%s\nsecond:%s"</span>, hour, minute, second));</span><br><span class="line"></span><br><span class="line">æ‰“å°ç»“æœï¼š</span><br><span class="line">hour:<span class="number">13</span></span><br><span class="line">minute:<span class="number">45</span></span><br><span class="line">second:<span class="number">20</span></span><br></pre></td></tr></table></figure>

<p>LocalDateå’ŒLocalTimeéƒ½å¯ä»¥é€šè¿‡è§£æä»£è¡¨å®ƒä»¬çš„å­—ç¬¦ä¸²åˆ›å»ºã€‚ä½¿ç”¨é™æ€æ–¹æ³•parseå¯ä»¥å®ç°ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">LocalDate date = LocalDate.parse(<span class="string">"2019-03-27"</span>);</span><br><span class="line">LocalTime time = LocalTime.parse(<span class="string">"20:17:08"</span>);</span><br></pre></td></tr></table></figure>

<blockquote>
<p>å¯ä»¥å‘parseæ–¹æ³•ä¼ é€’ä¸€ä¸ªDateTimeFormatterã€‚è¯¥ç±»çš„å®ä¾‹å®šä¹‰äº†å¦‚ä½•æ ¼å¼åŒ–ä¸€ä¸ªæ—¥æœŸæˆ–è€…æ—¶é—´å¯¹è±¡ã€‚ç”¨æ¥æ›¿æ¢è€ç‰ˆjava.util.DateFormatã€‚<br>å¦‚æœä¼ é€’çš„å­—ç¬¦ä¸²å‚æ•°æ— æ³•è¢«è§£æä¸ºåˆæ³•çš„LocalDateæˆ–LocalTimeå¯¹è±¡ï¼Œè¿™ä¸¤ä¸ªparseæ–¹æ³•éƒ½ä¼šæŠ›å‡ºä¸€ä¸ªç»§æ‰¿è‡ªRuntimeExceptionçš„DateTimeParseExceptionå¼‚å¸¸ã€‚</p>
</blockquote>
<h1 id="2-åˆå¹¶æ—¥æœŸå’Œæ—¶é—´"><a href="#2-åˆå¹¶æ—¥æœŸå’Œæ—¶é—´" class="headerlink" title="2. åˆå¹¶æ—¥æœŸå’Œæ—¶é—´"></a>2. åˆå¹¶æ—¥æœŸå’Œæ—¶é—´</h1><p>å¤åˆç±»LocalDateTimeï¼Œæ˜¯LocalDateå’ŒLocalTimeçš„åˆä½“ã€‚å®ƒåŒæ—¶è¡¨ç¤ºäº†æ—¥æœŸå’Œæ—¶é—´ï¼Œä¸å¸¦æœ‰æ—¶åŒºä¿¡æ¯ã€‚å¯ä»¥ç›´æ¥åˆ›å»ºï¼Œä¹Ÿå¯ä»¥é€šè¿‡åˆå¹¶æ—¥æœŸå’Œæ—¶é—´å¯¹è±¡æ„é€ ã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">LocalTime time = LocalTime.of(<span class="number">21</span>, <span class="number">31</span>, <span class="number">50</span>);</span><br><span class="line">LocalDate date = LocalDate.of(<span class="number">2019</span>, <span class="number">03</span>, <span class="number">27</span>);</span><br><span class="line"></span><br><span class="line">LocalDateTime dt1 = LocalDateTime.of(<span class="number">2017</span>, Month.NOVEMBER, <span class="number">07</span>, <span class="number">22</span>, <span class="number">31</span>, <span class="number">51</span>);</span><br><span class="line">LocalDateTime dt2 = LocalDateTime.of(date, time);</span><br><span class="line">LocalDateTime dt3 = date.atTime(<span class="number">22</span>, <span class="number">21</span>, <span class="number">14</span>);</span><br><span class="line">LocalDateTime dt4 = date.atTime(time);</span><br><span class="line">LocalDateTime dt5 = time.atDate(date);</span><br></pre></td></tr></table></figure>

<p>åˆ›å»ºLocalDateTimeå¯¹è±¡</p>
<ul>
<li>ç›´æ¥åˆ›å»º</li>
<li>é€šè¿‡atTimeæ–¹æ³•å‘LocalDateä¼ é€’ä¸€ä¸ªæ—¶é—´å¯¹è±¡</li>
<li>é€šè¿‡atDateæ–¹æ³•å‘LocalTimeä¼ é€’ä¸€ä¸ªæ—¶é—´å¯¹è±¡</li>
</ul>
<p>ä¹Ÿå¯ä»¥ä½¿ç”¨toLocalDateæˆ–è€…toLocalTimeæ–¹æ³•ï¼Œä»LocalDateTimeä¸­æå–LocalDateæˆ–è€…LocalTimeç»„ä»¶ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">LocalDate date1 = dt1.toLocalDate();</span><br><span class="line">LocalTime time1 = dt1.toLocalTime();</span><br></pre></td></tr></table></figure>

<h1 id="3-æœºå™¨çš„æ—¥æœŸå’Œæ—¶é—´æ ¼å¼"><a href="#3-æœºå™¨çš„æ—¥æœŸå’Œæ—¶é—´æ ¼å¼" class="headerlink" title="3. æœºå™¨çš„æ—¥æœŸå’Œæ—¶é—´æ ¼å¼"></a>3. æœºå™¨çš„æ—¥æœŸå’Œæ—¶é—´æ ¼å¼</h1><p>ä»è®¡ç®—æœºçš„è§’åº¦æ¥çœ‹ï¼Œâ€2019å¹´03æœˆ27æ—¥11:20:03â€è¿™æ ·çš„æ–¹å¼æ˜¯ä¸å®¹æ˜“ç†è§£çš„,è®¡ç®—æœºæ›´åŠ å®¹æ˜“ç†è§£å»ºæ¨¡æ—¶é—´æœ€è‡ªç„¶çš„æ ¼å¼æ˜¯è¡¨ç¤ºä¸€ä¸ªæŒç»­æ—¶é—´æ®µä¸ŠæŸä¸ªç‚¹çš„å•ä¸€å¤§æ•´å‹æ•°ã€‚æ–°çš„java.time.Instantç±»å¯¹æ—¶é—´å»ºæ¨¡çš„æ–¹å¼ï¼ŒåŸºæœ¬ä¸Šå®ƒæ˜¯ä»¥Unixå…ƒå¹´æ—¶é—´ï¼ˆä¼ ç»Ÿçš„è®¾å®šä¸ºUTCæ—¶åŒº1970å¹´1æœˆ1æ—¥åˆå¤œæ—¶åˆ†ï¼‰å¼€å§‹æ‰€ç»å†çš„ç§’æ•°è¿›è¡Œè®¡ç®—ã€‚</p>
<h2 id="3-1-åˆ›å»ºInstant"><a href="#3-1-åˆ›å»ºInstant" class="headerlink" title="3.1 åˆ›å»ºInstant"></a>3.1 åˆ›å»ºInstant</h2><ul>
<li>é™æ€å·¥å‚æ–¹æ³•ofEpochSecondä¼ é€’ä¸€ä¸ªä»£è¡¨ç§’æ•°çš„å€¼åˆ›å»ºä¸€ä¸ªè¯¥ç±»çš„å®ä¾‹ã€‚</li>
<li>é™æ€å·¥å‚æ–¹æ³•ofEpochSecondè¿˜æœ‰ä¸€ä¸ªå¢å¼ºçš„é‡è½½ç‰ˆæœ¬ï¼Œå®ƒæ¥æ”¶ç¬¬äºŒä¸ªä»¥çº³ç§’ä¸ºå•ä½çš„å‚æ•°å€¼ï¼Œå¯¹ä¼ å…¥ä½œä¸ºç§’æ•°çš„å‚æ•°è¿›è¡Œè°ƒæ•´ã€‚é‡è½½çš„ç‰ˆæœ¬ä¼šè°ƒæ•´çº³ç§’å‚æ•°ï¼Œç¡®ä¿ä¿å­˜çš„çº³ç§’åˆ†ç‰‡åœ¨0åˆ°999 999999ä¹‹é—´ã€‚</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">Instant.ofEpochSecond(<span class="number">3</span>);</span><br><span class="line">Instant.ofEpochSecond(<span class="number">3</span>, <span class="number">0</span>);</span><br><span class="line"><span class="comment">// 2 ç§’ä¹‹åå†åŠ ä¸Š100ä¸‡çº³ç§’ï¼ˆ1ç§’ï¼‰</span></span><br><span class="line">Instant.ofEpochSecond(<span class="number">2</span>, <span class="number">1_000_000_000</span>);</span><br><span class="line"><span class="comment">// 4ç§’ä¹‹å‰çš„100ä¸‡çº³ç§’ï¼ˆ1ç§’ï¼‰</span></span><br><span class="line">Instant.ofEpochSecond(<span class="number">4</span>, -<span class="number">1_000_000_000</span>);</span><br></pre></td></tr></table></figure>

<h2 id="3-2-å·¥å‚æ–¹æ³•now"><a href="#3-2-å·¥å‚æ–¹æ³•now" class="headerlink" title="3.2 å·¥å‚æ–¹æ³•now"></a>3.2 å·¥å‚æ–¹æ³•now</h2><p>Instantç±»ä¹Ÿæ”¯æŒé™æ€å·¥å‚æ–¹æ³•nowï¼Œå®ƒèƒ½å¤Ÿè·å–å½“å‰æ—¶åˆ»çš„æ—¶é—´æˆ³ã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Instant now = Instant.now();</span><br><span class="line">System.out.println(now);</span><br><span class="line"></span><br><span class="line"><span class="number">2019</span>-<span class="number">03</span>-<span class="number">27</span>T03:<span class="number">26</span>:<span class="number">39.451</span>Z</span><br></pre></td></tr></table></figure>

<p>Instantçš„è®¾è®¡åˆè¡·æ˜¯ä¸ºäº†ä¾¿äºæœºå™¨ä½¿ç”¨,å®ƒåŒ…å«çš„æ˜¯ç”±ç§’åŠçº³ç§’æ‰€æ„æˆçš„æ•°å­—ã€‚å› æ­¤Instantæ— æ³•å¤„ç†é‚£äº›æˆ‘ä»¬éå¸¸å®¹æ˜“ç†è§£çš„æ—¶é—´å•ä½ã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> day = Instant.now().get(ChronoField.DAY_OF_MONTH);</span><br><span class="line">å®ƒä¼šæŠ›å‡ºä¸‹é¢è¿™æ ·çš„å¼‚å¸¸ï¼š</span><br><span class="line"></span><br><span class="line">Exception in thread <span class="string">"main"</span> java.time.temporal.UnsupportedTemporalTypeException: Unsupported field: DayOfMonth</span><br><span class="line">ä½†æ˜¯ä½ å¯ä»¥é€šè¿‡Durationå’ŒPeriodç±»ä½¿ç”¨Instantï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬ä¼šå¯¹è¿™éƒ¨åˆ†å†…å®¹è¿›è¡Œä»‹ç»ã€‚</span><br></pre></td></tr></table></figure>

<h2 id="4-Durationå’ŒPeriod"><a href="#4-Durationå’ŒPeriod" class="headerlink" title="4. Durationå’ŒPeriod"></a>4. Durationå’ŒPeriod</h2><h2 id="4-1-Duration"><a href="#4-1-Duration" class="headerlink" title="4.1 Duration"></a>4.1 Duration</h2><p>æ‰€æœ‰ç±»éƒ½å®ç°äº†Temporalæ¥å£ï¼Œè¯¥æ¥å£å®šä¹‰å¦‚ä½•è¯»å–å’Œæ“çºµä¸ºæ—¶é—´å»ºæ¨¡çš„å¯¹è±¡çš„å€¼ã€‚å¦‚æœéœ€è¦åˆ›å»ºä¸¤ä¸ªTemporalå¯¹è±¡ä¹‹é—´çš„duration,å°±éœ€è¦Durationç±»çš„é™æ€å·¥å‚æ–¹æ³•betweenã€‚<br>å¯ä»¥åˆ›å»ºä¸¤ä¸ªLocalTimeså¯¹è±¡ã€ä¸¤ä¸ªLocalDateTimeså¯¹è±¡ï¼Œæˆ–è€…ä¸¤ä¸ªInstantå¯¹è±¡ä¹‹é—´çš„durationï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">LocalTime time1 = LocalTime.of(<span class="number">21</span>, <span class="number">50</span>, <span class="number">10</span>);</span><br><span class="line">LocalTime time2 = LocalTime.of(<span class="number">22</span>, <span class="number">50</span>, <span class="number">10</span>);</span><br><span class="line">LocalDateTime dateTime1 = LocalDateTime.of(<span class="number">2019</span>, <span class="number">03</span>, <span class="number">27</span>, <span class="number">21</span>, <span class="number">20</span>, <span class="number">40</span>);</span><br><span class="line">LocalDateTime dateTime2 = LocalDateTime.of(<span class="number">2019</span>, <span class="number">03</span>, <span class="number">27</span>, <span class="number">21</span>, <span class="number">20</span>, <span class="number">40</span>);</span><br><span class="line">Instant instant1 = Instant.ofEpochSecond(<span class="number">1000</span> * <span class="number">60</span> * <span class="number">2</span>);</span><br><span class="line">Instant instant2 = Instant.ofEpochSecond(<span class="number">1000</span> * <span class="number">60</span> * <span class="number">3</span>);</span><br><span class="line"></span><br><span class="line">Duration d1 = Duration.between(time1, time2);</span><br><span class="line">Duration d2 = Duration.between(dateTime1, dateTime2);</span><br><span class="line">Duration d3 = Duration.between(instant1, instant2);</span><br><span class="line"><span class="comment">// PT1H ç›¸å·®1å°æ—¶</span></span><br><span class="line">System.out.println(<span class="string">"d1:"</span> + d1);</span><br><span class="line"><span class="comment">// PT2H ç›¸å·®2å°æ—¶</span></span><br><span class="line">System.out.println(<span class="string">"d2:"</span> + d2);</span><br><span class="line"><span class="comment">// PT16H40M ç›¸å·®16å°æ—¶40åˆ†é’Ÿ</span></span><br><span class="line">System.out.println(<span class="string">"d3:"</span> + d3);</span><br></pre></td></tr></table></figure>

<blockquote>
<p>LocalDateTimeæ˜¯ä¸ºäº†ä¾¿äºäººé˜…è¯»ä½¿ç”¨ï¼ŒInstantæ˜¯ä¸ºäº†ä¾¿äºæœºå™¨å¤„ç†ï¼Œæ‰€ä»¥ä¸èƒ½å°†äºŒè€…æ··ç”¨ã€‚å¦‚æœåœ¨è¿™ä¸¤ç±»å¯¹è±¡ä¹‹é—´åˆ›å»ºdurationï¼Œä¼šè§¦å‘ä¸€ä¸ªDateTimeExceptionå¼‚å¸¸ã€‚<br>æ­¤å¤–ï¼Œç”±äºDurationç±»ä¸»è¦ç”¨äºä»¥ç§’å’Œçº³ç§’è¡¡é‡æ—¶é—´çš„é•¿çŸ­ï¼Œä½ ä¸èƒ½ä»…å‘betweenæ–¹æ³•ä¼ é€’ä¸€ä¸ªLocalDateå¯¹è±¡åšå‚æ•°ã€‚</p>
</blockquote>
<h2 id="4-2-Period"><a href="#4-2-Period" class="headerlink" title="4.2 Period"></a>4.2 Period</h2><p>ä½¿ç”¨Periodç±»ä»¥å¹´ã€æœˆæˆ–è€…æ—¥çš„æ–¹å¼å¯¹å¤šä¸ªæ—¶é—´å•ä½å»ºæ¨¡ã€‚ä½¿ç”¨è¯¥ç±»çš„å·¥å‚æ–¹æ³•betweenï¼Œå¯ä»¥ä½¿ç”¨å¾—åˆ°ä¸¤ä¸ªLocalDateä¹‹é—´çš„æ—¶é•¿ã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Period period = Period.between(LocalDate.of(<span class="number">2019</span>, <span class="number">03</span>, <span class="number">7</span>), LocalDate.of(<span class="number">2019</span>, <span class="number">03</span>, <span class="number">17</span>));</span><br><span class="line"><span class="comment">// ç›¸å·®10å¤©</span></span><br><span class="line">System.out.println(<span class="string">"Period between:"</span> + period);</span><br></pre></td></tr></table></figure>

<p>Durationå’ŒPeriodç±»éƒ½æä¾›äº†å¾ˆå¤šéå¸¸æ–¹ä¾¿çš„å·¥å‚ç±»ï¼Œç›´æ¥åˆ›å»ºå¯¹åº”çš„å®ä¾‹ã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">Duration threeMinutes = Duration.ofMinutes(<span class="number">3</span>);</span><br><span class="line">Duration fourMinutes = Duration.of(<span class="number">4</span>, ChronoUnit.MINUTES);</span><br><span class="line"></span><br><span class="line">Period tenDay = Period.ofDays(<span class="number">10</span>);</span><br><span class="line">Period threeWeeks = Period.ofWeeks(<span class="number">3</span>);</span><br><span class="line">Period twoYearsSixMonthsOneDay = Period.of(<span class="number">2</span>, <span class="number">6</span>, <span class="number">1</span>);</span><br><span class="line">Durationç±»å’ŒPeriodç±»å…±äº«äº†å¾ˆå¤šç›¸ä¼¼çš„æ–¹æ³•ï¼Œæœ‰å…´è¶£çš„å¯ä»¥å‚è€ƒå®˜ç½‘çš„æ–‡æ¡£ã€‚</span><br></pre></td></tr></table></figure>

<blockquote>
<p>æˆªè‡³ç›®å‰ï¼Œæˆ‘ä»¬ä»‹ç»çš„è¿™äº›æ—¥æœŸ-æ—¶é—´å¯¹è±¡éƒ½æ˜¯ä¸å¯ä¿®æ”¹çš„ï¼Œè¿™æ˜¯ä¸ºäº†æ›´å¥½åœ°æ”¯æŒå‡½æ•°å¼ç¼–ç¨‹ï¼Œç¡®ä¿çº¿ç¨‹å®‰å…¨ï¼Œä¿æŒé¢†åŸŸæ¨¡å¼ä¸€è‡´æ€§è€Œåšå‡ºçš„é‡å¤§è®¾è®¡å†³å®šã€‚<br>å½“ç„¶ï¼Œæ–°çš„æ—¥æœŸå’Œæ—¶é—´APIä¹Ÿæä¾›äº†ä¸€äº›ä¾¿åˆ©çš„æ–¹æ³•æ¥åˆ›å»ºè¿™äº›å¯¹è±¡çš„å¯å˜ç‰ˆæœ¬ã€‚æ¯”å¦‚ï¼Œä½ å¯èƒ½å¸Œæœ›åœ¨å·²æœ‰çš„LocalDateå®ä¾‹ä¸Šå¢åŠ 3å¤©ã€‚é™¤æ­¤ä¹‹å¤–ï¼Œæˆ‘ä»¬è¿˜ä¼šä»‹ç»å¦‚ä½•ä¾æ®æŒ‡å®šçš„æ¨¡å¼ï¼Œ<br>æ¯”å¦‚dd/MM/yyyyï¼Œåˆ›å»ºæ—¥æœŸ-æ—¶é—´æ ¼å¼å™¨ï¼Œä»¥åŠå¦‚ä½•ä½¿ç”¨è¿™ç§æ ¼å¼å™¨è§£æå’Œè¾“å‡ºæ—¥æœŸã€‚</p>
</blockquote>
<h1 id="5-æ“çºµã€è§£æå’Œæ ¼å¼åŒ–æ—¥æœŸ"><a href="#5-æ“çºµã€è§£æå’Œæ ¼å¼åŒ–æ—¥æœŸ" class="headerlink" title="5. æ“çºµã€è§£æå’Œæ ¼å¼åŒ–æ—¥æœŸ"></a>5. æ“çºµã€è§£æå’Œæ ¼å¼åŒ–æ—¥æœŸ</h1><p>å¦‚æœå·²ç»æœ‰ä¸€ä¸ªLocalDateå¯¹è±¡ï¼Œæƒ³è¦åˆ›å»ºå®ƒçš„ä¸€ä¸ªä¿®æ”¹ç‰ˆï¼Œæœ€ç›´æ¥ä¹Ÿæœ€ç®€å•çš„æ–¹æ³•æ˜¯ä½¿ç”¨withAttributeæ–¹æ³•ã€‚withAttributeæ–¹æ³•ä¼šåˆ›å»ºå¯¹è±¡çš„ä¸€ä¸ªå‰¯æœ¬ï¼Œå¹¶æŒ‰ç…§éœ€è¦ä¿®æ”¹å®ƒçš„å±æ€§ã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// è¿™æ®µä»£ç ä¸­æ‰€æœ‰çš„æ–¹æ³•éƒ½è¿”å›ä¸€ä¸ªä¿®æ”¹äº†å±æ€§çš„å¯¹è±¡ã€‚å®ƒä»¬éƒ½ä¸ä¼šä¿®æ”¹åŸæ¥çš„å¯¹è±¡ï¼</span></span><br><span class="line">LocalDate date1 = LocalDate.of(<span class="number">2017</span>, <span class="number">12</span>, <span class="number">15</span>);</span><br><span class="line">LocalDate date2 = date1.withYear(<span class="number">2019</span>);</span><br><span class="line">LocalDate date3 = date2.withDayOfMonth(<span class="number">25</span>);</span><br><span class="line">LocalDate date4 = date3.with(ChronoField.MONTH_OF_YEAR, <span class="number">9</span>);</span><br></pre></td></tr></table></figure>

<p>å®ƒä»¬éƒ½å£°æ˜äºTemporalæ¥å£ï¼Œæ‰€æœ‰çš„æ—¥æœŸå’Œæ—¶é—´APIç±»éƒ½å®ç°è¿™ä¸¤ä¸ªæ–¹æ³•ï¼Œå®ƒä»¬å®šä¹‰äº†å•ç‚¹çš„æ—¶é—´ï¼Œæ¯”å¦‚LocalDateã€LocalTimeã€LocalDateTimeä»¥åŠInstantã€‚æ›´ç¡®åˆ‡åœ°è¯´ï¼Œä½¿ç”¨getå’Œwithæ–¹æ³•ï¼Œæˆ‘ä»¬å¯ä»¥å°†Temporalå¯¹è±¡å€¼çš„è¯»å–å’Œä¿®æ”¹åŒºåˆ†å¼€ã€‚å¦‚æœTemporalå¯¹è±¡ä¸æ”¯æŒè¯·æ±‚è®¿é—®çš„å­—æ®µï¼Œå®ƒä¼šæŠ›å‡ºä¸€ä¸ªUnsupportedTemporalTypeExceptionå¼‚å¸¸ï¼Œæ¯”å¦‚è¯•å›¾è®¿é—®Instantå¯¹è±¡çš„ChronoField.MONTH_OF_YEARå­—æ®µï¼Œæˆ–è€…LocalDateå¯¹è±¡çš„ChronoField.NANO_OF_SECONDå­—æ®µæ—¶éƒ½ä¼šæŠ›å‡ºè¿™æ ·çš„å¼‚å¸¸ã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ä»¥å£°æ˜çš„æ–¹å¼æ“çºµLocalDateå¯¹è±¡,å¯ä»¥åŠ ä¸Šæˆ–è€…å‡å»ä¸€æ®µæ—¶é—´</span></span><br><span class="line">LocalDate date1 = LocalDate.of(<span class="number">2014</span>, <span class="number">10</span>, <span class="number">19</span>);</span><br><span class="line">LocalDate date2 = date1.plusWeeks(<span class="number">1</span>);</span><br><span class="line">LocalDate date3 = date2.minusYears(<span class="number">3</span>);</span><br><span class="line">LocalDate date4 = date3.plus(<span class="number">6</span>, ChronoUnit.MONTHS);</span><br></pre></td></tr></table></figure>

<p>ä¸æˆ‘ä»¬åˆšæ‰ä»‹ç»çš„getå’Œwithæ–¹æ³•ç±»ä¼¼æœ€åä¸€è¡Œä½¿ç”¨çš„plusæ–¹æ³•ä¹Ÿæ˜¯é€šç”¨æ–¹æ³•ï¼Œå®ƒå’Œminusæ–¹æ³•éƒ½å£°æ˜äºTemporalæ¥å£ä¸­ã€‚é€šè¿‡è¿™äº›æ–¹æ³•ï¼Œå¯¹TemporalUnitå¯¹è±¡åŠ ä¸Šæˆ–è€…å‡å»ä¸€ä¸ªæ•°å­—ï¼Œæˆ‘ä»¬èƒ½éå¸¸æ–¹ä¾¿åœ°å°†Temporalå¯¹è±¡å‰æº¯æˆ–è€…å›æ»šè‡³æŸä¸ªæ—¶é—´æ®µï¼Œé€šè¿‡ChronoUnitæšä¸¾æˆ‘ä»¬å¯ä»¥éå¸¸æ–¹ä¾¿åœ°å®ç°TemporalUnitæ¥å£ã€‚</p>
<h1 id="6-ä½¿ç”¨TemporalAdjuster"><a href="#6-ä½¿ç”¨TemporalAdjuster" class="headerlink" title="6. ä½¿ç”¨TemporalAdjuster"></a>6. ä½¿ç”¨TemporalAdjuster</h1><p>æœ‰æ—¶éœ€è¦è¿›è¡Œä¸€äº›æ›´åŠ å¤æ‚çš„æ“ä½œï¼Œæ¯”å¦‚ï¼Œå°†æ—¥æœŸè°ƒæ•´åˆ°ä¸‹ä¸ªå‘¨æ—¥ã€ä¸‹ä¸ªå·¥ä½œæ—¥ï¼Œæˆ–è€…æ˜¯æœ¬æœˆçš„æœ€åä¸€å¤©ã€‚å¯ä»¥ä½¿ç”¨é‡è½½ç‰ˆæœ¬çš„withæ–¹æ³•ï¼Œå‘å…¶ä¼ é€’ä¸€ä¸ªæä¾›äº†æ›´å¤šå®šåˆ¶åŒ–é€‰æ‹©çš„TemporalAdjusterå¯¹è±¡ï¼Œæ›´åŠ çµæ´»åœ°å¤„ç†æ—¥æœŸã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å¯¹äºæœ€å¸¸è§çš„ç”¨ä¾‹ï¼Œæ—¥æœŸå’Œæ—¶é—´APIå·²ç»æä¾›äº†å¤§é‡é¢„å®šä¹‰çš„TemporalAdjusterã€‚å¯ä»¥é€šè¿‡TemporalAdjusterç±»çš„é™æ€å·¥å‚æ–¹æ³•è®¿é—®ã€‚</span></span><br><span class="line">LocalDate date1 = LocalDate.of(<span class="number">2013</span>, <span class="number">12</span>, <span class="number">11</span>);</span><br><span class="line">LocalDate date2 = date1.with(TemporalAdjusters.nextOrSame(DayOfWeek.MONDAY));</span><br><span class="line">LocalDate date3 = date2.with(TemporalAdjusters.lastDayOfMonth());</span><br></pre></td></tr></table></figure>

<p>ä½¿ç”¨TemporalAdjusterå¯ä»¥è¿›è¡Œæ›´åŠ å¤æ‚çš„æ—¥æœŸæ“ä½œï¼Œæ–¹æ³•çš„åç§°å¾ˆç›´è§‚ã€‚å¦‚æœæ²¡æœ‰æ‰¾åˆ°ç¬¦åˆé¢„æœŸçš„é¢„å®šä¹‰çš„TemporalAdjusterï¼Œå¯ä»¥åˆ›å»ºè‡ªå®šä¹‰çš„TemporalAdjusterã€‚TemporalAdjusteræ¥å£åªå£°æ˜ä¸€ä¸ªæ–¹æ³•ï¼ˆå³å‡½æ•°å¼æ¥å£ï¼‰ã€‚å®ç°è¯¥æ¥å£éœ€è¦å®šä¹‰å¦‚ä½•å°†ä¸€ä¸ªTemporalå¯¹è±¡è½¬æ¢ä¸ºå¦ä¸€ä¸ªTemporalå¯¹è±¡,å¯ä»¥æŠŠå®ƒçœ‹æˆä¸€ä¸ªUnaryOperator<Temporal>ã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@FunctionalInterface</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">TemporalAdjuster</span> </span>&#123;</span><br><span class="line">    <span class="function">Temporal <span class="title">adjustInto</span><span class="params">(Temporal temporal)</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<h1 id="7-æ‰“å°è¾“å‡ºåŠè§£ææ—¥æœŸ-æ—¶é—´å¯¹è±¡"><a href="#7-æ‰“å°è¾“å‡ºåŠè§£ææ—¥æœŸ-æ—¶é—´å¯¹è±¡" class="headerlink" title="7. æ‰“å°è¾“å‡ºåŠè§£ææ—¥æœŸ-æ—¶é—´å¯¹è±¡"></a>7. æ‰“å°è¾“å‡ºåŠè§£ææ—¥æœŸ-æ—¶é—´å¯¹è±¡</h1><p>æ–°çš„java.time.formatåŒ…å°±æ˜¯ç‰¹åˆ«ä¸ºæ ¼å¼åŒ–ä»¥åŠè§£ææ—¥æœŸ-æ—¶é—´å¯¹è±¡è€Œè®¾è®¡çš„ã€‚å…¶ä¸­æœ€é‡è¦çš„ç±»æ˜¯DateTimeFormatterã€‚åˆ›å»ºæ ¼å¼å™¨æœ€ç®€å•çš„æ–¹æ³•æ˜¯é€šè¿‡å®ƒçš„é™æ€å·¥å‚æ–¹æ³•ä»¥åŠå¸¸é‡ã€‚æ‰€æœ‰çš„DateTimeFormatterå®ä¾‹éƒ½èƒ½ç”¨äºä»¥ä¸€å®šçš„æ ¼å¼åˆ›å»ºä»£è¡¨ç‰¹å®šæ—¥æœŸæˆ–æ—¶é—´çš„å­—ç¬¦ä¸²ã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">LocalDate date = LocalDate.of(<span class="number">2013</span>, <span class="number">10</span>, <span class="number">11</span>);</span><br><span class="line">String s1 = date.format(DateTimeFormatter.BASIC_ISO_DATE);</span><br><span class="line">String s2 = date.format(DateTimeFormatter.ISO_LOCAL_DATE);</span><br><span class="line"></span><br><span class="line"><span class="number">20131011</span></span><br><span class="line"><span class="number">2013</span>-<span class="number">10</span>-<span class="number">11</span></span><br></pre></td></tr></table></figure>

<p>é€šè¿‡è§£æä»£è¡¨æ—¥æœŸæˆ–æ—¶é—´çš„å­—ç¬¦ä¸²é‡æ–°åˆ›å»ºè¯¥æ—¥æœŸå¯¹è±¡ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨å·¥å‚æ–¹æ³•parseé‡æ–°åˆ›å»ºã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">LocalDate date2 = LocalDate.parse(<span class="string">"20141007"</span>, DateTimeFormatter.BASIC_ISO_DATE);</span><br><span class="line">LocalDate date3 = LocalDate.parse(<span class="string">"2014-10-07"</span>, DateTimeFormatter.ISO_LOCAL_DATE);</span><br></pre></td></tr></table></figure>

<p>DateTimeFormatterå®ä¾‹æ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼Œè€çš„java.util.DateFormatçº¿ç¨‹ä¸å®‰å…¨ã€‚å•ä¾‹æ¨¡å¼åˆ›å»ºæ ¼å¼å™¨å®ä¾‹ï¼Œåœ¨å¤šä¸ªçº¿ç¨‹é—´å…±äº«å®ä¾‹æ˜¯æ²¡æœ‰é—®é¢˜çš„ã€‚ä¹Ÿå¯ä»¥é€šè¿‡ofPatterné™æ€å·¥å‚æ–¹æ³•ï¼ŒæŒ‰ç…§æŸä¸ªç‰¹å®šçš„æ¨¡å¼åˆ›å»ºæ ¼å¼å™¨ã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">DateTimeFormatter formatter = DateTimeFormatter.ofPattern(<span class="string">"dd/MM/yyyy"</span>);</span><br><span class="line">String formattedDateStr = date.format(formatter);</span><br><span class="line">LocalDate date1 = LocalDate.parse(formattedDateStr, formatter);</span><br></pre></td></tr></table></figure>

<p>ofPatternæ–¹æ³•ä¹Ÿæä¾›äº†ä¸€ä¸ªé‡è½½çš„ç‰ˆæœ¬ï¼Œå¯ä»¥ä¼ å…¥Localeåˆ›å»ºæ ¼å¼å™¨ã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">DateTimeFormatter italianFormatter = DateTimeFormatter.ofPattern(<span class="string">"d. MMMM yyyy"</span>, Locale.ITALIAN);</span><br><span class="line">LocalDate date = LocalDate.of(<span class="number">2015</span>, <span class="number">11</span>, <span class="number">14</span>);</span><br><span class="line">String formattedDate = date.format(italianFormatter);</span><br><span class="line">LocalDate date1 = LocalDate.parse(formattedDate, italianFormatter);</span><br></pre></td></tr></table></figure>

<p>DateTimeFormatterBuilderç±»è¿˜æä¾›äº†æ›´å¤æ‚çš„æ ¼å¼å™¨,ä»¥æä¾›æ›´åŠ ç»†ç²’åº¦çš„æ§åˆ¶ã€‚åŒæ—¶ä¹Ÿæä¾›éå¸¸å¼ºå¤§çš„è§£æåŠŸèƒ½ï¼Œæ¯”å¦‚åŒºåˆ†å¤§å°å†™çš„è§£æã€æŸ”æ€§è§£æã€å¡«å……ï¼Œä»¥åŠåœ¨æ ¼å¼å™¨ä¸­æŒ‡å®šå¯é€‰èŠ‚ç­‰ç­‰ã€‚</p>
<p>é€šè¿‡DateTimeFormatterBuilderè‡ªå®šä¹‰æ ¼å¼å™¨</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">DateTimeFormatter italianFormatter = <span class="keyword">new</span> DateTimeFormatterBuilder()</span><br><span class="line">                .appendText(ChronoField.DAY_OF_MONTH)</span><br><span class="line">                .appendLiteral(<span class="string">". "</span>)</span><br><span class="line">                .appendText(ChronoField.MONTH_OF_YEAR)</span><br><span class="line">                .appendLiteral(<span class="string">" "</span>)</span><br><span class="line">                .appendText(ChronoField.YEAR)</span><br><span class="line">                .parseCaseInsensitive()</span><br><span class="line">                .toFormatter(Locale.ITALIAN);</span><br><span class="line">LocalDate now = LocalDate.now();</span><br><span class="line">String s = now.format(italianFormatter);</span><br></pre></td></tr></table></figure>

<h1 id="8-å¤„ç†ä¸åŒçš„æ—¶åŒºå’Œå†æ³•"><a href="#8-å¤„ç†ä¸åŒçš„æ—¶åŒºå’Œå†æ³•" class="headerlink" title="8. å¤„ç†ä¸åŒçš„æ—¶åŒºå’Œå†æ³•"></a>8. å¤„ç†ä¸åŒçš„æ—¶åŒºå’Œå†æ³•</h1><p>æ–°ç‰ˆæ—¥æœŸå’Œæ—¶é—´APIæ–°å¢åŠ çš„é‡è¦åŠŸèƒ½æ˜¯æ—¶åŒºçš„å¤„ç†ã€‚æ–°çš„java.time.ZoneIdç±»æ›¿ä»£è€ç‰ˆjava.util.TimeZoneã€‚è·Ÿå…¶ä»–æ—¥æœŸå’Œæ—¶é—´ç±»ä¸€æ ·ï¼ŒZoneIdç±»ä¹Ÿæ˜¯æ— æ³•ä¿®æ”¹çš„ã€‚æ˜¯æŒ‰ç…§ä¸€å®šçš„è§„åˆ™å°†åŒºåŸŸåˆ’åˆ†æˆçš„æ ‡å‡†æ—¶é—´ç›¸åŒçš„åŒºé—´ã€‚åœ¨ZoneRulesè¿™ä¸ªç±»ä¸­åŒ…å«äº†40ä¸ªæ—¶åŒºå®ä¾‹,å¯ä»¥é€šè¿‡è°ƒç”¨ZoneIdçš„getRules()å¾—åˆ°æŒ‡å®šæ—¶åŒºçš„è§„åˆ™,æ¯ä¸ªç‰¹å®šçš„ZoneIdå¯¹è±¡éƒ½ç”±ä¸€ä¸ªåœ°åŒºIDæ ‡è¯†ã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ZoneId shanghaiZone = ZoneId.of(<span class="string">"Asia/Shanghai"</span>);</span><br></pre></td></tr></table></figure>

<p>Java 8çš„æ–°æ–¹æ³•toZoneIdå°†ä¸€ä¸ªè€çš„æ—¶åŒºå¯¹è±¡è½¬æ¢ä¸ºZoneIdã€‚åœ°åŒºIDéƒ½ä¸ºâ€œ{åŒºåŸŸ}/{åŸå¸‚}â€çš„æ ¼å¼ï¼Œåœ°åŒºé›†åˆçš„è®¾å®šéƒ½ç”±è‹±ç‰¹ç½‘ç¼–å·åˆ†é…æœºæ„ï¼ˆIANAï¼‰çš„æ—¶åŒºæ•°æ®åº“æä¾›ã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ZoneId zoneId = TimeZone.getDefault().toZoneId();</span><br></pre></td></tr></table></figure>

<p>ZoneIdå¯¹è±¡å¯ä»¥ä¸LocalDateã€LocalDateTimeæˆ–è€…æ˜¯Instantå¯¹è±¡æ•´åˆæ„é€ ä¸ºæˆZonedDateTimeå®ä¾‹ï¼Œå®ƒä»£è¡¨äº†ç›¸å¯¹äºæŒ‡å®šæ—¶åŒºçš„æ—¶é—´ç‚¹ã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">LocalDate date = LocalDate.of(<span class="number">2019</span>, <span class="number">03</span>, <span class="number">27</span>);</span><br><span class="line">ZonedDateTime zdt1 = date.atStartOfDay(shanghaiZone);</span><br><span class="line"></span><br><span class="line">LocalDateTime dateTime = LocalDateTime.of(<span class="number">2015</span>, <span class="number">12</span>, <span class="number">21</span>, <span class="number">11</span>, <span class="number">11</span>, <span class="number">11</span>);</span><br><span class="line">ZonedDateTime zdt2 = dateTime.atZone(shanghaiZone);</span><br><span class="line"></span><br><span class="line">Instant instant = Instant.now();</span><br><span class="line">ZonedDateTime zdt3 = instant.atZone(shanghaiZone);</span><br><span class="line">é€šè¿‡ZoneIdï¼Œä½ è¿˜å¯ä»¥å°†LocalDateTimeè½¬æ¢ä¸ºInstantï¼š</span><br><span class="line"></span><br><span class="line">LocalDateTime dateTime = LocalDateTime.of(<span class="number">2016</span>, <span class="number">10</span>, <span class="number">14</span>, <span class="number">15</span>, <span class="number">35</span>);</span><br><span class="line">Instant instantFromDateTime = dateTime.toInstant(shanghaiZone);</span><br><span class="line">ä½ ä¹Ÿå¯ä»¥é€šè¿‡åå‘çš„æ–¹å¼å¾—åˆ°LocalDateTimeå¯¹è±¡ï¼š</span><br><span class="line"></span><br><span class="line">Instant instant = Instant.now();</span><br><span class="line">LocalDateTime timeFromInstant = LocalDateTime.ofInstant(instant, shanghaiZone);</span><br></pre></td></tr></table></figure>

<p>å¦ä¸€ç§æ¯”è¾ƒé€šç”¨çš„è¡¨è¾¾æ—¶åŒºçš„æ–¹å¼æ˜¯åˆ©ç”¨å½“å‰æ—¶åŒºå’ŒUTC/æ ¼æ—å°¼æ²»çš„å›ºå®šåå·®ã€‚ä½¿ç”¨ZoneIdçš„ä¸€ä¸ªå­ç±»ZoneOffsetï¼Œè¡¨ç¤ºçš„æ˜¯å½“å‰æ—¶é—´å’Œä¼¦æ•¦æ ¼æ—å°¼æ²»å­åˆçº¿æ—¶é—´çš„å·®å¼‚ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ZoneOffset newYorkOffset = ZoneOffset.of(<span class="string">"-05:00"</span>);</span><br></pre></td></tr></table></figure>

<h1 id="9-æ€»ç»“"><a href="#9-æ€»ç»“" class="headerlink" title="9. æ€»ç»“"></a>9. æ€»ç»“</h1><ul>
<li>Java 8ä¹‹å‰è€ç‰ˆçš„java.util.Dateç±»ä»¥åŠå…¶ä»–ç”¨äºå»ºæ¨¡æ—¥æœŸæ—¶é—´çš„ç±»æœ‰å¾ˆå¤šä¸ä¸€è‡´åŠè®¾è®¡ä¸Šçš„ç¼ºé™·ï¼ŒåŒ…æ‹¬æ˜“å˜æ€§ä»¥åŠç³Ÿç³•çš„åç§»å€¼ã€é»˜è®¤å€¼å’Œå‘½åã€‚</li>
<li>æ–°ç‰ˆçš„æ—¥æœŸå’Œæ—¶é—´APIä¸­ï¼Œæ—¥æœŸ-æ—¶é—´å¯¹è±¡æ˜¯ä¸å¯å˜çš„ã€‚</li>
<li>æ–°çš„APIæä¾›äº†ä¸¤ç§ä¸åŒçš„æ—¶é—´è¡¨ç¤ºæ–¹å¼ï¼Œæœ‰æ•ˆåœ°åŒºåˆ†äº†è¿è¡Œæ—¶äººå’Œæœºå™¨çš„ä¸åŒéœ€æ±‚ã€‚</li>
<li>ä½ å¯ä»¥ç”¨ç»å¯¹æˆ–è€…ç›¸å¯¹çš„æ–¹å¼æ“çºµæ—¥æœŸå’Œæ—¶é—´ï¼Œæ“ä½œçš„ç»“æœæ€»æ˜¯è¿”å›ä¸€ä¸ªæ–°çš„å®ä¾‹ï¼Œè€çš„æ—¥æœŸæ—¶é—´å¯¹è±¡ä¸ä¼šå‘ç”Ÿå˜åŒ–ã€‚</li>
<li>TemporalAdjusterè®©ä½ èƒ½å¤Ÿç”¨æ›´ç²¾ç»†çš„æ–¹å¼æ“çºµæ—¥æœŸï¼Œä¸å†å±€é™äºä¸€æ¬¡åªèƒ½æ”¹å˜å®ƒçš„ä¸€ä¸ªå€¼ï¼Œå¹¶ä¸”ä½ è¿˜å¯æŒ‰ç…§éœ€æ±‚å®šä¹‰è‡ªå·±çš„æ—¥æœŸè½¬æ¢å™¨ã€‚</li>
<li>ä½ ç°åœ¨å¯ä»¥æŒ‰ç…§ç‰¹å®šçš„æ ¼å¼éœ€æ±‚ï¼Œå®šä¹‰è‡ªå·±çš„æ ¼å¼å™¨ï¼Œæ‰“å°è¾“å‡ºæˆ–è€…è§£ææ—¥æœŸï€­æ—¶é—´å¯¹è±¡ã€‚è¿™äº›æ ¼å¼å™¨å¯ä»¥é€šè¿‡æ¨¡æ¿åˆ›å»ºï¼Œä¹Ÿå¯ä»¥è‡ªå·±ç¼–ç¨‹åˆ›å»ºï¼Œå¹¶ä¸”å®ƒä»¬éƒ½æ˜¯çº¿ç¨‹å®‰å…¨çš„ã€‚</li>
<li>ä½ å¯ä»¥ç”¨ç›¸å¯¹äºæŸä¸ªåœ°åŒº/ä½ç½®çš„æ–¹å¼ï¼Œæˆ–è€…ä»¥ä¸UTC/æ ¼æ—å°¼æ²»æ—¶é—´çš„ç»å¯¹åå·®çš„æ–¹å¼è¡¨ç¤ºæ—¶åŒºï¼Œå¹¶å°†å…¶åº”ç”¨åˆ°æ—¥æœŸï€­æ—¶é—´å¯¹è±¡ä¸Šï¼Œå¯¹å…¶è¿›è¡Œæœ¬åœ°åŒ–ã€‚</li>
</ul>
<h2 id="èµ„æºè·å–"><a href="#èµ„æºè·å–" class="headerlink" title="èµ„æºè·å–"></a>èµ„æºè·å–</h2><ul>
<li>å…¬ä¼—å·å›å¤ : Java8 å³å¯è·å–ã€ŠJava 8 in Actionã€‹ä¸­è‹±æ–‡ç‰ˆ!</li>
</ul>
<h2 id="Tips"><a href="#Tips" class="headerlink" title="Tips"></a>Tips</h2><ul>
<li>æ¬¢è¿æ”¶è—å’Œè½¬å‘ï¼Œæ„Ÿè°¢ä½ çš„æ”¯æŒï¼(à¹‘â€¢Ì€ã…‚â€¢Ì)Ùˆâœ§ </li>
<li>æ¬¢è¿å…³æ³¨æˆ‘ï¼šåç«¯å°å“¥ï¼Œä¸“æ³¨åç«¯å¼€å‘ï¼Œå¸Œæœ›å’Œä½ ä¸€èµ·è¿›æ­¥ï¼</li>
</ul>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta size-small is-uppercase level is-mobile"><div class="level-left"><time class="level-item" dateTime="2019-03-24T11:34:52.000Z" title="2019-03-24T11:34:52.000Z">2019-03-24</time><span class="level-item"><a class="link-muted" href="/categories/Java/">Java</a></span><span class="level-item">32 åˆ†é’Ÿ è¯»å®Œ (å¤§çº¦ 4805 ä¸ªå­—)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/p/56cbc3f9.html">ã€ŠJava 8 in Actionã€‹Chapter 11ï¼šCompletableFutureï¼šç»„åˆå¼å¼‚æ­¥ç¼–ç¨‹</a></h1><div class="content"><p>æŸä¸ªç½‘ç«™çš„æ•°æ®æ¥è‡ªFacebookã€Twitterå’ŒGoogleï¼Œè¿™å°±éœ€è¦ç½‘ç«™ä¸äº’è”ç½‘ä¸Šçš„å¤šä¸ªWebæœåŠ¡é€šä¿¡ã€‚å¯æ˜¯ï¼Œä½ å¹¶ä¸å¸Œæœ›å› ä¸ºç­‰å¾…æŸäº›æœåŠ¡çš„å“åº”ï¼Œé˜»å¡åº”ç”¨ç¨‹åºçš„è¿è¡Œï¼Œæµªè´¹æ•°åäº¿å®è´µçš„CPUæ—¶é’Ÿå‘¨æœŸã€‚æ¯”å¦‚ï¼Œä¸è¦å› ä¸ºç­‰å¾…Facebookçš„æ•°æ®ï¼Œæš‚åœå¯¹æ¥è‡ªTwitterçš„æ•°æ®å¤„ç†ã€‚<br><img src="https://raw.githubusercontent.com/lujiahao0708/PicRepo/master/blogPic/11.%E3%80%8AJava%208%20in%20Action%E3%80%8BChapter%2011%EF%BC%9ACompletableFuture%EF%BC%9A%E7%BB%84%E5%90%88%E5%BC%8F%E5%BC%82%E6%AD%A5%E7%BC%96%E7%A8%8B/%E5%85%B8%E5%9E%8B%E6%B7%B7%E8%81%9A%E5%BA%94%E7%94%A8.png" alt=""></p>
<p>ç¬¬7ç« ä¸­ä»‹ç»çš„åˆ†æ”¯/åˆå¹¶æ¡†æ¶ä»¥åŠå¹¶è¡Œæµæ˜¯å®ç°å¹¶è¡Œå¤„ç†çš„å®è´µå·¥å…·;å®ƒä»¬å°†ä¸€ä¸ªæ“ä½œåˆ‡åˆ†ä¸ºå¤šä¸ªå­æ“ä½œï¼Œåœ¨å¤šä¸ªä¸åŒçš„æ ¸ã€CPUç”šè‡³æ˜¯æœºå™¨ä¸Šå¹¶è¡Œåœ°æ‰§è¡Œè¿™äº›å­æ“ä½œã€‚ä¸æ­¤ç›¸åï¼Œå¦‚æœä½ çš„æ„å›¾æ˜¯å®ç°å¹¶å‘ï¼Œè€Œéå¹¶è¡Œï¼Œæˆ–è€…ä½ çš„ä¸»è¦ç›®æ ‡æ˜¯åœ¨åŒä¸€ä¸ªCPUä¸Šæ‰§è¡Œå‡ ä¸ªæ¾è€¦åˆçš„ä»»åŠ¡ï¼Œå……åˆ†åˆ©ç”¨CPUçš„æ ¸ï¼Œè®©å…¶è¶³å¤Ÿå¿™ç¢Œï¼Œä»è€Œæœ€å¤§åŒ–ç¨‹åºçš„ååé‡ï¼Œé‚£ä¹ˆä½ å…¶å®çœŸæ­£æƒ³åšçš„æ˜¯é¿å…å› ä¸ºç­‰å¾…è¿œç¨‹æœåŠ¡çš„è¿”å›ï¼Œæˆ–è€…å¯¹æ•°æ®åº“çš„æŸ¥è¯¢ï¼Œè€Œé˜»å¡çº¿ç¨‹çš„æ‰§è¡Œï¼Œæµªè´¹å®è´µçš„è®¡ç®—èµ„æºï¼Œå› ä¸ºè¿™ç§ç­‰å¾…çš„æ—¶é—´å¾ˆå¯èƒ½ç›¸å½“é•¿ã€‚<br><img src="https://raw.githubusercontent.com/lujiahao0708/PicRepo/master/blogPic/11.%E3%80%8AJava%208%20in%20Action%E3%80%8BChapter%2011%EF%BC%9ACompletableFuture%EF%BC%9A%E7%BB%84%E5%90%88%E5%BC%8F%E5%BC%82%E6%AD%A5%E7%BC%96%E7%A8%8B/%E5%B9%B6%E5%8F%91%E5%92%8C%E5%B9%B6%E8%A1%8C.png" alt=""></p>
<h1 id="1-Futureæ¥å£"><a href="#1-Futureæ¥å£" class="headerlink" title="1. Futureæ¥å£"></a>1. Futureæ¥å£</h1><p>Futureæ¥å£åœ¨Java 5ä¸­è¢«å¼•å…¥ï¼Œè®¾è®¡åˆè¡·æ˜¯å¯¹å°†æ¥æŸä¸ªæ—¶åˆ»ä¼šå‘ç”Ÿçš„ç»“æœè¿›è¡Œå»ºæ¨¡ã€‚å®ƒå»ºæ¨¡äº†ä¸€ç§å¼‚æ­¥è®¡ç®—ï¼Œè¿”å›ä¸€ä¸ªæ‰§è¡Œè¿ç®—ç»“æœçš„å¼•ç”¨ï¼Œå½“è¿ç®—ç»“æŸåï¼Œè¿™ä¸ªå¼•ç”¨è¢«è¿”å›ç»™è°ƒç”¨æ–¹ã€‚åœ¨Futureä¸­è§¦å‘é‚£äº›æ½œåœ¨è€—æ—¶çš„æ“ä½œæŠŠè°ƒç”¨çº¿ç¨‹è§£æ”¾å‡ºæ¥ï¼Œè®©å®ƒèƒ½ç»§ç»­æ‰§è¡Œå…¶ä»–æœ‰ä»·å€¼çš„å·¥ä½œï¼Œä¸å†éœ€è¦ç­‰å¾…è€—æ—¶çš„æ“ä½œå®Œæˆã€‚Futureçš„å¦ä¸€ä¸ªä¼˜ç‚¹æ˜¯å®ƒæ¯”æ›´åº•å±‚çš„Threadæ›´æ˜“ç”¨ã€‚è¦ä½¿ç”¨Futureï¼Œé€šå¸¸ä½ åªéœ€è¦å°†è€—æ—¶çš„æ“ä½œå°è£…åœ¨ä¸€ä¸ªCallableå¯¹è±¡ä¸­ï¼Œå†å°†å®ƒæäº¤ç»™ExecutorServiceã€‚ä½¿ç”¨Futureä»¥å¼‚æ­¥çš„æ–¹å¼æ‰§è¡Œä¸€ä¸ªè€—æ—¶çš„æ“ä½œ:<br><img src="https://raw.githubusercontent.com/lujiahao0708/PicRepo/master/blogPic/11.%E3%80%8AJava%208%20in%20Action%E3%80%8BChapter%2011%EF%BC%9ACompletableFuture%EF%BC%9A%E7%BB%84%E5%90%88%E5%BC%8F%E5%BC%82%E6%AD%A5%E7%BC%96%E7%A8%8B/%E4%BD%BF%E7%94%A8Future%E4%BB%A5%E5%BC%82%E6%AD%A5%E7%9A%84%E6%96%B9%E5%BC%8F%E6%89%A7%E8%A1%8C%E4%B8%80%E4%B8%AA%E8%80%97%E6%97%B6%E7%9A%84%E6%93%8D%E4%BD%9C.png" alt=""></p>
<p>çº¿ç¨‹å¯ä»¥åœ¨ExecutorServiceä»¥å¹¶å‘æ–¹å¼è°ƒç”¨å¦ä¸€ä¸ªçº¿ç¨‹æ‰§è¡Œè€—æ—¶æ“ä½œçš„åŒæ—¶ï¼Œå»æ‰§è¡Œä¸€äº›å…¶ä»–çš„ä»»åŠ¡ã€‚æ¥ç€ï¼Œå¦‚æœä½ å·²ç»è¿è¡Œåˆ°æ²¡æœ‰å¼‚æ­¥æ“ä½œçš„ç»“æœå°±æ— æ³•ç»§ç»­ä»»ä½•æœ‰æ„ä¹‰çš„å·¥ä½œæ—¶ï¼Œå¯ä»¥è°ƒç”¨å®ƒçš„getæ–¹æ³•å»è·å–æ“ä½œçš„ç»“æœã€‚å¦‚æœæ“ä½œå·²ç»å®Œæˆï¼Œè¯¥æ–¹æ³•ä¼šç«‹åˆ»è¿”å›æ“ä½œçš„ç»“æœï¼Œå¦åˆ™å®ƒä¼šé˜»å¡ä½ çš„çº¿ç¨‹ï¼Œç›´åˆ°æ“ä½œå®Œæˆï¼Œè¿”å›ç›¸åº”çš„ç»“æœã€‚å¦‚æœè¯¥é•¿æ—¶é—´è¿è¡Œçš„æ“ä½œæ°¸è¿œä¸è¿”å›äº†ä¼šæ€æ ·?Futureæä¾›äº†ä¸€ä¸ªæ— éœ€ä»»ä½•å‚æ•°çš„getæ–¹æ³•ï¼Œæ¨èä½¿ç”¨é‡è½½ç‰ˆæœ¬çš„getæ–¹æ³•ï¼Œå®ƒæ¥å—ä¸€ä¸ªè¶…æ—¶çš„å‚æ•°ï¼Œå¯ä»¥å®šä¹‰çº¿ç¨‹ç­‰å¾…Futureç»“æœçš„æœ€é•¿æ—¶é—´ï¼Œé¿å…æ— ä¼‘æ­¢çš„ç­‰å¾…ã€‚ä¸‹å›¾æ˜¯Futureå¼‚æ­¥æ‰§è¡Œçº¿ç¨‹åŸç†å›¾ã€‚<br><img src="https://raw.githubusercontent.com/lujiahao0708/PicRepo/master/blogPic/11.%E3%80%8AJava%208%20in%20Action%E3%80%8BChapter%2011%EF%BC%9ACompletableFuture%EF%BC%9A%E7%BB%84%E5%90%88%E5%BC%8F%E5%BC%82%E6%AD%A5%E7%BC%96%E7%A8%8B/Future%E5%BC%82%E6%AD%A5%E6%89%A7%E8%A1%8C%E7%BA%BF%E7%A8%8B%E5%8E%9F%E7%90%86%E5%9B%BE.png" alt=""></p>
<h1 id="2-ä½¿ç”¨CompletableFutureæ„å»ºå¼‚æ­¥åº”ç”¨"><a href="#2-ä½¿ç”¨CompletableFutureæ„å»ºå¼‚æ­¥åº”ç”¨" class="headerlink" title="2. ä½¿ç”¨CompletableFutureæ„å»ºå¼‚æ­¥åº”ç”¨"></a>2. ä½¿ç”¨CompletableFutureæ„å»ºå¼‚æ­¥åº”ç”¨</h1><p>Futureæ¥å£æœ‰ä¸€å®šçš„å±€é™æ€§ï¼Œæ¯”å¦‚ï¼Œæˆ‘ä»¬å¾ˆéš¾è¡¨è¿°Futureç»“æœä¹‹é—´çš„ä¾èµ–æ€§ã€‚å› æ­¤æˆ‘ä»¬å¼•å…¥äº†CompletableFutureã€‚æ¥ä¸‹æ¥é€šè¿‡ä¸€ä¸ªâ€œæœ€ä½³ä»·æ ¼æŸ¥è¯¢å™¨â€œçš„åº”ç”¨ï¼Œå®ƒä¼šæŸ¥è¯¢å¤šä¸ªåœ¨çº¿å•†åº—ï¼Œä¾æ®ç»™å®šçš„äº§å“æˆ–æœåŠ¡æ‰¾å‡ºæœ€ä½çš„ä»·æ ¼ï¼Œæ¥å±•ç°CompletableFutureå®ç°å¼‚æ­¥åº”ç”¨ã€‚é€šè¿‡æ­¤ä¾‹ä½ èƒ½å­¦åˆ°è¿™äº›ï¼š</p>
<ul>
<li>å¦‚ä½•ç¼–å†™å¼‚æ­¥API</li>
<li>å¦‚ä½•è®©ä½¿ç”¨åŒæ­¥APIçš„ä»£ç å˜ä¸ºéé˜»å¡ä»£ç </li>
<li>å¦‚ä½•ä½¿ç”¨æµæ°´çº¿å°†ä¸¤ä¸ªæ¥ç»­çš„å¼‚æ­¥æ“ä½œåˆå¹¶ä¸ºä¸€ä¸ªå¼‚æ­¥è®¡ç®—æ“ä½œ</li>
<li>å¦‚ä½•ä»¥å“åº”å¼çš„æ–¹å¼å¤„ç†å¼‚æ­¥æ“ä½œçš„å®Œæˆäº‹ä»¶</li>
</ul>
<p>åŒæ­¥APIå’Œå¼‚æ­¥APIï¼š</p>
<ul>
<li>åŒæ­¥APIå…¶å®åªæ˜¯å¯¹ä¼ ç»Ÿæ–¹æ³•è°ƒç”¨çš„å¦ä¸€ç§ç§°å‘¼:ä½ è°ƒç”¨äº†æŸä¸ªæ–¹æ³•ï¼Œè°ƒç”¨æ–¹åœ¨è¢«è°ƒç”¨æ–¹è¿è¡Œçš„è¿‡ç¨‹ä¸­ä¼šç­‰å¾…ï¼Œè¢«è°ƒç”¨æ–¹è¿è¡Œç»“æŸè¿”å›ï¼Œè°ƒç”¨æ–¹å–å¾—è¢«è°ƒç”¨æ–¹çš„è¿”å›å€¼å¹¶ç»§ç»­è¿è¡Œã€‚å³ä½¿è°ƒç”¨æ–¹å’Œè¢«è°ƒç”¨æ–¹åœ¨ä¸åŒçš„çº¿ç¨‹ä¸­è¿è¡Œï¼Œè°ƒç”¨æ–¹è¿˜æ˜¯éœ€è¦ç­‰å¾…è¢«è°ƒç”¨æ–¹ç»“æŸè¿è¡Œï¼Œè¿™å°±æ˜¯é˜»å¡å¼è°ƒç”¨è¿™ä¸ªåè¯çš„ç”±æ¥ã€‚</li>
<li>å¼‚æ­¥APIä¼šç›´æ¥è¿”å›ï¼Œæˆ–è€…è‡³å°‘åœ¨è¢«è°ƒç”¨æ–¹è®¡ç®—å®Œæˆä¹‹å‰ï¼Œå°†å®ƒå‰©ä½™çš„è®¡ç®—ä»»åŠ¡äº¤ç»™å¦ä¸€ä¸ªçº¿ç¨‹å»åšï¼Œè¯¥çº¿ç¨‹å’Œè°ƒç”¨æ–¹æ˜¯å¼‚æ­¥çš„â€”â€”è¿™å°±æ˜¯éé˜»å¡å¼è°ƒç”¨çš„ç”±æ¥ã€‚æ‰§è¡Œå‰©ä½™è®¡ç®—ä»»åŠ¡çš„çº¿ç¨‹ä¼šå°†å®ƒçš„è®¡ç®—ç»“æœè¿”å›ç»™è°ƒç”¨æ–¹ã€‚è¿”å›çš„æ–¹å¼è¦ä¹ˆæ˜¯é€šè¿‡å›è°ƒå‡½æ•°ï¼Œè¦ä¹ˆæ˜¯ç”±è°ƒç”¨æ–¹å†æ¬¡æ‰§è¡Œä¸€ä¸ªâ€œç­‰å¾…ï¼Œç›´åˆ°è®¡ç®—å®Œæˆâ€çš„æ–¹æ³•è°ƒç”¨ã€‚</li>
</ul>
<h2 id="2-1-å®æˆ˜ï¼šå®ç°å¼‚æ­¥API"><a href="#2-1-å®æˆ˜ï¼šå®ç°å¼‚æ­¥API" class="headerlink" title="2.1 å®æˆ˜ï¼šå®ç°å¼‚æ­¥API"></a>2.1 å®æˆ˜ï¼šå®ç°å¼‚æ­¥API</h2><h3 id="2-1-1-åŒæ­¥æ–¹æ³•"><a href="#2-1-1-åŒæ­¥æ–¹æ³•" class="headerlink" title="2.1.1 åŒæ­¥æ–¹æ³•"></a>2.1.1 åŒæ­¥æ–¹æ³•</h3><p><img src="https://raw.githubusercontent.com/lujiahao0708/PicRepo/master/blogPic/11.%E3%80%8AJava%208%20in%20Action%E3%80%8BChapter%2011%EF%BC%9ACompletableFuture%EF%BC%9A%E7%BB%84%E5%90%88%E5%BC%8F%E5%BC%82%E6%AD%A5%E7%BC%96%E7%A8%8B/%E5%90%8C%E6%AD%A5%E6%96%B9%E6%B3%95.png" alt=""></p>
<blockquote>
<p>åŒæ­¥æ“ä½œä¸­ä¼šä¸ºç­‰å¾…åŒæ­¥äº‹ä»¶å®Œæˆè€Œç­‰å¾…1sï¼Œè¿™ç§æ˜¯æ— æ³•æ¥å—çš„ï¼Œå¯¹äºç¨‹åºä½“éªŒæ¥è¯´æ˜¯éå¸¸ä¸å¥½çš„ã€‚</p>
</blockquote>
<h3 id="2-1-2-å°†åŒæ­¥æ–¹æ³•è½¬æ¢ä¸ºå¼‚æ­¥æ–¹æ³•"><a href="#2-1-2-å°†åŒæ­¥æ–¹æ³•è½¬æ¢ä¸ºå¼‚æ­¥æ–¹æ³•" class="headerlink" title="2.1.2 å°†åŒæ­¥æ–¹æ³•è½¬æ¢ä¸ºå¼‚æ­¥æ–¹æ³•"></a>2.1.2 å°†åŒæ­¥æ–¹æ³•è½¬æ¢ä¸ºå¼‚æ­¥æ–¹æ³•</h3><p><img src="https://raw.githubusercontent.com/lujiahao0708/PicRepo/master/blogPic/11.%E3%80%8AJava%208%20in%20Action%E3%80%8BChapter%2011%EF%BC%9ACompletableFuture%EF%BC%9A%E7%BB%84%E5%90%88%E5%BC%8F%E5%BC%82%E6%AD%A5%E7%BC%96%E7%A8%8B/%E5%BC%82%E6%AD%A5%E6%96%B9%E6%B3%95.png" alt=""></p>
<blockquote>
<p>Java 5å¼•å…¥äº†java.util.concurrent.Futureæ¥å£è¡¨ç¤ºä¸€ä¸ªå¼‚æ­¥è®¡ç®—(å³è°ƒç”¨çº¿ç¨‹å¯ä»¥ç»§ç»­è¿è¡Œï¼Œä¸ä¼šå› ä¸ºè°ƒç”¨æ–¹æ³•è€Œé˜»å¡)çš„ç»“æœã€‚è¿™æ„å‘³ç€Futureæ˜¯ä¸€ä¸ªæš‚æ—¶è¿˜ä¸å¯çŸ¥å€¼çš„å¤„ç†å™¨ï¼Œè¿™ä¸ªå€¼åœ¨è®¡ç®—å®Œæˆåï¼Œå¯ä»¥é€šè¿‡è°ƒç”¨å®ƒçš„getæ–¹æ³•å–å¾—ã€‚è¿™ç§æ–¹å¼ä¸‹ï¼Œåœ¨è¿›è¡Œä»·æ ¼æŸ¥è¯¢çš„åŒæ—¶ï¼Œè¿˜èƒ½æ‰§è¡Œä¸€äº›å…¶ä»–çš„ä»»åŠ¡ï¼Œæ¯”å¦‚æŸ¥è¯¢å…¶ä»–å•†åº—ä¸­å•†å“çš„ä»·æ ¼ï¼Œä¸ä¼šé˜»å¡åœ¨é‚£é‡Œç­‰å¾…ç¬¬ä¸€å®¶å•†åº—è¿”å›è¯·æ±‚çš„ç»“æœã€‚æœ€åï¼Œå¦‚æœæ‰€æœ‰æœ‰æ„ä¹‰çš„å·¥ä½œéƒ½å·²ç»å®Œæˆï¼Œæ‰€æœ‰è¦æ‰§è¡Œçš„å·¥ä½œéƒ½ä¾èµ–äºå•†å“ä»·æ ¼æ—¶ï¼Œå†è°ƒç”¨Futureçš„getæ–¹æ³•ã€‚æ‰§è¡Œäº†è¿™ä¸ªæ“ä½œåï¼Œè¦ä¹ˆè·å¾—Futureä¸­å°è£…çš„å€¼(å¦‚æœå¼‚æ­¥ä»»åŠ¡å·²ç»å®Œæˆ)ï¼Œè¦ä¹ˆå‘ç”Ÿé˜»å¡ï¼Œç›´åˆ°è¯¥å¼‚æ­¥ä»»åŠ¡å®Œæˆï¼ŒæœŸæœ›çš„å€¼èƒ½å¤Ÿè®¿é—®ã€‚åŒæ—¶ï¼Œå¦‚æœæŸä¸ªå•†å“ä»·æ ¼è®¡ç®—å‘ç”Ÿå¼‚å¸¸ï¼Œä¼šå°†å½“å‰çº¿ç¨‹æ€æ­»ï¼Œä»è€Œå¯¼è‡´ç­‰å¾…getæ–¹æ³•è¿”å›ç»“æœçš„å®¢æˆ·ç«¯æ°¸ä¹…åœ°è¢«é˜»å¡ã€‚å®¢æˆ·ç«¯å¯ä»¥ä½¿ç”¨é‡è½½ç‰ˆæœ¬çš„getæ–¹æ³•ï¼Œè®¾ç½®è¶…æ—¶å‚æ•°æ¥é¿å…ã€‚ä¸ºäº†è®©å®¢æˆ·ç«¯èƒ½äº†è§£æ— æ³•æä¾›è¯·æ±‚å•†å“ä»·æ ¼çš„åŸå› ï¼Œä½ éœ€è¦ä½¿ç”¨CompletableFutureçš„completeExceptionallyæ–¹æ³•å°†å¯¼è‡´CompletableFutureå†…å‘ç”Ÿé—®é¢˜çš„å¼‚å¸¸æŠ›å‡ºã€‚</p>
</blockquote>
<h2 id="2-1-3-ä½¿ç”¨å·¥å‚æ–¹æ³•supplyAsyncåˆ›å»ºCompletableFutureå¯¹è±¡"><a href="#2-1-3-ä½¿ç”¨å·¥å‚æ–¹æ³•supplyAsyncåˆ›å»ºCompletableFutureå¯¹è±¡" class="headerlink" title="2.1.3 ä½¿ç”¨å·¥å‚æ–¹æ³•supplyAsyncåˆ›å»ºCompletableFutureå¯¹è±¡"></a>2.1.3 ä½¿ç”¨å·¥å‚æ–¹æ³•supplyAsyncåˆ›å»ºCompletableFutureå¯¹è±¡</h2><p><img src="https://raw.githubusercontent.com/lujiahao0708/PicRepo/master/blogPic/11.%E3%80%8AJava%208%20in%20Action%E3%80%8BChapter%2011%EF%BC%9ACompletableFuture%EF%BC%9A%E7%BB%84%E5%90%88%E5%BC%8F%E5%BC%82%E6%AD%A5%E7%BC%96%E7%A8%8B/%E5%BC%82%E6%AD%A5%E6%96%B9%E6%B3%95(%E4%BD%BF%E7%94%A8%E5%B7%A5%E5%8E%82%E6%96%B9%E6%B3%95).png" alt=""></p>
<blockquote>
<p>supplyAsyncæ–¹æ³•æ¥å—ä¸€ä¸ªç”Ÿäº§è€…(Supplier)ä½œä¸ºå‚æ•°ï¼Œè¿”å›ä¸€ä¸ªCompletableFutureå¯¹è±¡ï¼Œè¯¥å¯¹è±¡å®Œæˆå¼‚æ­¥æ‰§è¡Œåä¼šè¯»å–è°ƒç”¨ç”Ÿäº§è€…æ–¹æ³•çš„è¿”å›å€¼ã€‚ç”Ÿäº§è€…æ–¹æ³•ä¼šäº¤ç”±ForkJoinPoolæ± ä¸­çš„æŸä¸ªæ‰§è¡Œçº¿ç¨‹(Executor)è¿è¡Œï¼Œä½†æ˜¯ä½ ä¹Ÿå¯ä»¥ä½¿ç”¨supplyAsyncæ–¹æ³•çš„é‡è½½ç‰ˆæœ¬ï¼Œä¼ é€’ç¬¬äºŒä¸ªå‚æ•°æŒ‡å®šä¸åŒçš„æ‰§è¡Œçº¿ç¨‹æ‰§è¡Œç”Ÿäº§è€…æ–¹æ³•ã€‚</p>
</blockquote>
<h1 id="3-æ¶ˆé™¤ä»£ç é˜»å¡é—®é¢˜"><a href="#3-æ¶ˆé™¤ä»£ç é˜»å¡é—®é¢˜" class="headerlink" title="3. æ¶ˆé™¤ä»£ç é˜»å¡é—®é¢˜"></a>3. æ¶ˆé™¤ä»£ç é˜»å¡é—®é¢˜</h1><h2 id="3-1-é¡ºåºåŒæ­¥è¯·æ±‚"><a href="#3-1-é¡ºåºåŒæ­¥è¯·æ±‚" class="headerlink" title="3.1 é¡ºåºåŒæ­¥è¯·æ±‚"></a>3.1 é¡ºåºåŒæ­¥è¯·æ±‚</h2><p><img src="https://raw.githubusercontent.com/lujiahao0708/PicRepo/master/blogPic/11.%E3%80%8AJava%208%20in%20Action%E3%80%8BChapter%2011%EF%BC%9ACompletableFuture%EF%BC%9A%E7%BB%84%E5%90%88%E5%BC%8F%E5%BC%82%E6%AD%A5%E7%BC%96%E7%A8%8B/11.3/%E9%A1%BA%E5%BA%8F%E5%90%8C%E6%AD%A5%E8%AF%B7%E6%B1%82.png" alt=""></p>
<h2 id="3-2-ä½¿ç”¨å¹¶è¡Œæµå¯¹è¯·æ±‚è¿›è¡Œå¹¶è¡Œæ“ä½œ"><a href="#3-2-ä½¿ç”¨å¹¶è¡Œæµå¯¹è¯·æ±‚è¿›è¡Œå¹¶è¡Œæ“ä½œ" class="headerlink" title="3.2 ä½¿ç”¨å¹¶è¡Œæµå¯¹è¯·æ±‚è¿›è¡Œå¹¶è¡Œæ“ä½œ"></a>3.2 ä½¿ç”¨å¹¶è¡Œæµå¯¹è¯·æ±‚è¿›è¡Œå¹¶è¡Œæ“ä½œ</h2><p><img src="https://raw.githubusercontent.com/lujiahao0708/PicRepo/master/blogPic/11.%E3%80%8AJava%208%20in%20Action%E3%80%8BChapter%2011%EF%BC%9ACompletableFuture%EF%BC%9A%E7%BB%84%E5%90%88%E5%BC%8F%E5%BC%82%E6%AD%A5%E7%BC%96%E7%A8%8B/11.3/%E4%BD%BF%E7%94%A8%E5%B9%B6%E8%A1%8C%E6%B5%81%E5%AF%B9%E8%AF%B7%E6%B1%82%E8%BF%9B%E8%A1%8C%E5%B9%B6%E8%A1%8C%E6%93%8D%E4%BD%9C.png" alt=""></p>
<h2 id="3-3-ä½¿ç”¨CompletableFutureå‘èµ·å¼‚æ­¥è¯·æ±‚"><a href="#3-3-ä½¿ç”¨CompletableFutureå‘èµ·å¼‚æ­¥è¯·æ±‚" class="headerlink" title="3.3 ä½¿ç”¨CompletableFutureå‘èµ·å¼‚æ­¥è¯·æ±‚"></a>3.3 ä½¿ç”¨CompletableFutureå‘èµ·å¼‚æ­¥è¯·æ±‚</h2><p><img src="https://raw.githubusercontent.com/lujiahao0708/PicRepo/master/blogPic/11.%E3%80%8AJava%208%20in%20Action%E3%80%8BChapter%2011%EF%BC%9ACompletableFuture%EF%BC%9A%E7%BB%84%E5%90%88%E5%BC%8F%E5%BC%82%E6%AD%A5%E7%BC%96%E7%A8%8B/11.3/%E4%BD%BF%E7%94%A8CompletableFuture%E5%8F%91%E8%B5%B7%E5%BC%82%E6%AD%A5%E8%AF%B7%E6%B1%82.png" alt=""></p>
<p>CompletableFutureç‰ˆæœ¬çš„ç¨‹åºä¼¼ä¹æ¯”å¹¶è¡Œæµç‰ˆæœ¬çš„ç¨‹åºè¿˜å¿«é‚£ä¹ˆä¸€ç‚¹å„¿ã€‚ä½†æ˜¯æœ€åè¿™ä¸ªç‰ˆæœ¬ä¹Ÿä¸å¤ªä»¤äººæ»¡æ„ã€‚å®ƒä»¬çœ‹èµ·æ¥ä¸ç›¸ä¼¯ä»²ï¼Œç©¶å…¶åŸå› éƒ½ä¸€æ ·:å®ƒä»¬å†…éƒ¨é‡‡ç”¨çš„æ˜¯åŒæ ·çš„é€šç”¨çº¿ç¨‹æ± ï¼Œé»˜è®¤éƒ½ä½¿ç”¨å›ºå®šæ•°ç›®çš„çº¿ç¨‹ï¼Œå…·ä½“çº¿ç¨‹æ•°å–å†³äºRuntime.getRuntime().availableProcessors()çš„è¿”å›å€¼ã€‚ç„¶è€Œï¼ŒCompletableFutureå…·æœ‰ä¸€å®šçš„ä¼˜åŠ¿ï¼Œå› ä¸ºå®ƒå…è®¸ä½ å¯¹æ‰§è¡Œå™¨(Executor)è¿›è¡Œé…ç½®ï¼Œå°¤å…¶æ˜¯çº¿ç¨‹æ± çš„å¤§å°ï¼Œè®©å®ƒä»¥æ›´é€‚åˆåº”ç”¨éœ€æ±‚çš„æ–¹å¼è¿›è¡Œé…ç½®ï¼Œæ»¡è¶³ç¨‹åºçš„è¦æ±‚ï¼Œè€Œè¿™æ˜¯å¹¶è¡ŒæµAPIæ— æ³•æä¾›çš„ã€‚<br>é¡ºåºæ‰§è¡Œå’Œå¹¶è¡Œæ‰§è¡Œçš„åŸç†å¯¹æ¯”ï¼š<br><img src="https://raw.githubusercontent.com/lujiahao0708/PicRepo/master/blogPic/11.%E3%80%8AJava%208%20in%20Action%E3%80%8BChapter%2011%EF%BC%9ACompletableFuture%EF%BC%9A%E7%BB%84%E5%90%88%E5%BC%8F%E5%BC%82%E6%AD%A5%E7%BC%96%E7%A8%8B/11.3/%E9%A1%BA%E5%BA%8F%E6%89%A7%E8%A1%8C%E5%92%8C%E5%B9%B6%E8%A1%8C%E6%89%A7%E8%A1%8C%E7%9A%84%E5%8E%9F%E7%90%86%E5%AF%B9%E6%AF%94.png" alt=""></p>
<p>å›¾11-4çš„ä¸ŠåŠéƒ¨åˆ†å±•ç¤ºäº†ä½¿ç”¨å•ä¸€æµæ°´çº¿å¤„ç†æµçš„è¿‡ç¨‹ï¼Œæˆ‘ä»¬çœ‹åˆ°ï¼Œæ‰§è¡Œçš„æµç¨‹(ä»¥è™šçº¿æ ‡è¯†)æ˜¯é¡ºåºçš„ã€‚äº‹å®ä¸Šï¼Œæ–°çš„CompletableFutureå¯¹è±¡åªæœ‰åœ¨å‰ä¸€ä¸ªæ“ä½œå®Œå…¨ç»“æŸä¹‹åï¼Œæ‰èƒ½åˆ›å»ºã€‚ä¸æ­¤ç›¸åï¼Œå›¾çš„ä¸‹åŠéƒ¨åˆ†å±•ç¤ºäº†å¦‚ä½•å…ˆå°†CompletableFutureså¯¹è±¡èšé›†åˆ°ä¸€ä¸ªåˆ—è¡¨ä¸­(å³å›¾ä¸­ä»¥æ¤­åœ†è¡¨ç¤ºçš„éƒ¨åˆ†)ï¼Œè®©å¯¹è±¡ä»¬å¯ä»¥åœ¨ç­‰å¾…å…¶ä»–å¯¹è±¡å®Œæˆæ“ä½œä¹‹å‰å°±èƒ½å¯åŠ¨ã€‚</p>
<h2 id="3-4-ä½¿ç”¨CompletableFutureå‘èµ·å¼‚æ­¥è¯·æ±‚WithExecutor"><a href="#3-4-ä½¿ç”¨CompletableFutureå‘èµ·å¼‚æ­¥è¯·æ±‚WithExecutor" class="headerlink" title="3.4 ä½¿ç”¨CompletableFutureå‘èµ·å¼‚æ­¥è¯·æ±‚WithExecutor"></a>3.4 ä½¿ç”¨CompletableFutureå‘èµ·å¼‚æ­¥è¯·æ±‚WithExecutor</h2><p><img src="https://raw.githubusercontent.com/lujiahao0708/PicRepo/master/blogPic/11.%E3%80%8AJava%208%20in%20Action%E3%80%8BChapter%2011%EF%BC%9ACompletableFuture%EF%BC%9A%E7%BB%84%E5%90%88%E5%BC%8F%E5%BC%82%E6%AD%A5%E7%BC%96%E7%A8%8B/11.3/%E4%BD%BF%E7%94%A8CompletableFuture%E5%8F%91%E8%B5%B7%E5%BC%82%E6%AD%A5%E8%AF%B7%E6%B1%82WithExecutor.png" alt=""></p>
<h2 id="3-5-è°ƒç”¨ç»“æœ"><a href="#3-5-è°ƒç”¨ç»“æœ" class="headerlink" title="3.5 è°ƒç”¨ç»“æœ:"></a>3.5 è°ƒç”¨ç»“æœ:</h2><p><img src="https://raw.githubusercontent.com/lujiahao0708/PicRepo/master/blogPic/11.%E3%80%8AJava%208%20in%20Action%E3%80%8BChapter%2011%EF%BC%9ACompletableFuture%EF%BC%9A%E7%BB%84%E5%90%88%E5%BC%8F%E5%BC%82%E6%AD%A5%E7%BC%96%E7%A8%8B/11.3/%E8%B0%83%E7%94%A8%E7%BB%93%E6%9E%9C.png" alt=""></p>
<h2 id="3-6-å¹¶è¡Œâ€”â€”ä½¿ç”¨æµè¿˜æ˜¯CompletableFutures"><a href="#3-6-å¹¶è¡Œâ€”â€”ä½¿ç”¨æµè¿˜æ˜¯CompletableFutures" class="headerlink" title="3.6 å¹¶è¡Œâ€”â€”ä½¿ç”¨æµè¿˜æ˜¯CompletableFutures"></a>3.6 å¹¶è¡Œâ€”â€”ä½¿ç”¨æµè¿˜æ˜¯CompletableFutures</h2><p>ç›®å‰ä¸ºæ­¢ï¼Œä½ å·²ç»çŸ¥é“å¯¹é›†åˆè¿›è¡Œå¹¶è¡Œè®¡ç®—æœ‰ä¸¤ç§æ–¹å¼:è¦ä¹ˆå°†å…¶è½¬åŒ–ä¸ºå¹¶è¡Œæµï¼Œåˆ©ç”¨mapè¿™æ ·çš„æ“ä½œå¼€å±•å·¥ä½œï¼Œè¦ä¹ˆæšä¸¾å‡ºé›†åˆä¸­çš„æ¯ä¸€ä¸ªå…ƒç´ ï¼Œåˆ›å»ºæ–°çš„çº¿ç¨‹ï¼Œåœ¨CompletableFutureå†…å¯¹å…¶è¿›è¡Œæ“ä½œã€‚åè€…æä¾›äº†æ›´å¤šçš„çµæ´»æ€§ï¼Œä½ å¯ä»¥è°ƒæ•´çº¿ç¨‹æ± çš„å¤§å°ï¼Œè€Œè¿™èƒ½å¸®åŠ©ä½ ç¡®ä¿æ•´ä½“çš„è®¡ç®—ä¸ä¼šå› ä¸ºçº¿ç¨‹éƒ½åœ¨ç­‰å¾…I/Oè€Œå‘ç”Ÿé˜»å¡ã€‚</p>
<ul>
<li>å¦‚æœä½ è¿›è¡Œçš„æ˜¯è®¡ç®—å¯†é›†å‹çš„æ“ä½œï¼Œå¹¶ä¸”æ²¡æœ‰I/Oï¼Œé‚£ä¹ˆæ¨èä½¿ç”¨Streamæ¥å£ï¼Œå› ä¸ºå®ç°ç®€å•ï¼ŒåŒæ—¶æ•ˆç‡ä¹Ÿå¯èƒ½æ˜¯æœ€é«˜çš„(å¦‚æœæ‰€æœ‰çš„çº¿ç¨‹éƒ½æ˜¯è®¡ç®—å¯†é›†å‹çš„ï¼Œé‚£å°±æ²¡æœ‰å¿…è¦åˆ›å»ºæ¯”å¤„ç†å™¨æ ¸æ•°æ›´å¤šçš„çº¿ç¨‹)ã€‚ </li>
<li>å¦‚æœä½ å¹¶è¡Œçš„å·¥ä½œå•å…ƒè¿˜æ¶‰åŠç­‰å¾…I/Oçš„æ“ä½œ(åŒ…æ‹¬ç½‘ç»œè¿æ¥ç­‰å¾…)ï¼Œé‚£ä¹ˆä½¿ç”¨CompletableFutureçµæ´»æ€§æ›´å¥½ï¼Œä½ å¯ä»¥åƒå‰æ–‡è®¨è®ºçš„é‚£æ ·ï¼Œä¾æ®ç­‰å¾…/è®¡ç®—ï¼Œæˆ–è€… W/Cçš„æ¯”ç‡è®¾å®šéœ€è¦ä½¿ç”¨çš„çº¿ç¨‹æ•°ã€‚è¿™ç§æƒ…å†µä¸ä½¿ç”¨å¹¶è¡Œæµçš„å¦ä¸€ä¸ªåŸå› æ˜¯ï¼Œå¤„ç†æµçš„æµæ°´çº¿ä¸­å¦‚æœå‘ç”ŸI/Oç­‰å¾…ï¼Œæµçš„å»¶è¿Ÿæ€§ä¼šè®©æˆ‘ä»¬å¾ˆéš¾åˆ¤æ–­åˆ°åº•ä»€ä¹ˆæ—¶å€™è§¦å‘äº†ç­‰å¾…ã€‚</li>
</ul>
<h1 id="4-å¯¹å¤šä¸ªå¼‚æ­¥ä»»åŠ¡è¿›è¡Œæµæ°´çº¿æ“ä½œ"><a href="#4-å¯¹å¤šä¸ªå¼‚æ­¥ä»»åŠ¡è¿›è¡Œæµæ°´çº¿æ“ä½œ" class="headerlink" title="4. å¯¹å¤šä¸ªå¼‚æ­¥ä»»åŠ¡è¿›è¡Œæµæ°´çº¿æ“ä½œ"></a>4. å¯¹å¤šä¸ªå¼‚æ­¥ä»»åŠ¡è¿›è¡Œæµæ°´çº¿æ“ä½œ</h1><h2 id="4-1-æ¡ˆä¾‹"><a href="#4-1-æ¡ˆä¾‹" class="headerlink" title="4.1 æ¡ˆä¾‹"></a>4.1 æ¡ˆä¾‹</h2><p>é€šè¿‡åœ¨shopæ„æˆçš„æµä¸Šé‡‡ç”¨æµæ°´çº¿æ–¹å¼æ‰§è¡Œä¸‰æ¬¡mapæ“ä½œï¼Œæˆ‘ä»¬å¾—åˆ°äº†ç»“æœã€‚</p>
<ul>
<li>ç¬¬ä¸€ä¸ªæ“ä½œå°†æ¯ä¸ªshopå¯¹è±¡è½¬æ¢æˆäº†ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œè¯¥å­—ç¬¦ä¸²åŒ…å«äº†è¯¥ shopä¸­æŒ‡å®šå•†å“çš„ä»·æ ¼å’ŒæŠ˜æ‰£ä»£ç ã€‚</li>
<li>ç¬¬äºŒä¸ªæ“ä½œå¯¹è¿™äº›å­—ç¬¦ä¸²è¿›è¡Œäº†è§£æï¼Œåœ¨Quoteå¯¹è±¡ä¸­å¯¹å®ƒä»¬è¿›è¡Œè½¬æ¢ã€‚</li>
<li>ç¬¬ä¸‰ä¸ªmapä¼šæ“ä½œè”ç³»è¿œç¨‹çš„DiscountæœåŠ¡ï¼Œè®¡ç®—å‡ºæœ€ç»ˆçš„æŠ˜æ‰£ä»·æ ¼ï¼Œå¹¶è¿”å›è¯¥ä»·æ ¼åŠæä¾›è¯¥ä»·æ ¼å•†å“çš„shopã€‚</li>
</ul>
<p>ä»£ç å¦‚å›¾:<br><img src="https://raw.githubusercontent.com/lujiahao0708/PicRepo/master/blogPic/11.%E3%80%8AJava%208%20in%20Action%E3%80%8BChapter%2011%EF%BC%9ACompletableFuture%EF%BC%9A%E7%BB%84%E5%90%88%E5%BC%8F%E5%BC%82%E6%AD%A5%E7%BC%96%E7%A8%8B/11.4/Discount.png" alt=""><br><img src="https://raw.githubusercontent.com/lujiahao0708/PicRepo/master/blogPic/11.%E3%80%8AJava%208%20in%20Action%E3%80%8BChapter%2011%EF%BC%9ACompletableFuture%EF%BC%9A%E7%BB%84%E5%90%88%E5%BC%8F%E5%BC%82%E6%AD%A5%E7%BC%96%E7%A8%8B/11.4/Quote.png" alt=""><br><img src="https://raw.githubusercontent.com/lujiahao0708/PicRepo/master/blogPic/11.%E3%80%8AJava%208%20in%20Action%E3%80%8BChapter%2011%EF%BC%9ACompletableFuture%EF%BC%9A%E7%BB%84%E5%90%88%E5%BC%8F%E5%BC%82%E6%AD%A5%E7%BC%96%E7%A8%8B/11.4/Shop11_4.png" alt=""><br><img src="https://raw.githubusercontent.com/lujiahao0708/PicRepo/master/blogPic/11.%E3%80%8AJava%208%20in%20Action%E3%80%8BChapter%2011%EF%BC%9ACompletableFuture%EF%BC%9A%E7%BB%84%E5%90%88%E5%BC%8F%E5%BC%82%E6%AD%A5%E7%BC%96%E7%A8%8B/11.4/Test.png" alt=""></p>
<p>åŸç†å›¾ï¼š<br><img src="https://raw.githubusercontent.com/lujiahao0708/PicRepo/master/blogPic/11.%E3%80%8AJava%208%20in%20Action%E3%80%8BChapter%2011%EF%BC%9ACompletableFuture%EF%BC%9A%E7%BB%84%E5%90%88%E5%BC%8F%E5%BC%82%E6%AD%A5%E7%BC%96%E7%A8%8B/11.4/Discount%E5%8E%9F%E7%90%86%E5%9B%BE.png" alt=""></p>
<p>Java 8çš„CompletableFuture APIæä¾›äº†åä¸ºthenComposeçš„æ–¹æ³•ï¼Œå®ƒå°±æ˜¯ä¸“é—¨ä¸ºè¿™ä¸€ç›®çš„è€Œè®¾è®¡çš„ï¼ŒthenComposeæ–¹æ³•å…è®¸ä½ å¯¹ä¸¤ä¸ªå¼‚æ­¥æ“ä½œè¿›è¡Œæµæ°´çº¿ï¼Œç¬¬ä¸€ä¸ªæ“ä½œå®Œæˆæ—¶ï¼Œå°†å…¶ç»“æœä½œä¸ºå‚æ•°ä¼ é€’ç»™ç¬¬äºŒä¸ªæ“ä½œã€‚æ¢å¥è¯è¯´ï¼Œä½ å¯ä»¥åˆ›å»ºä¸¤ä¸ªCompletableFutureså¯¹è±¡ï¼Œå¯¹ç¬¬ä¸€ä¸ªCompletableFutureå¯¹è±¡è°ƒç”¨thenComposeï¼Œå¹¶å‘å…¶ä¼ é€’ä¸€ä¸ªå‡½æ•°ã€‚å½“ç¬¬ä¸€ä¸ª CompletableFutureæ‰§è¡Œå®Œæ¯•åï¼Œå®ƒçš„ç»“æœå°†ä½œä¸ºè¯¥å‡½æ•°çš„å‚æ•°ï¼Œè¿™ä¸ªå‡½æ•°çš„è¿”å›å€¼æ˜¯ä»¥ç¬¬ä¸€ ä¸ªCompletableFutureçš„è¿”å›åšè¾“å…¥è®¡ç®—å‡ºçš„ç¬¬äºŒä¸ªCompletableFutureå¯¹è±¡ã€‚thenComposeæ–¹æ³•åƒCompletableFutureç±»ä¸­çš„å…¶ä»–æ–¹æ³•ä¸€æ ·ï¼Œä¹Ÿæä¾›äº†ä¸€ä¸ªä»¥Asyncåç¼€ç»“å°¾çš„ç‰ˆæœ¬thenComposeAsyncã€‚é€šå¸¸è€Œè¨€ï¼Œåç§°ä¸­ä¸å¸¦Asyncçš„æ–¹æ³•å’Œå®ƒçš„å‰ä¸€ä¸ªä»»åŠ¡ä¸€æ ·ï¼Œåœ¨åŒä¸€ä¸ªçº¿ç¨‹ä¸­è¿è¡Œ;è€Œåç§°ä»¥Asyncç»“å°¾çš„æ–¹æ³•ä¼šå°†åç»­çš„ä»»åŠ¡æäº¤åˆ°ä¸€ä¸ªçº¿ç¨‹æ± ï¼Œæ‰€ä»¥æ¯ä¸ªä»»åŠ¡æ˜¯ç”±ä¸åŒçš„çº¿ç¨‹å¤„ç†çš„ã€‚</p>
<h2 id="4-2-thenCombineæ–¹æ³•"><a href="#4-2-thenCombineæ–¹æ³•" class="headerlink" title="4.2 thenCombineæ–¹æ³•"></a>4.2 thenCombineæ–¹æ³•</h2><p>å°†ä¸¤ä¸ªCompletableFutureå¯¹è±¡ç»“åˆèµ·æ¥ï¼Œæ— è®ºä»–ä»¬æ˜¯å¦å­˜åœ¨ä¾èµ–ã€‚thenCombineæ–¹æ³•ï¼Œå®ƒæ¥æ”¶åä¸ºBiFunctionçš„ç¬¬äºŒå‚æ•°ï¼Œè¿™ä¸ªå‚æ•° å®šä¹‰äº†å½“ä¸¤ä¸ªCompletableFutureå¯¹è±¡å®Œæˆè®¡ç®—åï¼Œç»“æœå¦‚ä½•åˆå¹¶ã€‚åŒthenComposeæ–¹æ³•ä¸€æ ·ï¼Œ thenCombineæ–¹æ³•ä¹Ÿæä¾›æœ‰ä¸€ä¸ªAsyncçš„ç‰ˆæœ¬ã€‚è¿™é‡Œï¼Œå¦‚æœä½¿ç”¨thenCombineAsyncä¼šå¯¼è‡´BiFunctionä¸­å®šä¹‰çš„åˆå¹¶æ“ä½œè¢«æäº¤åˆ°çº¿ç¨‹æ± ä¸­ï¼Œç”±å¦ä¸€ä¸ªä»»åŠ¡ä»¥å¼‚æ­¥çš„æ–¹å¼æ‰§è¡Œã€‚</p>
<p>ä»£ç å›¾ï¼š<br><img src="https://raw.githubusercontent.com/lujiahao0708/PicRepo/master/blogPic/11.%E3%80%8AJava%208%20in%20Action%E3%80%8BChapter%2011%EF%BC%9ACompletableFuture%EF%BC%9A%E7%BB%84%E5%90%88%E5%BC%8F%E5%BC%82%E6%AD%A5%E7%BC%96%E7%A8%8B/11.5/thenCombine.png" alt=""></p>
<p>åŸç†å›¾ï¼š<br><img src="https://raw.githubusercontent.com/lujiahao0708/PicRepo/master/blogPic/11.%E3%80%8AJava%208%20in%20Action%E3%80%8BChapter%2011%EF%BC%9ACompletableFuture%EF%BC%9A%E7%BB%84%E5%90%88%E5%BC%8F%E5%BC%82%E6%AD%A5%E7%BC%96%E7%A8%8B/11.5/thenCombine%E5%8E%9F%E7%90%86%E5%9B%BE.png" alt=""></p>
<h2 id="4-3-å“åº”CompletableFutureçš„completionäº‹ä»¶"><a href="#4-3-å“åº”CompletableFutureçš„completionäº‹ä»¶" class="headerlink" title="4.3 å“åº”CompletableFutureçš„completionäº‹ä»¶"></a>4.3 å“åº”CompletableFutureçš„completionäº‹ä»¶</h2><p>Java 8çš„CompletableFutureé€šè¿‡thenAcceptæ–¹æ³•æä¾›äº†è¿™ä¸€åŠŸèƒ½ï¼Œå®ƒæ¥æ”¶ CompletableFutureæ‰§è¡Œå®Œæ¯•åçš„è¿”å›å€¼åšå‚æ•°ã€‚thenAcceptæ–¹æ³•ä¹Ÿæä¾› äº†ä¸€ä¸ªå¼‚æ­¥ç‰ˆæœ¬ï¼Œåä¸ºthenAcceptAsyncã€‚å¼‚æ­¥ç‰ˆæœ¬çš„æ–¹æ³•ä¼šå¯¹å¤„ç†ç»“æœçš„æ¶ˆè´¹è€…è¿›è¡Œè°ƒåº¦ï¼Œ ä»çº¿ç¨‹æ± ä¸­é€‰æ‹©ä¸€ä¸ªæ–°çš„çº¿ç¨‹ç»§ç»­æ‰§è¡Œï¼Œä¸å†ç”±åŒä¸€ä¸ªçº¿ç¨‹å®ŒæˆCompletableFutureçš„æ‰€æœ‰ä»» åŠ¡ã€‚å› ä¸ºä½ æƒ³è¦é¿å…ä¸å¿…è¦çš„ä¸Šä¸‹æ–‡åˆ‡æ¢ï¼Œæ›´é‡è¦çš„æ˜¯ä½ å¸Œæœ›é¿å…åœ¨ç­‰å¾…çº¿ç¨‹ä¸Šæµªè´¹æ—¶é—´ï¼Œå°½å¿«å“åº”CompletableFutureçš„completionäº‹ä»¶ï¼Œæ‰€ä»¥è¿™é‡Œæ²¡æœ‰é‡‡ç”¨å¼‚æ­¥ç‰ˆæœ¬ã€‚</p>
<h2 id="4-3-1-å®æˆ˜"><a href="#4-3-1-å®æˆ˜" class="headerlink" title="4.3.1 å®æˆ˜"></a>4.3.1 å®æˆ˜</h2><p><img src="https://raw.githubusercontent.com/lujiahao0708/PicRepo/master/blogPic/11.%E3%80%8AJava%208%20in%20Action%E3%80%8BChapter%2011%EF%BC%9ACompletableFuture%EF%BC%9A%E7%BB%84%E5%90%88%E5%BC%8F%E5%BC%82%E6%AD%A5%E7%BC%96%E7%A8%8B/11.5/thenAccept%E5%AE%9E%E6%88%98.png" alt=""></p>
<h1 id="5-å°ç»“"><a href="#5-å°ç»“" class="headerlink" title="5. å°ç»“"></a>5. å°ç»“</h1><ul>
<li>æ‰§è¡Œæ¯”è¾ƒæ“ä½œæ—¶,å°¤å…¶æ˜¯é‚£äº›ä¾èµ–ä¸€ä¸ªæˆ–å¤šä¸ªè¿œç¨‹æœåŠ¡çš„æ“ä½œï¼Œä½¿ç”¨å¼‚æ­¥ä»»åŠ¡å¯ä»¥æ”¹å–„ç¨‹åºçš„æ€§èƒ½ï¼ŒåŠ å¿«ç¨‹åºçš„å“åº”é€Ÿåº¦ã€‚</li>
<li>ä½ åº”è¯¥å°½å¯èƒ½åœ°ä¸ºå®¢æˆ·æä¾›å¼‚æ­¥APIã€‚ä½¿ç”¨CompletableFutureç±»æä¾›çš„ç‰¹æ€§ï¼Œä½ èƒ½å¤Ÿè½»æ¾åœ°å®ç°è¿™ä¸€ç›®æ ‡ã€‚</li>
<li>CompletableFutureç±»è¿˜æä¾›äº†å¼‚å¸¸ç®¡ç†çš„æœºåˆ¶ï¼Œè®©ä½ æœ‰æœºä¼šæŠ›å‡º/ç®¡ç†å¼‚æ­¥ä»»åŠ¡æ‰§è¡Œä¸­å‘ç”Ÿçš„å¼‚å¸¸ã€‚</li>
<li>å°†åŒæ­¥APIçš„è°ƒç”¨å°è£…åˆ°ä¸€ä¸ªCompletableFutureä¸­ï¼Œä½ èƒ½å¤Ÿä»¥å¼‚æ­¥çš„æ–¹å¼ä½¿ç”¨å…¶ç»“æœã€‚</li>
<li>å¦‚æœå¼‚æ­¥ä»»åŠ¡ä¹‹é—´ç›¸äº’ç‹¬ç«‹ï¼Œæˆ–è€…å®ƒä»¬ä¹‹é—´æŸä¸€äº›çš„ç»“æœæ˜¯å¦ä¸€äº›çš„è¾“å…¥ï¼Œä½ å¯ä»¥å°†è¿™äº›å¼‚æ­¥ä»»åŠ¡æ„é€ æˆ–è€…åˆå¹¶æˆä¸€ä¸ªã€‚</li>
<li>ä½ å¯ä»¥ä¸ºCompletableFutureæ³¨å†Œä¸€ä¸ªå›è°ƒå‡½æ•°ï¼Œåœ¨Futureæ‰§è¡Œå®Œæ¯•æˆ–è€…å®ƒä»¬è®¡ç®—çš„ç»“æœå¯ç”¨æ—¶ï¼Œé’ˆå¯¹æ€§åœ°æ‰§è¡Œä¸€äº›ç¨‹åºã€‚</li>
<li>ä½ å¯ä»¥å†³å®šåœ¨ä»€ä¹ˆæ—¶å€™ç»“æŸç¨‹åºçš„è¿è¡Œï¼Œæ˜¯ç­‰å¾…ç”±CompletableFutureå¯¹è±¡æ„æˆçš„åˆ—è¡¨ä¸­æ‰€æœ‰çš„å¯¹è±¡éƒ½æ‰§è¡Œå®Œæ¯•ï¼Œè¿˜æ˜¯åªè¦å…¶ä¸­ä»»ä½•ä¸€ä¸ªé¦–å…ˆå®Œæˆå°±ä¸­æ­¢ç¨‹åºçš„è¿è¡Œã€‚</li>
</ul>
<h2 id="èµ„æºè·å–"><a href="#èµ„æºè·å–" class="headerlink" title="èµ„æºè·å–"></a>èµ„æºè·å–</h2><ul>
<li>å…¬ä¼—å·å›å¤ : Java8 å³å¯è·å–ã€ŠJava 8 in Actionã€‹ä¸­è‹±æ–‡ç‰ˆ!</li>
</ul>
<h2 id="Tips"><a href="#Tips" class="headerlink" title="Tips"></a>Tips</h2><ul>
<li>æ¬¢è¿æ”¶è—å’Œè½¬å‘ï¼Œæ„Ÿè°¢ä½ çš„æ”¯æŒï¼(à¹‘â€¢Ì€ã…‚â€¢Ì)Ùˆâœ§ </li>
<li>æ¬¢è¿å…³æ³¨æˆ‘ï¼šåç«¯å°å“¥ï¼Œä¸“æ³¨åç«¯å¼€å‘ï¼Œå¸Œæœ›å’Œä½ ä¸€èµ·è¿›æ­¥ï¼</li>
</ul>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta size-small is-uppercase level is-mobile"><div class="level-left"><time class="level-item" dateTime="2019-03-22T11:34:52.000Z" title="2019-03-22T11:34:52.000Z">2019-03-22</time><span class="level-item"><a class="link-muted" href="/categories/Java/">Java</a></span><span class="level-item">18 åˆ†é’Ÿ è¯»å®Œ (å¤§çº¦ 2637 ä¸ªå­—)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/p/d85f00c6.html">ã€ŠJava 8 in Actionã€‹Chapter 10ï¼šç”¨Optionalå–ä»£null</a></h1><div class="content"><blockquote>
<p>1965å¹´ï¼Œè‹±å›½ä¸€ä½åä¸ºTony Hoareçš„è®¡ç®—æœºç§‘å­¦å®¶åœ¨è®¾è®¡ALGOL Wè¯­è¨€æ—¶æå‡ºäº†nullå¼•ç”¨çš„æƒ³æ³•ã€‚ALGOL Wæ˜¯ç¬¬ä¸€æ‰¹åœ¨å †ä¸Šåˆ†é…è®°å½•çš„ç±»å‹è¯­è¨€ä¹‹ä¸€ã€‚Hoareé€‰æ‹©nullå¼•ç”¨è¿™ç§æ–¹å¼ï¼Œâ€œåªæ˜¯å› ä¸ºè¿™ç§æ–¹æ³•å®ç°èµ·æ¥éå¸¸å®¹æ˜“â€ã€‚è™½ç„¶ä»–çš„è®¾è®¡åˆè¡·å°±æ˜¯è¦â€œé€šè¿‡ç¼–è¯‘å™¨çš„è‡ªåŠ¨æ£€æµ‹æœºåˆ¶ï¼Œç¡®ä¿æ‰€æœ‰ä½¿ç”¨å¼•ç”¨çš„åœ°æ–¹éƒ½æ˜¯ç»å¯¹å®‰å…¨çš„â€ï¼Œä»–è¿˜æ˜¯å†³å®šä¸ºnullå¼•ç”¨å¼€ä¸ªç»¿ç¯ï¼Œå› ä¸ºä»–è®¤ä¸ºè¿™æ˜¯ä¸ºâ€œä¸å­˜åœ¨çš„å€¼â€å»ºæ¨¡æœ€å®¹æ˜“çš„æ–¹å¼ã€‚å¾ˆå¤šå¹´åï¼Œä»–å¼€å§‹ä¸ºè‡ªå·±æ›¾ç»åšè¿‡è¿™æ ·çš„å†³å®šè€Œåæ‚”ä¸å·²ï¼ŒæŠŠå®ƒç§°ä¸ºâ€œæˆ‘ä»·å€¼ç™¾ä¸‡çš„é‡å¤§äº‹ç‰©â€ã€‚å®é™…ä¸Šï¼ŒHoareçš„è¿™æ®µè¯ä½ä¼°äº†è¿‡å»äº”åå¹´æ¥æ•°ç™¾ä¸‡ç¨‹åºå‘˜ä¸ºä¿®å¤ç©ºå¼•ç”¨æ‰€è€—è´¹çš„ä»£ä»·ã€‚è¿‘åå¹´å‡ºç°çš„å¤§å¤šæ•°ç°ä»£ç¨‹åºè®¾è®¡è¯­è¨€1ï¼ŒåŒ…æ‹¬Javaï¼Œéƒ½é‡‡ç”¨äº†åŒæ ·çš„è®¾è®¡æ–¹å¼ï¼Œå…¶åŸå› æ˜¯ä¸ºäº†ä¸æ›´è€çš„è¯­è¨€ä¿æŒå…¼å®¹ï¼Œæˆ–è€…å°±åƒHoareæ›¾ç»é™ˆè¿°çš„é‚£æ ·ï¼Œâ€œä»…ä»…æ˜¯å› ä¸ºè¿™æ ·å®ç°èµ·æ¥æ›´åŠ å®¹æ˜“â€ã€‚</p>
</blockquote>
<h1 id="1-å¦‚ä½•ä¸ºç¡®å®çš„å€¼å»ºæ¨¡"><a href="#1-å¦‚ä½•ä¸ºç¡®å®çš„å€¼å»ºæ¨¡" class="headerlink" title="1. å¦‚ä½•ä¸ºç¡®å®çš„å€¼å»ºæ¨¡"></a>1. å¦‚ä½•ä¸ºç¡®å®çš„å€¼å»ºæ¨¡</h1><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Person</span> </span>&#123;</span><br><span class="line">        <span class="keyword">private</span> Car car;</span><br><span class="line">        <span class="function"><span class="keyword">public</span> Car <span class="title">getCar</span><span class="params">()</span> </span>&#123; <span class="keyword">return</span> car; &#125;</span><br><span class="line">    &#125;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Car</span> </span>&#123;</span><br><span class="line">        <span class="keyword">private</span> Insurance insurance;</span><br><span class="line">        <span class="function"><span class="keyword">public</span> Insurance <span class="title">getInsurance</span><span class="params">()</span> </span>&#123; <span class="keyword">return</span> insurance; &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Insurance</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getName</span><span class="params">()</span> </span>&#123; <span class="keyword">return</span> name; &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">getCarInsuranceName</span><span class="params">(Person person)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> person.getCar().getInsurance().getName();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ä¸Šé¢è¿™æ®µä»£ç çš„é—®é¢˜å°±åœ¨äºï¼Œå¦‚æœpersonæ²¡æœ‰è½¦ï¼Œå°±ä¼šé€ æˆç©ºæŒ‡é’ˆå¼‚å¸¸ã€‚</p>
<h2 id="1-1-é‡‡ç”¨é˜²å¾¡å¼æ£€æŸ¥å‡å°‘NullPointerException"><a href="#1-1-é‡‡ç”¨é˜²å¾¡å¼æ£€æŸ¥å‡å°‘NullPointerException" class="headerlink" title="1.1 é‡‡ç”¨é˜²å¾¡å¼æ£€æŸ¥å‡å°‘NullPointerException"></a>1.1 é‡‡ç”¨é˜²å¾¡å¼æ£€æŸ¥å‡å°‘NullPointerException</h2><h3 id="1-1-1-æ·±å±‚è´¨ç–‘"><a href="#1-1-1-æ·±å±‚è´¨ç–‘" class="headerlink" title="1.1.1 æ·±å±‚è´¨ç–‘"></a>1.1.1 æ·±å±‚è´¨ç–‘</h3><p>ç®€å•æ¥è¯´å°±æ˜¯åœ¨éœ€è¦çš„åœ°æ–¹æ·»åŠ nullæ£€æŸ¥</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">getCarInsuranceName</span><span class="params">(Person person)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (person != <span class="keyword">null</span>) &#123;</span><br><span class="line">        Car car = person.getCar();</span><br><span class="line">        <span class="keyword">if</span> (car != <span class="keyword">null</span>) &#123;</span><br><span class="line">            Insurance insurance = car.getInsurance();</span><br><span class="line">            <span class="keyword">if</span> (insurance != <span class="keyword">null</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> insurance.getName();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">"Unknown"</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ä¸Šè¿°ä»£ç ä¸å…·å¤‡æ‰©å±•æ€§ï¼ŒåŒæ—¶è¿˜ç‰ºç‰²äº†ä»£ç çš„å¯è¯»æ€§ã€‚</p>
<h3 id="1-1-2-è¿‡å¤šçš„é€€å‡ºè¯­å¥"><a href="#1-1-2-è¿‡å¤šçš„é€€å‡ºè¯­å¥" class="headerlink" title="1.1.2 è¿‡å¤šçš„é€€å‡ºè¯­å¥"></a>1.1.2 è¿‡å¤šçš„é€€å‡ºè¯­å¥</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">getCarInsuranceName</span><span class="params">(Person person)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (person == <span class="keyword">null</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"Unknown"</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    Car car = person.getCar();</span><br><span class="line">    <span class="keyword">if</span> (car == <span class="keyword">null</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"Unknown"</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    Insurance insurance = car.getInsurance();</span><br><span class="line">    <span class="keyword">if</span> (insurance == <span class="keyword">null</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"Unknown"</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> insurance.getName();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è¿™ç§æ¨¡å¼ä¸­æ–¹æ³•çš„é€€å‡ºç‚¹æœ‰å››å¤„ï¼Œä½¿å¾—ä»£ç çš„ç»´æŠ¤å¼‚å¸¸è‰°éš¾ã€‚</p>
<h2 id="1-2-nullå¸¦æ¥çš„ç§ç§é—®é¢˜"><a href="#1-2-nullå¸¦æ¥çš„ç§ç§é—®é¢˜" class="headerlink" title="1.2 nullå¸¦æ¥çš„ç§ç§é—®é¢˜"></a>1.2 nullå¸¦æ¥çš„ç§ç§é—®é¢˜</h2><ul>
<li>å®ƒæ˜¯é”™è¯¯ä¹‹æºã€‚ NullPointerExceptionæ˜¯ç›®å‰Javaç¨‹åºå¼€å‘ä¸­æœ€å…¸å‹çš„å¼‚å¸¸ã€‚å®ƒä¼šä½¿ä½ çš„ä»£ç è†¨èƒ€ã€‚</li>
<li>å®ƒè®©ä½ çš„ä»£ç å……æ–¥ç€æ·±åº¦åµŒå¥—çš„nullæ£€æŸ¥ï¼Œä»£ç çš„å¯è¯»æ€§ç³Ÿç³•é€é¡¶ã€‚</li>
<li>å®ƒè‡ªèº«æ˜¯æ¯«æ— æ„ä¹‰çš„ã€‚ nullè‡ªèº«æ²¡æœ‰ä»»ä½•çš„è¯­ä¹‰ï¼Œå°¤å…¶æ˜¯æ˜¯å®ƒä»£è¡¨çš„æ˜¯åœ¨é™æ€ç±»å‹è¯­è¨€ä¸­ä»¥ä¸€ç§é”™è¯¯çš„æ–¹å¼å¯¹ç¼ºå¤±å˜é‡å€¼çš„å»ºæ¨¡ã€‚</li>
<li>å®ƒç ´åäº†Javaçš„å“²å­¦ã€‚ Javaä¸€ç›´è¯•å›¾é¿å…è®©ç¨‹åºå‘˜æ„è¯†åˆ°æŒ‡é’ˆçš„å­˜åœ¨ï¼Œå”¯ä¸€çš„ä¾‹å¤–æ˜¯:nullæŒ‡é’ˆã€‚</li>
<li>å®ƒåœ¨Javaçš„ç±»å‹ç³»ç»Ÿä¸Šå¼€äº†ä¸ªå£å­ã€‚ nullå¹¶ä¸å±äºä»»ä½•ç±»å‹ï¼Œè¿™æ„å‘³ç€å®ƒå¯ä»¥è¢«èµ‹å€¼ç»™ä»»æ„å¼•ç”¨ç±»å‹çš„å˜é‡ã€‚è¿™ä¼šå¯¼è‡´é—®é¢˜ï¼Œ åŸå› æ˜¯å½“è¿™ä¸ªå˜é‡è¢«ä¼ é€’åˆ°ç³»ç»Ÿä¸­çš„å¦ä¸€ä¸ªéƒ¨åˆ†åï¼Œä½ å°†æ— æ³•è·çŸ¥è¿™ä¸ªnullå˜é‡æœ€åˆèµ‹å€¼åˆ°åº•æ˜¯ä»€ä¹ˆç±»å‹ã€‚</li>
</ul>
<h2 id="1-3-å…¶ä»–è¯­è¨€ä¸­nullçš„æ›¿ä»£å“"><a href="#1-3-å…¶ä»–è¯­è¨€ä¸­nullçš„æ›¿ä»£å“" class="headerlink" title="1.3 å…¶ä»–è¯­è¨€ä¸­nullçš„æ›¿ä»£å“"></a>1.3 å…¶ä»–è¯­è¨€ä¸­nullçš„æ›¿ä»£å“</h2><ul>
<li>Groovyä¸­çš„å®‰å…¨å¯¼èˆªæ“ä½œç¬¦</li>
<li>Haskellä¸­çš„Maybeç±»å‹</li>
<li>Scalaä¸­çš„Option[T]</li>
</ul>
<h1 id="2-Optionalç±»å…¥é—¨"><a href="#2-Optionalç±»å…¥é—¨" class="headerlink" title="2. Optionalç±»å…¥é—¨"></a>2. Optionalç±»å…¥é—¨</h1><p>å˜é‡å­˜åœ¨æ—¶ï¼ŒOptionalç±»åªæ˜¯å¯¹ç±»ç®€å•å°è£…ã€‚å˜é‡ä¸å­˜åœ¨æ—¶ï¼Œç¼ºå¤±çš„å€¼ä¼šè¢«å»ºæ¨¡æˆä¸€ä¸ªâ€œç©ºâ€çš„Optionalå¯¹è±¡ï¼Œç”±æ–¹æ³•Optional.empty()è¿”å›ã€‚Optional.empty()æ–¹æ³•æ˜¯ä¸€ä¸ªé™æ€å·¥å‚æ–¹æ³•ï¼Œå®ƒè¿”å›Optionalç±»çš„ç‰¹å®šå•ä¸€å®ä¾‹ã€‚<br><img src="https://raw.githubusercontent.com/lujiahao0708/PicRepo/master/blogPic/10.%E3%80%8AJava%208%20in%20Action%E3%80%8BChapter%2010%EF%BC%9A%E7%94%A8Optional%E5%8F%96%E4%BB%A3null/1.png" alt=""></p>
<p>å¼•å…¥Optionalç±»çš„æ„å›¾å¹¶éè¦æ¶ˆé™¤æ¯ä¸€ä¸ªnullå¼•ç”¨ï¼Œç›¸åçš„æ˜¯ï¼Œå®ƒçš„ç›®æ ‡æ˜¯å¸®åŠ©å¼€å‘è€…æ›´å¥½åœ°è®¾è®¡å‡ºæ™®é€‚çš„APIã€‚</p>
<h1 id="3-åº”ç”¨Optionalçš„å‡ ç§æ¨¡å¼"><a href="#3-åº”ç”¨Optionalçš„å‡ ç§æ¨¡å¼" class="headerlink" title="3. åº”ç”¨Optionalçš„å‡ ç§æ¨¡å¼"></a>3. åº”ç”¨Optionalçš„å‡ ç§æ¨¡å¼</h1><h2 id="3-1-åˆ›å»ºOptionalå¯¹è±¡"><a href="#3-1-åˆ›å»ºOptionalå¯¹è±¡" class="headerlink" title="3.1 åˆ›å»ºOptionalå¯¹è±¡"></a>3.1 åˆ›å»ºOptionalå¯¹è±¡</h2><h3 id="3-1-1-å£°æ˜ä¸€ä¸ªç©ºçš„Optional"><a href="#3-1-1-å£°æ˜ä¸€ä¸ªç©ºçš„Optional" class="headerlink" title="3.1.1 å£°æ˜ä¸€ä¸ªç©ºçš„Optional"></a>3.1.1 å£°æ˜ä¸€ä¸ªç©ºçš„Optional</h3><p>æ­£å¦‚å‰æ–‡å·²ç»æåˆ°ï¼Œä½ å¯ä»¥é€šè¿‡é™æ€å·¥å‚æ–¹æ³•Optional.emptyï¼Œåˆ›å»ºä¸€ä¸ªç©ºçš„Optionalå¯¹è±¡:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Optional&lt;Car&gt; optCar = Optional.empty();</span><br></pre></td></tr></table></figure>
<h3 id="3-1-2-ä¾æ®ä¸€ä¸ªéç©ºå€¼åˆ›å»ºOptional"><a href="#3-1-2-ä¾æ®ä¸€ä¸ªéç©ºå€¼åˆ›å»ºOptional" class="headerlink" title="3.1.2 ä¾æ®ä¸€ä¸ªéç©ºå€¼åˆ›å»ºOptional"></a>3.1.2 ä¾æ®ä¸€ä¸ªéç©ºå€¼åˆ›å»ºOptional</h3><p>ä½ è¿˜å¯ä»¥ä½¿ç”¨é™æ€å·¥å‚æ–¹æ³•Optional.ofï¼Œä¾æ®ä¸€ä¸ªéç©ºå€¼åˆ›å»ºä¸€ä¸ªOptionalå¯¹è±¡:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Optional&lt;Car&gt; optCar = Optional.of(car);</span><br></pre></td></tr></table></figure>
<p>å¦‚æœcaræ˜¯ä¸€ä¸ªnullï¼Œè¿™æ®µä»£ç ä¼šç«‹å³æŠ›å‡ºä¸€ä¸ªNullPointerExceptionï¼Œè€Œä¸æ˜¯ç­‰åˆ°ä½ è¯•å›¾è®¿é—®carçš„å±æ€§å€¼æ—¶æ‰è¿”å›ä¸€ä¸ªé”™è¯¯ã€‚</p>
<h3 id="3-2-3-å¯æ¥å—nullçš„Optional"><a href="#3-2-3-å¯æ¥å—nullçš„Optional" class="headerlink" title="3.2.3 å¯æ¥å—nullçš„Optional"></a>3.2.3 å¯æ¥å—nullçš„Optional</h3><p>æœ€åï¼Œä½¿ç”¨é™æ€å·¥å‚æ–¹æ³•Optional.ofNullableï¼Œä½ å¯ä»¥åˆ›å»ºä¸€ä¸ªå…è®¸nullå€¼çš„Optionalå¯¹è±¡:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Optional&lt;Car&gt; optCar = Optional.ofNullable(car);</span><br></pre></td></tr></table></figure>
<p>å¦‚æœcaræ˜¯nullï¼Œé‚£ä¹ˆå¾—åˆ°çš„Optionalå¯¹è±¡å°±æ˜¯ä¸ªç©ºå¯¹è±¡ã€‚</p>
<h2 id="3-2-ä½¿ç”¨mapä»Optionalå¯¹è±¡ä¸­æå–å’Œè½¬æ¢å€¼"><a href="#3-2-ä½¿ç”¨mapä»Optionalå¯¹è±¡ä¸­æå–å’Œè½¬æ¢å€¼" class="headerlink" title="3.2 ä½¿ç”¨mapä»Optionalå¯¹è±¡ä¸­æå–å’Œè½¬æ¢å€¼"></a>3.2 ä½¿ç”¨mapä»Optionalå¯¹è±¡ä¸­æå–å’Œè½¬æ¢å€¼</h2><p>ä»å¯¹è±¡ä¸­æå–ä¿¡æ¯æ˜¯ä¸€ç§æ¯”è¾ƒå¸¸è§çš„æ¨¡å¼ã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">String name = <span class="keyword">null</span>;</span><br><span class="line">    <span class="keyword">if</span>(insurance != <span class="keyword">null</span>)&#123;</span><br><span class="line">        name = insurance.getName();</span><br><span class="line">    &#125;</span><br><span class="line">ä¸ºäº†æ”¯æŒè¿™ç§æ¨¡å¼ï¼ŒOptionalæä¾›äº†ä¸€ä¸ªmapæ–¹æ³•ã€‚</span><br><span class="line">Optional&lt;Insurance&gt; optInsurance = Optional.ofNullable(insurance); </span><br><span class="line">Optional&lt;String&gt; name = optInsurance.map(Insurance::getName);</span><br></pre></td></tr></table></figure>
<p><img src="https://raw.githubusercontent.com/lujiahao0708/PicRepo/master/blogPic/10.%E3%80%8AJava%208%20in%20Action%E3%80%8BChapter%2010%EF%BC%9A%E7%94%A8Optional%E5%8F%96%E4%BB%A3null/2.png" alt=""></p>
<h2 id="3-3-ä½¿ç”¨flatMapé“¾æ¥Optionalå¯¹è±¡"><a href="#3-3-ä½¿ç”¨flatMapé“¾æ¥Optionalå¯¹è±¡" class="headerlink" title="3.3 ä½¿ç”¨flatMapé“¾æ¥Optionalå¯¹è±¡"></a>3.3 ä½¿ç”¨flatMapé“¾æ¥Optionalå¯¹è±¡</h2><p>ä½¿ç”¨æµæ—¶ï¼ŒflatMapæ–¹æ³•æ¥å—ä¸€ä¸ªå‡½æ•°ä½œä¸ºå‚æ•°ï¼Œè¿™ä¸ªå‡½æ•°çš„è¿”å›å€¼æ˜¯å¦ä¸€ä¸ªæµã€‚ è¿™ä¸ªæ–¹æ³•ä¼šåº”ç”¨åˆ°æµä¸­çš„æ¯ä¸€ä¸ªå…ƒç´ ï¼Œæœ€ç»ˆå½¢æˆä¸€ä¸ªæ–°çš„æµçš„æµã€‚ä½†æ˜¯flagMapä¼šç”¨æµçš„å†…å®¹æ›¿æ¢æ¯ä¸ªæ–°ç”Ÿæˆçš„æµã€‚æ¢å¥è¯è¯´ï¼Œç”±æ–¹æ³•ç”Ÿæˆçš„å„ä¸ªæµä¼šè¢«åˆå¹¶æˆ–è€…æ‰å¹³åŒ–ä¸ºä¸€ä¸ªå•ä¸€çš„æµã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">getCarInsuranceName</span><span class="params">(Optional&lt;Person&gt; person)</span> </span>&#123; <span class="keyword">return</span> person.flatMap(Person::getCar)</span><br><span class="line">                     .flatMap(Car::getInsurance)</span><br><span class="line">                     .map(Insurance::getName)</span><br><span class="line">                     .orElse(<span class="string">"Unknown"</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><img src="https://raw.githubusercontent.com/lujiahao0708/PicRepo/master/blogPic/10.%E3%80%8AJava%208%20in%20Action%E3%80%8BChapter%2010%EF%BC%9A%E7%94%A8Optional%E5%8F%96%E4%BB%A3null/3.png" alt=""></p>
<h2 id="3-4-é»˜è®¤è¡Œä¸ºåŠè§£å¼•ç”¨Optionalå¯¹è±¡"><a href="#3-4-é»˜è®¤è¡Œä¸ºåŠè§£å¼•ç”¨Optionalå¯¹è±¡" class="headerlink" title="3.4 é»˜è®¤è¡Œä¸ºåŠè§£å¼•ç”¨Optionalå¯¹è±¡"></a>3.4 é»˜è®¤è¡Œä¸ºåŠè§£å¼•ç”¨Optionalå¯¹è±¡</h2><ol>
<li>get()æ˜¯è¿™äº›æ–¹æ³•ä¸­æœ€ç®€å•ä½†åˆæœ€ä¸å®‰å…¨çš„æ–¹æ³•ã€‚å¦‚æœå˜é‡å­˜åœ¨ï¼Œå®ƒç›´æ¥è¿”å›å°è£…çš„å˜é‡å€¼ï¼Œå¦åˆ™å°±æŠ›å‡ºä¸€ä¸ªNoSuchElementExceptionå¼‚å¸¸ã€‚æ‰€ä»¥ï¼Œé™¤éä½ éå¸¸ç¡®å®šOptionalå˜é‡ä¸€å®šåŒ…å«å€¼ï¼Œå¦åˆ™ä½¿ç”¨è¿™ä¸ªæ–¹æ³•æ˜¯ä¸ªç›¸å½“ç³Ÿç³•çš„ä¸»æ„ã€‚æ­¤å¤–ï¼Œè¿™ç§æ–¹å¼å³ä¾¿ç›¸å¯¹äºåµŒå¥—å¼çš„nullæ£€æŸ¥ï¼Œä¹Ÿå¹¶æœªä½“ç°å‡ºå¤šå¤§çš„æ”¹è¿›ã€‚</li>
<li>orElse(T other)æ˜¯æˆ‘ä»¬åœ¨ä»£ç æ¸…å•10-5ä¸­ä½¿ç”¨çš„æ–¹æ³•ï¼Œæ­£å¦‚ä¹‹å‰æåˆ°çš„ï¼Œå®ƒå…è®¸ä½ åœ¨ Optionalå¯¹è±¡ä¸åŒ…å«å€¼æ—¶æä¾›ä¸€ä¸ªé»˜è®¤å€¼ã€‚</li>
<li>orElseGet(Supplier&lt;? extends T&gt; other)æ˜¯orElseæ–¹æ³•çš„å»¶è¿Ÿè°ƒç”¨ç‰ˆï¼ŒSupplier æ–¹æ³•åªæœ‰åœ¨Optionalå¯¹è±¡ä¸å«å€¼æ—¶æ‰æ‰§è¡Œè°ƒç”¨ã€‚å¦‚æœåˆ›å»ºé»˜è®¤å€¼æ˜¯ä»¶è€—æ—¶è´¹åŠ›çš„å·¥ä½œï¼Œä½ åº”è¯¥è€ƒè™‘é‡‡ç”¨è¿™ç§æ–¹å¼(å€Ÿæ­¤æå‡ç¨‹åºçš„æ€§èƒ½)ï¼Œæˆ–è€…ä½ éœ€è¦éå¸¸ç¡®å®šæŸä¸ªæ–¹æ³•ä»…åœ¨ Optionalä¸ºç©ºæ—¶æ‰è¿›è¡Œè°ƒç”¨ï¼Œä¹Ÿå¯ä»¥è€ƒè™‘è¯¥æ–¹å¼(è¿™ç§æƒ…å†µæœ‰ä¸¥æ ¼çš„é™åˆ¶æ¡ä»¶)ã€‚</li>
<li>orElseThrow(Supplier&lt;? extends X&gt; exceptionSupplier)å’Œgetæ–¹æ³•éå¸¸ç±»ä¼¼ï¼Œå®ƒä»¬é­é‡Optionalå¯¹è±¡ä¸ºç©ºæ—¶éƒ½ä¼šæŠ›å‡ºä¸€ä¸ªå¼‚å¸¸ï¼Œä½†æ˜¯ä½¿ç”¨orElseThrowä½ å¯ä»¥å®šåˆ¶ô³µå¸Œæœ›æŠ›å‡ºçš„å¼‚å¸¸ç±»å‹ã€‚</li>
<li>ifPresent(Consumer&lt;? super T&gt;)è®©ä½ èƒ½åœ¨å˜é‡å€¼å­˜åœ¨æ—¶æ‰§è¡Œä¸€ä¸ªä½œä¸ºå‚æ•°ä¼ å…¥çš„æ–¹æ³•ï¼Œå¦åˆ™å°±ä¸è¿›è¡Œä»»ä½•æ“ä½œã€‚</li>
</ol>
<h2 id="3-5-ä¸¤ä¸ªOptionalå¯¹è±¡çš„ç»„åˆ"><a href="#3-5-ä¸¤ä¸ªOptionalå¯¹è±¡çš„ç»„åˆ" class="headerlink" title="3.5 ä¸¤ä¸ªOptionalå¯¹è±¡çš„ç»„åˆ"></a>3.5 ä¸¤ä¸ªOptionalå¯¹è±¡çš„ç»„åˆ</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> Optional&lt;Insurance&gt; <span class="title">nullSafeFindCheapestInsurance</span><span class="params">(Optional&lt;Person&gt; person, Optional&lt;Car&gt; car)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (person.isPresent() &amp;&amp; car.isPresent()) &#123;</span><br><span class="line">        <span class="keyword">return</span> Optional.of(findCheapestInsurance(person.get(), car.get())); </span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> Optional.empty();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="3-6-ä½¿ç”¨filterå‰”é™¤ç‰¹å®šçš„å€¼"><a href="#3-6-ä½¿ç”¨filterå‰”é™¤ç‰¹å®šçš„å€¼" class="headerlink" title="3.6 ä½¿ç”¨filterå‰”é™¤ç‰¹å®šçš„å€¼"></a>3.6 ä½¿ç”¨filterå‰”é™¤ç‰¹å®šçš„å€¼</h2><p>filteræ–¹æ³•æ¥å—ä¸€ä¸ªè°“è¯ä½œä¸ºå‚æ•°ã€‚å¦‚æœOptionalå¯¹è±¡çš„å€¼å­˜åœ¨ï¼Œå¹¶ä¸”å®ƒç¬¦åˆè°“è¯çš„æ¡ä»¶ï¼Œ filteræ–¹æ³•å°±è¿”å›å…¶å€¼;å¦åˆ™å®ƒå°±è¿”å›ä¸€ä¸ªç©ºçš„Optionalå¯¹è±¡ã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">Insurance insurance = ...;</span><br><span class="line"><span class="keyword">if</span>(insurance != <span class="keyword">null</span> &amp;&amp; <span class="string">"CambridgeInsurance"</span>.equals(insurance.getName()))&#123;</span><br><span class="line">       System.out.println(<span class="string">"okâ€);</span></span><br><span class="line"><span class="string">&#125;</span></span><br><span class="line"><span class="string">Optional&lt;Insurance&gt; optInsurance = ...;</span></span><br><span class="line"><span class="string">optInsurance.filter(insurance -&gt;</span></span><br><span class="line"><span class="string">                        "</span>CambridgeInsurance<span class="string">".equals(insurance.getName()))</span></span><br><span class="line"><span class="string">            .ifPresent(x -&gt; System.out.println("</span>ok<span class="string">"));</span></span><br></pre></td></tr></table></figure>

<p>Optionalç±»ä¸­çš„æ–¹æ³•è¿›è¡Œäº†åˆ†ç±»å’Œæ¦‚æ‹¬:<br><img src="https://raw.githubusercontent.com/lujiahao0708/PicRepo/master/blogPic/10.%E3%80%8AJava%208%20in%20Action%E3%80%8BChapter%2010%EF%BC%9A%E7%94%A8Optional%E5%8F%96%E4%BB%A3null/4.png" alt=""><br><img src="https://raw.githubusercontent.com/lujiahao0708/PicRepo/master/blogPic/10.%E3%80%8AJava%208%20in%20Action%E3%80%8BChapter%2010%EF%BC%9A%E7%94%A8Optional%E5%8F%96%E4%BB%A3null/5.png" alt=""></p>
<h1 id="4-ä½¿ç”¨Optionalçš„å®æˆ˜ç¤ºä¾‹"><a href="#4-ä½¿ç”¨Optionalçš„å®æˆ˜ç¤ºä¾‹" class="headerlink" title="4. ä½¿ç”¨Optionalçš„å®æˆ˜ç¤ºä¾‹"></a>4. ä½¿ç”¨Optionalçš„å®æˆ˜ç¤ºä¾‹</h1><h2 id="4-1-ç”¨Optionalå°è£…å¯èƒ½ä¸ºnullçš„å€¼"><a href="#4-1-ç”¨Optionalå°è£…å¯èƒ½ä¸ºnullçš„å€¼" class="headerlink" title="4.1 ç”¨Optionalå°è£…å¯èƒ½ä¸ºnullçš„å€¼"></a>4.1 ç”¨Optionalå°è£…å¯èƒ½ä¸ºnullçš„å€¼</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Optional&lt;Object&gt; value = Optional.ofNullable(map.get(<span class="string">"key"</span>));</span><br></pre></td></tr></table></figure>
<p>æ¯æ¬¡ä½ å¸Œæœ›å®‰å…¨åœ°å¯¹æ½œåœ¨ä¸ºnullçš„å¯¹è±¡è¿›è¡Œè½¬æ¢ï¼Œå°†å…¶æ›¿æ¢ä¸ºOptionalå¯¹è±¡æ—¶ï¼Œéƒ½å¯ä»¥è€ƒè™‘ä½¿ç”¨è¿™ç§æ–¹æ³•ã€‚</p>
<h2 id="4-2-å¼‚å¸¸ä¸Optionalçš„å¯¹æ¯”"><a href="#4-2-å¼‚å¸¸ä¸Optionalçš„å¯¹æ¯”" class="headerlink" title="4.2 å¼‚å¸¸ä¸Optionalçš„å¯¹æ¯”"></a>4.2 å¼‚å¸¸ä¸Optionalçš„å¯¹æ¯”</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Optional&lt;Integer&gt; <span class="title">stringToInt</span><span class="params">(String s)</span> </span>&#123;</span><br><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line"><span class="keyword">return</span> Optional.of(Integer.parseInt(s));</span><br><span class="line">    &#125; <span class="keyword">catch</span> (NumberFormatException e) &#123;</span><br><span class="line">        <span class="keyword">return</span> Optional.empty();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æˆ‘ä»¬çš„å»ºè®®æ˜¯ï¼Œä½ å¯ä»¥å°†å¤šä¸ªç±»ä¼¼çš„æ–¹æ³•å°è£…åˆ°ä¸€ä¸ªå·¥å…·ç±»ä¸­ï¼Œè®©æˆ‘ä»¬ç§°ä¹‹ä¸ºOptionalUtilityã€‚é€šè¿‡è¿™ç§æ–¹å¼ï¼Œä½ ä»¥åå°±èƒ½ç›´æ¥è°ƒç”¨OptionalUtility.stringToIntæ–¹æ³•ï¼Œå°†Stringè½¬æ¢ä¸ºä¸€ä¸ªOptional<Integer>å¯¹è±¡ï¼Œè€Œä¸å†éœ€è¦è®°å¾—ä½ åœ¨å…¶ä¸­å°è£…äº†ç¬¨æ‹™çš„ try/catchçš„é€»è¾‘äº†ã€‚</p>
<h2 id="4-3-æŠŠæ‰€æœ‰å†…å®¹ç»“åˆèµ·æ¥"><a href="#4-3-æŠŠæ‰€æœ‰å†…å®¹ç»“åˆèµ·æ¥" class="headerlink" title="4.3 æŠŠæ‰€æœ‰å†…å®¹ç»“åˆèµ·æ¥"></a>4.3 æŠŠæ‰€æœ‰å†…å®¹ç»“åˆèµ·æ¥</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">readDuration</span><span class="params">(Properties props, String name)</span> </span>&#123;</span><br><span class="line">    String value = props.getProperty(name);</span><br><span class="line">    <span class="keyword">if</span> (value != <span class="keyword">null</span>) &#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="keyword">int</span> i = Integer.parseInt(value);</span><br><span class="line">            <span class="keyword">if</span> (i &gt; <span class="number">0</span>) &#123;</span><br><span class="line">                <span class="keyword">return</span> i;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (NumberFormatException nfe) &#123; &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>; </span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// ä¼˜åŒ–ç‰ˆæœ¬</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">readDuration</span><span class="params">(Properties props, String name)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> Optional.ofNullable(props.getProperty(name))</span><br><span class="line">                        .flatMap(OptionalUtility::stringToInt)</span><br><span class="line">                        .filter(i -&gt; i &gt; <span class="number">0</span>)</span><br><span class="line">                        .orElse(<span class="number">0</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="5-å°ç»“"><a href="#5-å°ç»“" class="headerlink" title="5. å°ç»“"></a>5. å°ç»“</h1><p>è¿™ä¸€ç« ä¸­ï¼Œä½ å­¦åˆ°äº†ä»¥ä¸‹çš„å†…å®¹ã€‚</p>
<ol>
<li>nullå¼•ç”¨åœ¨ä¸Šè¢«å¼•å…¥åˆ°ç¨‹åºè®¾è®¡è¯­è¨€ä¸­ï¼Œç›®çš„æ˜¯ä¸ºäº†è¡¨ç¤ºå˜é‡å€¼çš„ã€‚</li>
<li>Java 8ä¸­å¼•å…¥äº†ä¸€ä¸ªæ–°çš„ç±»java.util.Optional<T>ï¼Œå¯¹å­˜åœ¨æˆ–ç¼ºå¤±çš„å˜é‡å€¼è¿›è¡Œå»ºæ¨¡ã€‚</li>
<li>ä½ å¯ä»¥ä½¿ç”¨é™æ€å·¥å‚æ–¹æ³•Optional.emptyã€Optional.ofä»¥åŠOptional.ofNullableåˆ›å»ºOptionalå¯¹è±¡ã€‚</li>
<li>Optionalç±»æ”¯æŒå¤šç§æ–¹æ³•ï¼Œæ¯”å¦‚mapã€flatMapã€filterï¼Œå®ƒä»¬åœ¨æ¦‚å¿µä¸Šä¸Streamç±»ä¸­å¯¹åº”çš„æ–¹æ³•ååˆ†ç›¸ä¼¼ã€‚</li>
<li>ä½¿ç”¨Optionalä¼šä½¿ä½ æ›´ç§¯æåœ°è§£å¼•ç”¨Optionalå¯¹è±¡ï¼Œä»¥åº”å¯¹å˜é‡å€¼ç¼ºå¤±çš„é—®é¢˜ï¼Œæœ€ç»ˆï¼Œä½ èƒ½æ›´æœ‰æ•ˆåœ°æ­¢ä»£ç ä¸­å‡ºç°ä¸è€Œè‡³çš„ç©ºæŒ‡é’ˆå¼‚å¸¸ã€‚</li>
<li>ä½¿ç”¨Optionalèƒ½å¸®åŠ©ä½ è®¾è®¡æ›´å¥½çš„APIï¼Œç”¨æˆ·åªéœ€è¦é˜…è¯»æ–¹æ³•ç­¾åï¼Œå°±èƒ½äº†è§£è¯¥æ–¹æ³•æ˜¯å¦æ¥å—ä¸€ä¸ªOptionalç±»å‹çš„å€¼ã€‚</li>
</ol>
<h2 id="èµ„æºè·å–"><a href="#èµ„æºè·å–" class="headerlink" title="èµ„æºè·å–"></a>èµ„æºè·å–</h2><ul>
<li>å…¬ä¼—å·å›å¤ : Java8 å³å¯è·å–ã€ŠJava 8 in Actionã€‹ä¸­è‹±æ–‡ç‰ˆ!</li>
</ul>
<h2 id="Tips"><a href="#Tips" class="headerlink" title="Tips"></a>Tips</h2><ul>
<li>æ¬¢è¿æ”¶è—å’Œè½¬å‘ï¼Œæ„Ÿè°¢ä½ çš„æ”¯æŒï¼(à¹‘â€¢Ì€ã…‚â€¢Ì)Ùˆâœ§ </li>
<li>æ¬¢è¿å…³æ³¨æˆ‘ï¼šåç«¯å°å“¥ï¼Œä¸“æ³¨åç«¯å¼€å‘ï¼Œå¸Œæœ›å’Œä½ ä¸€èµ·è¿›æ­¥ï¼</li>
</ul>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta size-small is-uppercase level is-mobile"><div class="level-left"><time class="level-item" dateTime="2019-03-19T11:34:52.000Z" title="2019-03-19T11:34:52.000Z">2019-03-19</time><span class="level-item"><a class="link-muted" href="/categories/Java/">Java</a></span><span class="level-item">28 åˆ†é’Ÿ è¯»å®Œ (å¤§çº¦ 4155 ä¸ªå­—)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/p/3a45c3e5.html">ã€ŠJava 8 in Actionã€‹Chapter 9ï¼šé»˜è®¤æ–¹æ³•</a></h1><div class="content"><blockquote>
<p>ä¼ ç»Ÿä¸Šï¼ŒJavaç¨‹åºçš„æ¥å£æ˜¯å°†ç›¸å…³æ–¹æ³•æŒ‰ç…§çº¦å®šç»„åˆåˆ°ä¸€èµ·çš„æ–¹å¼ã€‚å®ç°æ¥å£çš„ç±»å¿…é¡»ä¸ºæ¥å£ä¸­å®šä¹‰çš„æ¯ä¸ªæ–¹æ³•æä¾›ä¸€ä¸ªå®ç°ï¼Œæˆ–è€…ä»çˆ¶ç±»ä¸­ç»§æ‰¿å®ƒçš„å®ç°ã€‚<br>ä½†æ˜¯ï¼Œä¸€æ—¦ç±»åº“çš„è®¾è®¡è€…éœ€è¦æ›´æ–°æ¥å£ï¼Œå‘å…¶ä¸­åŠ å…¥æ–°çš„æ–¹æ³•ï¼Œè¿™ç§æ–¹å¼å°±ä¼šå‡ºç°é—®é¢˜ã€‚ç°å®æƒ…å†µæ˜¯ï¼Œç°å­˜çš„å®ä½“ç±»å¾€å¾€ä¸åœ¨æ¥å£è®¾è®¡è€…çš„æ§åˆ¶èŒƒå›´ä¹‹å†…ï¼Œè¿™äº›å®ä½“ç±»ä¸ºäº†é€‚é…æ–°çš„æ¥å£çº¦å®šä¹Ÿéœ€è¦è¿›è¡Œä¿®æ”¹ã€‚<br>ç”±äºJava 8çš„APIåœ¨ç°å­˜çš„æ¥å£ä¸Šå¼•å…¥äº†éå¸¸å¤šçš„æ–°æ–¹æ³•ï¼Œè¿™ç§å˜åŒ–å¸¦æ¥çš„é—®é¢˜ä¹Ÿæ„ˆåŠ ä¸¥é‡ï¼Œä¸€ä¸ªä¾‹å­å°±æ˜¯å‰å‡ ç« ä¸­ä½¿ç”¨è¿‡çš„ List æ¥å£ä¸Šçš„ sort æ–¹æ³•ã€‚<br>æƒ³è±¡ä¸€ä¸‹å…¶ä»–å¤‡é€‰é›†åˆæ¡†æ¶çš„ç»´æŠ¤äººå‘˜ä¼šå¤šä¹ˆæŠ“ç‹‚å§ï¼ŒåƒGuavaå’ŒApache Commonsè¿™æ ·çš„æ¡†æ¶ç°åœ¨éƒ½éœ€è¦ä¿®æ”¹å®ç°äº† List æ¥å£çš„æ‰€æœ‰ç±»ï¼Œä¸ºå…¶æ·»åŠ sort æ–¹æ³•çš„å®ç°ã€‚<br>Java 8ä¸ºäº†è§£å†³è¿™ä¸€é—®é¢˜å¼•å…¥äº†ä¸€ç§æ–°çš„æœºåˆ¶ã€‚Java 8ä¸­çš„æ¥å£ç°åœ¨æ”¯æŒåœ¨å£°æ˜æ–¹æ³•çš„åŒæ—¶æä¾›å®ç°ï¼Œé€šè¿‡ä¸¤ç§æ–¹å¼å¯ä»¥å®Œæˆè¿™ç§æ“ä½œã€‚å…¶ä¸€ï¼ŒJava 8å…è®¸åœ¨æ¥å£å†…å£°æ˜é™æ€æ–¹æ³•ã€‚<br>å…¶äºŒï¼ŒJava 8å¼•å…¥äº†ä¸€ä¸ªæ–°åŠŸèƒ½ï¼Œå«é»˜è®¤æ–¹æ³•ï¼Œé€šè¿‡é»˜è®¤æ–¹æ³•ä½ å¯ä»¥æŒ‡å®šæ¥å£æ–¹æ³•çš„é»˜è®¤å®ç°ã€‚æ¢å¥è¯è¯´ï¼Œæ¥å£èƒ½æä¾›æ–¹æ³•çš„å…·ä½“å®ç°ã€‚å› æ­¤ï¼Œå®ç°æ¥å£çš„ç±»å¦‚æœä¸æ˜¾å¼åœ°æä¾›è¯¥æ–¹æ³•çš„å…·ä½“å®ç°ï¼Œ<br>å°±ä¼šè‡ªåŠ¨ç»§æ‰¿é»˜è®¤çš„å®ç°ã€‚è¿™ç§æœºåˆ¶å¯ä»¥ä½¿ä½ å¹³æ»‘åœ°è¿›è¡Œæ¥å£çš„ä¼˜åŒ–å’Œæ¼”è¿›ã€‚å®é™…ä¸Šï¼Œåˆ°ç›®å‰ä¸ºæ­¢ä½ å·²ç»ä½¿ç”¨äº†å¤šä¸ªé»˜è®¤æ–¹æ³•ã€‚ä¸¤ä¸ªä¾‹å­å°±æ˜¯ä½ å‰é¢å·²ç»è§è¿‡çš„ List æ¥å£ä¸­çš„ sort ï¼Œä»¥åŠ Collection æ¥å£ä¸­çš„ stream ã€‚</p>
</blockquote>
<p>ç¬¬1ç« ä¸­ List æ¥å£ä¸­çš„ sort æ–¹æ³•æ˜¯Java 8ä¸­å…¨æ–°çš„æ–¹æ³•ï¼Œå®ƒçš„å®šä¹‰å¦‚ä¸‹ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">default</span> <span class="keyword">void</span> <span class="title">sort</span><span class="params">(Comparator&lt;? <span class="keyword">super</span> E&gt; c)</span></span>&#123;</span><br><span class="line">    Collections.sort(<span class="keyword">this</span>, c);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è¯·æ³¨æ„è¿”å›ç±»å‹ä¹‹å‰çš„æ–° default ä¿®é¥°ç¬¦ã€‚é€šè¿‡å®ƒï¼Œæˆ‘ä»¬èƒ½å¤ŸçŸ¥é“ä¸€ä¸ªæ–¹æ³•æ˜¯å¦ä¸ºé»˜è®¤æ–¹æ³•ã€‚è¿™é‡Œ sort æ–¹æ³•è°ƒç”¨äº† Collections.sort æ–¹æ³•è¿›è¡Œæ’åºæ“ä½œã€‚ç”±äºæœ‰äº†è¿™ä¸ªæ–°çš„æ–¹æ³•ï¼Œæˆ‘ä»¬ç°åœ¨å¯ä»¥ç›´æ¥é€šè¿‡è°ƒç”¨ sort ï¼Œå¯¹åˆ—è¡¨ä¸­çš„å…ƒç´ è¿›è¡Œæ’åºã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">List&lt;Integer&gt; numbers = Arrays.asList(<span class="number">3</span>, <span class="number">5</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">6</span>);</span><br><span class="line">numbers.sort(Comparator.naturalOrder());</span><br></pre></td></tr></table></figure>
<p>ä¸è¿‡é™¤æ­¤ä¹‹å¤–ï¼Œè¿™æ®µä»£ç ä¸­è¿˜æœ‰äº›å…¶ä»–çš„æ–°ä¸œè¥¿ã€‚æˆ‘ä»¬è°ƒç”¨äº†Comparator.naturalOrder æ–¹æ³•ã€‚è¿™æ˜¯ Comparator æ¥å£çš„ä¸€ä¸ªå…¨æ–°çš„é™æ€æ–¹æ³•ï¼Œå®ƒè¿”å›ä¸€ä¸ªComparator å¯¹è±¡ï¼Œå¹¶æŒ‰è‡ªç„¶åºåˆ—å¯¹å…¶ä¸­çš„å…ƒç´ è¿›è¡Œæ’åºï¼ˆå³æ ‡å‡†çš„å­—æ¯æ•°å­—æ–¹å¼æ’åºï¼‰ã€‚<br>ç¬¬4ç« ä¸­çš„ Collection ä¸­çš„ stream æ–¹æ³•çš„å®šä¹‰å¦‚ä¸‹ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">default</span> Stream&lt;E&gt; <span class="title">stream</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> StreamSupport.stream(spliterator(), <span class="keyword">false</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æˆ‘ä»¬åœ¨ä¹‹å‰çš„å‡ ç« ä¸­å¤§é‡ä½¿ç”¨äº†è¯¥æ–¹æ³•æ¥å¤„ç†é›†åˆï¼Œè¿™é‡Œ stream æ–¹æ³•ä¸­è°ƒç”¨äº†SteamSupport.stream æ–¹æ³•æ¥è¿”å›ä¸€ä¸ªæµã€‚ä½ æ³¨æ„åˆ° stream æ–¹æ³•çš„ä¸»ä½“æ˜¯å¦‚ä½•è°ƒç”¨ spliterator æ–¹æ³•çš„äº†å—ï¼Ÿå®ƒä¹Ÿæ˜¯ Collection æ¥å£çš„ä¸€ä¸ªé»˜è®¤æ–¹æ³•ã€‚<br>æ¥å£å’ŒæŠ½è±¡ç±»è¿˜æ˜¯æœ‰ä¸€äº›æœ¬è´¨çš„åŒºåˆ«ï¼Œæˆ‘ä»¬åœ¨è¿™ä¸€ç« ä¸­ä¼šé’ˆå¯¹æ€§åœ°è¿›è¡Œè®¨è®ºã€‚<br>ç®€è€Œè¨€ä¹‹ï¼Œå‘æ¥å£æ·»åŠ æ–¹æ³•æ˜¯è¯¸å¤šé—®é¢˜çš„ç½ªæ¶ä¹‹æºï¼›ä¸€æ—¦æ¥å£å‘ç”Ÿå˜åŒ–ï¼Œå®ç°è¿™äº›æ¥å£çš„ç±»å¾€å¾€ä¹Ÿéœ€è¦æ›´æ–°ï¼Œæä¾›æ–°æ·»æ–¹æ³•çš„å®ç°æ‰èƒ½é€‚é…æ¥å£çš„å˜åŒ–ã€‚å¦‚æœä½ å¯¹æ¥å£ä»¥åŠå®ƒæ‰€æœ‰ç›¸å…³çš„å®ç°æœ‰å®Œå…¨çš„æ§åˆ¶ï¼Œè¿™å¯èƒ½ä¸æ˜¯ä¸ªå¤§é—®é¢˜ã€‚ä½†æ˜¯è¿™ç§æƒ…å†µæ˜¯æå°‘çš„ã€‚è¿™å°±æ˜¯å¼•å…¥é»˜è®¤æ–¹æ³•çš„ç›®çš„ï¼šå®ƒè®©ç±»å¯ä»¥è‡ªåŠ¨åœ°ç»§æ‰¿æ¥å£çš„ä¸€ä¸ªé»˜è®¤å®ç°ã€‚</p>
<p><img src="https://raw.githubusercontent.com/lujiahao0708/PicRepo/master/blogPic/09.%E3%80%8AJava%208%20in%20Action%E3%80%8BChapter%209%EF%BC%9A%E9%BB%98%E8%AE%A4%E6%96%B9%E6%B3%95/1.png" alt=""></p>
<h1 id="1-ä¸æ–­æ¼”è¿›çš„-API"><a href="#1-ä¸æ–­æ¼”è¿›çš„-API" class="headerlink" title="1. ä¸æ–­æ¼”è¿›çš„ API"></a>1. ä¸æ–­æ¼”è¿›çš„ API</h1><h2 id="1-1-åˆå§‹ç‰ˆæœ¬çš„-API"><a href="#1-1-åˆå§‹ç‰ˆæœ¬çš„-API" class="headerlink" title="1.1 åˆå§‹ç‰ˆæœ¬çš„ API"></a>1.1 åˆå§‹ç‰ˆæœ¬çš„ API</h2><p>Resizable æ¥å£çš„æœ€åˆç‰ˆæœ¬æä¾›äº†ä¸‹é¢è¿™äº›æ–¹æ³•ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">Drawable</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">draw</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">Resizable</span> <span class="keyword">extends</span> <span class="title">Drawable</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">getWidth</span><span class="params">()</span></span>;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">setWidth</span><span class="params">(<span class="keyword">int</span> width)</span></span>;</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">getHeight</span><span class="params">()</span></span>;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">setHeight</span><span class="params">(<span class="keyword">int</span> height)</span></span>;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">setAbsoluteSize</span><span class="params">(<span class="keyword">int</span> width, <span class="keyword">int</span> height)</span></span>;</span><br><span class="line">&#125;</span><br><span class="line">ç”¨æˆ·æ ¹æ®è‡ªèº«çš„éœ€æ±‚å®ç°äº† Resizable æ¥å£ï¼Œåˆ›å»ºäº† Ellipse ç±»ï¼š</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Ellipse</span> <span class="keyword">implements</span> <span class="title">Resizable</span> </span>&#123;</span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br><span class="line">ä»–å®ç°äº†ä¸€ä¸ªå¤„ç†å„ç§ Resizable å½¢çŠ¶ï¼ˆåŒ…æ‹¬ Ellipse ï¼‰çš„æ¸¸æˆï¼š</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Square</span> <span class="keyword">implements</span> <span class="title">Resizable</span> </span>&#123;</span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Triangle</span> <span class="keyword">implements</span> <span class="title">Resizable</span> </span>&#123;</span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Game</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        List&lt;Resizable&gt; resizableShapes =</span><br><span class="line">                Arrays.asList(<span class="keyword">new</span> Square(), <span class="keyword">new</span> Triangle(), <span class="keyword">new</span> Ellipse());</span><br><span class="line">        Utils.paint(resizableShapes);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Utils</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">paint</span><span class="params">(List&lt;Resizable&gt; list)</span> </span>&#123;</span><br><span class="line">        list.forEach(r -&gt; &#123;</span><br><span class="line">            r.setAbsoluteSize(<span class="number">42</span>, <span class="number">42</span>);</span><br><span class="line">            r.draw();</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="1-2-ç¬¬äºŒç‰ˆ-API"><a href="#1-2-ç¬¬äºŒç‰ˆ-API" class="headerlink" title="1.2 ç¬¬äºŒç‰ˆ API"></a>1.2 ç¬¬äºŒç‰ˆ API</h2><p>åº“ä¸Šçº¿ä½¿ç”¨å‡ ä¸ªæœˆä¹‹åï¼Œä½ æ”¶åˆ°å¾ˆå¤šè¯·æ±‚ï¼Œè¦æ±‚ä½ æ›´æ–° Resizable çš„å®ç°ï¼Œè®© Square Triangle ä»¥åŠå…¶ä»–çš„å½¢çŠ¶éƒ½èƒ½æ”¯æŒ setRelativeSize æ–¹æ³•ã€‚ä¸ºäº†æ»¡è¶³è¿™äº›æ–°çš„éœ€æ±‚ï¼Œä½ å‘å¸ƒäº†ç¬¬äºŒç‰ˆAPIã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">Resizable</span> <span class="keyword">extends</span> <span class="title">Drawable</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">getWidth</span><span class="params">()</span></span>;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">setWidth</span><span class="params">(<span class="keyword">int</span> width)</span></span>;</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">getHeight</span><span class="params">()</span></span>;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">setHeight</span><span class="params">(<span class="keyword">int</span> height)</span></span>;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">setAbsoluteSize</span><span class="params">(<span class="keyword">int</span> width, <span class="keyword">int</span> height)</span></span>;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">setRelativeSize</span><span class="params">(<span class="keyword">int</span> wFactor, <span class="keyword">int</span> hFactor)</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å¯¹ Resizable æ¥å£çš„æ›´æ–°å¯¼è‡´äº†ä¸€ç³»åˆ—çš„é—®é¢˜ã€‚é¦–å…ˆï¼Œæ¥å£ç°åœ¨è¦æ±‚å®ƒæ‰€æœ‰çš„å®ç°ç±»æ·»åŠ setRelativeSize æ–¹æ³•çš„å®ç°ã€‚ä½†æ˜¯ç”¨æˆ·æœ€åˆå®ç°çš„ Ellipse ç±»å¹¶æœªåŒ…å« setRelativeSizeæ–¹æ³•ã€‚å‘æ¥å£æ·»åŠ æ–°æ–¹æ³•æ˜¯äºŒè¿›åˆ¶å…¼å®¹çš„ï¼Œè¿™æ„å‘³ç€å¦‚æœä¸é‡æ–°ç¼–è¯‘è¯¥ç±»ï¼Œå³ä½¿ä¸å®ç°æ–°çš„æ–¹æ³•ï¼Œç°æœ‰ç±»çš„å®ç°ä¾æ—§å¯ä»¥è¿è¡Œã€‚ä¸è¿‡ï¼Œç”¨æˆ·å¯èƒ½ä¿®æ”¹ä»–çš„æ¸¸æˆï¼Œåœ¨ä»–çš„ Utils.paint æ–¹æ³•ä¸­è°ƒç”¨setRelativeSize æ–¹æ³•ï¼Œå› ä¸º paint æ–¹æ³•æ¥å—ä¸€ä¸ª Resizable å¯¹è±¡åˆ—è¡¨ä½œä¸ºå‚æ•°ã€‚å¦‚æœä¼ é€’çš„æ˜¯ä¸€ä¸ª Ellipse å¯¹è±¡ï¼Œç¨‹åºå°±ä¼šæŠ›å‡ºä¸€ä¸ªè¿è¡Œæ—¶é”™è¯¯ï¼Œå› ä¸ºå®ƒå¹¶æœªå®ç° setRelativeSize æ–¹æ³•ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Exception in thread <span class="string">"main"</span> java.lang.AbstractMethodError:lambdasinaction.chap9.Ellipse.setRelativeSize(II)V</span><br></pre></td></tr></table></figure>
<p>å…¶æ¬¡ï¼Œå¦‚æœç”¨æˆ·è¯•å›¾é‡æ–°ç¼–è¯‘æ•´ä¸ªåº”ç”¨ï¼ˆåŒ…æ‹¬ Ellipse ç±»ï¼‰ï¼Œä»–ä¼šé­é‡ä¸‹é¢çš„ç¼–è¯‘é”™è¯¯ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Error:(<span class="number">9</span>, <span class="number">8</span>) java: com.lujiahao.learnjava8.chapter9.Ellipseä¸æ˜¯æŠ½è±¡çš„, å¹¶ä¸”æœªè¦†ç›–</span><br><span class="line">com.lujiahao.learnjava8.chapter9.Resizableä¸­çš„æŠ½è±¡æ–¹æ³•setRelativeSize(<span class="keyword">int</span>,<span class="keyword">int</span>)</span><br></pre></td></tr></table></figure>
<p>è¿™å°±æ˜¯é»˜è®¤æ–¹æ³•è¯•å›¾è§£å†³çš„é—®é¢˜ã€‚å®ƒè®©ç±»åº“çš„è®¾è®¡è€…æ”¾å¿ƒåœ°æ”¹è¿›åº”ç”¨ç¨‹åºæ¥å£ï¼Œæ— éœ€æ‹…å¿§å¯¹é—ç•™ä»£ç çš„å½±å“ï¼Œè¿™æ˜¯å› ä¸ºå®ç°æ›´æ–°æ¥å£çš„ç±»ç°åœ¨ä¼šè‡ªåŠ¨ç»§æ‰¿ä¸€ä¸ªé»˜è®¤çš„æ–¹æ³•å®ç°ã€‚</p>
<p>å˜æ›´å¯¹Javaç¨‹åºçš„å½±å“å¤§ä½“å¯ä»¥åˆ†æˆä¸‰ç§ç±»å‹çš„å…¼å®¹æ€§ï¼Œåˆ†åˆ«æ˜¯:</p>
<ul>
<li>äºŒè¿›åˆ¶çº§çš„å…¼å®¹</li>
<li>æºä»£ç çº§çš„å…¼å®¹</li>
<li>å‡½æ•°è¡Œä¸ºçš„å…¼å®¹</li>
</ul>
<h1 id="2-æ¦‚è¿°é»˜è®¤æ–¹æ³•"><a href="#2-æ¦‚è¿°é»˜è®¤æ–¹æ³•" class="headerlink" title="2. æ¦‚è¿°é»˜è®¤æ–¹æ³•"></a>2. æ¦‚è¿°é»˜è®¤æ–¹æ³•</h1><p>é»˜è®¤æ–¹æ³•ç”± default ä¿®é¥°ç¬¦ä¿®é¥°ï¼Œå¹¶åƒç±»ä¸­å£°æ˜çš„å…¶ä»–æ–¹æ³•ä¸€æ ·åŒ…å«æ–¹æ³•ä½“ã€‚æ¯”å¦‚ï¼Œä½ å¯ä»¥åƒä¸‹é¢è¿™æ ·åœ¨é›†åˆåº“ä¸­å®šä¹‰ä¸€ä¸ªåä¸ºSized çš„æ¥å£ï¼Œåœ¨å…¶ä¸­å®šä¹‰ä¸€ä¸ªæŠ½è±¡æ–¹æ³• size ï¼Œä»¥åŠä¸€ä¸ªé»˜è®¤æ–¹æ³• isEmpty ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">Sized</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">size</span><span class="params">()</span></span>;</span><br><span class="line">    <span class="function"><span class="keyword">default</span> <span class="keyword">boolean</span> <span class="title">isEmpty</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> size() == <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è¿™æ ·ä»»ä½•ä¸€ä¸ªå®ç°äº† Sized æ¥å£çš„ç±»éƒ½ä¼šè‡ªåŠ¨ç»§æ‰¿ isEmpty çš„å®ç°ã€‚å› æ­¤ï¼Œå‘æä¾›äº†é»˜è®¤å®ç°çš„æ¥å£æ·»åŠ æ–¹æ³•å°±ä¸æ˜¯æºç å…¼å®¹çš„ã€‚<br>é»˜è®¤æ–¹æ³•åœ¨Java 8çš„APIä¸­å·²ç»å¤§é‡åœ°ä½¿ç”¨äº†ã€‚æœ¬ç« å·²ç»ä»‹ç»è¿‡æˆ‘ä»¬å‰ä¸€ç« ä¸­å¤§é‡ä½¿ç”¨çš„ Collection æ¥å£çš„ stream æ–¹æ³•å°±æ˜¯é»˜è®¤æ–¹æ³•ã€‚ List æ¥å£çš„ sort æ–¹æ³•ä¹Ÿæ˜¯é»˜è®¤æ–¹æ³•ã€‚ç¬¬3ç« ä»‹ç»çš„å¾ˆå¤šå‡½æ•°å¼æ¥å£ï¼Œæ¯”å¦‚ Predicate ã€ Function ä»¥åŠ Comparator ä¹Ÿå¼•å…¥äº†æ–°çš„é»˜è®¤æ–¹æ³•ï¼Œæ¯”å¦‚ Predicate.and æˆ–è€… Function.andThen ï¼ˆè®°ä½ï¼Œå‡½æ•°å¼æ¥å£åªåŒ…å«ä¸€ä¸ªæŠ½è±¡æ–¹æ³•ï¼Œé»˜è®¤æ–¹æ³•æ˜¯ç§éæŠ½è±¡æ–¹æ³•ï¼‰ã€‚</p>
<h1 id="3-é»˜è®¤æ–¹æ³•çš„ä½¿ç”¨æ¨¡å¼"><a href="#3-é»˜è®¤æ–¹æ³•çš„ä½¿ç”¨æ¨¡å¼" class="headerlink" title="3. é»˜è®¤æ–¹æ³•çš„ä½¿ç”¨æ¨¡å¼"></a>3. é»˜è®¤æ–¹æ³•çš„ä½¿ç”¨æ¨¡å¼</h1><h2 id="3-1-å¯é€‰æ–¹æ³•"><a href="#3-1-å¯é€‰æ–¹æ³•" class="headerlink" title="3.1 å¯é€‰æ–¹æ³•"></a>3.1 å¯é€‰æ–¹æ³•</h2><p>ç±»å®ç°äº†æ¥å£ï¼Œä¸è¿‡å´åˆ»æ„åœ°å°†ä¸€äº›æ–¹æ³•çš„å®ç°ç•™ç™½ã€‚æˆ‘ä»¬ä»¥Iterator æ¥å£ä¸ºä¾‹æ¥è¯´ã€‚ Iterator æ¥å£å®šä¹‰äº† hasNext ã€ next ï¼Œè¿˜å®šä¹‰äº† remove æ–¹æ³•ã€‚Java 8ä¹‹å‰ï¼Œç”±äºç”¨æˆ·é€šå¸¸ä¸ä¼šä½¿ç”¨è¯¥æ–¹æ³•ï¼Œ remove æ–¹æ³•å¸¸è¢«å¿½ç•¥ã€‚å› æ­¤ï¼Œå®ç° Interator æ¥å£çš„ç±»é€šå¸¸ä¼šä¸º remove æ–¹æ³•æ”¾ç½®ä¸€ä¸ªç©ºçš„å®ç°ï¼Œè¿™äº›éƒ½æ˜¯äº›æ¯«æ— ç”¨å¤„çš„æ¨¡æ¿ä»£ç ã€‚é‡‡ç”¨é»˜è®¤æ–¹æ³•ä¹‹åï¼Œä½ å¯ä»¥ä¸ºè¿™ç§ç±»å‹çš„æ–¹æ³•æä¾›ä¸€ä¸ªé»˜è®¤çš„å®ç°ï¼Œè¿™æ ·å®ä½“ç±»å°±æ— éœ€åœ¨è‡ªå·±çš„å®ç°ä¸­æ˜¾å¼åœ°æä¾›ä¸€ä¸ªç©ºæ–¹æ³•ã€‚æ¯”å¦‚ï¼Œåœ¨Java 8ä¸­ï¼Œ Iterator æ¥å£å°±ä¸º remove æ–¹æ³•æä¾›äº†ä¸€ä¸ªé»˜è®¤å®ç°ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">Iterator</span>&lt;<span class="title">E</span>&gt; </span>&#123;</span><br><span class="line">    ...</span><br><span class="line">    <span class="function"><span class="keyword">default</span> <span class="keyword">void</span> <span class="title">remove</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> UnsupportedOperationException(<span class="string">"remove"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="3-2-è¡Œä¸ºçš„å¤šç»§æ‰¿"><a href="#3-2-è¡Œä¸ºçš„å¤šç»§æ‰¿" class="headerlink" title="3.2 è¡Œä¸ºçš„å¤šç»§æ‰¿"></a>3.2 è¡Œä¸ºçš„å¤šç»§æ‰¿</h2><p>é»˜è®¤æ–¹æ³•è®©ä¹‹å‰æ— æ³•æƒ³è±¡çš„äº‹å„¿ä»¥ä¸€ç§ä¼˜é›…çš„æ–¹å¼å¾—ä»¥å®ç°ï¼Œå³è¡Œä¸ºçš„å¤šç»§æ‰¿ã€‚è¿™æ˜¯ä¸€ç§è®©ç±»ä»å¤šä¸ªæ¥æºé‡ç”¨ä»£ç çš„èƒ½åŠ›ã€‚<br><img src="https://raw.githubusercontent.com/lujiahao0708/PicRepo/master/blogPic/09.%E3%80%8AJava%208%20in%20Action%E3%80%8BChapter%209%EF%BC%9A%E9%BB%98%E8%AE%A4%E6%96%B9%E6%B3%95/2.png" alt=""></p>
<p>Javaçš„ç±»åªèƒ½ç»§æ‰¿å•ä¸€çš„ç±»ï¼Œä½†æ˜¯ä¸€ä¸ªç±»å¯ä»¥å®ç°å¤šæ¥å£ã€‚è¦ç¡®è®¤ä¹Ÿå¾ˆç®€å•ï¼Œä¸‹é¢æ˜¯Java APIä¸­å¯¹ ArrayList ç±»çš„å®šä¹‰ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ArrayList</span>&lt;<span class="title">E</span>&gt; <span class="keyword">extends</span> <span class="title">AbstractList</span>&lt;<span class="title">E</span>&gt;</span></span><br><span class="line"><span class="class">        <span class="keyword">implements</span> <span class="title">List</span>&lt;<span class="title">E</span>&gt;, <span class="title">RandomAccess</span>, <span class="title">Cloneable</span>, <span class="title">java</span>.<span class="title">io</span>.<span class="title">Serializable</span> </span>&#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="3-2-1-ç±»å‹çš„å¤šç»§æ‰¿"><a href="#3-2-1-ç±»å‹çš„å¤šç»§æ‰¿" class="headerlink" title="3.2.1 ç±»å‹çš„å¤šç»§æ‰¿"></a>3.2.1 ç±»å‹çš„å¤šç»§æ‰¿</h3><p>è¿™ä¸ªä¾‹å­ä¸­ ArrayList ç»§æ‰¿äº†ä¸€ä¸ªç±»ï¼Œå®ç°äº†å…­ä¸ªæ¥å£ã€‚å› æ­¤ ArrayList å®é™…æ˜¯ä¸ƒä¸ªç±»å‹çš„ç›´æ¥å­ç±»ï¼Œåˆ†åˆ«æ˜¯ï¼š AbstractList ã€ List ã€ RandomAccess ã€ Cloneable ã€ Serializable ã€Iterable å’Œ Collection ã€‚æ‰€ä»¥ï¼Œåœ¨æŸç§ç¨‹åº¦ä¸Šï¼Œæˆ‘ä»¬æ—©å°±æœ‰äº†ç±»å‹çš„å¤šç»§æ‰¿ã€‚<br>ç”±äºJava 8ä¸­æ¥å£æ–¹æ³•å¯ä»¥åŒ…å«å®ç°ï¼Œç±»å¯ä»¥ä»å¤šä¸ªæ¥å£ä¸­ç»§æ‰¿å®ƒä»¬çš„è¡Œä¸ºï¼ˆå³å®ç°çš„ä»£ç ï¼‰ã€‚è®©æˆ‘ä»¬ä»ä¸€ä¸ªä¾‹å­å…¥æ‰‹ï¼Œçœ‹çœ‹å¦‚ä½•å……åˆ†åˆ©ç”¨è¿™ç§èƒ½åŠ›æ¥ä¸ºæˆ‘ä»¬æœåŠ¡ã€‚ä¿æŒæ¥å£çš„ç²¾è‡´æ€§å’Œæ­£äº¤æ€§èƒ½å¸®åŠ©ä½ åœ¨ç°æœ‰çš„ä»£ç åŸºä¸Šæœ€å¤§ç¨‹åº¦åœ°å®ç°ä»£ç å¤ç”¨å’Œè¡Œä¸ºç»„åˆã€‚</p>
<h3 id="3-2-2-åˆ©ç”¨æ­£äº¤æ–¹æ³•çš„ç²¾ç®€æ¥å£"><a href="#3-2-2-åˆ©ç”¨æ­£äº¤æ–¹æ³•çš„ç²¾ç®€æ¥å£" class="headerlink" title="3.2.2 åˆ©ç”¨æ­£äº¤æ–¹æ³•çš„ç²¾ç®€æ¥å£"></a>3.2.2 åˆ©ç”¨æ­£äº¤æ–¹æ³•çš„ç²¾ç®€æ¥å£</h3><p>å‡è®¾ä½ éœ€è¦ä¸ºä½ æ­£åœ¨åˆ›å»ºçš„æ¸¸æˆå®šä¹‰å¤šä¸ªå…·æœ‰ä¸åŒç‰¹è´¨çš„å½¢çŠ¶ã€‚æœ‰çš„å½¢çŠ¶éœ€è¦è°ƒæ•´å¤§å°ï¼Œä½†æ˜¯ä¸éœ€è¦æœ‰æ—‹è½¬çš„åŠŸèƒ½ï¼›æœ‰çš„éœ€è¦èƒ½æ—‹è½¬å’Œç§»åŠ¨ï¼Œä½†æ˜¯ä¸éœ€è¦è°ƒæ•´å¤§å°ã€‚è¿™ç§æƒ…å†µä¸‹ï¼Œä½ æ€ä¹ˆè®¾è®¡æ‰èƒ½å°½å¯èƒ½åœ°é‡ç”¨ä»£ç ï¼Ÿ<br>ä½ å¯ä»¥å®šä¹‰ä¸€ä¸ªå•ç‹¬çš„ Rotatable æ¥å£ï¼Œå¹¶æä¾›ä¸¤ä¸ªæŠ½è±¡æ–¹æ³• setRotationAngle å’ŒgetRotationAngle ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">Rotatable</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">getRotationAngle</span><span class="params">()</span></span>;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">setRotationAngle</span><span class="params">(<span class="keyword">int</span> angleInDegrees)</span></span>;</span><br><span class="line">    <span class="function"><span class="keyword">default</span> <span class="keyword">void</span> <span class="title">rotateBy</span><span class="params">(<span class="keyword">int</span> angleInDegrees)</span> </span>&#123;</span><br><span class="line">        setRotationAngle((getRotationAngle() + angleInDegrees) % <span class="number">360</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è¿™ç§æ–¹å¼å’Œæ¨¡æ¿è®¾è®¡æ¨¡å¼æœ‰äº›ç›¸ä¼¼ï¼Œéƒ½æ˜¯ä»¥å…¶ä»–æ–¹æ³•éœ€è¦å®ç°çš„æ–¹æ³•å®šä¹‰å¥½æ¡†æ¶ç®—æ³•ã€‚<br>ç°åœ¨ï¼Œå®ç°äº† Rotatable çš„æ‰€æœ‰ç±»éƒ½éœ€è¦æä¾› setRotationAngle å’Œ getRotationAngleçš„å®ç°ï¼Œä½†ä¸æ­¤åŒæ—¶å®ƒä»¬ä¹Ÿä¼šå¤©ç„¶åœ°ç»§æ‰¿ rotateBy çš„é»˜è®¤å®ç°ã€‚<br>ç±»ä¼¼åœ°ï¼Œä½ å¯ä»¥å®šä¹‰ä¹‹å‰çœ‹åˆ°çš„ä¸¤ä¸ªæ¥å£ Moveable å’Œ Resizable ã€‚å®ƒä»¬éƒ½åŒ…å«äº†é»˜è®¤å®ç°ã€‚ä¸‹é¢æ˜¯ Moveable çš„ä»£ç ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">Moveable</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">getX</span><span class="params">()</span></span>;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">setX</span><span class="params">(<span class="keyword">int</span> x)</span></span>;</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">getY</span><span class="params">()</span></span>;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">setY</span><span class="params">(<span class="keyword">int</span> y)</span></span>;</span><br><span class="line">    <span class="function"><span class="keyword">default</span> <span class="keyword">void</span> <span class="title">moveHorizontally</span><span class="params">(<span class="keyword">int</span> distance)</span> </span>&#123;</span><br><span class="line">        setX(getX() + distance);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">default</span> <span class="keyword">void</span> <span class="title">moveVertically</span><span class="params">(<span class="keyword">int</span> distance)</span> </span>&#123;</span><br><span class="line">        setY(getY() + distance);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">ä¸‹é¢æ˜¯ Resizable çš„ä»£ç ï¼š</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">Resizable</span> <span class="keyword">extends</span> <span class="title">Drawable</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">getWidth</span><span class="params">()</span></span>;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">setWidth</span><span class="params">(<span class="keyword">int</span> width)</span></span>;</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">getHeight</span><span class="params">()</span></span>;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">setHeight</span><span class="params">(<span class="keyword">int</span> height)</span></span>;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">setAbsoluteSize</span><span class="params">(<span class="keyword">int</span> width, <span class="keyword">int</span> height)</span></span>;</span><br><span class="line">    <span class="function"><span class="keyword">default</span> <span class="keyword">void</span> <span class="title">setRelativeSize</span><span class="params">(<span class="keyword">int</span> wFactor, <span class="keyword">int</span> hFactor)</span></span>&#123;</span><br><span class="line">        setAbsoluteSize(getWidth() / wFactor, getHeight() / hFactor);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="3-2-3-ç»„åˆæ¥å£"><a href="#3-2-3-ç»„åˆæ¥å£" class="headerlink" title="3.2.3 ç»„åˆæ¥å£"></a>3.2.3 ç»„åˆæ¥å£</h3><p>é€šè¿‡ç»„åˆè¿™äº›æ¥å£ï¼Œä½ ç°åœ¨å¯ä»¥ä¸ºä½ çš„æ¸¸æˆåˆ›å»ºä¸åŒçš„å®ä½“ç±»ã€‚æ¯”å¦‚ï¼Œ Monster å¯ä»¥ç§»åŠ¨ã€æ—‹è½¬å’Œç¼©æ”¾ã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Monster</span> <span class="keyword">implements</span> <span class="title">Rotatable</span>, <span class="title">Moveable</span>, <span class="title">Resizable</span> </span>&#123;</span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Monster ç±»ä¼šè‡ªåŠ¨ç»§æ‰¿ Rotatable ã€ Moveable å’Œ Resizable æ¥å£çš„é»˜è®¤æ–¹æ³•ã€‚è¿™ä¸ªä¾‹å­ä¸­ï¼ŒMonster ç»§æ‰¿äº† rotateBy ã€ moveHorizontally ã€ moveVertically å’Œ setRelativeSize çš„å®ç°ã€‚<br>ä½ ç°åœ¨å¯ä»¥ç›´æ¥è°ƒç”¨ä¸åŒçš„æ–¹æ³•ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Monster m = <span class="keyword">new</span> Monster();</span><br><span class="line">m.rotateBy(<span class="number">180</span>);</span><br><span class="line">m.moveVertically(<span class="number">10</span>);</span><br></pre></td></tr></table></figure>
<p>åƒä½ çš„æ¸¸æˆä»£ç é‚£æ ·ä½¿ç”¨é»˜è®¤å®ç°æ¥å®šä¹‰ç®€å•çš„æ¥å£è¿˜æœ‰å¦ä¸€ä¸ªå¥½å¤„ã€‚å‡è®¾ä½ éœ€è¦ä¿®æ”¹moveVertically çš„å®ç°ï¼Œè®©å®ƒæ›´é«˜æ•ˆåœ°è¿è¡Œã€‚ä½ å¯ä»¥åœ¨ Moveable æ¥å£å†…ç›´æ¥ä¿®æ”¹å®ƒçš„å®ç°ï¼Œæ‰€æœ‰å®ç°è¯¥æ¥å£çš„ç±»ä¼šè‡ªåŠ¨ç»§æ‰¿æ–°çš„ä»£ç ï¼ˆè¿™é‡Œæˆ‘ä»¬å‡è®¾ç”¨æˆ·å¹¶æœªå®šä¹‰è‡ªå·±çš„æ–¹æ³•å®ç°ï¼‰ã€‚<br>é€šè¿‡å‰é¢çš„ä»‹ç»ï¼Œä½ å·²ç»äº†è§£äº†é»˜è®¤æ–¹æ³•å¤šç§å¼ºå¤§çš„ä½¿ç”¨æ¨¡å¼ã€‚ä¸è¿‡ä¹Ÿå¯èƒ½è¿˜æœ‰ä¸€äº›ç–‘æƒ‘ï¼šå¦‚æœä¸€ä¸ªç±»åŒæ—¶å®ç°äº†ä¸¤ä¸ªæ¥å£ï¼Œè¿™ä¸¤ä¸ªæ¥å£æ°å·§åˆæä¾›äº†åŒæ ·çš„é»˜è®¤æ–¹æ³•ç­¾åï¼Œè¿™æ—¶ä¼šå‘ç”Ÿä»€ä¹ˆæƒ…å†µï¼Ÿç±»ä¼šé€‰æ‹©ä½¿ç”¨å“ªä¸€ä¸ªæ–¹æ³•ï¼Ÿè¿™äº›é—®é¢˜ï¼Œæˆ‘ä»¬ä¼šåœ¨æ¥ä¸‹æ¥çš„ä¸€èŠ‚è¿›è¡Œè®¨è®ºã€‚</p>
<h1 id="4-è§£å†³å†²çªçš„è§„åˆ™"><a href="#4-è§£å†³å†²çªçš„è§„åˆ™" class="headerlink" title="4. è§£å†³å†²çªçš„è§„åˆ™"></a>4. è§£å†³å†²çªçš„è§„åˆ™</h1><p>éšç€é»˜è®¤æ–¹æ³•åœ¨Java 8ä¸­å¼•å…¥ï¼Œæœ‰å¯èƒ½å‡ºç°ä¸€ä¸ªç±»ç»§æ‰¿äº†å¤šä¸ªæ–¹æ³•è€Œå®ƒä»¬ä½¿ç”¨çš„å´æ˜¯åŒæ ·çš„å‡½æ•°ç­¾åã€‚è¿™ç§æƒ…å†µä¸‹ï¼Œç±»ä¼šé€‰æ‹©ä½¿ç”¨å“ªä¸€ä¸ªå‡½æ•°ï¼Ÿæ¥ä¸‹æ¥çš„ä¾‹å­ä¸»è¦ç”¨äºè¯´æ˜å®¹æ˜“å‡ºé—®é¢˜çš„åœºæ™¯ï¼Œå¹¶ä¸è¡¨ç¤ºè¿™äº›åœºæ™¯åœ¨å®é™…å¼€å‘è¿‡ç¨‹ä¸­ä¼šç»å¸¸å‘ç”Ÿã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">A</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">default</span> <span class="keyword">void</span> <span class="title">hello</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"Hello from A"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">B</span> <span class="keyword">extends</span> <span class="title">A</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">default</span> <span class="keyword">void</span> <span class="title">hello</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"Hello from B"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">C</span> <span class="keyword">implements</span> <span class="title">A</span>, <span class="title">B</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// çŒœçŒœæ‰“å°çš„æ˜¯ä»€ä¹ˆï¼Ÿ</span></span><br><span class="line">        <span class="keyword">new</span> C().hello();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æ­¤å¤–ï¼Œä½ å¯èƒ½æ—©å°±å¯¹C++è¯­è¨€ä¸­è‘—åçš„è±å½¢ç»§æ‰¿é—®é¢˜æœ‰æ‰€äº†è§£ï¼Œè±å½¢ç»§æ‰¿é—®é¢˜ä¸­ä¸€ä¸ªç±»åŒæ—¶ç»§æ‰¿äº†å…·æœ‰ç›¸åŒå‡½æ•°ç­¾åçš„ä¸¤ä¸ªæ–¹æ³•ã€‚åˆ°åº•è¯¥é€‰æ‹©å“ªä¸€ä¸ªå®ç°å‘¢ï¼Ÿ Java 8ä¹Ÿæä¾›äº†è§£å†³è¿™ä¸ªé—®é¢˜çš„æ–¹æ¡ˆã€‚è¯·æ¥ç€é˜…è¯»ä¸‹é¢çš„å†…å®¹ã€‚</p>
<h2 id="4-1-è§£å†³é—®é¢˜çš„ä¸‰æ¡è§„åˆ™"><a href="#4-1-è§£å†³é—®é¢˜çš„ä¸‰æ¡è§„åˆ™" class="headerlink" title="4.1 è§£å†³é—®é¢˜çš„ä¸‰æ¡è§„åˆ™"></a>4.1 è§£å†³é—®é¢˜çš„ä¸‰æ¡è§„åˆ™</h2><p>å¦‚æœä¸€ä¸ªç±»ä½¿ç”¨ç›¸åŒçš„å‡½æ•°ç­¾åä»å¤šä¸ªåœ°æ–¹ï¼ˆæ¯”å¦‚å¦ä¸€ä¸ªç±»æˆ–æ¥å£ï¼‰ç»§æ‰¿äº†æ–¹æ³•ï¼Œé€šè¿‡ä¸‰æ¡è§„åˆ™å¯ä»¥è¿›è¡Œåˆ¤æ–­ã€‚</p>
<ol>
<li>ç±»ä¸­çš„æ–¹æ³•ä¼˜å…ˆçº§æœ€é«˜ã€‚ç±»æˆ–çˆ¶ç±»ä¸­å£°æ˜çš„æ–¹æ³•çš„ä¼˜å…ˆçº§é«˜äºä»»ä½•å£°æ˜ä¸ºé»˜è®¤æ–¹æ³•çš„ä¼˜å…ˆçº§ã€‚</li>
<li>å¦‚æœæ— æ³•ä¾æ®ç¬¬ä¸€æ¡è¿›è¡Œåˆ¤æ–­ï¼Œé‚£ä¹ˆå­æ¥å£çš„ä¼˜å…ˆçº§æ›´é«˜ï¼šå‡½æ•°ç­¾åç›¸åŒæ—¶ï¼Œä¼˜å…ˆé€‰æ‹©æ‹¥æœ‰æœ€å…·ä½“å®ç°çš„é»˜è®¤æ–¹æ³•çš„æ¥å£ï¼Œå³å¦‚æœ B ç»§æ‰¿äº† A ï¼Œé‚£ä¹ˆ B å°±æ¯” A æ›´åŠ å…·ä½“ã€‚</li>
<li>æœ€åï¼Œå¦‚æœè¿˜æ˜¯æ— æ³•åˆ¤æ–­ï¼Œç»§æ‰¿äº†å¤šä¸ªæ¥å£çš„ç±»å¿…é¡»é€šè¿‡æ˜¾å¼è¦†ç›–å’Œè°ƒç”¨æœŸæœ›çš„æ–¹æ³•ï¼Œæ˜¾å¼åœ°é€‰æ‹©ä½¿ç”¨å“ªä¸€ä¸ªé»˜è®¤æ–¹æ³•çš„å®ç°ã€‚</li>
</ol>
<h2 id="4-2-è±å½¢ç»§æ‰¿é—®é¢˜"><a href="#4-2-è±å½¢ç»§æ‰¿é—®é¢˜" class="headerlink" title="4.2 è±å½¢ç»§æ‰¿é—®é¢˜"></a>4.2 è±å½¢ç»§æ‰¿é—®é¢˜</h2><p><img src="https://raw.githubusercontent.com/lujiahao0708/PicRepo/master/blogPic/09.%E3%80%8AJava%208%20in%20Action%E3%80%8BChapter%209%EF%BC%9A%E9%BB%98%E8%AE%A4%E6%96%B9%E6%B3%95/3.png" alt=""></p>
<p>äº†è§£å³å¯</p>
<h1 id="5-å°ç»“"><a href="#5-å°ç»“" class="headerlink" title="5. å°ç»“"></a>5. å°ç»“</h1><ol>
<li>Java 8ä¸­çš„æ¥å£å¯ä»¥é€šè¿‡é»˜è®¤æ–¹æ³•å’Œé™æ€æ–¹æ³•æä¾›æ–¹æ³•çš„ä»£ç å®ç°ã€‚</li>
<li>é»˜è®¤æ–¹æ³•çš„å¼€å¤´ä»¥å…³é”®å­— default ä¿®é¥°ï¼Œæ–¹æ³•ä½“ä¸å¸¸è§„çš„ç±»æ–¹æ³•ç›¸åŒã€‚</li>
<li>å‘å‘å¸ƒçš„æ¥å£æ·»åŠ æŠ½è±¡æ–¹æ³•ä¸æ˜¯æºç å…¼å®¹çš„ã€‚</li>
<li>é»˜è®¤æ–¹æ³•çš„å‡ºç°èƒ½å¸®åŠ©åº“çš„è®¾è®¡è€…ä»¥åå‘å…¼å®¹çš„æ–¹å¼æ¼”è¿›APIã€‚</li>
<li>é»˜è®¤æ–¹æ³•å¯ä»¥ç”¨äºåˆ›å»ºå¯é€‰æ–¹æ³•å’Œè¡Œä¸ºçš„å¤šç»§æ‰¿ã€‚</li>
<li>æˆ‘ä»¬æœ‰åŠæ³•è§£å†³ç”±äºä¸€ä¸ªç±»ä»å¤šä¸ªæ¥å£ä¸­ç»§æ‰¿äº†æ‹¥æœ‰ç›¸åŒå‡½æ•°ç­¾åçš„æ–¹æ³•è€Œå¯¼è‡´çš„å†²çªã€‚</li>
<li>ç±»æˆ–è€…çˆ¶ç±»ä¸­å£°æ˜çš„æ–¹æ³•çš„ä¼˜å…ˆçº§é«˜äºä»»ä½•é»˜è®¤æ–¹æ³•ã€‚å¦‚æœå‰ä¸€æ¡æ— æ³•è§£å†³å†²çªï¼Œé‚£å°±é€‰æ‹©åŒå‡½æ•°ç­¾åçš„æ–¹æ³•ä¸­å®ç°å¾—æœ€å…·ä½“çš„é‚£ä¸ªæ¥å£çš„æ–¹æ³•ã€‚</li>
<li>ä¸¤ä¸ªé»˜è®¤æ–¹æ³•éƒ½åŒæ ·å…·ä½“æ—¶ï¼Œä½ éœ€è¦åœ¨ç±»ä¸­è¦†ç›–è¯¥æ–¹æ³•ï¼Œæ˜¾å¼åœ°é€‰æ‹©ä½¿ç”¨å“ªä¸ªæ¥å£ä¸­æä¾›çš„é»˜è®¤æ–¹æ³•ã€‚</li>
</ol>
<h2 id="èµ„æºè·å–"><a href="#èµ„æºè·å–" class="headerlink" title="èµ„æºè·å–"></a>èµ„æºè·å–</h2><ul>
<li>å…¬ä¼—å·å›å¤ : Java8 å³å¯è·å–ã€ŠJava 8 in Actionã€‹ä¸­è‹±æ–‡ç‰ˆ!</li>
</ul>
<h2 id="Tips"><a href="#Tips" class="headerlink" title="Tips"></a>Tips</h2><ul>
<li>æ¬¢è¿æ”¶è—å’Œè½¬å‘ï¼Œæ„Ÿè°¢ä½ çš„æ”¯æŒï¼(à¹‘â€¢Ì€ã…‚â€¢Ì)Ùˆâœ§ </li>
<li>æ¬¢è¿å…³æ³¨æˆ‘ï¼šåç«¯å°å“¥ï¼Œä¸“æ³¨åç«¯å¼€å‘ï¼Œå¸Œæœ›å’Œä½ ä¸€èµ·è¿›æ­¥ï¼</li>
</ul>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta size-small is-uppercase level is-mobile"><div class="level-left"><time class="level-item" dateTime="2019-03-18T11:34:52.000Z" title="2019-03-18T11:34:52.000Z">2019-03-18</time><span class="level-item"><a class="link-muted" href="/categories/Java/">Java</a></span><span class="level-item">21 åˆ†é’Ÿ è¯»å®Œ (å¤§çº¦ 3124 ä¸ªå­—)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/p/9d40e29b.html">ã€ŠJava 8 in Actionã€‹Chapter 8ï¼šé‡æ„ã€æµ‹è¯•å’Œè°ƒè¯•</a></h1><div class="content"><blockquote>
<p>æˆ‘ä»¬ä¼šä»‹ç»å‡ ç§æ–¹æ³•ï¼Œå¸®åŠ©ä½ é‡æ„ä»£ç ï¼Œä»¥é€‚é…ä½¿ç”¨Lambdaè¡¨è¾¾å¼ï¼Œè®©ä½ çš„ä»£ç å…·å¤‡æ›´å¥½çš„å¯è¯»æ€§å’Œçµæ´»æ€§ã€‚é™¤æ­¤ä¹‹å¤–ï¼Œæˆ‘ä»¬è¿˜ä¼šè®¨è®ºç›®å‰æ¯”è¾ƒæµè¡Œçš„å‡ ç§é¢å‘å¯¹è±¡çš„è®¾è®¡æ¨¡å¼ï¼Œ<br>åŒ…æ‹¬ç­–ç•¥æ¨¡å¼ã€æ¨¡æ¿æ–¹æ³•æ¨¡å¼ã€è§‚å¯Ÿè€…æ¨¡å¼ã€è´£ä»»é“¾æ¨¡å¼ï¼Œä»¥åŠå·¥å‚æ¨¡å¼ï¼Œåœ¨ç»“åˆLambdaè¡¨è¾¾å¼ä¹‹åå˜å¾—æ›´ç®€æ´çš„æƒ…å†µã€‚æœ€åï¼Œæˆ‘ä»¬ä¼šä»‹ç»å¦‚ä½•æµ‹è¯•å’Œè°ƒè¯•ä½¿ç”¨Lambdaè¡¨è¾¾å¼å’ŒStream APIçš„ä»£ç ã€‚</p>
</blockquote>
<h1 id="1-ä¸ºæ”¹å–„å¯è¯»æ€§å’Œçµæ´»æ€§é‡æ„ä»£ç "><a href="#1-ä¸ºæ”¹å–„å¯è¯»æ€§å’Œçµæ´»æ€§é‡æ„ä»£ç " class="headerlink" title="1. ä¸ºæ”¹å–„å¯è¯»æ€§å’Œçµæ´»æ€§é‡æ„ä»£ç "></a>1. ä¸ºæ”¹å–„å¯è¯»æ€§å’Œçµæ´»æ€§é‡æ„ä»£ç </h1><h2 id="1-1-æ”¹å–„ä»£ç çš„å¯è¯»æ€§"><a href="#1-1-æ”¹å–„ä»£ç çš„å¯è¯»æ€§" class="headerlink" title="1.1 æ”¹å–„ä»£ç çš„å¯è¯»æ€§"></a>1.1 æ”¹å–„ä»£ç çš„å¯è¯»æ€§</h2><p>Java 8çš„æ–°ç‰¹æ€§ä¹Ÿå¯ä»¥å¸®åŠ©æå‡ä»£ç çš„å¯è¯»æ€§: </p>
<ul>
<li>ä½¿ç”¨Java 8ï¼Œä½ å¯ä»¥å‡å°‘å†—é•¿çš„ä»£ç ï¼Œè®©ä»£ç æ›´æ˜“äºç†è§£</li>
<li>é€šè¿‡æ–¹æ³•å¼•ç”¨å’ŒStream APIï¼Œä½ çš„ä»£ç ä¼šå˜å¾—æ›´ç›´è§‚</li>
</ul>
<p>åˆ©ç”¨Lambdaè¡¨è¾¾å¼ã€æ–¹æ³•å¼•ç”¨ä»¥åŠStreamæ”¹å–„ç¨‹åºä»£ç çš„å¯è¯»æ€§:</p>
<ul>
<li>é‡æ„ä»£ç ï¼Œç”¨Lambdaè¡¨è¾¾å¼å–ä»£åŒ¿åç±»</li>
<li>ç”¨æ–¹æ³•å¼•ç”¨é‡æ„Lambdaè¡¨è¾¾å¼</li>
<li>ç”¨Stream APIé‡æ„å‘½ä»¤å¼çš„æ•°æ®å¤„ç† </li>
</ul>
<h2 id="1-2-ä»åŒ¿åå†…éƒ¨ç±»åˆ°Lambdaè¡¨è¾¾å¼çš„è½¬æ¢"><a href="#1-2-ä»åŒ¿åå†…éƒ¨ç±»åˆ°Lambdaè¡¨è¾¾å¼çš„è½¬æ¢" class="headerlink" title="1.2 ä»åŒ¿åå†…éƒ¨ç±»åˆ°Lambdaè¡¨è¾¾å¼çš„è½¬æ¢"></a>1.2 ä»åŒ¿åå†…éƒ¨ç±»åˆ°Lambdaè¡¨è¾¾å¼çš„è½¬æ¢</h2><p>å°†å®ç°å•ä¸€æŠ½è±¡æ–¹æ³•çš„åŒ¿åç±»è½¬æ¢ä¸ºLambdaè¡¨è¾¾å¼</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ä¼ ç»Ÿçš„æ–¹å¼ï¼Œä½¿ç”¨åŒ¿åç±»</span></span><br><span class="line">Runnable r1 = <span class="keyword">new</span> Runnable()&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span></span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"Hello"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// æ–°çš„æ–¹å¼ï¼Œä½¿ç”¨Lambdaè¡¨è¾¾å¼</span></span><br><span class="line">Runnable r2 = () -&gt; System.out.println(<span class="string">"Hello"</span>);</span><br></pre></td></tr></table></figure>

<p>åŒ¿å ç±»å’ŒLambdaè¡¨è¾¾å¼ä¸­çš„thiså’Œsuperçš„å«ä¹‰æ˜¯ä¸åŒçš„ã€‚åœ¨åŒ¿åç±»ä¸­ï¼Œthisä»£è¡¨çš„æ˜¯ç±»è‡ªèº«ï¼Œä½†æ˜¯åœ¨Lambdaä¸­ï¼Œå®ƒä»£è¡¨çš„æ˜¯åŒ…å«ç±»ã€‚å…¶æ¬¡ï¼ŒåŒ¿åç±»å¯ä»¥å±è”½åŒ…å«ç±»çš„å˜é‡ï¼Œè€ŒLambdaè¡¨è¾¾å¼ä¸èƒ½(å®ƒä»¬ä¼šå¯¼è‡´ç¼–è¯‘é”™è¯¯)ï¼Œå¦‚ä¸‹é¢è¿™æ®µä»£ç :</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> a = <span class="number">10</span>;</span><br><span class="line">Runnable r1 = () -&gt; &#123;</span><br><span class="line">    <span class="keyword">int</span> a = <span class="number">2</span>;                    <span class="comment">// ç¼–è¯‘é”™è¯¯</span></span><br><span class="line">    System.out.println(a);</span><br><span class="line">&#125;;</span><br><span class="line">Runnable r2 = <span class="keyword">new</span> Runnable() &#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> a = <span class="number">2</span>;                <span class="comment">// æ­£å¸¸</span></span><br><span class="line">        System.out.println(a);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>åœ¨æ¶‰åŠé‡ô°´çš„ä¸Šä¸‹æ–‡é‡Œï¼Œå°†åŒ¿åç±»è½¬æ¢ä¸ºLambdaè¡¨è¾¾å¼å¯èƒ½å¯¼è‡´æœ€ç»ˆçš„ä»£ç æ›´åŠ æ™¦æ¶©ã€‚å®é™…ä¸Šï¼ŒåŒ¿åç±»çš„ç±»å‹æ˜¯åœ¨åˆå§‹åŒ–æ—¶ç¡®å®šçš„ï¼Œè€ŒLambdaçš„ç±»å‹å–å†³äºå®ƒçš„ä¸Šä¸‹æ–‡ã€‚é€šè¿‡ä¸‹é¢è¿™ä¸ªä¾‹å­ï¼Œæˆ‘ä»¬å¯ä»¥äº†è§£é—®é¢˜æ˜¯å¦‚ä½•å‘ç”Ÿçš„ã€‚æˆ‘ä»¬å‡è®¾ä½ ç”¨ä¸RunnableåŒæ ·çš„ç­¾åå£°æ˜äº†ä¸€ä¸ªå‡½æ•°æ¥å£ï¼Œæˆ‘ä»¬ç§°ä¹‹ä¸ºTask:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">interface</span> <span class="title">Task</span></span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">execute</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">doSomething</span><span class="params">(Runnable r)</span></span>&#123; r.run(); &#125;</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">doSomething</span><span class="params">(Task a)</span></span>&#123; a.execute(); &#125;</span><br><span class="line">doSomething(<span class="keyword">new</span> Task() &#123;</span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">execute</span><span class="params">()</span> </span>&#123;</span><br><span class="line">            System.out.println(<span class="string">"Danger danger!!"</span>);</span><br><span class="line">        &#125;</span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">// doSomething(Runnable) å’Œ doSomething(Task) éƒ½åŒ¹é…è¯¥ç±»å‹</span></span><br><span class="line">doSomething(() -&gt; System.out.println(<span class="string">"Danger danger!!"</span>));</span><br><span class="line"><span class="comment">// ä½¿ç”¨æ˜¾å¼çš„ç±»å‹è½¬æ¢æ¥è§£å†³è¿™ç§æ¨¡æ£±ä¸¤å¯çš„æƒ…å†µ</span></span><br><span class="line">doSomething((Task)() -&gt; System.out.println(<span class="string">"Danger danger!!"</span>));</span><br></pre></td></tr></table></figure>
<p>ç›®å‰å¤§å¤šæ•°çš„é›†æˆå¼€å‘ç¯å¢ƒï¼Œæ¯”å¦‚NetBeanså’ŒIntelliJéƒ½æ”¯æŒè¿™ç§é‡æ„ï¼Œå®ƒä»¬èƒ½è‡ªåŠ¨åœ°å¸®ä½ æ£€æŸ¥ï¼Œé¿å…å‘ç”Ÿè¿™äº›é—®é¢˜ã€‚</p>
<h2 id="1-3-ä»Lambdaè¡¨è¾¾å¼åˆ°æ–¹æ³•å¼•ç”¨çš„è½¬æ¢"><a href="#1-3-ä»Lambdaè¡¨è¾¾å¼åˆ°æ–¹æ³•å¼•ç”¨çš„è½¬æ¢" class="headerlink" title="1.3 ä»Lambdaè¡¨è¾¾å¼åˆ°æ–¹æ³•å¼•ç”¨çš„è½¬æ¢"></a>1.3 ä»Lambdaè¡¨è¾¾å¼åˆ°æ–¹æ³•å¼•ç”¨çš„è½¬æ¢</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">Map&lt;CaloricLevel, List&lt;Dish&gt;&gt; dishesByCaloricLevel =</span><br><span class="line">        menu.stream()</span><br><span class="line">            .collect(</span><br><span class="line">                groupingBy(dish -&gt; &#123;</span><br><span class="line">                     <span class="keyword">if</span> (dish.getCalories() &lt;= <span class="number">400</span>) <span class="keyword">return</span> CaloricLevel.DIET;</span><br><span class="line">                    <span class="keyword">else</span> <span class="keyword">if</span> (dish.getCalories() &lt;= <span class="number">700</span>) <span class="keyword">return</span> CaloricLevel.NORMAL;</span><br><span class="line">                    <span class="keyword">else</span> <span class="keyword">return</span> CaloricLevel.FAT;</span><br><span class="line">&#125;));</span><br></pre></td></tr></table></figure>
<p>å°†Lambdaè¡¨è¾¾å¼çš„å†…å®¹æŠ½å–åˆ°ä¸€ä¸ªå•ç‹¬çš„æ–¹æ³•ä¸­ï¼Œå°†å…¶ä½œä¸ºå‚æ•°ä¼ é€’ç»™groupingByæ–¹æ³•ã€‚å˜æ¢ä¹‹åï¼Œä»£ç å˜å¾—æ›´åŠ ç®€æ´ï¼Œç¨‹åºçš„æ„å›¾ä¹Ÿæ›´åŠ æ¸…æ™°äº†ã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Map&lt;CaloricLevel, List&lt;Dish&gt;&gt; dishesByCaloricLevel = menu.stream().collect(groupingBy(Dish::getCaloricLevel));</span><br></pre></td></tr></table></figure>

<h2 id="1-4-ä»å‘½ä»¤å¼çš„æ•°æ®å¤„ç†åˆ‡æ¢åˆ°Stream"><a href="#1-4-ä»å‘½ä»¤å¼çš„æ•°æ®å¤„ç†åˆ‡æ¢åˆ°Stream" class="headerlink" title="1.4 ä»å‘½ä»¤å¼çš„æ•°æ®å¤„ç†åˆ‡æ¢åˆ°Stream"></a>1.4 ä»å‘½ä»¤å¼çš„æ•°æ®å¤„ç†åˆ‡æ¢åˆ°Stream</h2><p>æˆ‘ä»¬å»ºè®®ä½ å°†æ‰€æœ‰ä½¿ç”¨è¿­ä»£å™¨è¿™ç§æ•°æ®å¤„ç†æ¨¡å¼å¤„ç†é›†åˆçš„ä»£ç éƒ½è½¬æ¢æˆStream APIçš„æ–¹å¼ã€‚ä¸ºä»€ä¹ˆå‘¢?<br>Stream APIèƒ½æ›´æ¸…æ™°åœ°è¡¨è¾¾æ•°æ®å¤„ç†ç®¡é“çš„æ„å›¾ã€‚é™¤æ­¤ä¹‹å¤–ï¼Œé€šè¿‡çŸ­è·¯å’Œå»¶è¿Ÿè½½å…¥ä»¥åŠåˆ©ç”¨ç¬¬7ç« ä»‹ç»çš„ç°ä»£è®¡ç®—æœºçš„å¤šæ ¸æ¶æ„ï¼Œæˆ‘ä»¬å¯ä»¥å¯¹Streamè¿›è¡Œä¼˜åŒ–ã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å‘½ä»¤å¼ç‰ˆæœ¬</span></span><br><span class="line">List&lt;String&gt; dishNames = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">    <span class="keyword">for</span>(Dish dish: menu)&#123;</span><br><span class="line">        <span class="keyword">if</span>(dish.getCalories() &gt; <span class="number">300</span>)&#123;</span><br><span class="line">            dishNames.add(dish.getName());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// ä½¿ç”¨Stream API</span></span><br><span class="line">menu.parallelStream()</span><br><span class="line">        .filter(d -&gt; d.getCalories() &gt; <span class="number">300</span>)</span><br><span class="line">        .map(Dish::getName)</span><br><span class="line">        .collect(toList());</span><br></pre></td></tr></table></figure>

<h2 id="1-5-å¢åŠ ä»£ç çš„çµæ´»æ€§"><a href="#1-5-å¢åŠ ä»£ç çš„çµæ´»æ€§" class="headerlink" title="1.5 å¢åŠ ä»£ç çš„çµæ´»æ€§"></a>1.5 å¢åŠ ä»£ç çš„çµæ´»æ€§</h2><p>æ²¡æœ‰å‡½æ•°å¼æ¥å£å°±æ— æ³•ä½¿ç”¨Lambdaè¡¨è¾¾å¼ï¼Œå› æ­¤ä»£ç ä¸­éœ€è¦å¼•å…¥å‡½æ•°å¼æ¥å£ã€‚å¼•å…¥å‡½æ•°å¼æ¥å£çš„ä¸¤ç§é€šç”¨æ¨¡å¼ï¼š</p>
<ul>
<li>æœ‰æ¡ä»¶çš„å»¶è¿Ÿæ‰§è¡Œ</li>
<li>ç¯ç»•æ‰§è¡Œ</li>
</ul>
<h2 id="2-ä½¿ç”¨Lambdaé‡æ„é¢å‘å¯¹è±¡çš„è®¾è®¡æ¨¡å¼"><a href="#2-ä½¿ç”¨Lambdaé‡æ„é¢å‘å¯¹è±¡çš„è®¾è®¡æ¨¡å¼" class="headerlink" title="2. ä½¿ç”¨Lambdaé‡æ„é¢å‘å¯¹è±¡çš„è®¾è®¡æ¨¡å¼"></a>2. ä½¿ç”¨Lambdaé‡æ„é¢å‘å¯¹è±¡çš„è®¾è®¡æ¨¡å¼</h2><p>ä½¿ç”¨Lambdaè¡¨è¾¾å¼åï¼Œå¾ˆå¤šç°å­˜çš„ç•¥æ˜¾è‡ƒè‚¿çš„é¢å‘å¯¹è±¡è®¾è®¡æ¨¡å¼èƒ½å¤Ÿç”¨æ›´ç²¾ç®€çš„æ–¹å¼å®ç°äº†ã€‚è¿™ä¸€èŠ‚ä¸­ï¼Œæˆ‘ä»¬ä¼šé’ˆå¯¹äº”ä¸ªè®¾è®¡æ¨¡å¼å±•å¼€è®¨è®ºï¼Œå®ƒä»¬åˆ†åˆ«æ˜¯:</p>
<ul>
<li>ç­–ç•¥æ¨¡å¼</li>
<li>æ¨¡æ¿æ–¹æ³•</li>
<li>è§‚å¯Ÿè€…æ¨¡å¼</li>
<li>è´£ä»»é“¾æ¨¡å¼</li>
<li>å·¥å‚æ¨¡å¼</li>
</ul>
<h2 id="2-1-ç­–ç•¥æ¨¡å¼"><a href="#2-1-ç­–ç•¥æ¨¡å¼" class="headerlink" title="2.1 ç­–ç•¥æ¨¡å¼"></a>2.1 ç­–ç•¥æ¨¡å¼</h2><p>ç­–ç•¥æ¨¡å¼ä»£è¡¨äº†è§£å†³ä¸€ç±»ç®—æ³•çš„é€šç”¨è§£å†³æ–¹æ¡ˆï¼Œä½ å¯ä»¥åœ¨è¿è¡Œæ—¶é€‰æ‹©ä½¿ç”¨å“ªç§æ–¹æ¡ˆã€‚ç­–ç•¥æ¨¡å¼åŒ…å«ä¸‰éƒ¨åˆ†å†…å®¹ï¼Œå¦‚å›¾æ‰€ç¤ºã€‚</p>
<ul>
<li>ä¸€ä¸ªä»£è¡¨æŸä¸ªç®—æ³•çš„æ¥å£(å®ƒæ˜¯ç­–ç•¥æ¨¡å¼çš„æ¥å£)ã€‚ </li>
<li>ä¸€ä¸ªæˆ–å¤šä¸ªè¯¥æ¥å£çš„å…·ä½“å®ç°ï¼Œå®ƒä»¬ä»£è¡¨äº†ç®—æ³•çš„å¤šç§å®ç°(æ¯”å¦‚ï¼Œå®ä½“ç±»ConcreteStrategyAæˆ–è€…ConcreteStrategyB)ã€‚</li>
<li>ä¸€ä¸ªæˆ–å¤šä¸ªä½¿ç”¨ç­–ç•¥å¯¹è±¡çš„å®¢æˆ·ã€‚</li>
</ul>
<p><img src="https://raw.githubusercontent.com/lujiahao0708/PicRepo/master/blogPic/08.%E3%80%8AJava%208%20in%20Action%E3%80%8BChapter%208%EF%BC%9A%E9%87%8D%E6%9E%84%E3%80%81%E6%B5%8B%E8%AF%95%E5%92%8C%E8%B0%83%E8%AF%95/%E7%AD%96%E7%95%A5%E6%A8%A1%E5%BC%8F.png" alt=""></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">ValidationStrategy</span> </span>&#123;</span><br><span class="line">        <span class="function"><span class="keyword">boolean</span> <span class="title">execute</span><span class="params">(String s)</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">IsAllLowerCase</span> <span class="keyword">implements</span> <span class="title">ValidationStrategy</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">execute</span><span class="params">(String s)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> s.matches(<span class="string">"[a-z]+"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">IsNumber</span> <span class="keyword">implements</span> <span class="title">ValidationStrategy</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">execute</span><span class="params">(String s)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> s.matches(<span class="string">"\\d+"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Validator</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> ValidationStrategy strategy;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Validator</span><span class="params">(ValidationStrategy strategy)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.strategy = strategy;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">validate</span><span class="params">(String s)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> strategy.execute(s);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">StrategyDemo</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        Validator numericValidator = <span class="keyword">new</span> Validator(<span class="keyword">new</span> IsNumber());</span><br><span class="line">        <span class="keyword">boolean</span> b1 = numericValidator.validate(<span class="string">"aaaa"</span>);</span><br><span class="line">        Validator lowerCaseValidator = <span class="keyword">new</span> Validator(<span class="keyword">new</span> IsAllLowerCase());</span><br><span class="line">        <span class="keyword">boolean</span> b2 = lowerCaseValidator.validate(<span class="string">"bbbb"</span>);</span><br><span class="line">        System.out.println(b1 + <span class="string">" "</span> + b2);</span><br><span class="line">        Validator numericValidator1 = <span class="keyword">new</span> Validator((String s) -&gt; s.matches(<span class="string">"[a-z]+"</span>));</span><br><span class="line">        <span class="keyword">boolean</span> b11 = numericValidator1.validate(<span class="string">"aaaa"</span>);</span><br><span class="line">        Validator lowerCaseValidator1 = <span class="keyword">new</span> Validator((String s) -&gt; s.matches(<span class="string">"\\d+"</span>));</span><br><span class="line">        <span class="keyword">boolean</span> b21 = lowerCaseValidator.validate(<span class="string">"bbbb"</span>);</span><br><span class="line">        System.out.println(b11 + <span class="string">" "</span> + b21);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="2-2-æ¨¡æ¿æ–¹æ³•"><a href="#2-2-æ¨¡æ¿æ–¹æ³•" class="headerlink" title="2.2 æ¨¡æ¿æ–¹æ³•"></a>2.2 æ¨¡æ¿æ–¹æ³•</h2><p>æ¨¡æ¿ æ–¹æ³•æ¨¡å¼åœ¨ä½ â€œå¸Œæœ›ä½¿ç”¨è¿™ä¸ªç®—æ³•ï¼Œä½†æ˜¯éœ€è¦å¯¹å…¶ä¸­çš„æŸäº›è¡Œè¿›è¡Œæ”¹è¿›ï¼Œæ‰èƒ½è¾¾åˆ°å¸Œæœ›çš„æ•ˆæœâ€ æ—¶æ˜¯éå¸¸æœ‰ç”¨çš„ã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">OnlineBanking</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">processCustomer</span><span class="params">(<span class="keyword">int</span> id)</span> </span>&#123;</span><br><span class="line">        Customer c = DataUtil.getCustomerWithId(id);</span><br><span class="line">        makeCustomerHappy(c);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">abstract</span> <span class="keyword">void</span> <span class="title">makeCustomerHappy</span><span class="params">(Customer c)</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">OnlineBankingLambda</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">processCustomer</span><span class="params">(<span class="keyword">int</span> id, Consumer&lt;Customer&gt; consumer)</span> </span>&#123;</span><br><span class="line">        Customer c = DataUtil.getCustomerWithId(id);</span><br><span class="line">        consumer.accept(c);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TemplateMethod</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">new</span> OnlineBanking() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">void</span> <span class="title">makeCustomerHappy</span><span class="params">(Customer c)</span> </span>&#123;</span><br><span class="line">                System.out.println(c.getName() + <span class="string">" happy!"</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;.processCustomer(<span class="number">1</span>);</span><br><span class="line">        <span class="keyword">new</span> OnlineBankingLambda().processCustomer(<span class="number">1</span>, (Customer c) -&gt; System.out.println(c.getName() + <span class="string">" happy!"</span>));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="2-3-è§‚å¯Ÿè€…æ¨¡å¼"><a href="#2-3-è§‚å¯Ÿè€…æ¨¡å¼" class="headerlink" title="2.3 è§‚å¯Ÿè€…æ¨¡å¼"></a>2.3 è§‚å¯Ÿè€…æ¨¡å¼</h2><p>è§‚å¯Ÿè€…æ¨¡å¼æ˜¯ä¸€ç§æ¯”è¾ƒå¸¸è§çš„æ–¹æ¡ˆï¼ŒæŸäº›äº‹ä»¶å‘ç”Ÿæ—¶(æ¯”å¦‚çŠ¶æ€è½¬å˜)ï¼Œå¦‚æœä¸€ä¸ªå¯¹è±¡(é€šå¸¸æˆ‘ä»¬ç§°ä¹‹ä¸ºä¸»é¢˜)éœ€è¦è‡ªåŠ¨åœ°é€šçŸ¥å…¶ä»–å¤šä¸ªå¯¹è±¡(ç§°ä¸ºè§‚å¯Ÿè€…)ï¼Œå°±ä¼šé‡‡ç”¨è¯¥æ–¹æ¡ˆã€‚<br><img src="https://raw.githubusercontent.com/lujiahao0708/PicRepo/master/blogPic/08.%E3%80%8AJava%208%20in%20Action%E3%80%8BChapter%208%EF%BC%9A%E9%87%8D%E6%9E%84%E3%80%81%E6%B5%8B%E8%AF%95%E5%92%8C%E8%B0%83%E8%AF%95/%E8%A7%82%E5%AF%9F%E8%80%85%E6%A8%A1%E5%BC%8F.png" alt=""></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">Observer</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">notify</span><span class="params">(String tweet)</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">NYTime</span> <span class="keyword">implements</span> <span class="title">Observer</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">notify</span><span class="params">(String tweet)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(tweet != <span class="keyword">null</span> &amp;&amp; tweet.contains(<span class="string">"money"</span>))&#123;</span><br><span class="line">            System.out.println(<span class="string">"Breaking news in NY! "</span> + tweet);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Guardian</span> <span class="keyword">implements</span> <span class="title">Observer</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">notify</span><span class="params">(String tweet)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(tweet != <span class="keyword">null</span> &amp;&amp; tweet.contains(<span class="string">"queen"</span>))&#123;</span><br><span class="line">            System.out.println(<span class="string">"Yet another news in London... "</span> + tweet);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">LeMonde</span> <span class="keyword">implements</span> <span class="title">Observer</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">notify</span><span class="params">(String tweet)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(tweet != <span class="keyword">null</span> &amp;&amp; tweet.contains(<span class="string">"wine"</span>))&#123;</span><br><span class="line">            System.out.println(<span class="string">"Today cheese, wine and news! "</span> + tweet);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">Subject</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">registerObserver</span><span class="params">(Observer o)</span></span>;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">nofityObservers</span><span class="params">(String tweet)</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Feed</span> <span class="keyword">implements</span> <span class="title">Subject</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> List&lt;Observer&gt; observers = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">registerObserver</span><span class="params">(Observer o)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.observers.add(o);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">nofityObservers</span><span class="params">(String tweet)</span> </span>&#123;</span><br><span class="line">        observers.forEach(o -&gt; o.notify(tweet));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ObserverDemo</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        Feed f = <span class="keyword">new</span> Feed();</span><br><span class="line">        f.registerObserver(<span class="keyword">new</span> NYTime());</span><br><span class="line">        f.registerObserver(<span class="keyword">new</span> Guardian());</span><br><span class="line">        f.registerObserver(<span class="keyword">new</span> LeMonde());</span><br><span class="line">        f.nofityObservers(<span class="string">"The queen said her favourite book is Java 8 in Action!"</span>);</span><br><span class="line">        f.registerObserver((String tweet) -&gt; &#123;</span><br><span class="line">            <span class="keyword">if</span> (tweet != <span class="keyword">null</span> &amp;&amp; tweet.contains(<span class="string">"money"</span>)) &#123;</span><br><span class="line">                System.out.println(<span class="string">"Breaking news in NY! "</span> + tweet);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">        f.registerObserver((String tweet) -&gt; &#123;</span><br><span class="line">            <span class="keyword">if</span> (tweet != <span class="keyword">null</span> &amp;&amp; tweet.contains(<span class="string">"queen"</span>)) &#123;</span><br><span class="line">                System.out.println(<span class="string">"Yet another news in London... "</span> + tweet);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="2-4-è´£ä»»é“¾æ¨¡å¼"><a href="#2-4-è´£ä»»é“¾æ¨¡å¼" class="headerlink" title="2.4 è´£ä»»é“¾æ¨¡å¼"></a>2.4 è´£ä»»é“¾æ¨¡å¼</h2><p>è´£ä»»é“¾æ¨¡å¼æ˜¯ä¸€ç§åˆ›å»ºå¤„ç†å¯¹è±¡åºåˆ—(æ¯”å¦‚æ“ä½œåºåˆ—)çš„é€šç”¨æ–¹æ¡ˆã€‚ä¸€ä¸ªå¤„ç†å¯¹è±¡å¯èƒ½éœ€è¦åœ¨å®Œæˆä¸€äº›å·¥ä½œä¹‹åï¼Œå°†ç»“æœä¼ é€’ç»™å¦ä¸€ä¸ªå¯¹è±¡ï¼Œè¿™ä¸ªå¯¹è±¡æ¥ç€åšä¸€äº›å·¥ä½œï¼Œå†è½¬äº¤ç»™ä¸‹ä¸€ä¸ªå¤„ç†å¯¹è±¡ï¼Œä»¥æ­¤ç±»æ¨ã€‚<br><img src="https://raw.githubusercontent.com/lujiahao0708/PicRepo/master/blogPic/08.%E3%80%8AJava%208%20in%20Action%E3%80%8BChapter%208%EF%BC%9A%E9%87%8D%E6%9E%84%E3%80%81%E6%B5%8B%E8%AF%95%E5%92%8C%E8%B0%83%E8%AF%95/%E8%B4%A3%E4%BB%BB%E9%93%BE%E6%A8%A1%E5%BC%8F.png" alt=""></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">ProcessingObject</span>&lt;<span class="title">T</span>&gt; </span>&#123;</span><br><span class="line">    <span class="keyword">protected</span> ProcessingObject&lt;T&gt; successor;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setSuccessor</span><span class="params">(ProcessingObject&lt;T&gt; successor)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.successor = successor;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> T <span class="title">handle</span><span class="params">(T input)</span> </span>&#123;</span><br><span class="line">        T r = handleWork(input);</span><br><span class="line">        <span class="keyword">if</span> (successor != <span class="keyword">null</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> successor.handle(r);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> r;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">abstract</span> <span class="keyword">protected</span> T <span class="title">handleWork</span><span class="params">(T input)</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">HeaderTextProcessing</span> <span class="keyword">extends</span> <span class="title">ProcessingObject</span>&lt;<span class="title">String</span>&gt; </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> String <span class="title">handleWork</span><span class="params">(String input)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"From Raoul, Mario and Alan: "</span> + input;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SpellCheckerProcessing</span> <span class="keyword">extends</span> <span class="title">ProcessingObject</span>&lt;<span class="title">String</span>&gt; </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> String <span class="title">handleWork</span><span class="params">(String input)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> input.replaceAll(<span class="string">"labda"</span>, <span class="string">"lambda"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ChainOfResponsibilityDemo</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        ProcessingObject&lt;String&gt; p1 = <span class="keyword">new</span> HeaderTextProcessing();</span><br><span class="line">        ProcessingObject&lt;String&gt; p2 = <span class="keyword">new</span> SpellCheckerProcessing();</span><br><span class="line">        p1.setSuccessor(p2);</span><br><span class="line">        String result = p1.handle(<span class="string">"Aren't labdas really sexy?!!"</span>);</span><br><span class="line">        System.out.println(result);</span><br><span class="line">        UnaryOperator&lt;String&gt; headerProcessing = (String text) -&gt; <span class="string">"From Raoul, Mario and Alan: "</span> + text;</span><br><span class="line">        UnaryOperator&lt;String&gt; spellCheckerProcessing = (String text) -&gt; text.replaceAll(<span class="string">"labda"</span>, <span class="string">"lambda"</span>);</span><br><span class="line">        Function&lt;String, String&gt; pipeline = headerProcessing.andThen(spellCheckerProcessing);</span><br><span class="line">        String result1 = pipeline.apply(<span class="string">"Aren't labdas really sexy?!!"</span>);</span><br><span class="line">        System.out.println(result1);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="2-5-å·¥å‚æ¨¡å¼"><a href="#2-5-å·¥å‚æ¨¡å¼" class="headerlink" title="2.5 å·¥å‚æ¨¡å¼"></a>2.5 å·¥å‚æ¨¡å¼</h2><p>ä½¿ç”¨å·¥å‚æ¨¡å¼ï¼Œä½ æ— éœ€å‘å®¢æˆ·æš´éœ²å®ä¾‹åŒ–çš„é€»è¾‘å°±èƒ½å®Œæˆå¯¹è±¡çš„åˆ›å»ºã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">Product</span> </span>&#123;&#125;</span><br><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Loan</span> <span class="keyword">implements</span> <span class="title">Product</span> </span>&#123;&#125;</span><br><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Stock</span> <span class="keyword">implements</span> <span class="title">Product</span> </span>&#123;&#125;</span><br><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Bond</span> <span class="keyword">implements</span> <span class="title">Product</span> </span>&#123;&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ProductFactory</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Product <span class="title">createProduct</span><span class="params">(String name)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">switch</span> (name) &#123;</span><br><span class="line">            <span class="keyword">case</span> <span class="string">"loan"</span>:</span><br><span class="line">                <span class="keyword">return</span> <span class="keyword">new</span> Loan();</span><br><span class="line">            <span class="keyword">case</span> <span class="string">"stock"</span>:</span><br><span class="line">                <span class="keyword">return</span> <span class="keyword">new</span> Stock();</span><br><span class="line">            <span class="keyword">case</span> <span class="string">"bond"</span>:</span><br><span class="line">                <span class="keyword">return</span> <span class="keyword">new</span> Bond();</span><br><span class="line">            <span class="keyword">default</span>:</span><br><span class="line">                <span class="keyword">throw</span> <span class="keyword">new</span> RuntimeException(<span class="string">"No such product "</span> + name);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        Product p = ProductFactory.createProduct(<span class="string">"loan"</span>);</span><br><span class="line">        System.out.println(p);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ProductFactoryLambda</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> <span class="keyword">static</span> Map&lt;String, Supplier&lt;Product&gt;&gt; map = <span class="keyword">new</span> HashMap&lt;&gt;();</span><br><span class="line">    <span class="keyword">static</span> &#123;</span><br><span class="line">        map.put(<span class="string">"loan"</span>, Loan::<span class="keyword">new</span>);</span><br><span class="line">        map.put(<span class="string">"stock"</span>, Stock::<span class="keyword">new</span>);</span><br><span class="line">        map.put(<span class="string">"bond"</span>, Bond::<span class="keyword">new</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Product <span class="title">createProduct</span><span class="params">(String name)</span> </span>&#123;</span><br><span class="line">        Supplier&lt;Product&gt; p = map.get(name);</span><br><span class="line">        <span class="keyword">if</span> (p != <span class="keyword">null</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> p.get();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> IllegalArgumentException(<span class="string">"No such product "</span> + name);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        Product p = ProductFactoryLambda.createProduct(<span class="string">"loan"</span>);</span><br><span class="line">        System.out.println(p);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="3-æµ‹è¯•Lambdaè¡¨è¾¾å¼"><a href="#3-æµ‹è¯•Lambdaè¡¨è¾¾å¼" class="headerlink" title="3. æµ‹è¯•Lambdaè¡¨è¾¾å¼"></a>3. æµ‹è¯•Lambdaè¡¨è¾¾å¼</h1><p>ç•¥</p>
<h1 id="4-è°ƒè¯•Lambdaè¡¨è¾¾å¼"><a href="#4-è°ƒè¯•Lambdaè¡¨è¾¾å¼" class="headerlink" title="4. è°ƒè¯•Lambdaè¡¨è¾¾å¼"></a>4. è°ƒè¯•Lambdaè¡¨è¾¾å¼</h1><h2 id="4-1-æŸ¥çœ‹æ ˆè·Ÿè¸ª"><a href="#4-1-æŸ¥çœ‹æ ˆè·Ÿè¸ª" class="headerlink" title="4.1 æŸ¥çœ‹æ ˆè·Ÿè¸ª"></a>4.1 æŸ¥çœ‹æ ˆè·Ÿè¸ª</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Debugging</span></span>&#123; <span class="number">11</span> <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        List&lt;Point&gt; points = Arrays.asList(<span class="keyword">new</span> Point(<span class="number">12</span>, <span class="number">2</span>), <span class="keyword">null</span>);</span><br><span class="line">        points.stream().map(p -&gt; p.getX()).forEach(System.out::println); &#125;</span><br><span class="line">&#125;</span><br><span class="line">è¿è¡Œè¿™æ®µä»£ç ä¼šäº§ç”Ÿä¸‹é¢çš„æ ˆè·Ÿè¸ª:</span><br><span class="line">Exception in thread <span class="string">"main"</span> java.lang.NullPointerException</span><br><span class="line">at Debugging.lambda$main$<span class="number">0</span>(Debugging.java:<span class="number">6</span>)</span><br><span class="line">at Debugging$$Lambda$<span class="number">5</span>/<span class="number">284720968</span>.apply(Unknown Source)</span><br><span class="line">at java.util.stream.ReferencePipeline$<span class="number">3</span>$<span class="number">1</span>.accept(ReferencePipeline</span><br><span class="line">.java:<span class="number">193</span>)</span><br><span class="line">at java.util.Spliterators$ArraySpliterator.forEachRemaining(Spliterators</span><br><span class="line">.java:<span class="number">948</span>)</span><br></pre></td></tr></table></figure>
<p>æˆ‘ä»¬éœ€è¦ç‰¹åˆ«æ³¨æ„ï¼Œæ¶‰åŠLambdaè¡¨è¾¾å¼çš„æ ˆô±¡ô´­å¯èƒ½éå¸¸éš¾ç†è§£ã€‚è¿™æ˜¯Javaç¼–è¯‘å™¨æœªæ¥ç‰ˆæœ¬å¯ä»¥æ”¹è¿›çš„ä¸€ä¸ªæ–¹é¢ã€‚</p>
<h2 id="4-2-ä½¿ç”¨æ—¥å¿—è°ƒè¯•"><a href="#4-2-ä½¿ç”¨æ—¥å¿—è°ƒè¯•" class="headerlink" title="4.2 ä½¿ç”¨æ—¥å¿—è°ƒè¯•"></a>4.2 ä½¿ç”¨æ—¥å¿—è°ƒè¯•</h2><p>peekçš„è®¾è®¡åˆè¡·å°±æ˜¯åœ¨æµçš„æ¯ä¸ªå…ƒç´ æ¢å¤è¿è¡Œä¹‹å‰ï¼Œæ’å…¥æ‰§è¡Œä¸€ä¸ªåŠ¨ä½œã€‚ä½†æ˜¯å®ƒä¸åƒforEaché‚£æ ·æ¢å¤æ•´ä¸ªæµçš„è¿è¡Œï¼Œè€Œæ˜¯åœ¨ä¸€ä¸ªå…ƒç´ ä¸Šå®Œæˆæ“ä½œä¹‹åï¼Œå®ƒåªä¼šå°†æ“ä½œé¡ºæ‰¿åˆ°æµæ°´çº¿ä¸­çš„ä¸‹ä¸€ä¸ªæ“ä½œã€‚å›¾8-4è§£é‡Šäº†peekçš„æ“ä½œæµç¨‹ã€‚<br><img src="https://raw.githubusercontent.com/lujiahao0708/PicRepo/master/blogPic/08.%E3%80%8AJava%208%20in%20Action%E3%80%8BChapter%208%EF%BC%9A%E9%87%8D%E6%9E%84%E3%80%81%E6%B5%8B%E8%AF%95%E5%92%8C%E8%B0%83%E8%AF%95/peek.png" alt=""></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">List&lt;Integer&gt; result = numbers.stream()</span><br><span class="line">         .peek(x -&gt; System.out.println(<span class="string">"from stream: "</span> + x))</span><br><span class="line">         .map(x -&gt; x + <span class="number">17</span>)</span><br><span class="line">         .peek(x -&gt; System.out.println(<span class="string">"after map: "</span> + x))</span><br><span class="line">         .filter(x -&gt; x % <span class="number">2</span> == <span class="number">0</span>)</span><br><span class="line">         .peek(x -&gt; System.out.println(<span class="string">"after filter: "</span> + x))</span><br><span class="line">         .limit(<span class="number">3</span>)</span><br><span class="line">         .peek(x -&gt; System.out.println(<span class="string">"after limit: "</span> + x))</span><br><span class="line">         .collect(toList());</span><br><span class="line">è¾“å‡ºç»“æœï¼š</span><br><span class="line">from stream: <span class="number">2</span></span><br><span class="line">after map: <span class="number">19</span></span><br><span class="line">from stream: <span class="number">3</span></span><br><span class="line">after map: <span class="number">20</span></span><br><span class="line">after filter: <span class="number">20</span></span><br><span class="line">after limit: <span class="number">20</span></span><br><span class="line">from stream: <span class="number">4</span></span><br><span class="line">after map: <span class="number">21</span></span><br><span class="line">from stream: <span class="number">5</span></span><br><span class="line">after map: <span class="number">22</span></span><br><span class="line">after filter: <span class="number">22</span></span><br><span class="line">after limit: <span class="number">22</span></span><br></pre></td></tr></table></figure>

<h1 id="5-å°ç»“"><a href="#5-å°ç»“" class="headerlink" title="5. å°ç»“"></a>5. å°ç»“</h1><ul>
<li>Lambdaè¡¨è¾¾å¼èƒ½æå‡ä»£ç çš„å¯è¯»æ€§å’Œçµæ´»æ€§ã€‚</li>
<li>å¦‚æœä½ çš„ä»£ç ä¸­ä½¿ç”¨äº†åŒ¿åç±»ï¼Œå°½é‡ç”¨Lambdaè¡¨è¾¾å¼æ›¿æ¢å®ƒä»¬ï¼Œä½†æ˜¯è¦æ³¨æ„äºŒè€…é—´è¯­ä¹‰çš„å¾®å¦™å·®åˆ«ï¼Œæ¯”å¦‚å…³é”®å­—thisï¼Œä»¥åŠå˜é‡éšè—ã€‚</li>
<li>Lambdaè¡¨è¾¾å¼æ¯”èµ·æ¥ï¼Œæ–¹æ³•å¼•ç”¨çš„å¯è¯»æ€§æ›´å¥½ã€‚</li>
<li>å°½é‡ä½¿ç”¨Stream APIæ›¿æ¢è¿­ä»£å¼çš„é›†åˆå¤„ç†ã€‚</li>
<li>Lambdaè¡¨è¾¾å¼æœ‰åŠ©äºé¿å…ä½¿ç”¨é¢å‘å¯¹è±¡è®¾è®¡æ¨¡å¼æ—¶å®¹æ˜“å‡ºç°çš„ô³‚åŒ–çš„æ¨¡æ¿ä»£ç ï¼Œå…¸å‹çš„æ¯”å¦‚ç­–ç•¥æ¨¡å¼ã€æ¨¡æ¿æ–¹æ³•ã€è§‚å¯Ÿè€…æ¨¡å¼ã€è´£ä»»é“¾æ¨¡å¼ï¼Œä»¥åŠå·¥å‚æ¨¡å¼ã€‚</li>
<li>å³ä½¿é‡‡ç”¨äº†Lambdaè¡¨è¾¾å¼ï¼Œä¹ŸåŒæ ·å¯ä»¥è¿›è¡Œå•å…ƒæµ‹è¯•ï¼Œä½†æ˜¯é€šå¸¸ä½ åº”è¯¥å…³æ³¨ä½¿ç”¨äº†Lambdaè¡¨è¾¾å¼çš„æ–¹æ³•çš„è¡Œä¸ºã€‚</li>
<li>å°½é‡å°†å¤æ‚çš„Lambdaè¡¨è¾¾å¼æŠ½è±¡åˆ°æ™®é€šæ–¹æ³•ä¸­ã€‚</li>
<li>Lambdaè¡¨è¾¾å¼ä¼šè®©æ ˆè·Ÿè¸ªçš„åˆ†æå˜å¾—æ›´ä¸ºå¤æ‚ã€‚</li>
<li>æµæä¾›çš„peekæ–¹æ³•åœ¨åˆ†æStreamæµæ°´çº¿æ—¶ï¼Œèƒ½å°†ä¸­é—´å˜é‡çš„å€¼è¾“å‡ºåˆ°æ—¥å¿—ä¸­ï¼Œæ˜¯éå¸¸æœ‰ç”¨çš„å·¥å…·ã€‚</li>
</ul>
<h2 id="èµ„æºè·å–"><a href="#èµ„æºè·å–" class="headerlink" title="èµ„æºè·å–"></a>èµ„æºè·å–</h2><ul>
<li>å…¬ä¼—å·å›å¤ : Java8 å³å¯è·å–ã€ŠJava 8 in Actionã€‹ä¸­è‹±æ–‡ç‰ˆ!</li>
</ul>
<h2 id="Tips"><a href="#Tips" class="headerlink" title="Tips"></a>Tips</h2><ul>
<li>æ¬¢è¿æ”¶è—å’Œè½¬å‘ï¼Œæ„Ÿè°¢ä½ çš„æ”¯æŒï¼(à¹‘â€¢Ì€ã…‚â€¢Ì)Ùˆâœ§ </li>
<li>æ¬¢è¿å…³æ³¨æˆ‘ï¼šåç«¯å°å“¥ï¼Œä¸“æ³¨åç«¯å¼€å‘ï¼Œå¸Œæœ›å’Œä½ ä¸€èµ·è¿›æ­¥ï¼</li>
</ul>
</div></article></div><nav class="pagination is-centered mt-4" role="navigation" aria-label="pagination"><div class="pagination-previous is-invisible is-hidden-mobile"><a href="/categories/Java/page/0/">ä¸Šä¸€é¡µ</a></div><div class="pagination-next"><a href="/categories/Java/page/2/">ä¸‹ä¸€é¡µ</a></div><ul class="pagination-list is-hidden-mobile"><li><a class="pagination-link is-current" href="/categories/Java/">1</a></li><li><a class="pagination-link" href="/categories/Java/page/2/">2</a></li></ul></nav></div><!--!--><div class="column column-right is-3-tablet is-3-desktop is-3-widescreen  order-3"><!--!--><div class="card widget"><div class="card-content"><nav class="level"><div class="level-item has-text-centered flex-shrink-1"><div><figure class="image is-128x128 mx-auto mb-2"><img class="is-rounded" src="/img/avatar.png" alt="åç«¯å°å“¥"></figure><p class="title is-size-4 is-block line-height-inherit">åç«¯å°å“¥</p><p class="is-size-6 is-block">Coder</p><p class="is-size-6 is-flex justify-content-center"><i class="fas fa-map-marker-alt mr-1"></i><span>Shijiazhuang, China</span></p></div></div></nav><nav class="level is-mobile"><div class="level-item has-text-centered is-marginless"><div><p class="heading">æ–‡ç« </p><a href="/archives"><p class="title">111</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">åˆ†ç±»</p><a href="/categories"><p class="title">20</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">æ ‡ç­¾</p><a href="/tags"><p class="title">67</p></a></div></div></nav><div class="level"><a class="level-item button is-primary is-rounded" href="https://github.com/lujiahao0708" target="_blank" rel="noopener">å…³æ³¨æˆ‘</a></div></div></div><div class="card widget"><div class="card-content"><div class="menu"><h3 class="menu-label">é“¾æ¥</h3><ul class="menu-list"><li><a class="level is-mobile is-mobile" href="https://juejin.im/user/59239002570c350069c5f0bb" target="_blank" rel="noopener"><span class="level-left"><span class="level-item">æ˜é‡‘</span></span><span class="level-right"><span class="level-item tag">juejin.im</span></span></a></li><li><a class="level is-mobile is-mobile" href="https://blog.csdn.net/xinruodingshui" target="_blank" rel="noopener"><span class="level-left"><span class="level-item">CSDN</span></span><span class="level-right"><span class="level-item tag">blog.csdn.net</span></span></a></li><li><a class="level is-mobile is-mobile" href="https://space.bilibili.com/302086424/" target="_blank" rel="noopener"><span class="level-left"><span class="level-item">Bç«™</span></span><span class="level-right"><span class="level-item tag">space.bilibili.com</span></span></a></li></ul></div></div></div><div class="card widget"><div class="card-content"><div class="menu"><h3 class="menu-label">åˆ†ç±»</h3><ul class="menu-list"><li><a class="level is-mobile is-marginless" href="/categories/Android/"><span class="level-start"><span class="level-item">Android</span></span><span class="level-end"><span class="level-item tag">7</span></span></a></li><li><a class="level is-mobile is-marginless" href="/categories/Chrome/"><span class="level-start"><span class="level-item">Chrome</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile is-marginless" href="/categories/Docker/"><span class="level-start"><span class="level-item">Docker</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile is-marginless" href="/categories/Flutter/"><span class="level-start"><span class="level-item">Flutter</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile is-marginless" href="/categories/Hexo/"><span class="level-start"><span class="level-item">Hexo</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile is-marginless" href="/categories/JVM/"><span class="level-start"><span class="level-item">JVM</span></span><span class="level-end"><span class="level-item tag">3</span></span></a></li><li><a class="level is-mobile is-marginless" href="/categories/Java/"><span class="level-start"><span class="level-item">Java</span></span><span class="level-end"><span class="level-item tag">17</span></span></a></li><li><a class="level is-mobile is-marginless" href="/categories/JavaEE/"><span class="level-start"><span class="level-item">JavaEE</span></span><span class="level-end"><span class="level-item tag">27</span></span></a></li><li><a class="level is-mobile is-marginless" href="/categories/Mac/"><span class="level-start"><span class="level-item">Mac</span></span><span class="level-end"><span class="level-item tag">4</span></span></a></li><li><a class="level is-mobile is-marginless" href="/categories/MySQL%E5%BF%85%E7%9F%A5%E5%BF%85%E4%BC%9A/"><span class="level-start"><span class="level-item">MySQLå¿…çŸ¥å¿…ä¼š</span></span><span class="level-end"><span class="level-item tag">3</span></span></a></li><li><a class="level is-mobile is-marginless" href="/categories/Redis/"><span class="level-start"><span class="level-item">Redis</span></span><span class="level-end"><span class="level-item tag">4</span></span></a></li><li><a class="level is-mobile is-marginless" href="/categories/Shiro/"><span class="level-start"><span class="level-item">Shiro</span></span><span class="level-end"><span class="level-item tag">7</span></span></a></li><li><a class="level is-mobile is-marginless" href="/categories/Simpleblog%E5%8D%9A%E5%AE%A2%E7%B3%BB%E7%BB%9F/"><span class="level-start"><span class="level-item">Simpleblogåšå®¢ç³»ç»Ÿ</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile is-marginless" href="/categories/SpringCloud/"><span class="level-start"><span class="level-item">SpringCloud</span></span><span class="level-end"><span class="level-item tag">21</span></span></a></li><li><a class="level is-mobile is-marginless" href="/categories/%E5%B7%A5%E5%85%B7%E6%95%99%E7%A8%8B/"><span class="level-start"><span class="level-item">å·¥å…·æ•™ç¨‹</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile is-marginless" href="/categories/%E5%B9%B6%E5%8F%91/"><span class="level-start"><span class="level-item">å¹¶å‘</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile is-marginless" href="/categories/%E6%8C%81%E7%BB%AD%E9%9B%86%E6%88%90/"><span class="level-start"><span class="level-item">æŒç»­é›†æˆ</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile is-marginless" href="/categories/%E6%97%A5%E5%BF%97/"><span class="level-start"><span class="level-item">æ—¥å¿—</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile is-marginless" href="/categories/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"><span class="level-start"><span class="level-item">è®¾è®¡æ¨¡å¼</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile is-marginless" href="/categories/%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/"><span class="level-start"><span class="level-item">è¯»ä¹¦ç¬”è®°</span></span><span class="level-end"><span class="level-item tag">4</span></span></a></li></ul></div></div></div><div class="card widget"><div class="card-content"><h3 class="menu-label">æœ€æ–°æ–‡ç« </h3><article class="media"><div class="media-content size-small"><p><time dateTime="2020-05-07T20:40:52.000Z">2020-05-07</time></p><p class="title is-6"><a class="link-muted" href="/p/43930bbd.html">Redis ç³»åˆ—ï¼ˆä¸‰ï¼‰Redis å¸¸ç”¨å‘½ä»¤</a></p><p class="is-uppercase"><a class="link-muted" href="/categories/Redis/">Redis</a></p></div></article><article class="media"><div class="media-content size-small"><p><time dateTime="2020-05-04T20:40:52.000Z">2020-05-04</time></p><p class="title is-6"><a class="link-muted" href="/p/fe744d5a.html">Redis ç³»åˆ—ï¼ˆäºŒï¼‰Redis å®‰è£…</a></p><p class="is-uppercase"><a class="link-muted" href="/categories/Redis/">Redis</a></p></div></article><article class="media"><div class="media-content size-small"><p><time dateTime="2020-05-01T17:40:52.000Z">2020-05-01</time></p><p class="title is-6"><a class="link-muted" href="/p/c8bef241.html">Redis ç³»åˆ—ï¼ˆä¸€ï¼‰NoSQL ç®€ä»‹</a></p><p class="is-uppercase"><a class="link-muted" href="/categories/Redis/">Redis</a></p></div></article><article class="media"><div class="media-content size-small"><p><time dateTime="2020-04-21T22:03:59.000Z">2020-04-21</time></p><p class="title is-6"><a class="link-muted" href="/p/29174125.html">Hexo ç”Ÿæˆæ°¸ä¹…æ–‡ç« é“¾æ¥</a></p><p class="is-uppercase"><a class="link-muted" href="/categories/Hexo/">Hexo</a></p></div></article><article class="media"><div class="media-content size-small"><p><time dateTime="2020-04-20T10:40:52.000Z">2020-04-20</time></p><p class="title is-6"><a class="link-muted" href="/p/5c6f02af.html">Mac å¤š Git è´¦æˆ·é…ç½®</a></p><p class="is-uppercase"><a class="link-muted" href="/categories/Mac/">Mac</a></p></div></article></div></div></div></div></div></section><footer class="footer"><div class="container"><div class="level"><div class="level-start"><a class="footer-logo is-block mb-2" href="/"><img src="/img/logo.png" alt="åç«¯å°å“¥åšå®¢" height="28"></a><p class="size-small"><span>&copy; 2020 åç«¯å°å“¥</span>Â Â Powered by <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a>Â &amp;Â <a href="https://github.com/ppoffice/hexo-theme-icarus" target="_blank" rel="noopener">Icarus</a></p></div><div class="level-end"><div class="field has-addons"><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Download on GitHub" href="https://github.com/lujiahao0708"><i class="fab fa-github"></i></a></p></div></div></div></div></footer><script src="https://cdn.jsdelivr.net/npm/jquery@3.3.1/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/moment@2.22.2/min/moment-with-locales.min.js"></script><script>moment.locale("zh-CN");</script><script>var IcarusThemeSettings = {
            site: {
                url: 'http://lujiahao0708.github.io',
                external_link: {"enable":true,"exclude":[]}
            },
            article: {
                highlight: {
                    clipboard: true,
                    fold: ''
                }
            }
        };</script><script src="https://cdn.jsdelivr.net/npm/clipboard@2.0.4/dist/clipboard.min.js" defer></script><a id="back-to-top" title="å›åˆ°é¡¶ç«¯" href="javascript:;"><i class="fas fa-chevron-up"></i></a><script src="/js/back_to_top.js" defer></script><!--!--><!--!--><script src="https://cdn.jsdelivr.net/npm/lightgallery@1.6.8/dist/js/lightgallery.min.js" defer></script><script src="https://cdn.jsdelivr.net/npm/justifiedGallery@3.7.0/dist/js/jquery.justifiedGallery.min.js" defer></script><script>window.addEventListener("load", () => {
            if (typeof $.fn.lightGallery === 'function') {
                $('.article').lightGallery({ selector: '.gallery-item' });
            }
            if (typeof $.fn.justifiedGallery === 'function') {
                if ($('.justified-gallery > p > .gallery-item').length) {
                    $('.justified-gallery > p > .gallery-item').unwrap();
                }
                $('.justified-gallery').justifiedGallery();
            }
        });</script><!--!--><!--!--><!--!--><script src="/js/main.js" defer></script><div class="searchbox"><div class="searchbox-container"><div class="searchbox-header"><div class="searchbox-input-container"><input class="searchbox-input" type="text" placeholder="æƒ³è¦æŸ¥æ‰¾ä»€ä¹ˆ..."></div><a class="searchbox-close" href="javascript:;">Ã—</a></div><div class="searchbox-body"></div></div></div><script src="/js/insight.js" defer></script><script>document.addEventListener('DOMContentLoaded', function () {
            loadInsight({"contentUrl":"/content.json"}, {"hint":"æƒ³è¦æŸ¥æ‰¾ä»€ä¹ˆ...","untitled":"(æ— æ ‡é¢˜)","posts":"æ–‡ç« ","pages":"é¡µé¢","categories":"åˆ†ç±»","tags":"æ ‡ç­¾"});
        });</script></body></html>