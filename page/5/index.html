<!doctype html>
<html lang="zh"><head><meta charset="utf-8"><meta name="generator" content="Hexo 4.2.0"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta><title>åç«¯å°å“¥åšå®¢</title><meta description="ä¸€ä¸ª Java ç¨‹åºçŒ¿"><meta property="og:type" content="blog"><meta property="og:title" content="åç«¯å°å“¥åšå®¢"><meta property="og:url" content="http://lujiahao0708.github.io/"><meta property="og:site_name" content="åç«¯å°å“¥åšå®¢"><meta property="og:description" content="ä¸€ä¸ª Java ç¨‹åºçŒ¿"><meta property="og:locale" content="zh_CN"><meta property="article:author" content="åç«¯å°å“¥"><meta property="article:tag" content="åšå®¢"><meta property="article:tag" content="æŠ€æœ¯åšå®¢"><meta property="twitter:card" content="summary"><meta property="twitter:image" content="http://lujiahao0708.github.io/img/og_image.png"><script type="application/ld+json">{"@context":"https://schema.org","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"http://lujiahao0708.github.io"},"headline":"åç«¯å°å“¥åšå®¢","image":["http://lujiahao0708.github.io/img/og_image.png"],"author":{"@type":"Person","name":"åç«¯å°å“¥"},"description":"ä¸€ä¸ª Java ç¨‹åºçŒ¿"}</script><link rel="icon" href="/img/favicon.ico"><link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.12.0/css/all.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@9.12.0/styles/atom-one-light.css"><link rel="stylesheet" href="/css/default.css"><!--!--><script>var _hmt = _hmt || [];
        (function() {
            var hm = document.createElement("script");
            hm.src = "//hm.baidu.com/hm.js?cdef3b7efc8748063e32969cc0b8dedc";
            var s = document.getElementsByTagName("script")[0];
            s.parentNode.insertBefore(hm, s);
        })();</script><!--!--><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/lightgallery@1.6.8/dist/css/lightgallery.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/justifiedGallery@3.7.0/dist/css/justifiedGallery.min.css"><!--!--><!--!--><script src="https://cdn.jsdelivr.net/npm/pace-js@1.0.2/pace.min.js"></script></head><body class="is-2-column"><nav class="navbar navbar-main"><div class="container"><div class="navbar-brand justify-content-center"><a class="navbar-item navbar-logo" href="/"><img src="/img/logo.png" alt="åç«¯å°å“¥åšå®¢" height="28"></a></div><div class="navbar-menu"><div class="navbar-start"><a class="navbar-item" href="/">é¦–é¡µ</a><a class="navbar-item" href="/categories/Redis">Redis</a><a class="navbar-item" href="/archives">å½’æ¡£</a><a class="navbar-item" href="/categories">åˆ†ç±»</a><a class="navbar-item" href="/tags">æ ‡ç­¾</a><a class="navbar-item" href="/about">å…³äº</a></div><div class="navbar-end"><a class="navbar-item" target="_blank" rel="noopener" title="Download on GitHub" href="https://github.com/lujiahao0708"><i class="fab fa-github"></i></a><a class="navbar-item search" title="æœç´¢" href="javascript:;"><i class="fas fa-search"></i></a></div></div></div></nav><section class="section"><div class="container"><div class="columns"><div class="column order-2 column-main is-9-tablet is-9-desktop is-9-widescreen"><div class="card"><article class="card-content article" role="article"><div class="article-meta size-small is-uppercase level is-mobile"><div class="level-left"><time class="level-item" dateTime="2019-07-13T11:02:28.000Z" title="2019-07-13T11:02:28.000Z">2019-07-13</time><span class="level-item"><a class="link-muted" href="/categories/%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/">è¯»ä¹¦ç¬”è®°</a></span><span class="level-item">5 åˆ†é’Ÿ è¯»å®Œ (å¤§çº¦ 708 ä¸ªå­—)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2019/07/13/%E3%80%8A%E5%A4%A7%E8%AF%9D%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E3%80%8B%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/%E3%80%8A%E5%A4%A7%E8%AF%9D%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E3%80%8B%E7%AC%AC%E4%B8%80%E7%AB%A0%20%E7%BB%AA%E8%AE%BA/">ã€Šå¤§è¯æ•°æ®ç»“æ„ã€‹ç¬¬ä¸€ç«  ç»ªè®º</a></h1><div class="content"><p>åˆå¼€æ–°å‘ğŸ˜‚,è¿™æ¬¡æ˜¯ä»æœ€åŸºç¡€çš„çŸ¥è¯†èµ·,è¿™éƒ½æ˜¯ä¸Šå­¦æ—¶å€™æ¬ ä¸‹çš„å€ºå•Š!<br>å¥½å¥½æŠŠåŸºç¡€æ‰“æ‰å®ä¸€äº›,è®©è‡ªå·±æ›´åŠ æœ‰å®åŠ›,åŠ æ²¹!</p></div><a class="article-more button is-small size-small" href="/2019/07/13/%E3%80%8A%E5%A4%A7%E8%AF%9D%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E3%80%8B%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/%E3%80%8A%E5%A4%A7%E8%AF%9D%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E3%80%8B%E7%AC%AC%E4%B8%80%E7%AB%A0%20%E7%BB%AA%E8%AE%BA/#more">é˜…è¯»æ›´å¤š</a></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta size-small is-uppercase level is-mobile"><div class="level-left"><time class="level-item" dateTime="2019-05-28T13:54:46.000Z" title="2019-05-28T13:54:46.000Z">2019-05-28</time><span class="level-item"><a class="link-muted" href="/categories/Mac/">Mac</a></span><span class="level-item">5 åˆ†é’Ÿ è¯»å®Œ (å¤§çº¦ 796 ä¸ªå­—)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2019/05/28/Mac%E7%9B%B8%E5%85%B3/Mac%E4%BD%BF%E7%94%A8ssh%E5%85%AC%E9%92%A5%E6%97%A0%E5%AF%86%E7%A0%81%E7%99%BB%E5%BD%95%E6%9C%8D%E5%8A%A1%E5%99%A8/">Macä½¿ç”¨sshå…¬é’¥å…å¯†ç™»å½•æœåŠ¡å™¨</a></h1><div class="content"><blockquote>
<p>æ¯æ¬¡ç™»é™†æœåŠ¡å™¨éƒ½è¦è¾“å…¥å¯†ç ,é‡å¤æ— ç”¨çš„æ“ä½œè®©äººå¿ƒç”ŸåŒçƒ¦ã€‚â€œæ‡’äººæ˜¯æ¨åŠ¨ç¤¾ä¼šè¿›æ­¥çš„åŠ¨åŠ›â€,æˆ‘çš„å®—æ—¨å°±æ˜¯èƒ½è‡ªåŠ¨çš„å°±ä¸è¦æ‰‹åŠ¨ã€‚<br>ä¸‹é¢å°±åƒå¤§å®¶ä»‹ç»æˆ‘æ˜¯å¦‚ä½•æ‰“é€ æ— å¯†ç ç™»å½•æœåŠ¡å™¨:</p>
</blockquote></div><a class="article-more button is-small size-small" href="/2019/05/28/Mac%E7%9B%B8%E5%85%B3/Mac%E4%BD%BF%E7%94%A8ssh%E5%85%AC%E9%92%A5%E6%97%A0%E5%AF%86%E7%A0%81%E7%99%BB%E5%BD%95%E6%9C%8D%E5%8A%A1%E5%99%A8/#more">é˜…è¯»æ›´å¤š</a></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta size-small is-uppercase level is-mobile"><div class="level-left"><time class="level-item" dateTime="2019-05-28T13:54:46.000Z" title="2019-05-28T13:54:46.000Z">2019-05-28</time><span class="level-item"><a class="link-muted" href="/categories/Mac/">Mac</a></span><span class="level-item">9 åˆ†é’Ÿ è¯»å®Œ (å¤§çº¦ 1299 ä¸ªå­—)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2019/05/28/%E6%9C%8D%E5%8A%A1%E5%99%A8%E7%9B%B8%E5%85%B3/%E6%95%B0%E6%8D%AE%E5%BA%93%E8%A2%AB%E5%88%A0%E9%99%A4%E5%B9%B6%E8%A2%AB%E5%8B%92%E7%B4%A2%E6%AF%94%E7%89%B9%E5%B8%81!%E7%9C%9F%E6%98%AF%E5%85%AD%E4%B8%80%E5%84%BF%E7%AB%A5%E5%8A%AB%E5%95%8A!/">åˆ åº“å‹’ç´¢æ¯”ç‰¹å¸!è¿™ä¸ªå…­ä¸€è¿‡çš„æœ‰æ„æ€!</a></h1><div class="content"><blockquote>
<p>æ²¡æœ‰åˆ åº“è·‘è·¯ï¼Œå´æœ‰åˆ åº“å‹’ç´¢æ¯”ç‰¹å¸ï¼å“ˆå“ˆå“ˆå“ˆğŸ˜„<br>ä¸‹é¢ç»™å¤§å®¶è®²è¿°ä¸€ä¸‹ä»Šå¹´å…­ä¸€å„¿ç«¥èŠ‚å‘ç”Ÿäº†å•¥å’Œå’‹è§£å†³çš„ã€‚</p>
</blockquote></div><a class="article-more button is-small size-small" href="/2019/05/28/%E6%9C%8D%E5%8A%A1%E5%99%A8%E7%9B%B8%E5%85%B3/%E6%95%B0%E6%8D%AE%E5%BA%93%E8%A2%AB%E5%88%A0%E9%99%A4%E5%B9%B6%E8%A2%AB%E5%8B%92%E7%B4%A2%E6%AF%94%E7%89%B9%E5%B8%81!%E7%9C%9F%E6%98%AF%E5%85%AD%E4%B8%80%E5%84%BF%E7%AB%A5%E5%8A%AB%E5%95%8A!/#more">é˜…è¯»æ›´å¤š</a></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta size-small is-uppercase level is-mobile"><div class="level-left"><time class="level-item" dateTime="2019-04-17T03:34:52.000Z" title="2019-04-17T03:34:52.000Z">2019-04-17</time><span class="level-item"><a class="link-muted" href="/categories/Java/">Java</a></span><span class="level-item">5 åˆ†é’Ÿ è¯»å®Œ (å¤§çº¦ 778 ä¸ªå­—)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2019/04/17/%E3%80%8AElasticsearch%E6%8A%80%E6%9C%AF%E8%A7%A3%E6%9E%90%E4%B8%8E%E5%AE%9E%E6%88%98%E3%80%8B%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/Chapter%202.1%20Elasticsearch%E7%B4%A2%E5%BC%95%E5%A2%9E%E5%88%A0%E6%94%B9%E6%9F%A5/">ã€ŠElasticsearchæŠ€æœ¯è§£æä¸å®æˆ˜ã€‹Chapter 2.1 Elasticsearchç´¢å¼•å¢åˆ æ”¹æŸ¥</a></h1><div class="content"><h1 id="1-åˆ›å»ºç´¢å¼•"><a href="#1-åˆ›å»ºç´¢å¼•" class="headerlink" title="1. åˆ›å»ºç´¢å¼•"></a>1. åˆ›å»ºç´¢å¼•</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">PUT &#x2F;lujiahao123</span><br><span class="line">&#123;</span><br><span class="line">  &quot;acknowledged&quot;: true,</span><br><span class="line">  &quot;shards_acknowledged&quot;: true</span><br><span class="line">&#125;</span><br><span class="line">ç´¢å¼•é»˜è®¤çš„ä¸»åˆ†ç‰‡æ•°é‡æ˜¯5ï¼Œæ¯ä¸ªä¸»åˆ†ç‰‡çš„å‰¯æœ¬æ•°é‡æ˜¯1ã€‚</span><br></pre></td></tr></table></figure></div><a class="article-more button is-small size-small" href="/2019/04/17/%E3%80%8AElasticsearch%E6%8A%80%E6%9C%AF%E8%A7%A3%E6%9E%90%E4%B8%8E%E5%AE%9E%E6%88%98%E3%80%8B%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/Chapter%202.1%20Elasticsearch%E7%B4%A2%E5%BC%95%E5%A2%9E%E5%88%A0%E6%94%B9%E6%9F%A5/#more">é˜…è¯»æ›´å¤š</a></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta size-small is-uppercase level is-mobile"><div class="level-left"><time class="level-item" dateTime="2019-04-16T03:34:52.000Z" title="2019-04-16T03:34:52.000Z">2019-04-16</time><span class="level-item"><a class="link-muted" href="/categories/Java/">Java</a></span><span class="level-item">4 åˆ†é’Ÿ è¯»å®Œ (å¤§çº¦ 583 ä¸ªå­—)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2019/04/16/%E3%80%8AElasticsearch%E6%8A%80%E6%9C%AF%E8%A7%A3%E6%9E%90%E4%B8%8E%E5%AE%9E%E6%88%98%E3%80%8B%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/Chapter%201.4%20Spring%20Boot%E6%95%B4%E5%90%88Elasticsearch/">ã€ŠElasticsearchæŠ€æœ¯è§£æä¸å®æˆ˜ã€‹Chapter 1.4 Spring Bootæ•´åˆElasticsearch</a></h1><div class="content"><h1 id="1-spring-boot-starter-data-elasticsearch"><a href="#1-spring-boot-starter-data-elasticsearch" class="headerlink" title="1. spring-boot-starter-data-elasticsearch"></a>1. spring-boot-starter-data-elasticsearch</h1><h2 id="1-1-pom-xmlå’Œapplication-yml"><a href="#1-1-pom-xmlå’Œapplication-yml" class="headerlink" title="1.1 pom.xmlå’Œapplication.yml"></a>1.1 pom.xmlå’Œapplication.yml</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- Spring Boot Elasticsearch ä¾èµ– --&gt;</span><br><span class="line">&lt;dependency&gt;</span><br><span class="line">    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;</span><br><span class="line">    &lt;artifactId&gt;spring-boot-starter-data-elasticsearch&lt;/artifactId&gt;</span><br><span class="line">&lt;/dependency&gt;</span><br><span class="line">spring:</span><br><span class="line">  data:</span><br><span class="line">    elasticsearch:</span><br><span class="line">      repositories:</span><br><span class="line">        enabled: <span class="keyword">true</span></span><br><span class="line">      cluster-name: docker-cluster</span><br><span class="line">      cluster-nodes: lujiahao.ml:<span class="number">9300</span></span><br></pre></td></tr></table></figure>

<h2 id="1-2-åˆ›å»ºRepository"><a href="#1-2-åˆ›å»ºRepository" class="headerlink" title="1.2 åˆ›å»ºRepository"></a>1.2 åˆ›å»ºRepository</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Repository</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">PersonEsRepository</span> <span class="keyword">extends</span> <span class="title">ElasticsearchRepository</span>&lt;<span class="title">Person</span>,<span class="title">Long</span>&gt; </span>&#123;</span><br><span class="line">    <span class="function">List&lt;Person&gt; <span class="title">findPersonByName</span><span class="params">(String name)</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="1-3-æ–‡æ¡£å®ä½“ç±»"><a href="#1-3-æ–‡æ¡£å®ä½“ç±»" class="headerlink" title="1.3 æ–‡æ¡£å®ä½“ç±»"></a>1.3 æ–‡æ¡£å®ä½“ç±»</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="meta">@Document</span>(indexName = <span class="string">"person"</span>, type = <span class="string">"chinese"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Person</span> <span class="keyword">implements</span> <span class="title">Serializable</span></span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">long</span> serialVersionUID = -<span class="number">6804453833406105286L</span>;</span><br><span class="line">    <span class="meta">@Id</span></span><br><span class="line">    <span class="keyword">private</span> Long id;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> Integer age;</span><br><span class="line">    <span class="keyword">private</span> String address;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="1-4-å¢åˆ æ”¹æŸ¥"><a href="#1-4-å¢åˆ æ”¹æŸ¥" class="headerlink" title="1.4 å¢åˆ æ”¹æŸ¥"></a>1.4 å¢åˆ æ”¹æŸ¥</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">EsStarterService</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> PersonEsRepository repository;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * å¢</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Person <span class="title">save</span><span class="params">(Person person)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> repository.save(person);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * åˆ </span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">delete</span><span class="params">(Person person)</span> </span>&#123;</span><br><span class="line">        repository.delete(person);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ”¹</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Person <span class="title">update</span><span class="params">(Person person)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> repository.save(person);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æŸ¥</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Iterable&lt;Person&gt; <span class="title">findAll</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> repository.findAll();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="1-5-å•å…ƒæµ‹è¯•"><a href="#1-5-å•å…ƒæµ‹è¯•" class="headerlink" title="1.5 å•å…ƒæµ‹è¯•"></a>1.5 å•å…ƒæµ‹è¯•</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RunWith</span>(SpringRunner<span class="class">.<span class="keyword">class</span>)</span></span><br><span class="line"><span class="class">@<span class="title">SpringBootTest</span></span></span><br><span class="line"><span class="class"><span class="title">public</span> <span class="title">class</span> <span class="title">EsStarterServiceTest</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> EsStarterService esStarterService;</span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">save</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        Person person = <span class="keyword">new</span> Person();</span><br><span class="line">        person.setId(<span class="keyword">new</span> Random().nextLong());</span><br><span class="line">        person.setName(<span class="string">"lujiahao"</span>);</span><br><span class="line">        esStarterService.save(person);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">delete</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        Person person = <span class="keyword">new</span> Person();</span><br><span class="line">        person.setId(-<span class="number">5264182431891613084L</span>);</span><br><span class="line">        person.setName(<span class="string">"lujiahao123456"</span>);</span><br><span class="line">        esStarterService.delete(person);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">update</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        Person person = <span class="keyword">new</span> Person();</span><br><span class="line">        person.setId(<span class="number">542136934419565287L</span>);</span><br><span class="line">        person.setName(<span class="string">"lujiahao123456"</span>);</span><br><span class="line">        esStarterService.update(person);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">findAll</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        Iterable&lt;Person&gt; all = esStarterService.findAll();</span><br><span class="line">        all.forEach(System.out::println);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="2-ElasticsearchTemplate"><a href="#2-ElasticsearchTemplate" class="headerlink" title="2. ElasticsearchTemplate"></a>2. ElasticsearchTemplate</h1><h2 id="2-1-pom-xmlå’Œapplication-ym"><a href="#2-1-pom-xmlå’Œapplication-ym" class="headerlink" title="2.1 pom.xmlå’Œapplication.ym"></a>2.1 pom.xmlå’Œapplication.ym</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&lt;!--elasticsearch--&gt;</span><br><span class="line">&lt;dependency&gt;</span><br><span class="line">    &lt;groupId&gt;org.springframework.data&lt;/groupId&gt;</span><br><span class="line">    &lt;artifactId&gt;spring-data-elasticsearch&lt;/artifactId&gt;</span><br><span class="line">&lt;/dependency&gt;</span><br><span class="line">spring:</span><br><span class="line">  data:</span><br><span class="line">    elasticsearch:</span><br><span class="line">      repositories:</span><br><span class="line">        enabled: <span class="keyword">true</span></span><br><span class="line">      cluster-name: docker-cluster</span><br><span class="line">      cluster-nodes: lujiahao.ml:<span class="number">9300</span></span><br></pre></td></tr></table></figure>

<h2 id="2-2-æ–‡æ¡£å®ä½“ç±»"><a href="#2-2-æ–‡æ¡£å®ä½“ç±»" class="headerlink" title="2.2 æ–‡æ¡£å®ä½“ç±»"></a>2.2 æ–‡æ¡£å®ä½“ç±»</h2><p>åŒä¸Š</p>
<h2 id="2-3-å¢åˆ æ”¹æŸ¥"><a href="#2-3-å¢åˆ æ”¹æŸ¥" class="headerlink" title="2.3 å¢åˆ æ”¹æŸ¥"></a>2.3 å¢åˆ æ”¹æŸ¥</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ElasticsearchTemplateService</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">public</span> ElasticsearchTemplate elasticsearchTemplate;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> String INDEX_NAME = <span class="string">"person"</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> String TYPE_NAME = <span class="string">"chinese"</span>;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * å¢</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">save</span><span class="params">(Person person)</span> </span>&#123;</span><br><span class="line">        IndexQuery indexQuery = <span class="keyword">new</span> IndexQueryBuilder()</span><br><span class="line">                .withIndexName(INDEX_NAME)</span><br><span class="line">                .withType(TYPE_NAME)</span><br><span class="line">                .withId(String.valueOf(person.getId()))</span><br><span class="line">                .withObject(person)</span><br><span class="line">                .build();</span><br><span class="line">        String index = elasticsearchTemplate.index(indexQuery);</span><br><span class="line">        System.out.println(<span class="string">"xxxxxxxxxxxx "</span> + index);</span><br><span class="line">        <span class="keyword">return</span> index;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * åˆ </span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">deleteByName</span><span class="params">(String name)</span> </span>&#123;</span><br><span class="line">        DeleteQuery deleteQuery = <span class="keyword">new</span> DeleteQuery();</span><br><span class="line">        deleteQuery.setQuery(QueryBuilders.matchQuery(<span class="string">"name"</span>, name));</span><br><span class="line">        deleteQuery.setIndex(INDEX_NAME);</span><br><span class="line">        deleteQuery.setType(TYPE_NAME);</span><br><span class="line">        elasticsearchTemplate.delete(deleteQuery);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ”¹</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> UpdateResponse <span class="title">update</span><span class="params">(Person person)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            UpdateRequest updateRequest = <span class="keyword">new</span> UpdateRequest()</span><br><span class="line">                    .index(INDEX_NAME)</span><br><span class="line">                    .type(TYPE_NAME)</span><br><span class="line">                    .id(String.valueOf(person.getId()))</span><br><span class="line">                    .doc(XContentFactory.jsonBuilder()</span><br><span class="line">                            .startObject()</span><br><span class="line">                            .field(<span class="string">"name"</span>, person.getName())</span><br><span class="line">                            .endObject());</span><br><span class="line">            UpdateQuery updateQuery = <span class="keyword">new</span> UpdateQueryBuilder()</span><br><span class="line">                    .withIndexName(INDEX_NAME)</span><br><span class="line">                    .withType(TYPE_NAME)</span><br><span class="line">                    .withId(String.valueOf(person.getId()))</span><br><span class="line">                    .withClass(Person<span class="class">.<span class="keyword">class</span>)</span></span><br><span class="line"><span class="class">                    .<span class="title">withUpdateRequest</span>(<span class="title">updateRequest</span>)</span></span><br><span class="line"><span class="class">                    .<span class="title">build</span>()</span>;</span><br><span class="line">            UpdateResponse update = elasticsearchTemplate.update(updateQuery);</span><br><span class="line">            <span class="keyword">return</span> update;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æŸ¥</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> List&lt;Person&gt; <span class="title">getAll</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        SearchQuery searchQuery = <span class="keyword">new</span> NativeSearchQueryBuilder()</span><br><span class="line">                .withQuery(QueryBuilders.matchAllQuery())</span><br><span class="line">                .build();</span><br><span class="line">        <span class="keyword">return</span> elasticsearchTemplate.queryForList(searchQuery, Person<span class="class">.<span class="keyword">class</span>)</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="2-4-å•å…ƒæµ‹è¯•"><a href="#2-4-å•å…ƒæµ‹è¯•" class="headerlink" title="2.4 å•å…ƒæµ‹è¯•"></a>2.4 å•å…ƒæµ‹è¯•</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RunWith</span>(SpringRunner<span class="class">.<span class="keyword">class</span>)</span></span><br><span class="line"><span class="class">@<span class="title">SpringBootTest</span></span></span><br><span class="line"><span class="class"><span class="title">public</span> <span class="title">class</span> <span class="title">ElasticsearchTemplateServiceTest</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> ElasticsearchTemplateService elasticsearchTemplateService;</span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">save</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        Person person = <span class="keyword">new</span> Person();</span><br><span class="line">        person.setId(<span class="keyword">new</span> Random().nextLong());</span><br><span class="line">        person.setName(<span class="string">"haha"</span>);</span><br><span class="line">        String save = elasticsearchTemplateService.save(person);</span><br><span class="line">        System.out.println(save);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">deleteByName</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        elasticsearchTemplateService.deleteByName(<span class="string">"lujiahao"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">update</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        Person person = <span class="keyword">new</span> Person();</span><br><span class="line">        person.setId(-<span class="number">5264182431891613084L</span>);</span><br><span class="line">        person.setName(<span class="string">"hahaaaaaaaaa"</span>);</span><br><span class="line">        UpdateResponse update = elasticsearchTemplateService.update(person);</span><br><span class="line">        System.out.println(update);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">getAll</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        List&lt;Person&gt; all = elasticsearchTemplateService.getAll();</span><br><span class="line">        System.out.println(all);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="3-ä»£ç ç¤ºä¾‹"><a href="#3-ä»£ç ç¤ºä¾‹" class="headerlink" title="3. ä»£ç ç¤ºä¾‹"></a>3. ä»£ç ç¤ºä¾‹</h1><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https:<span class="comment">//github.com/lujiahao0708/LearnSeries/tree/master/LearnElasticSerach</span></span><br></pre></td></tr></table></figure>


<h2 id="Tips"><a href="#Tips" class="headerlink" title="Tips"></a>Tips</h2><p>æœ¬æ–‡åŒæ­¥å‘è¡¨åœ¨å…¬ä¼—å·ï¼Œæ¬¢è¿å¤§å®¶å…³æ³¨ï¼ğŸ˜<br>åç»­ç¬”è®°æ¬¢è¿å…³æ³¨è·å–ç¬¬ä¸€æ—¶é—´æ›´æ–°ï¼<br><img src="https://raw.githubusercontent.com/lujiahao0708/PicRepo/master/%E5%85%AC%E4%BC%97%E5%8F%B7%E4%BA%8C%E7%BB%B4%E7%A0%81.jpg" alt=""></p>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta size-small is-uppercase level is-mobile"><div class="level-left"><time class="level-item" dateTime="2019-04-15T03:34:52.000Z" title="2019-04-15T03:34:52.000Z">2019-04-15</time><span class="level-item"><a class="link-muted" href="/categories/Java/">Java</a></span><span class="level-item">3 åˆ†é’Ÿ è¯»å®Œ (å¤§çº¦ 462 ä¸ªå­—)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2019/04/15/%E3%80%8AElasticsearch%E6%8A%80%E6%9C%AF%E8%A7%A3%E6%9E%90%E4%B8%8E%E5%AE%9E%E6%88%98%E3%80%8B%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/Chapter%201.3%20Elasticsearch%E5%A2%9E%E5%88%A0%E6%94%B9%E6%9F%A5/">ã€ŠElasticsearchæŠ€æœ¯è§£æä¸å®æˆ˜ã€‹Chapter 1.3 Elasticsearchå¢åˆ æ”¹æŸ¥</a></h1><div class="content"><h1 id="1-æ–°å¢æ–‡æ¡£ï¼Œå»ºç«‹ç´¢å¼•"><a href="#1-æ–°å¢æ–‡æ¡£ï¼Œå»ºç«‹ç´¢å¼•" class="headerlink" title="1. æ–°å¢æ–‡æ¡£ï¼Œå»ºç«‹ç´¢å¼•"></a>1. æ–°å¢æ–‡æ¡£ï¼Œå»ºç«‹ç´¢å¼•</h1><p>è¯­æ³•æ ¼å¼:</p>
<pre><code>PUT /index/type/id
{
  &quot;jsonæ•°æ®&quot;
}</code></pre><p>è¾“å…¥:</p>
<pre><code>PUT /person/chinese/1
{
  &quot;id&quot;:12345,
  &quot;name&quot;:&quot;lujiahao&quot;,
  &quot;age&quot;:18
}</code></pre><p>è¾“å‡º:</p>
<pre><code>{
  &quot;_index&quot;: &quot;person&quot;,
  &quot;_type&quot;: &quot;chinese&quot;,
  &quot;_id&quot;: &quot;1&quot;,
  &quot;_version&quot;: 1,
  &quot;result&quot;: &quot;created&quot;,
  &quot;_shards&quot;: {
    &quot;total&quot;: 2,
    &quot;successful&quot;: 1,
    &quot;failed&quot;: 0
  },
  &quot;created&quot;: true
}</code></pre><blockquote>
<p>esä¼šè‡ªåŠ¨å»ºç«‹indexå’Œtypeï¼Œä¸éœ€è¦æå‰åˆ›å»ºï¼Œè€Œä¸”esé»˜è®¤ä¼šå¯¹documentæ¯ä¸ªfieldéƒ½å»ºç«‹å€’æ’ç´¢å¼•ï¼Œè®©å…¶å¯ä»¥è¢«æœç´¢ã€‚</p>
</blockquote>
<h1 id="2-æ£€ç´¢æ–‡æ¡£"><a href="#2-æ£€ç´¢æ–‡æ¡£" class="headerlink" title="2. æ£€ç´¢æ–‡æ¡£"></a>2. æ£€ç´¢æ–‡æ¡£</h1><p>æ ¼å¼:</p>
<pre><code>GET /index/type/id</code></pre><p>è¾“å…¥:</p>
<pre><code>GET /person/chinese/1</code></pre><p>è¾“å‡º:</p>
<pre><code>{
  &quot;_index&quot;: &quot;person&quot;,
  &quot;_type&quot;: &quot;chinese&quot;,
  &quot;_id&quot;: &quot;1&quot;,
  &quot;_version&quot;: 1,
  &quot;found&quot;: true,
  &quot;_source&quot;: {
    &quot;id&quot;: 12345,
    &quot;name&quot;: &quot;lujiahao&quot;,
    &quot;age&quot;: 18
  }
}</code></pre><h1 id="3-æ›´æ–°æ–‡æ¡£"><a href="#3-æ›´æ–°æ–‡æ¡£" class="headerlink" title="3. æ›´æ–°æ–‡æ¡£"></a>3. æ›´æ–°æ–‡æ¡£</h1><h2 id="3-1-æ›¿æ¢æ–¹å¼"><a href="#3-1-æ›¿æ¢æ–¹å¼" class="headerlink" title="3.1 æ›¿æ¢æ–¹å¼"></a>3.1 æ›¿æ¢æ–¹å¼</h2><p>æ ¼å¼:</p>
<pre><code>PUT /index/type/id
{
    &quot;jsonæ•°æ®&quot;
}</code></pre><p>è¾“å…¥:</p>
<pre><code>PUT /person/chinese/1
{
  &quot;name&quot;:&quot;lujiahao123&quot;
}</code></pre><p>è¾“å‡º:</p>
<pre><code>{
  &quot;_index&quot;: &quot;person&quot;,
  &quot;_type&quot;: &quot;chinese&quot;,
  &quot;_id&quot;: &quot;1&quot;,
  &quot;_version&quot;: 2,
  &quot;result&quot;: &quot;updated&quot;,
  &quot;_shards&quot;: {
    &quot;total&quot;: 2,
    &quot;successful&quot;: 1,
    &quot;failed&quot;: 0
  },
  &quot;created&quot;: false
}</code></pre><p>æŸ¥è¯¢:</p>
<pre><code>{
  &quot;_index&quot;: &quot;person&quot;,
  &quot;_type&quot;: &quot;chinese&quot;,
  &quot;_id&quot;: &quot;1&quot;,
  &quot;_version&quot;: 2,
  &quot;found&quot;: true,
  &quot;_source&quot;: {
    &quot;name&quot;: &quot;lujiahao123&quot;
  }
}</code></pre><blockquote>
<p>æ›¿æ¢æ–¹å¼æ›´æ–°æ–‡æ¡£æ—¶ï¼Œå¿…é¡»å¸¦ä¸Šæ‰€æœ‰çš„fieldï¼Œæ‰èƒ½å»è¿›è¡Œä¿¡æ¯çš„ä¿®æ”¹ï¼›å¦‚æœç¼ºå°‘fieldå°±ä¼šä¸¢å¤±éƒ¨åˆ†æ•°æ®ã€‚å…¶åŸç†æ—¶æ›¿æ¢ï¼Œå› æ­¤éœ€è¦å…¨éƒ¨å­—æ®µã€‚ä¸æ¨èæ­¤ç§æ–¹å¼æ›´æ–°æ–‡æ¡£ã€‚</p>
</blockquote>
<h2 id="3-1-æ›´æ–°æ–¹å¼"><a href="#3-1-æ›´æ–°æ–¹å¼" class="headerlink" title="3.1 æ›´æ–°æ–¹å¼"></a>3.1 æ›´æ–°æ–¹å¼</h2><p>æ ¼å¼:</p>
<pre><code>POST /index/type/id/_update
{
    &quot;doc&quot;:{
        &quot;jsonæ•°æ®&quot;
    }
}</code></pre><p>è¾“å…¥:</p>
<pre><code>POST /person/chinese/1/_update
{
  &quot;doc&quot;:{
    &quot;name&quot;:&quot;lujiahao10010&quot;
  }
}</code></pre><p>è¾“å‡º:</p>
<pre><code>{
  &quot;_index&quot;: &quot;person&quot;,
  &quot;_type&quot;: &quot;chinese&quot;,
  &quot;_id&quot;: &quot;1&quot;,
  &quot;_version&quot;: 4,
  &quot;result&quot;: &quot;updated&quot;,
  &quot;_shards&quot;: {
    &quot;total&quot;: 2,
    &quot;successful&quot;: 1,
    &quot;failed&quot;: 0
  },
  &quot;created&quot;: false
}</code></pre><p>å†æ¬¡æŸ¥è¯¢ï¼š</p>
<pre><code>{
  &quot;_index&quot;: &quot;person&quot;,
  &quot;_type&quot;: &quot;chinese&quot;,
  &quot;_id&quot;: &quot;1&quot;,
  &quot;_version&quot;: 6,
  &quot;found&quot;: true,
  &quot;_source&quot;: {
    &quot;id&quot;: 12345,
    &quot;name&quot;: &quot;lujiahao10010&quot;,
    &quot;age&quot;: 18
  }
}</code></pre><h1 id="4-åˆ é™¤æ–‡æ¡£"><a href="#4-åˆ é™¤æ–‡æ¡£" class="headerlink" title="4. åˆ é™¤æ–‡æ¡£"></a>4. åˆ é™¤æ–‡æ¡£</h1><p>æ ¼å¼:</p>
<pre><code>DELETE /index/type/id/_update
{
    &quot;doc&quot;:{
        &quot;jsonæ•°æ®&quot;
    }
}</code></pre><p>è¾“å…¥:</p>
<pre><code>DELETE /person/chinese/1</code></pre><p>è¾“å‡º:</p>
<pre><code>{
  &quot;found&quot;: true,
  &quot;_index&quot;: &quot;person&quot;,
  &quot;_type&quot;: &quot;chinese&quot;,
  &quot;_id&quot;: &quot;1&quot;,
  &quot;_version&quot;: 7,
  &quot;result&quot;: &quot;deleted&quot;,
  &quot;_shards&quot;: {
    &quot;total&quot;: 2,
    &quot;successful&quot;: 1,
    &quot;failed&quot;: 0
  }
}</code></pre><p>å†æ¬¡æŸ¥è¯¢:</p>
<pre><code>{
  &quot;_index&quot;: &quot;person&quot;,
  &quot;_type&quot;: &quot;chinese&quot;,
  &quot;_id&quot;: &quot;1&quot;,
  &quot;found&quot;: false
}</code></pre><h1 id="5-å°ç»“"><a href="#5-å°ç»“" class="headerlink" title="5. å°ç»“"></a>5. å°ç»“</h1><p>æœ¬æ–‡æ‰€æœ‰æ“ä½œéƒ½æ˜¯åœ¨kibanaçš„Dev toolsä¸­è¿›è¡Œçš„ï¼Œç›¸è¾ƒäºElasticsearch-Headeæ’ä»¶ï¼Œkibanaä¸­æ›´åŠ æ–¹ä¾¿ä¸ç¾è§‚ï¼ˆä¸ªäººè§‚ç‚¹ï¼‰ï¼Œæ¨èå¤§å®¶ä½¿ç”¨ã€‚</p>
<h2 id="Tips"><a href="#Tips" class="headerlink" title="Tips"></a>Tips</h2><p>æœ¬æ–‡åŒæ­¥å‘è¡¨åœ¨å…¬ä¼—å·ï¼Œæ¬¢è¿å¤§å®¶å…³æ³¨ï¼ğŸ˜<br>åç»­ç¬”è®°æ¬¢è¿å…³æ³¨è·å–ç¬¬ä¸€æ—¶é—´æ›´æ–°ï¼<br><img src="https://raw.githubusercontent.com/lujiahao0708/PicRepo/master/%E5%85%AC%E4%BC%97%E5%8F%B7%E4%BA%8C%E7%BB%B4%E7%A0%81.jpg" alt=""></p>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta size-small is-uppercase level is-mobile"><div class="level-left"><time class="level-item" dateTime="2019-04-14T03:34:52.000Z" title="2019-04-14T03:34:52.000Z">2019-04-14</time><span class="level-item"><a class="link-muted" href="/categories/Java/">Java</a></span><span class="level-item">2 åˆ†é’Ÿ è¯»å®Œ (å¤§çº¦ 320 ä¸ªå­—)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2019/04/14/%E3%80%8AElasticsearch%E6%8A%80%E6%9C%AF%E8%A7%A3%E6%9E%90%E4%B8%8E%E5%AE%9E%E6%88%98%E3%80%8B%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/Chapter%201.2%20Elasticsearch%E5%AE%89%E8%A3%85/">ã€ŠElasticsearchæŠ€æœ¯è§£æä¸å®æˆ˜ã€‹Chapter 1.2 Elasticsearchå®‰è£…</a></h1><div class="content"><h1 id="1-ä¸‹è½½å®‰è£…"><a href="#1-ä¸‹è½½å®‰è£…" class="headerlink" title="1. ä¸‹è½½å®‰è£…"></a>1. ä¸‹è½½å®‰è£…</h1><h2 id="1-1-ä¸‹è½½"><a href="#1-1-ä¸‹è½½" class="headerlink" title="1.1 ä¸‹è½½"></a>1.1 ä¸‹è½½</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">https://www.elastic.co/downloads/elasticsearch</span><br><span class="line">ä¸‹è½½ https://artifacts.elastic.co/downloads/elasticsearch/elasticsearch-6.7.0.tar.gz</span><br></pre></td></tr></table></figure>

<h2 id="1-2-è§£å‹"><a href="#1-2-è§£å‹" class="headerlink" title="1.2 è§£å‹"></a>1.2 è§£å‹</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tar -zxvf elasticsearch-6.7.0.tar.gz</span><br></pre></td></tr></table></figure>

<h2 id="1-3-è¿è¡Œ"><a href="#1-3-è¿è¡Œ" class="headerlink" title="1.3 è¿è¡Œ"></a>1.3 è¿è¡Œ</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cd elasticsearch-6.7.0</span><br><span class="line">bin/elasticsearch</span><br></pre></td></tr></table></figure>

<h2 id="1-4-æ£€éªŒ"><a href="#1-4-æ£€éªŒ" class="headerlink" title="1.4 æ£€éªŒ"></a>1.4 æ£€éªŒ</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">curl http://localhost:9200  æˆ–è€…æµè§ˆå™¨è®¿é—®</span><br><span class="line">&#123;</span><br><span class="line">    "name": "q9sdES9",</span><br><span class="line">    "cluster_name": "docker-cluster",</span><br><span class="line">    "cluster_uuid": "6klEi4d0Q6y0LC3YNYVXTQ",</span><br><span class="line">    "version": &#123;</span><br><span class="line">        "number": "5.5.0",</span><br><span class="line">        "build_hash": "260387d",</span><br><span class="line">        "build_date": "2017-06-30T23:16:05.735Z",</span><br><span class="line">        "build_snapshot": false,</span><br><span class="line">        "lucene_version": "6.6.0"</span><br><span class="line">    &#125;,</span><br><span class="line">    "tagline": "You Know, for Search"</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="2-Dockeréƒ¨ç½²"><a href="#2-Dockeréƒ¨ç½²" class="headerlink" title="2. Dockeréƒ¨ç½²"></a>2. Dockeréƒ¨ç½²</h1><blockquote>
<p>å®˜æ–¹æ–‡æ¡£ : <a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/docker.html">https://www.elastic.co/guide/en/elasticsearch/reference/current/docker.html</a></p>
</blockquote>
<h2 id="2-1-æ‹‰å–é•œåƒ"><a href="#2-1-æ‹‰å–é•œåƒ" class="headerlink" title="2.1 æ‹‰å–é•œåƒ"></a>2.1 æ‹‰å–é•œåƒ</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker pull docker.elastic.co/elasticsearch/elasticsearch:5.5.1</span><br></pre></td></tr></table></figure>

<h2 id="2-2-å¯åŠ¨å®¹å™¨"><a href="#2-2-å¯åŠ¨å®¹å™¨" class="headerlink" title="2.2 å¯åŠ¨å®¹å™¨"></a>2.2 å¯åŠ¨å®¹å™¨</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run -p 9200:9200 9300:9300 -e "http.host=0.0.0.0" -e â€œtransport.host=0.0.0.0" --name elasticsearch_5.5.0 -d docker.elastic.co/elasticsearch/elasticsearch:5.5.0</span><br></pre></td></tr></table></figure>

<h2 id="2-3-ä¿®æ”¹é…ç½®"><a href="#2-3-ä¿®æ”¹é…ç½®" class="headerlink" title="2.3 ä¿®æ”¹é…ç½®"></a>2.3 ä¿®æ”¹é…ç½®</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">è¿›å…¥åˆ°å®¹å™¨ä¸­ : docker exec -it elasticsearch_5.5.0 /bin/bash</span><br><span class="line">ä¿®æ”¹jvmé…ç½® : vi /config/jvm.options</span><br><span class="line">            -Xms2g  â€”&gt;  -Xms512m</span><br><span class="line">            -Xmx2g  â€”&gt;  -Xmx512m</span><br><span class="line">    ä¿®æ”¹å°ä¸€äº›,æœåŠ¡å™¨å†…å­˜æœ‰é™ğŸ˜‚</span><br></pre></td></tr></table></figure>

<h2 id="2-4-é‡å¯å®¹å™¨-æŸ¥çœ‹æ˜¯å¦æˆåŠŸ"><a href="#2-4-é‡å¯å®¹å™¨-æŸ¥çœ‹æ˜¯å¦æˆåŠŸ" class="headerlink" title="2.4 é‡å¯å®¹å™¨,æŸ¥çœ‹æ˜¯å¦æˆåŠŸ"></a>2.4 é‡å¯å®¹å™¨,æŸ¥çœ‹æ˜¯å¦æˆåŠŸ</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">http://æœåŠ¡å™¨ip:9200</span><br><span class="line">&#123;</span><br><span class="line">    "name": "q9sdES9",</span><br><span class="line">    "cluster_name": "docker-cluster",</span><br><span class="line">    "cluster_uuid": "6klEi4d0Q6y0LC3YNYVXTQ",</span><br><span class="line">    "version": &#123;</span><br><span class="line">        "number": "5.5.0",</span><br><span class="line">        "build_hash": "260387d",</span><br><span class="line">        "build_date": "2017-06-30T23:16:05.735Z",</span><br><span class="line">        "build_snapshot": false,</span><br><span class="line">        "lucene_version": "6.6.0"</span><br><span class="line">    &#125;,</span><br><span class="line">    "tagline": "You Know, for Search"</span><br><span class="line">&#125;</span><br><span class="line">æ­¤å¤„é›†ç¾¤çš„åç§°ä¸º docker-cluster, å¯ä»¥è‡ªè¡Œä¿®æ”¹ : vi /config/elasticsearch.yml</span><br></pre></td></tr></table></figure>

<h2 id="Tips"><a href="#Tips" class="headerlink" title="Tips"></a>Tips</h2><p>æœ¬æ–‡åŒæ­¥å‘è¡¨åœ¨å…¬ä¼—å·ï¼Œæ¬¢è¿å¤§å®¶å…³æ³¨ï¼ğŸ˜<br>åç»­ç¬”è®°æ¬¢è¿å…³æ³¨è·å–ç¬¬ä¸€æ—¶é—´æ›´æ–°ï¼<br><img src="https://raw.githubusercontent.com/lujiahao0708/PicRepo/master/%E5%85%AC%E4%BC%97%E5%8F%B7%E4%BA%8C%E7%BB%B4%E7%A0%81.jpg" alt=""></p>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta size-small is-uppercase level is-mobile"><div class="level-left"><time class="level-item" dateTime="2019-04-12T03:34:52.000Z" title="2019-04-12T03:34:52.000Z">2019-04-12</time><span class="level-item"><a class="link-muted" href="/categories/Java/">Java</a></span><span class="level-item">19 åˆ†é’Ÿ è¯»å®Œ (å¤§çº¦ 2874 ä¸ªå­—)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2019/04/12/%E3%80%8AElasticsearch%E6%8A%80%E6%9C%AF%E8%A7%A3%E6%9E%90%E4%B8%8E%E5%AE%9E%E6%88%98%E3%80%8B%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/Chapter%201.1%20Elasticsearch%E5%85%A5%E9%97%A8%E5%92%8C%E5%80%92%E6%8E%92%E7%B4%A2%E5%BC%95/">ã€ŠElasticsearchæŠ€æœ¯è§£æä¸å®æˆ˜ã€‹Chapter 1.1ï¼šElasticsearchå…¥é—¨å’Œå€’æ’ç´¢å¼•</a></h1><div class="content"><h1 id="1-ç®€ä»‹"><a href="#1-ç®€ä»‹" class="headerlink" title="1. ç®€ä»‹"></a>1. ç®€ä»‹</h1><p>Elasticsearchæ˜¯ä¸€ä¸ªæœºé‡Luceneæ„å»ºçš„å¼€æºã€åˆ†å¸ƒå¼ã€RESTfulæ¥å£å…¨æ–‡æœç´¢å¼•æ“ã€‚åŒæ—¶ï¼ŒElasticsearchè¿˜æ˜¯ä¸€ä¸ªåˆ†å¸ƒå¼æ–‡æ¡£æ•°æ®åº“ï¼Œèƒ½å¤Ÿæ‰©å±•è‡³æ•°ç™¾ä¸ªæœåŠ¡å™¨å­˜å‚¨ä»¥å¤„ç†PBçº§æ•°æ®ï¼Œé€šå¸¸ä½œä¸ºå¤æ‚æœç´¢åœºæ™¯çš„é¦–é€‰åˆ©å™¨ã€‚</p>
<p>Elasticsearchçš„ä¼˜ç‚¹ï¼š</p>
<ol>
<li>æ¨ªå‘å¯æ‰©å±•æ€§ï¼šåªéœ€è¦å¢åŠ ä¸€å°æœåŠ¡å™¨ï¼Œé…ç½®å®Œæ¯•å³å¯åŠ å…¥é›†ç¾¤ã€‚</li>
<li>åˆ†ç‰‡æœºåˆ¶æä¾›æ›´å¥½çš„åˆ†å¸ƒæ€§ï¼šåŒä¸€ä¸ªç´¢å¼•åˆ†æˆå¤šä¸ªåˆ†ç‰‡ï¼Œç±»ä¼¼äºHDFSçš„å—æœºåˆ¶ï¼Œåˆ†è€Œæ²»ä¹‹çš„æ–¹å¼æå‡å¤„ç†æ•ˆç‡ã€‚</li>
<li>é«˜å¯ç”¨ï¼šæä¾›å¤åˆ¶æœºåˆ¶ï¼Œä¸€ä¸ªåˆ†ç‰‡å¯ä»¥è®¾ç½®å¤šä¸ªå‰¯æœ¬ï¼Œåœ¨æŸå°æœåŠ¡å™¨å®•æœºæƒ…å†µä¸‹ï¼Œé›†ç¾¤ä¾æ—§å¯ä»¥å·¥ä½œï¼Œå¹¶åœ¨å®•æœºæœåŠ¡å™¨é‡å¯åæ¢å¤æ•°æ®ã€‚</li>
<li>ä½¿ç”¨ç®€å•ï¼šå¼€ç®±å³ç”¨ï¼Œå¿«é€Ÿæ­å»ºæœç´¢æœåŠ¡ã€‚</li>
</ol>
<p><a href="https://zh.wikipedia.org/wiki/Elasticsearch">Elasticsearch wiki:https://zh.wikipedia.org/wiki/Elasticsearch</a></p>
<h1 id="2-æ•°æ®åº“æœç´¢"><a href="#2-æ•°æ®åº“æœç´¢" class="headerlink" title="2. æ•°æ®åº“æœç´¢"></a>2. æ•°æ®åº“æœç´¢</h1><p>åœ¨æ•°æ®é‡å°‘çš„æƒ…å†µä¸‹å¯ä»¥å½“åšæœç´¢æœåŠ¡æ¥ä½¿ç”¨ï¼Œç„¶è€Œæ•°æ®åº“å½’æ ¹ç»“åº•æ˜¯åšæŒä¹…åŒ–å­˜å‚¨ã€‚å¦‚æœæ•°æ®é‡å¤§å°±éœ€è¦åšæœç´¢æœåŠ¡ï¼Œåº•å±‚æ•°æ®è¿˜æ˜¯å…³ç³»æ•°æ®åº“ã€‚æˆ‘å¸è€ç³»ç»Ÿä¸­æœ‰ä¸€ä¸ªè®¢å•è¡¨ï¼Œæ•°æ®é‡å·²ç»é«˜è¾¾ä¸¤äº¿ï¼Œå®¢æœç­‰åå°ç³»ç»Ÿé€šå¸¸å¸¦æœ‰èŒƒå›´æˆ–æ‰¹é‡æ¡ä»¶ç­‰æŸ¥è¯¢ï¼Œè¿™æ—¶æ•°æ®åº“åŸºæœ¬ä¸Šå°±æ— æ³•å“åº”äº†ï¼ŒæŠ¥è­¦æ ¹æœ¬åœä¸ä¸‹æ¥ã€‚å› æ­¤ï¼Œç”¨æ•°æ®åº“æ¥å®ç°æœç´¢ï¼Œæ€§èƒ½å·®ï¼Œå¯ç”¨æ€§ä¸é«˜ã€‚</p>
<h1 id="3-Lucene"><a href="#3-Lucene" class="headerlink" title="3. Lucene"></a>3. Lucene</h1><p>Luceneæ˜¯ä¸€ä¸ªå¼€æºçš„å…¨æ–‡æœç´¢å¼•æ“å·¥å…·åŒ…ï¼Œå…¶ç›®çš„æ˜¯ä¸ºå¼€å‘è€…æä¾›ä¸€ä¸ªç®€å•å·¥å…·åŒ…ï¼Œä»¥å¿«é€Ÿå®ç°å…¨æ–‡æ£€ç´¢çš„åŠŸèƒ½ã€‚</p>
<p><a href="https://zh.wikipedia.org/wiki/Lucene">Lucene wiki:https://zh.wikipedia.org/wiki/Lucene</a></p>
<h1 id="4-å€’æ’ç´¢å¼•"><a href="#4-å€’æ’ç´¢å¼•" class="headerlink" title="4. å€’æ’ç´¢å¼•"></a>4. å€’æ’ç´¢å¼•</h1><p>å€’æ’ç´¢å¼•ä¸­çš„ç´¢å¼•å¯¹è±¡æ˜¯æ–‡æ¡£æˆ–è€…æ–‡æ¡£é›†åˆä¸­çš„å•è¯ç­‰ï¼Œç”¨æ¥å­˜å‚¨è¿™äº›å•è¯åœ¨ä¸€ä¸ªæ–‡æ¡£æˆ–è€…ä¸€ç»„æ–‡æ¡£ä¸­çš„å­˜å‚¨ä½ç½®ï¼Œæ˜¯å¯¹æ–‡æ¡£æˆ–è€…æ–‡æ¡£é›†åˆçš„ä¸€ç§æœ€å¸¸ç”¨çš„ç´¢å¼•æœºåˆ¶ã€‚æœç´¢å¼•æ“çš„å…³é”®æ­¥éª¤å°±æ˜¯å»ºç«‹å€’æ’ç´¢å¼•ï¼Œä¸‹é¢ä»‹ç»Luceneæ˜¯å¦‚ä½•å»ºç«‹å€’æ’ç´¢å¼•å’Œç›¸åº”çš„ç”Ÿæˆç®—æ³•ã€‚</p>
<blockquote>
<p>å‡è®¾æœ‰ä¸¤ç¯‡æ–‡ç« ï¼š<br>æ–‡ç« 1ï¼šTom lives in Guangzhou, I live in Guangzhou too.<br>æ–‡ç« 2ï¼šHe once lived in Shanghai.</p>
</blockquote>
<h2 id="4-1-å–å¾—å…³é”®è¯"><a href="#4-1-å–å¾—å…³é”®è¯" class="headerlink" title="4.1 å–å¾—å…³é”®è¯"></a>4.1 å–å¾—å…³é”®è¯</h2><p>Luceneæ˜¯åŸºäºå…³é”®è¯ç´¢å¼•å’ŒæŸ¥è¯¢çš„ï¼Œé¦–å…ˆè¦è¿›è¡Œå…³é”®è¯æå–ï¼š</p>
<ul>
<li><p>åˆ†è¯ï¼šè‹±æ–‡å•è¯ç”±ç©ºæ ¼åˆ†éš”ï¼Œè¾ƒå¥½å¤„ç†ï¼›ä¸­æ–‡è¯è¯­ç”±äºæ˜¯è¿åœ¨ä¸€èµ·çš„ï¼Œéœ€è¦è¿›è¡Œç‰¹æ®Šçš„åˆ†è¯å¤„ç†ï¼ˆåé¢ä¼šä»‹ç»åˆ†è¯å™¨ç›¸å…³çŸ¥è¯†ï¼‰ã€‚</p>
</li>
<li><p>è¿‡æ»¤æ— æ¦‚å¿µè¯è¯­ï¼šè‹±æ–‡ä¸­â€œinâ€â€œonceâ€â€œtooâ€ç­‰è¯æ²¡æœ‰å®é™…æ„ä¹‰ï¼›ä¸­æ–‡ä¸­â€œçš„â€â€œæ˜¯â€ç­‰ä¹Ÿæ— å®é™…æ„ä¹‰ï¼Œè¿™äº›æ— æ¦‚å¿µè¯è¯­å¯ä»¥è¿‡æ»¤æ‰ã€‚</p>
</li>
<li><p>ç»Ÿä¸€å¤§å°å†™ï¼šâ€œheâ€å’Œâ€œHEâ€è¡¨ç¤ºçš„å«ä¹‰ä¸€æ ·ï¼Œæ‰€ä»¥å•è¯éœ€è¦ç»Ÿä¸€å¤§å°å†™ã€‚</p>
</li>
<li><p>è¯­ä¹‰è¿˜åŸï¼šé€šå¸¸ç”¨æˆ·æŸ¥è¯¢â€œliveâ€æ—¶å¸Œæœ›èƒ½å°†â€œlivesâ€å’Œâ€œlivedâ€ä¹ŸæŸ¥è¯¢å‡ºæ¥ï¼Œæ‰€ä»¥éœ€è¦å°†â€œlivesâ€å’Œâ€œlivedâ€è¿˜åŸæˆâ€œliveâ€ã€‚</p>
</li>
<li><p>è¿‡æ»¤æ ‡ç‚¹ç¬¦å·</p>
<p>  ç»è¿‡ä»¥ä¸Šè¿‡æ»¤ï¼Œå¾—åˆ°å¦‚ä¸‹ç»“æœï¼š<br>  æ–‡ç« 1å…³é”®è¯ï¼štom live guangzhou i live guangzhou<br>  æ–‡ç« 2å…³é”®è¯ï¼šhe live shanghai</p>
</li>
</ul>
<h2 id="4-2-å»ºç«‹å€’æ’ç´¢å¼•"><a href="#4-2-å»ºç«‹å€’æ’ç´¢å¼•" class="headerlink" title="4.2 å»ºç«‹å€’æ’ç´¢å¼•"></a>4.2 å»ºç«‹å€’æ’ç´¢å¼•</h2><p>å…³é”®è¯å»ºç«‹å®Œæˆåï¼Œå°±å¯ä»¥è¿›è¡Œå€’æ’ç´¢å¼•å»ºç«‹äº†ã€‚è¿‡æ»¤åçš„å…³ç³»æ˜¯ï¼šâ€œæ–‡ç« å·â€œå¯¹â€æ–‡ç« ä¸­æ‰€æœ‰å…³é”®è¯â€œï¼Œå€’æ’ç´¢å¼•æŠŠè¿™ä¸ªå…³ç³»å€’è¿‡æ¥å˜æˆï¼šâ€å…³é”®è¯â€œå¯¹â€æ‹¥æœ‰å…³é”®è¯çš„æ‰€æœ‰æ–‡ç« å·â€œã€‚</p>
<p><img src="https://raw.githubusercontent.com/lujiahao0708/PicRepo/master/blogPic/%E3%80%8AElasticsearch%E6%8A%80%E6%9C%AF%E8%A7%A3%E6%9E%90%E4%B8%8E%E5%AE%9E%E6%88%98%E3%80%8B/Chapter%201%EF%BC%9AElasticsearch%E5%85%A5%E9%97%A8/%E5%80%92%E6%8E%92%E7%B4%A2%E5%BC%951.png" alt=""></p>
<p>é€šå¸¸ä»…çŸ¥é“å…³é”®è¯åœ¨å“ªäº›æ–‡ç« ä¸­å‡ºç°è¿˜ä¸å¤Ÿï¼Œè¿˜éœ€è¦çŸ¥é“å…³é”®è¯åœ¨æ–‡ç« ä¸­å‡ºç°çš„æ¬¡æ•°å’Œä½ç½®ï¼Œé€šå¸¸æœ‰ä¸¤ç§ä½ç½®ï¼š</p>
<ol>
<li>å­—ç¬¦ä½ç½®ï¼Œå³è®°å½•è¯¥è¯æ˜¯æ–‡ç« ä¸­ç¬¬å‡ ä¸ªå­—ç¬¦ï¼ˆä¼˜ç‚¹æ˜¯æ˜¾ç¤ºå¹¶å®šä½å…³é”®è¯å¿«ï¼‰ã€‚</li>
<li>å…³é”®è¯ä½ç½®ï¼Œå³è®°å½•è¯¥è¯æ˜¯æ–‡ç« ä¸­çš„ç¬¬å‡ ä¸ªå…³é”®è¯ï¼ˆä¼˜ç‚¹æ˜¯èŠ‚çº¦ç´¢å¼•ç©ºé—´ã€è¯ç»„æŸ¥è¯¢å¿«ï¼‰ï¼ŒLuceneä¸­è®°å½•çš„å°±æ˜¯è¿™ç§ä½ç½®ã€‚</li>
</ol>
<p><img src="https://raw.githubusercontent.com/lujiahao0708/PicRepo/master/blogPic/%E3%80%8AElasticsearch%E6%8A%80%E6%9C%AF%E8%A7%A3%E6%9E%90%E4%B8%8E%E5%AE%9E%E6%88%98%E3%80%8B/Chapter%201%EF%BC%9AElasticsearch%E5%85%A5%E9%97%A8/%E5%80%92%E6%8E%92%E7%B4%A2%E5%BC%952.png" alt=""></p>
<p>ä»¥ä¸Šå°±æ˜¯Luceneç´¢å¼•ç»“æ„ä¸­æœ€æ ¸å¿ƒçš„éƒ¨åˆ†ï¼Œå…³é”®å­—æ˜¯æŒ‰å­—ç¬¦é¡ºåºæ’åˆ—çš„ï¼ˆLuceneæ²¡æœ‰ä½¿ç”¨Bæ ‘ç»“æ„ï¼‰ï¼Œå› æ­¤Luceneå¯ä»¥ä½¿ç”¨äºŒå…ƒæœç´¢ç®—æ³•å¿«é€Ÿå®šä½å…³é”®è¯ã€‚</p>
<h2 id="4-3-å®ç°"><a href="#4-3-å®ç°" class="headerlink" title="4.3 å®ç°"></a>4.3 å®ç°</h2><p>Luceneå°†ä¸Šé¢ä¸‰åˆ—åˆ†åˆ«ä½œä¸ºè¯å…¸æ–‡ä»¶ï¼ˆTerm Dictionaryï¼‰ã€é¢‘ç‡æ–‡ä»¶ï¼ˆfrequenciesï¼‰ã€ä½ç½®æ–‡ä»¶ï¼ˆpositionsï¼‰ä¿å­˜ã€‚å…¶ä¸­è¯å…¸æ–‡ä»¶ä¸ä»…ä¿å­˜äº†æ¯ä¸ªå…³é”®è¯ï¼Œè¿˜ä¿ç•™äº†æŒ‡å‘é¢‘ç‡æ–‡ä»¶å’Œä½ç½®æ–‡ä»¶çš„æŒ‡é’ˆï¼Œé€šè¿‡æŒ‡é’ˆå¯ä»¥æ‰¾åˆ°è¯¥å…³é”®å­—çš„é¢‘ç‡ä¿¡æ¯å’Œä½ç½®ä¿¡æ¯ã€‚</p>
<p>Luceneä¸­ä½¿ç”¨äº†fieldçš„æ¦‚å¿µï¼Œç”¨äºè¡¨è¾¾ä¿¡æ¯æ‰€åœ¨çš„ä½ç½®ï¼ˆå¦‚æ ‡é¢˜ä¸­ã€æ–‡ç« ä¸­ã€urlä¸­ï¼‰ï¼Œåœ¨å»ºç´¢å¼•ä¸­ï¼Œè¯¥fieldä¿¡æ¯ä¹Ÿè®°å½•åœ¨è¯å…¸æ–‡ä»¶ä¸­ï¼Œæ¯ä¸ªå…³é”®è¯éƒ½æœ‰ä¸€ä¸ªfieldä¿¡æ¯ï¼Œå› ä¸ºæ¯ä¸ªå…³é”®å­—ä¸€å®šå±äºä¸€ä¸ªæˆ–å¤šä¸ªfieldã€‚</p>
<h2 id="4-4-å‹ç¼©ç®—æ³•"><a href="#4-4-å‹ç¼©ç®—æ³•" class="headerlink" title="4.4 å‹ç¼©ç®—æ³•"></a>4.4 å‹ç¼©ç®—æ³•</h2><p>ä¸ºäº†å‡å°ç´¢å¼•æ–‡ä»¶çš„å¤§å°ï¼ŒLuceneå¯¹ç´¢å¼•è¿˜æ˜¯ç”¨äº†å‹ç¼©æŠ€æœ¯ã€‚<br>é¦–å…ˆï¼Œå¯¹è¯å…¸æ–‡ä»¶ä¸­çš„å…³é”®è¯è¿›è¡Œå‹ç¼©ï¼Œå…³é”®è¯å‹ç¼©ä¸º&lt;å‰ç¼€é•¿åº¦,åç¼€&gt;ï¼Œä¾‹å¦‚ï¼šå½“å‰è¯ä¸ºâ€é˜¿æ‹‰ä¼¯è¯­â€œï¼Œä¸Šä¸€ä¸ªè¯ä¸ºâ€é˜¿æ‹‰ä¼¯â€œ,é‚£ä¹ˆâ€é˜¿æ‹‰ä¼¯è¯­â€œå‹ç¼©ä¸º&lt;3,è¯­&gt;ã€‚<br>å…¶æ¬¡å¤§é‡ç”¨åˆ°çš„æ˜¯å¯¹æ•°å­—çš„å‹ç¼©ï¼Œæ•°å­—åªä¿å­˜ä¸ä¸Šä¸€ä¸ªå€¼çš„å·®å€¼ï¼ˆè¿™æ ·å¯ä»¥å‡å°‘æ•°å­—çš„é•¿åº¦ï¼Œè¿›è€Œå‡å°‘ä¿å­˜è¯¥æ•°å­—éœ€è¦çš„å­—èŠ‚æ•°ï¼‰ã€‚ä¾‹å¦‚å½“å‰æ–‡ç« å·æ˜¯16389ï¼ˆä¸å‹ç¼©è¦ç”¨3ä¸ªå­—èŠ‚ï¼‰ï¼Œä¸Šä¸€æ–‡ç« å·æ˜¯16382ï¼Œå‹ç¼©åä¿å­˜7ï¼ˆåªç”¨ä¸€ä¸ªå­—èŠ‚ï¼‰ã€‚</p>
<p><a href="https://www.cnblogs.com/dreamroute/p/8484457.html">å‹ç¼©ç®—æ³•æ¨èé˜…è¯»:https://www.cnblogs.com/dreamroute/p/8484457.html</a></p>
<h2 id="4-5-å®æˆ˜"><a href="#4-5-å®æˆ˜" class="headerlink" title="4.5 å®æˆ˜"></a>4.5 å®æˆ˜</h2><p>æŸ¥è¯¢å•è¯â€liveâ€œï¼ŒLuceneå…ˆå¯¹è¯å…¸äºŒå…ƒæŸ¥æ‰¾ï¼Œæ‰¾åˆ°è¯¥è¯ï¼Œé€šè¿‡æŒ‡å‘é¢‘ç‡æ–‡ä»¶çš„æŒ‡é’ˆè¯»å‡ºæ‰€æœ‰æ–‡ç« å·ï¼Œç„¶åè¿”å›ç»“æœã€‚è¯å…¸é€šå¸¸éå¸¸å°ï¼Œå¯ä»¥è¾¾åˆ°æ¯«ç§’çº§è¿”å›ã€‚è€Œç”¨æ™®é€šçš„é¡ºåºåŒ¹é…ç®—æ³•ï¼Œä¸å»ºç«‹ç´¢å¼•ï¼Œè€Œæ˜¯å¯¹æ‰€æœ‰æ–‡ç« çš„å†…å®¹è¿›è¡Œå­—ç¬¦ä¸²åŒ¹é…ï¼Œè¿‡ç¨‹æ˜¯å¾ˆç¼“æ…¢çš„ï¼Œå½“æ•°æ®é‡å¾ˆå¤§æ—¶ï¼Œè€—æ—¶æ›´åŠ ä¸¥é‡ã€‚</p>
<h1 id="5-åŸºç¡€æ¦‚å¿µ"><a href="#5-åŸºç¡€æ¦‚å¿µ" class="headerlink" title="5. åŸºç¡€æ¦‚å¿µ"></a>5. åŸºç¡€æ¦‚å¿µ</h1><h2 id="5-1-ç´¢å¼•è¯ï¼ˆtermï¼‰"><a href="#5-1-ç´¢å¼•è¯ï¼ˆtermï¼‰" class="headerlink" title="5.1 ç´¢å¼•è¯ï¼ˆtermï¼‰"></a>5.1 ç´¢å¼•è¯ï¼ˆtermï¼‰</h2><p>Elasticsearchä¸­èƒ½å¤Ÿè¢«ç´¢å¼•çš„ç²¾ç¡®å€¼ã€‚fooã€Fooã€FOOå‡ ä¸ªå•è¯æ˜¯ä¸åŒçš„ç´¢å¼•è¯ã€‚ç´¢å¼•è¯å¯ä»¥é€šè¿‡termæŸ¥è¯¢è¿›è¡Œå‡†ç¡®çš„æœç´¢ã€‚</p>
<h2 id="5-2-æ–‡æœ¬ï¼ˆtextï¼‰"><a href="#5-2-æ–‡æœ¬ï¼ˆtextï¼‰" class="headerlink" title="5.2 æ–‡æœ¬ï¼ˆtextï¼‰"></a>5.2 æ–‡æœ¬ï¼ˆtextï¼‰</h2><p>æ–‡æœ¬ä¼šè¢«æ‹†åˆ†æˆä¸€ä¸ªä¸ªç´¢å¼•è¯å­˜å‚¨åœ¨ç´¢å¼•åº“ä¸­ï¼Œä¸ºåç»­æœç´¢æä¾›æ”¯æŒã€‚</p>
<h2 id="5-3-åˆ†æï¼ˆanalysisï¼‰"><a href="#5-3-åˆ†æï¼ˆanalysisï¼‰" class="headerlink" title="5.3 åˆ†æï¼ˆanalysisï¼‰"></a>5.3 åˆ†æï¼ˆanalysisï¼‰</h2><p>åˆ†ææ˜¯å°†æ–‡æœ¬è½¬æ¢ä¸ºç´¢å¼•è¯çš„è¿‡ç¨‹ï¼Œå…¶ç»“æœä¾èµ–äºåˆ†è¯å™¨ã€‚</p>
<h2 id="5-4-é›†ç¾¤ï¼ˆclusterï¼‰"><a href="#5-4-é›†ç¾¤ï¼ˆclusterï¼‰" class="headerlink" title="5.4 é›†ç¾¤ï¼ˆclusterï¼‰"></a>5.4 é›†ç¾¤ï¼ˆclusterï¼‰</h2><p>é›†ç¾¤ç”±ä¸€ä¸ªæˆ–å¤šä¸ªèŠ‚ç‚¹ç»„æˆï¼Œå¯¹å¤–æä¾›æœåŠ¡ã€‚ElasticsearchèŠ‚ç‚¹å¦‚æœæœ‰ç›¸åŒçš„é›†ç¾¤åç§°ä¼šè‡ªåŠ¨åŠ å…¥åˆ°åŒä¸€ä¸ªé›†ç¾¤ï¼Œå› æ­¤å¦‚æœä½ æ‹¥æœ‰å¤šä¸ªç‹¬ç«‹é›†ç¾¤ï¼Œæ¯ä¸ªé›†ç¾¤éƒ½è¦è®¾ç½®ä¸åŒçš„åç§°ã€‚</p>
<h2 id="5-5-èŠ‚ç‚¹ï¼ˆnodeï¼‰"><a href="#5-5-èŠ‚ç‚¹ï¼ˆnodeï¼‰" class="headerlink" title="5.5 èŠ‚ç‚¹ï¼ˆnodeï¼‰"></a>5.5 èŠ‚ç‚¹ï¼ˆnodeï¼‰</h2><p>èŠ‚ç‚¹æ˜¯ä¸€ä¸ªé€»è¾‘ä¸Šç‹¬ç«‹çš„æœåŠ¡ï¼Œæ˜¯é›†ç¾¤çš„ä¸€éƒ¨åˆ†ï¼Œå¯ä»¥å­˜å‚¨æ•°æ®ï¼Œå¹¶å‚ä¸é›†ç¾¤çš„ç´¢å¼•å’Œæœç´¢åŠŸèƒ½ã€‚</p>
<h2 id="5-6-è·¯ç”±ï¼ˆroutingï¼‰"><a href="#5-6-è·¯ç”±ï¼ˆroutingï¼‰" class="headerlink" title="5.6 è·¯ç”±ï¼ˆroutingï¼‰"></a>5.6 è·¯ç”±ï¼ˆroutingï¼‰</h2><p>æ–‡æ¡£å­˜å‚¨æ—¶æ˜¯é€šè¿‡æ•£åˆ—å€¼è¿›è¡Œè®¡ç®—ï¼Œæœ€ç»ˆé€‰æ‹©å­˜å‚¨åœ¨ä¸»åˆ†ç‰‡ä¸­ï¼Œè¿™ä¸ªå€¼é»˜è®¤æ˜¯ç”±æ–‡æ¡£çš„IDç”Ÿæˆã€‚</p>
<h2 id="5-7-åˆ†ç‰‡ï¼ˆshardï¼‰"><a href="#5-7-åˆ†ç‰‡ï¼ˆshardï¼‰" class="headerlink" title="5.7 åˆ†ç‰‡ï¼ˆshardï¼‰"></a>5.7 åˆ†ç‰‡ï¼ˆshardï¼‰</h2><p>åˆ†ç‰‡æ˜¯å•ä¸ªLuceneå®ä¾‹ï¼Œæ˜¯Elasticsearchç®¡ç†çš„æ¯”è¾ƒåº•å±‚çš„åŠŸèƒ½ã€‚å½“ç´¢å¼•å ç”¨ç©ºé—´å¾ˆå¤§è¶…è¿‡ä¸€ä¸ªèŠ‚ç‚¹çš„ç‰©ç†å­˜å‚¨ï¼ŒElasticsearchå°†ç´¢å¼•åˆ‡åˆ†æˆå¤šä¸ªåˆ†ç‰‡ï¼Œåˆ†æ•£åœ¨ä¸åŒçš„ç‰©ç†èŠ‚ç‚¹ä¸Šï¼Œä»¥è§£å†³å•ç‰©ç†èŠ‚ç‚¹å­˜å‚¨ç©ºé—´æœ‰é™çš„é—®é¢˜ã€‚</p>
<h2 id="5-8-ä¸»åˆ†ç‰‡ï¼ˆprimary-shardï¼‰"><a href="#5-8-ä¸»åˆ†ç‰‡ï¼ˆprimary-shardï¼‰" class="headerlink" title="5.8 ä¸»åˆ†ç‰‡ï¼ˆprimary shardï¼‰"></a>5.8 ä¸»åˆ†ç‰‡ï¼ˆprimary shardï¼‰</h2><p>æ¯ä¸ªæ–‡æ¡£éƒ½å­˜å‚¨åœ¨ä¸€ä¸ªåˆ†ç‰‡ä¸­ï¼Œå­˜å‚¨æ–‡æ¡£æ—¶ç³»ç»Ÿä¼šé¦–å…ˆå­˜å‚¨åœ¨ä¸»åˆ†ç‰‡ä¸­ï¼Œç„¶åå¤åˆ¶åˆ°ä¸åŒçš„å‰¯æœ¬ä¸­ã€‚é»˜è®¤æƒ…å†µä¸‹ä¸€ä¸ªç´¢å¼•æ‹¥æœ‰5ä¸ªä¸»åˆ†ç‰‡ï¼Œåˆ†ç‰‡ä¸€æ—¦å»ºç«‹ï¼Œä¸»åˆ†ç‰‡æ•°é‡å°±æ— æ³•ä¿®æ”¹ã€‚</p>
<h2 id="5-9-å‰¯æœ¬åˆ†ç‰‡ï¼ˆreplica-shardï¼‰"><a href="#5-9-å‰¯æœ¬åˆ†ç‰‡ï¼ˆreplica-shardï¼‰" class="headerlink" title="5.9 å‰¯æœ¬åˆ†ç‰‡ï¼ˆreplica shardï¼‰"></a>5.9 å‰¯æœ¬åˆ†ç‰‡ï¼ˆreplica shardï¼‰</h2><p>æ¯ä¸ªä¸»åˆ†ç‰‡æœ‰é›¶ä¸ªæˆ–å¤šä¸ªå‰¯æœ¬ï¼Œæ˜¯ä¸»åˆ†ç‰‡çš„å¤åˆ¶ï¼Œå…¶ä¸»è¦ç›®çš„æ˜¯ï¼š</p>
<ol>
<li>å¢åŠ é«˜å¯ç”¨æ€§ï¼šå½“ä¸»åˆ†ç‰‡å¤±è´¥æ—¶ï¼ŒæŸä¸€å‰¯æœ¬åˆ†ç‰‡æå‡ä¸ºä¸»åˆ†ç‰‡</li>
<li>æé«˜æ€§èƒ½ï¼šå‰¯æœ¬åˆ†ç‰‡æ•°é‡å¯ä»¥åŠ¨æ€é…ç½®ï¼Œå¯ä»¥ä¸ºä¸»åˆ†ç‰‡åˆ†æ‹…æŸ¥è¯¢å‹åŠ›ã€‚</li>
<li>å…è®¸æ°´å¹³åˆ†å‰²æ‰©å±•æ•°æ®</li>
<li>å…è®¸åˆ†é…å’Œå¹¶è¡Œæ“ä½œï¼Œä»è€Œæé«˜æ€§èƒ½å’Œååé‡ã€‚</li>
</ol>
<h2 id="5-10-å¤åˆ¶ï¼ˆreplicaï¼‰"><a href="#5-10-å¤åˆ¶ï¼ˆreplicaï¼‰" class="headerlink" title="5.10 å¤åˆ¶ï¼ˆreplicaï¼‰"></a>5.10 å¤åˆ¶ï¼ˆreplicaï¼‰</h2><p>ä¸»åˆ†ç‰‡çš„æ•°æ®ä¼šå¤åˆ¶åˆ°å‰¯æœ¬åˆ†ç‰‡ä¸­ï¼Œè¿™æ ·é¿å…äº†å•ç‚¹é—®é¢˜ï¼Œå½“æŸä¸ªèŠ‚ç‚¹å‘ç”Ÿæ•…éšœï¼Œå¤åˆ¶å¯ä»¥å¯¹æ•…éšœè¿›è¡Œè½¬ç§»ï¼Œä¿è¯ç³»ç»Ÿçš„é«˜å¯ç”¨ã€‚</p>
<h2 id="5-11-ç´¢å¼•ï¼ˆindexï¼‰"><a href="#5-11-ç´¢å¼•ï¼ˆindexï¼‰" class="headerlink" title="5.11 ç´¢å¼•ï¼ˆindexï¼‰"></a>5.11 ç´¢å¼•ï¼ˆindexï¼‰</h2><p>ç´¢å¼•æ˜¯å…·æœ‰ç›¸åŒç»“æ„çš„æ–‡æ¡£åˆé›†ã€‚</p>
<h2 id="5-12-ç±»å‹ï¼ˆtypeï¼‰"><a href="#5-12-ç±»å‹ï¼ˆtypeï¼‰" class="headerlink" title="5.12 ç±»å‹ï¼ˆtypeï¼‰"></a>5.12 ç±»å‹ï¼ˆtypeï¼‰</h2><p>ä¸€ä¸ªç´¢å¼•å¯ä»¥å®šä¹‰ä¸€ä¸ªæˆ–å¤šä¸ªç±»å‹ï¼Œç±»å‹æ˜¯ç´¢å¼•çš„é€»è¾‘åˆ†åŒºã€‚</p>
<h2 id="5-13-æ–‡æ¡£ï¼ˆdocumentï¼‰"><a href="#5-13-æ–‡æ¡£ï¼ˆdocumentï¼‰" class="headerlink" title="5.13 æ–‡æ¡£ï¼ˆdocumentï¼‰"></a>5.13 æ–‡æ¡£ï¼ˆdocumentï¼‰</h2><p>æ–‡æ¡£æ˜¯å­˜å‚¨åœ¨Elasticsearchä¸­çš„ä¸€ä¸ªJSONæ ¼å¼çš„å­—ç¬¦ä¸²ï¼Œå°±åƒå…³ç³»æ•°æ®åº“ä¸­è¡¨çš„ä¸€è¡Œè®°å½•ã€‚</p>
<h2 id="5-14-æ˜ å°„ï¼ˆmappingï¼‰"><a href="#5-14-æ˜ å°„ï¼ˆmappingï¼‰" class="headerlink" title="5.14 æ˜ å°„ï¼ˆmappingï¼‰"></a>5.14 æ˜ å°„ï¼ˆmappingï¼‰</h2><p>æ˜ å°„åƒå…³ç³»æ•°æ®åº“ä¸­çš„è¡¨ç»“æ„ï¼Œæ¯ä¸ªç´¢å¼•éƒ½æœ‰ä¸€ä¸ªæ˜ å°„ï¼Œå®ƒå®šä¹‰äº†ç´¢å¼•ä¸­çš„æ¯ä¸€ä¸ªå­—æ®µç±»å‹ã€‚æ˜ å°„å¯ä»¥äº‹å…ˆè¢«å®šä¹‰ï¼Œä¹Ÿå¯ä»¥åœ¨ç¬¬ä¸€æ¬¡å­˜å‚¨æ–‡æ¡£æ—¶è¢«è‡ªåŠ¨è¯†åˆ«ã€‚</p>
<h2 id="5-15-å­—æ®µï¼ˆfieldï¼‰"><a href="#5-15-å­—æ®µï¼ˆfieldï¼‰" class="headerlink" title="5.15 å­—æ®µï¼ˆfieldï¼‰"></a>5.15 å­—æ®µï¼ˆfieldï¼‰</h2><p>æ–‡æ¡£ä¸­åŒ…å«é›¶ä¸ªæˆ–å¤šä¸ªå­—æ®µï¼Œå­—æ®µå¯ä»¥æ˜¯ä¸€ä¸ªç®€å•çš„å€¼ï¼Œä¹Ÿå¯ä»¥æ˜¯ä¸€ä¸ªæ•°ç»„æˆ–å¯¹è±¡çš„åµŒå¥—ç»“æ„ã€‚å­—æ®µç±»ä¼¼äºå…³ç³»æ•°æ®åº“ä¸­è¡¨çš„åˆ—ï¼Œæ¯ä¸ªå­—æ®µéƒ½å¯¹åº”ä¸€ä¸ªå­—æ®µç±»å‹ã€‚</p>
<h2 id="5-16-æ¥æºå­—æ®µï¼ˆsource-fieldï¼‰"><a href="#5-16-æ¥æºå­—æ®µï¼ˆsource-fieldï¼‰" class="headerlink" title="5.16 æ¥æºå­—æ®µï¼ˆsource fieldï¼‰"></a>5.16 æ¥æºå­—æ®µï¼ˆsource fieldï¼‰</h2><p>é»˜è®¤æƒ…å†µä¸‹æºæ–‡æ¡£å°†è¢«å­˜å‚¨åœ¨_sourceå­—æ®µä¸­ï¼ŒæŸ¥è¯¢æ—¶è¿”å›è¯¥å­—æ®µã€‚</p>
<h2 id="5-17-ä¸»é”®ï¼ˆIDï¼‰"><a href="#5-17-ä¸»é”®ï¼ˆIDï¼‰" class="headerlink" title="5.17 ä¸»é”®ï¼ˆIDï¼‰"></a>5.17 ä¸»é”®ï¼ˆIDï¼‰</h2><p>IDæ˜¯æ–‡ä»¶çš„å”¯ä¸€æ ‡è¯†ï¼Œå¦‚æœæœªæŒ‡å®šï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨ç”Ÿæˆä¸€ä¸ªIDï¼Œæ–‡æ¡£çš„index/type/idå¿…é¡»æ˜¯å”¯ä¸€çš„ã€‚</p>
<h2 id="5-18-Elasticsearchæ ¸å¿ƒæ¦‚å¿µ-vs-æ•°æ®åº“æ ¸å¿ƒæ¦‚å¿µ"><a href="#5-18-Elasticsearchæ ¸å¿ƒæ¦‚å¿µ-vs-æ•°æ®åº“æ ¸å¿ƒæ¦‚å¿µ" class="headerlink" title="5.18 Elasticsearchæ ¸å¿ƒæ¦‚å¿µ vs. æ•°æ®åº“æ ¸å¿ƒæ¦‚å¿µ"></a>5.18 Elasticsearchæ ¸å¿ƒæ¦‚å¿µ vs. æ•°æ®åº“æ ¸å¿ƒæ¦‚å¿µ</h2><table>
<thead>
<tr>
<th>Elasticsearch</th>
<th>æ•°æ®åº“</th>
</tr>
</thead>
<tbody><tr>
<td>Document</td>
<td>row è¡Œ</td>
</tr>
<tr>
<td>Type</td>
<td>table è¡¨</td>
</tr>
<tr>
<td>Index</td>
<td>database åº“</td>
</tr>
</tbody></table>
<h2 id="Tips"><a href="#Tips" class="headerlink" title="Tips"></a>Tips</h2><p>æœ¬æ–‡åŒæ­¥å‘è¡¨åœ¨å…¬ä¼—å·ï¼Œæ¬¢è¿å¤§å®¶å…³æ³¨ï¼ğŸ˜<br>åç»­ç¬”è®°æ¬¢è¿å…³æ³¨è·å–ç¬¬ä¸€æ—¶é—´æ›´æ–°ï¼<br><img src="https://raw.githubusercontent.com/lujiahao0708/PicRepo/master/%E5%85%AC%E4%BC%97%E5%8F%B7%E4%BA%8C%E7%BB%B4%E7%A0%81.jpg" alt=""></p>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta size-small is-uppercase level is-mobile"><div class="level-left"><time class="level-item" dateTime="2019-03-26T03:34:52.000Z" title="2019-03-26T03:34:52.000Z">2019-03-26</time><span class="level-item"><a class="link-muted" href="/categories/Java/">Java</a></span><span class="level-item">27 åˆ†é’Ÿ è¯»å®Œ (å¤§çº¦ 3987 ä¸ªå­—)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2019/03/26/%E3%80%8AJava%208%20in%20Action%E3%80%8B%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/%E3%80%8AJava%208%20in%20Action%E3%80%8BChapter%2012%EF%BC%9A%E6%96%B0%E7%9A%84%E6%97%A5%E6%9C%9F%E5%92%8C%E6%97%B6%E9%97%B4API/">ã€ŠJava 8 in Actionã€‹Chapter 12ï¼šæ–°çš„æ—¥æœŸå’Œæ—¶é—´API</a></h1><div class="content"><ul>
<li>åœ¨Java 1.0ä¸­ï¼Œå¯¹æ—¥æœŸå’Œæ—¶é—´çš„æ”¯æŒåªèƒ½ä¾èµ–java.util.Dateç±»ã€‚åŒæ—¶è¿™ä¸ªç±»è¿˜æœ‰ä¸¤ä¸ªå¾ˆå¤§çš„ç¼ºç‚¹ï¼šå¹´ä»½çš„èµ·å§‹é€‰æ‹©æ˜¯1900å¹´ï¼Œæœˆä»½çš„èµ·å§‹ä»0å¼€å§‹ã€‚</li>
<li>åœ¨Java 1.1ä¸­ï¼ŒDateç±»ä¸­çš„å¾ˆå¤šæ–¹æ³•è¢«åºŸå¼ƒï¼Œå–è€Œä»£ä¹‹çš„æ˜¯java.util.Calendarç±»ã€‚ç„¶è€ŒCalendarç±»ä¹Ÿæœ‰ç±»ä¼¼çš„é—®é¢˜å’Œè®¾è®¡ç¼ºé™·ï¼Œå¯¼è‡´ä½¿ç”¨è¿™äº›æ–¹æ³•å†™å‡ºçš„ä»£ç éå¸¸å®¹æ˜“å‡ºé”™ã€‚</li>
</ul>
<blockquote>
<p>DateFormatæ–¹æ³•ä¹Ÿæœ‰å®ƒè‡ªå·±çš„é—®é¢˜ã€‚æ¯”å¦‚ï¼Œå®ƒä¸æ˜¯çº¿ç¨‹å®‰å…¨çš„ã€‚è¿™æ„å‘³ç€ä¸¤ä¸ªçº¿ç¨‹å¦‚æœå°è¯•ä½¿ç”¨åŒä¸€ä¸ªformatterè§£ææ—¥æœŸï¼Œä½ å¯èƒ½ä¼šå¾—åˆ°æ— æ³•é¢„æœŸçš„ç»“æœã€‚</p>
</blockquote>
<h1 id="1-ä½¿ç”¨LocalDate-å’ŒLocalTime"><a href="#1-ä½¿ç”¨LocalDate-å’ŒLocalTime" class="headerlink" title="1. ä½¿ç”¨LocalDate å’ŒLocalTime"></a>1. ä½¿ç”¨LocalDate å’ŒLocalTime</h1><h2 id="1-1-LocalDate"><a href="#1-1-LocalDate" class="headerlink" title="1.1 LocalDate"></a>1.1 LocalDate</h2><p>Java 8æä¾›æ–°çš„æ—¥æœŸå’Œæ—¶é—´API,LocalDateç±»å®ä¾‹æ˜¯ä¸€ä¸ªä¸å¯å˜å¯¹è±¡ï¼Œåªæä¾›ç®€å•çš„æ—¥æœŸå¹¶ä¸”ä¸å«å½“å¤©æ—¶é—´ä¿¡æ¯ã€‚æ­¤å¤–ä¹Ÿä¸é™„å¸¦ä»»ä½•ä¸æ—¶åŒºç›¸å…³çš„ä¿¡æ¯ã€‚</p>
<p>é€šè¿‡é™æ€å·¥å‚æ–¹æ³•ofåˆ›å»ºä¸€ä¸ªLocalDateå®ä¾‹ã€‚LocalDateå®ä¾‹æä¾›äº†å¤šç§æ–¹æ³•æ¥è¯»å–å¸¸ç”¨çš„å€¼ï¼Œæ¯”å¦‚å¹´ä»½ã€æœˆä»½ã€æ˜ŸæœŸå‡ ç­‰ï¼Œå¦‚ä¸‹æ‰€ç¤ºã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">LocalDate localDate = LocalDate.of(<span class="number">2014</span>, <span class="number">3</span>, <span class="number">18</span>);</span><br><span class="line"><span class="keyword">int</span> year = localDate.getYear();</span><br><span class="line">Month month = localDate.getMonth();</span><br><span class="line"><span class="keyword">int</span> day = localDate.getDayOfMonth();</span><br><span class="line">DayOfWeek dow = localDate.getDayOfWeek();</span><br><span class="line"><span class="keyword">int</span> len = localDate.lengthOfMonth();</span><br><span class="line"><span class="keyword">boolean</span> leap = localDate.isLeapYear();</span><br><span class="line"></span><br><span class="line"><span class="comment">// ä½¿ç”¨å·¥å‚æ–¹æ³•ä»ç³»ç»Ÿæ—¶é’Ÿä¸­è·å–å½“å‰çš„æ—¥æœŸ</span></span><br><span class="line">LocalDate today = LocalDate.now();</span><br><span class="line"></span><br><span class="line">System.out.println(String.format(<span class="string">"year:%s\nmonth:%s\nday:%s\ndow:%s\nlen:%s\nleap:%s"</span>, year, month, day, dow, len, leap));</span><br><span class="line">System.out.println(today);</span><br><span class="line"></span><br><span class="line">ç»“æœï¼š</span><br><span class="line">year:<span class="number">2014</span></span><br><span class="line">month:MARCH</span><br><span class="line">day:<span class="number">18</span></span><br><span class="line">dow:TUESDAY</span><br><span class="line">len:<span class="number">31</span></span><br><span class="line">leap:<span class="keyword">false</span></span><br><span class="line"><span class="number">2019</span>-<span class="number">03</span>-<span class="number">27</span></span><br></pre></td></tr></table></figure>

<p>Java 8æ—¥æœŸ-æ—¶é—´ç±»éƒ½æä¾›äº†ç±»ä¼¼çš„å·¥å‚æ–¹æ³•ã€‚é€šè¿‡ä¼ é€’TemporalFieldå‚æ•°ç»™getæ–¹æ³•æ‹¿åˆ°åŒæ ·çš„ä¿¡æ¯ã€‚TemporalFieldæ¥å£å®šä¹‰äº†å¦‚ä½•è®¿é—®temporalå¯¹è±¡æŸä¸ªå­—æ®µçš„å€¼ã€‚ChronoFieldæšä¸¾å®ç°TemporalFieldæ¥å£,å¯ä»¥ä½¿ç”¨getæ–¹æ³•å¾—åˆ°æšä¸¾å…ƒç´ çš„å€¼ã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> year = localDate.get(ChronoField.YEAR);</span><br><span class="line"><span class="keyword">int</span> month = localDate.get(ChronoField.MONTH_OF_YEAR);</span><br><span class="line"><span class="keyword">int</span> day = localDate.get(ChronoField.DAY_OF_MONTH);</span><br></pre></td></tr></table></figure>

<h2 id="1-2-LocalTime"><a href="#1-2-LocalTime" class="headerlink" title="1.2 LocalTime"></a>1.2 LocalTime</h2><p>ä½¿ç”¨LocalTimeç±»è¡¨ç¤ºæ—¶é—´,å¯ä»¥ä½¿ç”¨ofé‡è½½çš„ä¸¤ä¸ªå·¥å‚æ–¹æ³•åˆ›å»ºLocalTimeçš„å®ä¾‹ã€‚</p>
<ul>
<li>ç¬¬ä¸€ä¸ªé‡è½½å‡½æ•°æ¥æ”¶å°æ—¶å’Œåˆ†é’Ÿ</li>
<li>ç¬¬äºŒä¸ªé‡è½½å‡½æ•°åŒæ—¶è¿˜æ¥æ”¶ç§’ã€‚</li>
</ul>
<p>LocalTimeç±»ä¹Ÿæä¾›äº†ä¸€äº›getæ–¹æ³•è®¿é—®è¿™äº›å˜é‡çš„å€¼ï¼Œå¦‚ä¸‹æ‰€ç¤ºã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">LocalTime localTime = LocalTime.of(<span class="number">13</span>, <span class="number">45</span>, <span class="number">20</span>);</span><br><span class="line"><span class="keyword">int</span> hour = localTime.getHour();</span><br><span class="line"><span class="keyword">int</span> minute = localTime.getMinute();</span><br><span class="line"><span class="keyword">int</span> second = localTime.getSecond();</span><br><span class="line">System.out.println(String.format(<span class="string">"hour:%s\nminute:%s\nsecond:%s"</span>, hour, minute, second));</span><br><span class="line"></span><br><span class="line">æ‰“å°ç»“æœï¼š</span><br><span class="line">hour:<span class="number">13</span></span><br><span class="line">minute:<span class="number">45</span></span><br><span class="line">second:<span class="number">20</span></span><br></pre></td></tr></table></figure>

<p>LocalDateå’ŒLocalTimeéƒ½å¯ä»¥é€šè¿‡è§£æä»£è¡¨å®ƒä»¬çš„å­—ç¬¦ä¸²åˆ›å»ºã€‚ä½¿ç”¨é™æ€æ–¹æ³•parseå¯ä»¥å®ç°ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">LocalDate date = LocalDate.parse(<span class="string">"2019-03-27"</span>);</span><br><span class="line">LocalTime time = LocalTime.parse(<span class="string">"20:17:08"</span>);</span><br></pre></td></tr></table></figure>

<blockquote>
<p>å¯ä»¥å‘parseæ–¹æ³•ä¼ é€’ä¸€ä¸ªDateTimeFormatterã€‚è¯¥ç±»çš„å®ä¾‹å®šä¹‰äº†å¦‚ä½•æ ¼å¼åŒ–ä¸€ä¸ªæ—¥æœŸæˆ–è€…æ—¶é—´å¯¹è±¡ã€‚ç”¨æ¥æ›¿æ¢è€ç‰ˆjava.util.DateFormatã€‚<br>å¦‚æœä¼ é€’çš„å­—ç¬¦ä¸²å‚æ•°æ— æ³•è¢«è§£æä¸ºåˆæ³•çš„LocalDateæˆ–LocalTimeå¯¹è±¡ï¼Œè¿™ä¸¤ä¸ªparseæ–¹æ³•éƒ½ä¼šæŠ›å‡ºä¸€ä¸ªç»§æ‰¿è‡ªRuntimeExceptionçš„DateTimeParseExceptionå¼‚å¸¸ã€‚</p>
</blockquote>
<h1 id="2-åˆå¹¶æ—¥æœŸå’Œæ—¶é—´"><a href="#2-åˆå¹¶æ—¥æœŸå’Œæ—¶é—´" class="headerlink" title="2. åˆå¹¶æ—¥æœŸå’Œæ—¶é—´"></a>2. åˆå¹¶æ—¥æœŸå’Œæ—¶é—´</h1><p>å¤åˆç±»LocalDateTimeï¼Œæ˜¯LocalDateå’ŒLocalTimeçš„åˆä½“ã€‚å®ƒåŒæ—¶è¡¨ç¤ºäº†æ—¥æœŸå’Œæ—¶é—´ï¼Œä¸å¸¦æœ‰æ—¶åŒºä¿¡æ¯ã€‚å¯ä»¥ç›´æ¥åˆ›å»ºï¼Œä¹Ÿå¯ä»¥é€šè¿‡åˆå¹¶æ—¥æœŸå’Œæ—¶é—´å¯¹è±¡æ„é€ ã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">LocalTime time = LocalTime.of(<span class="number">21</span>, <span class="number">31</span>, <span class="number">50</span>);</span><br><span class="line">LocalDate date = LocalDate.of(<span class="number">2019</span>, <span class="number">03</span>, <span class="number">27</span>);</span><br><span class="line"></span><br><span class="line">LocalDateTime dt1 = LocalDateTime.of(<span class="number">2017</span>, Month.NOVEMBER, <span class="number">07</span>, <span class="number">22</span>, <span class="number">31</span>, <span class="number">51</span>);</span><br><span class="line">LocalDateTime dt2 = LocalDateTime.of(date, time);</span><br><span class="line">LocalDateTime dt3 = date.atTime(<span class="number">22</span>, <span class="number">21</span>, <span class="number">14</span>);</span><br><span class="line">LocalDateTime dt4 = date.atTime(time);</span><br><span class="line">LocalDateTime dt5 = time.atDate(date);</span><br></pre></td></tr></table></figure>

<p>åˆ›å»ºLocalDateTimeå¯¹è±¡</p>
<ul>
<li>ç›´æ¥åˆ›å»º</li>
<li>é€šè¿‡atTimeæ–¹æ³•å‘LocalDateä¼ é€’ä¸€ä¸ªæ—¶é—´å¯¹è±¡</li>
<li>é€šè¿‡atDateæ–¹æ³•å‘LocalTimeä¼ é€’ä¸€ä¸ªæ—¶é—´å¯¹è±¡</li>
</ul>
<p>ä¹Ÿå¯ä»¥ä½¿ç”¨toLocalDateæˆ–è€…toLocalTimeæ–¹æ³•ï¼Œä»LocalDateTimeä¸­æå–LocalDateæˆ–è€…LocalTimeç»„ä»¶ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">LocalDate date1 = dt1.toLocalDate();</span><br><span class="line">LocalTime time1 = dt1.toLocalTime();</span><br></pre></td></tr></table></figure>

<h1 id="3-æœºå™¨çš„æ—¥æœŸå’Œæ—¶é—´æ ¼å¼"><a href="#3-æœºå™¨çš„æ—¥æœŸå’Œæ—¶é—´æ ¼å¼" class="headerlink" title="3. æœºå™¨çš„æ—¥æœŸå’Œæ—¶é—´æ ¼å¼"></a>3. æœºå™¨çš„æ—¥æœŸå’Œæ—¶é—´æ ¼å¼</h1><p>ä»è®¡ç®—æœºçš„è§’åº¦æ¥çœ‹ï¼Œâ€2019å¹´03æœˆ27æ—¥11:20:03â€è¿™æ ·çš„æ–¹å¼æ˜¯ä¸å®¹æ˜“ç†è§£çš„,è®¡ç®—æœºæ›´åŠ å®¹æ˜“ç†è§£å»ºæ¨¡æ—¶é—´æœ€è‡ªç„¶çš„æ ¼å¼æ˜¯è¡¨ç¤ºä¸€ä¸ªæŒç»­æ—¶é—´æ®µä¸ŠæŸä¸ªç‚¹çš„å•ä¸€å¤§æ•´å‹æ•°ã€‚æ–°çš„java.time.Instantç±»å¯¹æ—¶é—´å»ºæ¨¡çš„æ–¹å¼ï¼ŒåŸºæœ¬ä¸Šå®ƒæ˜¯ä»¥Unixå…ƒå¹´æ—¶é—´ï¼ˆä¼ ç»Ÿçš„è®¾å®šä¸ºUTCæ—¶åŒº1970å¹´1æœˆ1æ—¥åˆå¤œæ—¶åˆ†ï¼‰å¼€å§‹æ‰€ç»å†çš„ç§’æ•°è¿›è¡Œè®¡ç®—ã€‚</p>
<h2 id="3-1-åˆ›å»ºInstant"><a href="#3-1-åˆ›å»ºInstant" class="headerlink" title="3.1 åˆ›å»ºInstant"></a>3.1 åˆ›å»ºInstant</h2><ul>
<li>é™æ€å·¥å‚æ–¹æ³•ofEpochSecondä¼ é€’ä¸€ä¸ªä»£è¡¨ç§’æ•°çš„å€¼åˆ›å»ºä¸€ä¸ªè¯¥ç±»çš„å®ä¾‹ã€‚</li>
<li>é™æ€å·¥å‚æ–¹æ³•ofEpochSecondè¿˜æœ‰ä¸€ä¸ªå¢å¼ºçš„é‡è½½ç‰ˆæœ¬ï¼Œå®ƒæ¥æ”¶ç¬¬äºŒä¸ªä»¥çº³ç§’ä¸ºå•ä½çš„å‚æ•°å€¼ï¼Œå¯¹ä¼ å…¥ä½œä¸ºç§’æ•°çš„å‚æ•°è¿›è¡Œè°ƒæ•´ã€‚é‡è½½çš„ç‰ˆæœ¬ä¼šè°ƒæ•´çº³ç§’å‚æ•°ï¼Œç¡®ä¿ä¿å­˜çš„çº³ç§’åˆ†ç‰‡åœ¨0åˆ°999 999999ä¹‹é—´ã€‚</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">Instant.ofEpochSecond(<span class="number">3</span>);</span><br><span class="line">Instant.ofEpochSecond(<span class="number">3</span>, <span class="number">0</span>);</span><br><span class="line"><span class="comment">// 2 ç§’ä¹‹åå†åŠ ä¸Š100ä¸‡çº³ç§’ï¼ˆ1ç§’ï¼‰</span></span><br><span class="line">Instant.ofEpochSecond(<span class="number">2</span>, <span class="number">1_000_000_000</span>);</span><br><span class="line"><span class="comment">// 4ç§’ä¹‹å‰çš„100ä¸‡çº³ç§’ï¼ˆ1ç§’ï¼‰</span></span><br><span class="line">Instant.ofEpochSecond(<span class="number">4</span>, -<span class="number">1_000_000_000</span>);</span><br></pre></td></tr></table></figure>

<h2 id="3-2-å·¥å‚æ–¹æ³•now"><a href="#3-2-å·¥å‚æ–¹æ³•now" class="headerlink" title="3.2 å·¥å‚æ–¹æ³•now"></a>3.2 å·¥å‚æ–¹æ³•now</h2><p>Instantç±»ä¹Ÿæ”¯æŒé™æ€å·¥å‚æ–¹æ³•nowï¼Œå®ƒèƒ½å¤Ÿè·å–å½“å‰æ—¶åˆ»çš„æ—¶é—´æˆ³ã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Instant now = Instant.now();</span><br><span class="line">System.out.println(now);</span><br><span class="line"></span><br><span class="line"><span class="number">2019</span>-<span class="number">03</span>-<span class="number">27</span>T03:<span class="number">26</span>:<span class="number">39.451</span>Z</span><br></pre></td></tr></table></figure>

<p>Instantçš„è®¾è®¡åˆè¡·æ˜¯ä¸ºäº†ä¾¿äºæœºå™¨ä½¿ç”¨,å®ƒåŒ…å«çš„æ˜¯ç”±ç§’åŠçº³ç§’æ‰€æ„æˆçš„æ•°å­—ã€‚å› æ­¤Instantæ— æ³•å¤„ç†é‚£äº›æˆ‘ä»¬éå¸¸å®¹æ˜“ç†è§£çš„æ—¶é—´å•ä½ã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> day = Instant.now().get(ChronoField.DAY_OF_MONTH);</span><br><span class="line">å®ƒä¼šæŠ›å‡ºä¸‹é¢è¿™æ ·çš„å¼‚å¸¸ï¼š</span><br><span class="line"></span><br><span class="line">Exception in thread <span class="string">"main"</span> java.time.temporal.UnsupportedTemporalTypeException: Unsupported field: DayOfMonth</span><br><span class="line">ä½†æ˜¯ä½ å¯ä»¥é€šè¿‡Durationå’ŒPeriodç±»ä½¿ç”¨Instantï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬ä¼šå¯¹è¿™éƒ¨åˆ†å†…å®¹è¿›è¡Œä»‹ç»ã€‚</span><br></pre></td></tr></table></figure>

<h2 id="4-Durationå’ŒPeriod"><a href="#4-Durationå’ŒPeriod" class="headerlink" title="4. Durationå’ŒPeriod"></a>4. Durationå’ŒPeriod</h2><h2 id="4-1-Duration"><a href="#4-1-Duration" class="headerlink" title="4.1 Duration"></a>4.1 Duration</h2><p>æ‰€æœ‰ç±»éƒ½å®ç°äº†Temporalæ¥å£ï¼Œè¯¥æ¥å£å®šä¹‰å¦‚ä½•è¯»å–å’Œæ“çºµä¸ºæ—¶é—´å»ºæ¨¡çš„å¯¹è±¡çš„å€¼ã€‚å¦‚æœéœ€è¦åˆ›å»ºä¸¤ä¸ªTemporalå¯¹è±¡ä¹‹é—´çš„duration,å°±éœ€è¦Durationç±»çš„é™æ€å·¥å‚æ–¹æ³•betweenã€‚<br>å¯ä»¥åˆ›å»ºä¸¤ä¸ªLocalTimeså¯¹è±¡ã€ä¸¤ä¸ªLocalDateTimeså¯¹è±¡ï¼Œæˆ–è€…ä¸¤ä¸ªInstantå¯¹è±¡ä¹‹é—´çš„durationï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">LocalTime time1 = LocalTime.of(<span class="number">21</span>, <span class="number">50</span>, <span class="number">10</span>);</span><br><span class="line">LocalTime time2 = LocalTime.of(<span class="number">22</span>, <span class="number">50</span>, <span class="number">10</span>);</span><br><span class="line">LocalDateTime dateTime1 = LocalDateTime.of(<span class="number">2019</span>, <span class="number">03</span>, <span class="number">27</span>, <span class="number">21</span>, <span class="number">20</span>, <span class="number">40</span>);</span><br><span class="line">LocalDateTime dateTime2 = LocalDateTime.of(<span class="number">2019</span>, <span class="number">03</span>, <span class="number">27</span>, <span class="number">21</span>, <span class="number">20</span>, <span class="number">40</span>);</span><br><span class="line">Instant instant1 = Instant.ofEpochSecond(<span class="number">1000</span> * <span class="number">60</span> * <span class="number">2</span>);</span><br><span class="line">Instant instant2 = Instant.ofEpochSecond(<span class="number">1000</span> * <span class="number">60</span> * <span class="number">3</span>);</span><br><span class="line"></span><br><span class="line">Duration d1 = Duration.between(time1, time2);</span><br><span class="line">Duration d2 = Duration.between(dateTime1, dateTime2);</span><br><span class="line">Duration d3 = Duration.between(instant1, instant2);</span><br><span class="line"><span class="comment">// PT1H ç›¸å·®1å°æ—¶</span></span><br><span class="line">System.out.println(<span class="string">"d1:"</span> + d1);</span><br><span class="line"><span class="comment">// PT2H ç›¸å·®2å°æ—¶</span></span><br><span class="line">System.out.println(<span class="string">"d2:"</span> + d2);</span><br><span class="line"><span class="comment">// PT16H40M ç›¸å·®16å°æ—¶40åˆ†é’Ÿ</span></span><br><span class="line">System.out.println(<span class="string">"d3:"</span> + d3);</span><br></pre></td></tr></table></figure>

<blockquote>
<p>LocalDateTimeæ˜¯ä¸ºäº†ä¾¿äºäººé˜…è¯»ä½¿ç”¨ï¼ŒInstantæ˜¯ä¸ºäº†ä¾¿äºæœºå™¨å¤„ç†ï¼Œæ‰€ä»¥ä¸èƒ½å°†äºŒè€…æ··ç”¨ã€‚å¦‚æœåœ¨è¿™ä¸¤ç±»å¯¹è±¡ä¹‹é—´åˆ›å»ºdurationï¼Œä¼šè§¦å‘ä¸€ä¸ªDateTimeExceptionå¼‚å¸¸ã€‚<br>æ­¤å¤–ï¼Œç”±äºDurationç±»ä¸»è¦ç”¨äºä»¥ç§’å’Œçº³ç§’è¡¡é‡æ—¶é—´çš„é•¿çŸ­ï¼Œä½ ä¸èƒ½ä»…å‘betweenæ–¹æ³•ä¼ é€’ä¸€ä¸ªLocalDateå¯¹è±¡åšå‚æ•°ã€‚</p>
</blockquote>
<h2 id="4-2-Period"><a href="#4-2-Period" class="headerlink" title="4.2 Period"></a>4.2 Period</h2><p>ä½¿ç”¨Periodç±»ä»¥å¹´ã€æœˆæˆ–è€…æ—¥çš„æ–¹å¼å¯¹å¤šä¸ªæ—¶é—´å•ä½å»ºæ¨¡ã€‚ä½¿ç”¨è¯¥ç±»çš„å·¥å‚æ–¹æ³•betweenï¼Œå¯ä»¥ä½¿ç”¨å¾—åˆ°ä¸¤ä¸ªLocalDateä¹‹é—´çš„æ—¶é•¿ã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Period period = Period.between(LocalDate.of(<span class="number">2019</span>, <span class="number">03</span>, <span class="number">7</span>), LocalDate.of(<span class="number">2019</span>, <span class="number">03</span>, <span class="number">17</span>));</span><br><span class="line"><span class="comment">// ç›¸å·®10å¤©</span></span><br><span class="line">System.out.println(<span class="string">"Period between:"</span> + period);</span><br></pre></td></tr></table></figure>

<p>Durationå’ŒPeriodç±»éƒ½æä¾›äº†å¾ˆå¤šéå¸¸æ–¹ä¾¿çš„å·¥å‚ç±»ï¼Œç›´æ¥åˆ›å»ºå¯¹åº”çš„å®ä¾‹ã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">Duration threeMinutes = Duration.ofMinutes(<span class="number">3</span>);</span><br><span class="line">Duration fourMinutes = Duration.of(<span class="number">4</span>, ChronoUnit.MINUTES);</span><br><span class="line"></span><br><span class="line">Period tenDay = Period.ofDays(<span class="number">10</span>);</span><br><span class="line">Period threeWeeks = Period.ofWeeks(<span class="number">3</span>);</span><br><span class="line">Period twoYearsSixMonthsOneDay = Period.of(<span class="number">2</span>, <span class="number">6</span>, <span class="number">1</span>);</span><br><span class="line">Durationç±»å’ŒPeriodç±»å…±äº«äº†å¾ˆå¤šç›¸ä¼¼çš„æ–¹æ³•ï¼Œæœ‰å…´è¶£çš„å¯ä»¥å‚è€ƒå®˜ç½‘çš„æ–‡æ¡£ã€‚</span><br></pre></td></tr></table></figure>

<blockquote>
<p>æˆªè‡³ç›®å‰ï¼Œæˆ‘ä»¬ä»‹ç»çš„è¿™äº›æ—¥æœŸ-æ—¶é—´å¯¹è±¡éƒ½æ˜¯ä¸å¯ä¿®æ”¹çš„ï¼Œè¿™æ˜¯ä¸ºäº†æ›´å¥½åœ°æ”¯æŒå‡½æ•°å¼ç¼–ç¨‹ï¼Œç¡®ä¿çº¿ç¨‹å®‰å…¨ï¼Œä¿æŒé¢†åŸŸæ¨¡å¼ä¸€è‡´æ€§è€Œåšå‡ºçš„é‡å¤§è®¾è®¡å†³å®šã€‚<br>å½“ç„¶ï¼Œæ–°çš„æ—¥æœŸå’Œæ—¶é—´APIä¹Ÿæä¾›äº†ä¸€äº›ä¾¿åˆ©çš„æ–¹æ³•æ¥åˆ›å»ºè¿™äº›å¯¹è±¡çš„å¯å˜ç‰ˆæœ¬ã€‚æ¯”å¦‚ï¼Œä½ å¯èƒ½å¸Œæœ›åœ¨å·²æœ‰çš„LocalDateå®ä¾‹ä¸Šå¢åŠ 3å¤©ã€‚é™¤æ­¤ä¹‹å¤–ï¼Œæˆ‘ä»¬è¿˜ä¼šä»‹ç»å¦‚ä½•ä¾æ®æŒ‡å®šçš„æ¨¡å¼ï¼Œ<br>æ¯”å¦‚dd/MM/yyyyï¼Œåˆ›å»ºæ—¥æœŸ-æ—¶é—´æ ¼å¼å™¨ï¼Œä»¥åŠå¦‚ä½•ä½¿ç”¨è¿™ç§æ ¼å¼å™¨è§£æå’Œè¾“å‡ºæ—¥æœŸã€‚</p>
</blockquote>
<h1 id="5-æ“çºµã€è§£æå’Œæ ¼å¼åŒ–æ—¥æœŸ"><a href="#5-æ“çºµã€è§£æå’Œæ ¼å¼åŒ–æ—¥æœŸ" class="headerlink" title="5. æ“çºµã€è§£æå’Œæ ¼å¼åŒ–æ—¥æœŸ"></a>5. æ“çºµã€è§£æå’Œæ ¼å¼åŒ–æ—¥æœŸ</h1><p>å¦‚æœå·²ç»æœ‰ä¸€ä¸ªLocalDateå¯¹è±¡ï¼Œæƒ³è¦åˆ›å»ºå®ƒçš„ä¸€ä¸ªä¿®æ”¹ç‰ˆï¼Œæœ€ç›´æ¥ä¹Ÿæœ€ç®€å•çš„æ–¹æ³•æ˜¯ä½¿ç”¨withAttributeæ–¹æ³•ã€‚withAttributeæ–¹æ³•ä¼šåˆ›å»ºå¯¹è±¡çš„ä¸€ä¸ªå‰¯æœ¬ï¼Œå¹¶æŒ‰ç…§éœ€è¦ä¿®æ”¹å®ƒçš„å±æ€§ã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// è¿™æ®µä»£ç ä¸­æ‰€æœ‰çš„æ–¹æ³•éƒ½è¿”å›ä¸€ä¸ªä¿®æ”¹äº†å±æ€§çš„å¯¹è±¡ã€‚å®ƒä»¬éƒ½ä¸ä¼šä¿®æ”¹åŸæ¥çš„å¯¹è±¡ï¼</span></span><br><span class="line">LocalDate date1 = LocalDate.of(<span class="number">2017</span>, <span class="number">12</span>, <span class="number">15</span>);</span><br><span class="line">LocalDate date2 = date1.withYear(<span class="number">2019</span>);</span><br><span class="line">LocalDate date3 = date2.withDayOfMonth(<span class="number">25</span>);</span><br><span class="line">LocalDate date4 = date3.with(ChronoField.MONTH_OF_YEAR, <span class="number">9</span>);</span><br></pre></td></tr></table></figure>

<p>å®ƒä»¬éƒ½å£°æ˜äºTemporalæ¥å£ï¼Œæ‰€æœ‰çš„æ—¥æœŸå’Œæ—¶é—´APIç±»éƒ½å®ç°è¿™ä¸¤ä¸ªæ–¹æ³•ï¼Œå®ƒä»¬å®šä¹‰äº†å•ç‚¹çš„æ—¶é—´ï¼Œæ¯”å¦‚LocalDateã€LocalTimeã€LocalDateTimeä»¥åŠInstantã€‚æ›´ç¡®åˆ‡åœ°è¯´ï¼Œä½¿ç”¨getå’Œwithæ–¹æ³•ï¼Œæˆ‘ä»¬å¯ä»¥å°†Temporalå¯¹è±¡å€¼çš„è¯»å–å’Œä¿®æ”¹åŒºåˆ†å¼€ã€‚å¦‚æœTemporalå¯¹è±¡ä¸æ”¯æŒè¯·æ±‚è®¿é—®çš„å­—æ®µï¼Œå®ƒä¼šæŠ›å‡ºä¸€ä¸ªUnsupportedTemporalTypeExceptionå¼‚å¸¸ï¼Œæ¯”å¦‚è¯•å›¾è®¿é—®Instantå¯¹è±¡çš„ChronoField.MONTH_OF_YEARå­—æ®µï¼Œæˆ–è€…LocalDateå¯¹è±¡çš„ChronoField.NANO_OF_SECONDå­—æ®µæ—¶éƒ½ä¼šæŠ›å‡ºè¿™æ ·çš„å¼‚å¸¸ã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ä»¥å£°æ˜çš„æ–¹å¼æ“çºµLocalDateå¯¹è±¡,å¯ä»¥åŠ ä¸Šæˆ–è€…å‡å»ä¸€æ®µæ—¶é—´</span></span><br><span class="line">LocalDate date1 = LocalDate.of(<span class="number">2014</span>, <span class="number">10</span>, <span class="number">19</span>);</span><br><span class="line">LocalDate date2 = date1.plusWeeks(<span class="number">1</span>);</span><br><span class="line">LocalDate date3 = date2.minusYears(<span class="number">3</span>);</span><br><span class="line">LocalDate date4 = date3.plus(<span class="number">6</span>, ChronoUnit.MONTHS);</span><br></pre></td></tr></table></figure>

<p>ä¸æˆ‘ä»¬åˆšæ‰ä»‹ç»çš„getå’Œwithæ–¹æ³•ç±»ä¼¼æœ€åä¸€è¡Œä½¿ç”¨çš„plusæ–¹æ³•ä¹Ÿæ˜¯é€šç”¨æ–¹æ³•ï¼Œå®ƒå’Œminusæ–¹æ³•éƒ½å£°æ˜äºTemporalæ¥å£ä¸­ã€‚é€šè¿‡è¿™äº›æ–¹æ³•ï¼Œå¯¹TemporalUnitå¯¹è±¡åŠ ä¸Šæˆ–è€…å‡å»ä¸€ä¸ªæ•°å­—ï¼Œæˆ‘ä»¬èƒ½éå¸¸æ–¹ä¾¿åœ°å°†Temporalå¯¹è±¡å‰æº¯æˆ–è€…å›æ»šè‡³æŸä¸ªæ—¶é—´æ®µï¼Œé€šè¿‡ChronoUnitæšä¸¾æˆ‘ä»¬å¯ä»¥éå¸¸æ–¹ä¾¿åœ°å®ç°TemporalUnitæ¥å£ã€‚</p>
<h1 id="6-ä½¿ç”¨TemporalAdjuster"><a href="#6-ä½¿ç”¨TemporalAdjuster" class="headerlink" title="6. ä½¿ç”¨TemporalAdjuster"></a>6. ä½¿ç”¨TemporalAdjuster</h1><p>æœ‰æ—¶éœ€è¦è¿›è¡Œä¸€äº›æ›´åŠ å¤æ‚çš„æ“ä½œï¼Œæ¯”å¦‚ï¼Œå°†æ—¥æœŸè°ƒæ•´åˆ°ä¸‹ä¸ªå‘¨æ—¥ã€ä¸‹ä¸ªå·¥ä½œæ—¥ï¼Œæˆ–è€…æ˜¯æœ¬æœˆçš„æœ€åä¸€å¤©ã€‚å¯ä»¥ä½¿ç”¨é‡è½½ç‰ˆæœ¬çš„withæ–¹æ³•ï¼Œå‘å…¶ä¼ é€’ä¸€ä¸ªæä¾›äº†æ›´å¤šå®šåˆ¶åŒ–é€‰æ‹©çš„TemporalAdjusterå¯¹è±¡ï¼Œæ›´åŠ çµæ´»åœ°å¤„ç†æ—¥æœŸã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å¯¹äºæœ€å¸¸è§çš„ç”¨ä¾‹ï¼Œæ—¥æœŸå’Œæ—¶é—´APIå·²ç»æä¾›äº†å¤§é‡é¢„å®šä¹‰çš„TemporalAdjusterã€‚å¯ä»¥é€šè¿‡TemporalAdjusterç±»çš„é™æ€å·¥å‚æ–¹æ³•è®¿é—®ã€‚</span></span><br><span class="line">LocalDate date1 = LocalDate.of(<span class="number">2013</span>, <span class="number">12</span>, <span class="number">11</span>);</span><br><span class="line">LocalDate date2 = date1.with(TemporalAdjusters.nextOrSame(DayOfWeek.MONDAY));</span><br><span class="line">LocalDate date3 = date2.with(TemporalAdjusters.lastDayOfMonth());</span><br></pre></td></tr></table></figure>

<p>ä½¿ç”¨TemporalAdjusterå¯ä»¥è¿›è¡Œæ›´åŠ å¤æ‚çš„æ—¥æœŸæ“ä½œï¼Œæ–¹æ³•çš„åç§°å¾ˆç›´è§‚ã€‚å¦‚æœæ²¡æœ‰æ‰¾åˆ°ç¬¦åˆé¢„æœŸçš„é¢„å®šä¹‰çš„TemporalAdjusterï¼Œå¯ä»¥åˆ›å»ºè‡ªå®šä¹‰çš„TemporalAdjusterã€‚TemporalAdjusteræ¥å£åªå£°æ˜ä¸€ä¸ªæ–¹æ³•ï¼ˆå³å‡½æ•°å¼æ¥å£ï¼‰ã€‚å®ç°è¯¥æ¥å£éœ€è¦å®šä¹‰å¦‚ä½•å°†ä¸€ä¸ªTemporalå¯¹è±¡è½¬æ¢ä¸ºå¦ä¸€ä¸ªTemporalå¯¹è±¡,å¯ä»¥æŠŠå®ƒçœ‹æˆä¸€ä¸ªUnaryOperator<Temporal>ã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@FunctionalInterface</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">TemporalAdjuster</span> </span>&#123;</span><br><span class="line">    <span class="function">Temporal <span class="title">adjustInto</span><span class="params">(Temporal temporal)</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<h1 id="7-æ‰“å°è¾“å‡ºåŠè§£ææ—¥æœŸ-æ—¶é—´å¯¹è±¡"><a href="#7-æ‰“å°è¾“å‡ºåŠè§£ææ—¥æœŸ-æ—¶é—´å¯¹è±¡" class="headerlink" title="7. æ‰“å°è¾“å‡ºåŠè§£ææ—¥æœŸ-æ—¶é—´å¯¹è±¡"></a>7. æ‰“å°è¾“å‡ºåŠè§£ææ—¥æœŸ-æ—¶é—´å¯¹è±¡</h1><p>æ–°çš„java.time.formatåŒ…å°±æ˜¯ç‰¹åˆ«ä¸ºæ ¼å¼åŒ–ä»¥åŠè§£ææ—¥æœŸ-æ—¶é—´å¯¹è±¡è€Œè®¾è®¡çš„ã€‚å…¶ä¸­æœ€é‡è¦çš„ç±»æ˜¯DateTimeFormatterã€‚åˆ›å»ºæ ¼å¼å™¨æœ€ç®€å•çš„æ–¹æ³•æ˜¯é€šè¿‡å®ƒçš„é™æ€å·¥å‚æ–¹æ³•ä»¥åŠå¸¸é‡ã€‚æ‰€æœ‰çš„DateTimeFormatterå®ä¾‹éƒ½èƒ½ç”¨äºä»¥ä¸€å®šçš„æ ¼å¼åˆ›å»ºä»£è¡¨ç‰¹å®šæ—¥æœŸæˆ–æ—¶é—´çš„å­—ç¬¦ä¸²ã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">LocalDate date = LocalDate.of(<span class="number">2013</span>, <span class="number">10</span>, <span class="number">11</span>);</span><br><span class="line">String s1 = date.format(DateTimeFormatter.BASIC_ISO_DATE);</span><br><span class="line">String s2 = date.format(DateTimeFormatter.ISO_LOCAL_DATE);</span><br><span class="line"></span><br><span class="line"><span class="number">20131011</span></span><br><span class="line"><span class="number">2013</span>-<span class="number">10</span>-<span class="number">11</span></span><br></pre></td></tr></table></figure>

<p>é€šè¿‡è§£æä»£è¡¨æ—¥æœŸæˆ–æ—¶é—´çš„å­—ç¬¦ä¸²é‡æ–°åˆ›å»ºè¯¥æ—¥æœŸå¯¹è±¡ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨å·¥å‚æ–¹æ³•parseé‡æ–°åˆ›å»ºã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">LocalDate date2 = LocalDate.parse(<span class="string">"20141007"</span>, DateTimeFormatter.BASIC_ISO_DATE);</span><br><span class="line">LocalDate date3 = LocalDate.parse(<span class="string">"2014-10-07"</span>, DateTimeFormatter.ISO_LOCAL_DATE);</span><br></pre></td></tr></table></figure>

<p>DateTimeFormatterå®ä¾‹æ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼Œè€çš„java.util.DateFormatçº¿ç¨‹ä¸å®‰å…¨ã€‚å•ä¾‹æ¨¡å¼åˆ›å»ºæ ¼å¼å™¨å®ä¾‹ï¼Œåœ¨å¤šä¸ªçº¿ç¨‹é—´å…±äº«å®ä¾‹æ˜¯æ²¡æœ‰é—®é¢˜çš„ã€‚ä¹Ÿå¯ä»¥é€šè¿‡ofPatterné™æ€å·¥å‚æ–¹æ³•ï¼ŒæŒ‰ç…§æŸä¸ªç‰¹å®šçš„æ¨¡å¼åˆ›å»ºæ ¼å¼å™¨ã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">DateTimeFormatter formatter = DateTimeFormatter.ofPattern(<span class="string">"dd/MM/yyyy"</span>);</span><br><span class="line">String formattedDateStr = date.format(formatter);</span><br><span class="line">LocalDate date1 = LocalDate.parse(formattedDateStr, formatter);</span><br></pre></td></tr></table></figure>

<p>ofPatternæ–¹æ³•ä¹Ÿæä¾›äº†ä¸€ä¸ªé‡è½½çš„ç‰ˆæœ¬ï¼Œå¯ä»¥ä¼ å…¥Localeåˆ›å»ºæ ¼å¼å™¨ã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">DateTimeFormatter italianFormatter = DateTimeFormatter.ofPattern(<span class="string">"d. MMMM yyyy"</span>, Locale.ITALIAN);</span><br><span class="line">LocalDate date = LocalDate.of(<span class="number">2015</span>, <span class="number">11</span>, <span class="number">14</span>);</span><br><span class="line">String formattedDate = date.format(italianFormatter);</span><br><span class="line">LocalDate date1 = LocalDate.parse(formattedDate, italianFormatter);</span><br></pre></td></tr></table></figure>

<p>DateTimeFormatterBuilderç±»è¿˜æä¾›äº†æ›´å¤æ‚çš„æ ¼å¼å™¨,ä»¥æä¾›æ›´åŠ ç»†ç²’åº¦çš„æ§åˆ¶ã€‚åŒæ—¶ä¹Ÿæä¾›éå¸¸å¼ºå¤§çš„è§£æåŠŸèƒ½ï¼Œæ¯”å¦‚åŒºåˆ†å¤§å°å†™çš„è§£æã€æŸ”æ€§è§£æã€å¡«å……ï¼Œä»¥åŠåœ¨æ ¼å¼å™¨ä¸­æŒ‡å®šå¯é€‰èŠ‚ç­‰ç­‰ã€‚</p>
<p>é€šè¿‡DateTimeFormatterBuilderè‡ªå®šä¹‰æ ¼å¼å™¨</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">DateTimeFormatter italianFormatter = <span class="keyword">new</span> DateTimeFormatterBuilder()</span><br><span class="line">                .appendText(ChronoField.DAY_OF_MONTH)</span><br><span class="line">                .appendLiteral(<span class="string">". "</span>)</span><br><span class="line">                .appendText(ChronoField.MONTH_OF_YEAR)</span><br><span class="line">                .appendLiteral(<span class="string">" "</span>)</span><br><span class="line">                .appendText(ChronoField.YEAR)</span><br><span class="line">                .parseCaseInsensitive()</span><br><span class="line">                .toFormatter(Locale.ITALIAN);</span><br><span class="line">LocalDate now = LocalDate.now();</span><br><span class="line">String s = now.format(italianFormatter);</span><br></pre></td></tr></table></figure>

<h1 id="8-å¤„ç†ä¸åŒçš„æ—¶åŒºå’Œå†æ³•"><a href="#8-å¤„ç†ä¸åŒçš„æ—¶åŒºå’Œå†æ³•" class="headerlink" title="8. å¤„ç†ä¸åŒçš„æ—¶åŒºå’Œå†æ³•"></a>8. å¤„ç†ä¸åŒçš„æ—¶åŒºå’Œå†æ³•</h1><p>æ–°ç‰ˆæ—¥æœŸå’Œæ—¶é—´APIæ–°å¢åŠ çš„é‡è¦åŠŸèƒ½æ˜¯æ—¶åŒºçš„å¤„ç†ã€‚æ–°çš„java.time.ZoneIdç±»æ›¿ä»£è€ç‰ˆjava.util.TimeZoneã€‚è·Ÿå…¶ä»–æ—¥æœŸå’Œæ—¶é—´ç±»ä¸€æ ·ï¼ŒZoneIdç±»ä¹Ÿæ˜¯æ— æ³•ä¿®æ”¹çš„ã€‚æ˜¯æŒ‰ç…§ä¸€å®šçš„è§„åˆ™å°†åŒºåŸŸåˆ’åˆ†æˆçš„æ ‡å‡†æ—¶é—´ç›¸åŒçš„åŒºé—´ã€‚åœ¨ZoneRulesè¿™ä¸ªç±»ä¸­åŒ…å«äº†40ä¸ªæ—¶åŒºå®ä¾‹,å¯ä»¥é€šè¿‡è°ƒç”¨ZoneIdçš„getRules()å¾—åˆ°æŒ‡å®šæ—¶åŒºçš„è§„åˆ™,æ¯ä¸ªç‰¹å®šçš„ZoneIdå¯¹è±¡éƒ½ç”±ä¸€ä¸ªåœ°åŒºIDæ ‡è¯†ã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ZoneId shanghaiZone = ZoneId.of(<span class="string">"Asia/Shanghai"</span>);</span><br></pre></td></tr></table></figure>

<p>Java 8çš„æ–°æ–¹æ³•toZoneIdå°†ä¸€ä¸ªè€çš„æ—¶åŒºå¯¹è±¡è½¬æ¢ä¸ºZoneIdã€‚åœ°åŒºIDéƒ½ä¸ºâ€œ{åŒºåŸŸ}/{åŸå¸‚}â€çš„æ ¼å¼ï¼Œåœ°åŒºé›†åˆçš„è®¾å®šéƒ½ç”±è‹±ç‰¹ç½‘ç¼–å·åˆ†é…æœºæ„ï¼ˆIANAï¼‰çš„æ—¶åŒºæ•°æ®åº“æä¾›ã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ZoneId zoneId = TimeZone.getDefault().toZoneId();</span><br></pre></td></tr></table></figure>

<p>ZoneIdå¯¹è±¡å¯ä»¥ä¸LocalDateã€LocalDateTimeæˆ–è€…æ˜¯Instantå¯¹è±¡æ•´åˆæ„é€ ä¸ºæˆZonedDateTimeå®ä¾‹ï¼Œå®ƒä»£è¡¨äº†ç›¸å¯¹äºæŒ‡å®šæ—¶åŒºçš„æ—¶é—´ç‚¹ã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">LocalDate date = LocalDate.of(<span class="number">2019</span>, <span class="number">03</span>, <span class="number">27</span>);</span><br><span class="line">ZonedDateTime zdt1 = date.atStartOfDay(shanghaiZone);</span><br><span class="line"></span><br><span class="line">LocalDateTime dateTime = LocalDateTime.of(<span class="number">2015</span>, <span class="number">12</span>, <span class="number">21</span>, <span class="number">11</span>, <span class="number">11</span>, <span class="number">11</span>);</span><br><span class="line">ZonedDateTime zdt2 = dateTime.atZone(shanghaiZone);</span><br><span class="line"></span><br><span class="line">Instant instant = Instant.now();</span><br><span class="line">ZonedDateTime zdt3 = instant.atZone(shanghaiZone);</span><br><span class="line">é€šè¿‡ZoneIdï¼Œä½ è¿˜å¯ä»¥å°†LocalDateTimeè½¬æ¢ä¸ºInstantï¼š</span><br><span class="line"></span><br><span class="line">LocalDateTime dateTime = LocalDateTime.of(<span class="number">2016</span>, <span class="number">10</span>, <span class="number">14</span>, <span class="number">15</span>, <span class="number">35</span>);</span><br><span class="line">Instant instantFromDateTime = dateTime.toInstant(shanghaiZone);</span><br><span class="line">ä½ ä¹Ÿå¯ä»¥é€šè¿‡åå‘çš„æ–¹å¼å¾—åˆ°LocalDateTimeå¯¹è±¡ï¼š</span><br><span class="line"></span><br><span class="line">Instant instant = Instant.now();</span><br><span class="line">LocalDateTime timeFromInstant = LocalDateTime.ofInstant(instant, shanghaiZone);</span><br></pre></td></tr></table></figure>

<p>å¦ä¸€ç§æ¯”è¾ƒé€šç”¨çš„è¡¨è¾¾æ—¶åŒºçš„æ–¹å¼æ˜¯åˆ©ç”¨å½“å‰æ—¶åŒºå’ŒUTC/æ ¼æ—å°¼æ²»çš„å›ºå®šåå·®ã€‚ä½¿ç”¨ZoneIdçš„ä¸€ä¸ªå­ç±»ZoneOffsetï¼Œè¡¨ç¤ºçš„æ˜¯å½“å‰æ—¶é—´å’Œä¼¦æ•¦æ ¼æ—å°¼æ²»å­åˆçº¿æ—¶é—´çš„å·®å¼‚ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ZoneOffset newYorkOffset = ZoneOffset.of(<span class="string">"-05:00"</span>);</span><br></pre></td></tr></table></figure>

<h1 id="9-æ€»ç»“"><a href="#9-æ€»ç»“" class="headerlink" title="9. æ€»ç»“"></a>9. æ€»ç»“</h1><ul>
<li>Java 8ä¹‹å‰è€ç‰ˆçš„java.util.Dateç±»ä»¥åŠå…¶ä»–ç”¨äºå»ºæ¨¡æ—¥æœŸæ—¶é—´çš„ç±»æœ‰å¾ˆå¤šä¸ä¸€è‡´åŠè®¾è®¡ä¸Šçš„ç¼ºé™·ï¼ŒåŒ…æ‹¬æ˜“å˜æ€§ä»¥åŠç³Ÿç³•çš„åç§»å€¼ã€é»˜è®¤å€¼å’Œå‘½åã€‚</li>
<li>æ–°ç‰ˆçš„æ—¥æœŸå’Œæ—¶é—´APIä¸­ï¼Œæ—¥æœŸ-æ—¶é—´å¯¹è±¡æ˜¯ä¸å¯å˜çš„ã€‚</li>
<li>æ–°çš„APIæä¾›äº†ä¸¤ç§ä¸åŒçš„æ—¶é—´è¡¨ç¤ºæ–¹å¼ï¼Œæœ‰æ•ˆåœ°åŒºåˆ†äº†è¿è¡Œæ—¶äººå’Œæœºå™¨çš„ä¸åŒéœ€æ±‚ã€‚</li>
<li>ä½ å¯ä»¥ç”¨ç»å¯¹æˆ–è€…ç›¸å¯¹çš„æ–¹å¼æ“çºµæ—¥æœŸå’Œæ—¶é—´ï¼Œæ“ä½œçš„ç»“æœæ€»æ˜¯è¿”å›ä¸€ä¸ªæ–°çš„å®ä¾‹ï¼Œè€çš„æ—¥æœŸæ—¶é—´å¯¹è±¡ä¸ä¼šå‘ç”Ÿå˜åŒ–ã€‚</li>
<li>TemporalAdjusterè®©ä½ èƒ½å¤Ÿç”¨æ›´ç²¾ç»†çš„æ–¹å¼æ“çºµæ—¥æœŸï¼Œä¸å†å±€é™äºä¸€æ¬¡åªèƒ½æ”¹å˜å®ƒçš„ä¸€ä¸ªå€¼ï¼Œå¹¶ä¸”ä½ è¿˜å¯æŒ‰ç…§éœ€æ±‚å®šä¹‰è‡ªå·±çš„æ—¥æœŸè½¬æ¢å™¨ã€‚</li>
<li>ä½ ç°åœ¨å¯ä»¥æŒ‰ç…§ç‰¹å®šçš„æ ¼å¼éœ€æ±‚ï¼Œå®šä¹‰è‡ªå·±çš„æ ¼å¼å™¨ï¼Œæ‰“å°è¾“å‡ºæˆ–è€…è§£ææ—¥æœŸï€­æ—¶é—´å¯¹è±¡ã€‚è¿™äº›æ ¼å¼å™¨å¯ä»¥é€šè¿‡æ¨¡æ¿åˆ›å»ºï¼Œä¹Ÿå¯ä»¥è‡ªå·±ç¼–ç¨‹åˆ›å»ºï¼Œå¹¶ä¸”å®ƒä»¬éƒ½æ˜¯çº¿ç¨‹å®‰å…¨çš„ã€‚</li>
<li>ä½ å¯ä»¥ç”¨ç›¸å¯¹äºæŸä¸ªåœ°åŒº/ä½ç½®çš„æ–¹å¼ï¼Œæˆ–è€…ä»¥ä¸UTC/æ ¼æ—å°¼æ²»æ—¶é—´çš„ç»å¯¹åå·®çš„æ–¹å¼è¡¨ç¤ºæ—¶åŒºï¼Œå¹¶å°†å…¶åº”ç”¨åˆ°æ—¥æœŸï€­æ—¶é—´å¯¹è±¡ä¸Šï¼Œå¯¹å…¶è¿›è¡Œæœ¬åœ°åŒ–ã€‚</li>
</ul>
<h2 id="èµ„æºè·å–"><a href="#èµ„æºè·å–" class="headerlink" title="èµ„æºè·å–"></a>èµ„æºè·å–</h2><ul>
<li>å…¬ä¼—å·å›å¤ : Java8 å³å¯è·å–ã€ŠJava 8 in Actionã€‹ä¸­è‹±æ–‡ç‰ˆ!</li>
</ul>
<h2 id="Tips"><a href="#Tips" class="headerlink" title="Tips"></a>Tips</h2><ul>
<li>æ¬¢è¿æ”¶è—å’Œè½¬å‘ï¼Œæ„Ÿè°¢ä½ çš„æ”¯æŒï¼(à¹‘â€¢Ì€ã…‚â€¢Ì)Ùˆâœ§ </li>
<li>æ¬¢è¿å…³æ³¨æˆ‘çš„å…¬ä¼—å·ï¼šåç«¯å°å“¥ï¼Œä¸“æ³¨åç«¯å¼€å‘ï¼Œå¸Œæœ›å’Œä½ ä¸€èµ·è¿›æ­¥ï¼</li>
</ul>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta size-small is-uppercase level is-mobile"><div class="level-left"><time class="level-item" dateTime="2019-03-24T03:34:52.000Z" title="2019-03-24T03:34:52.000Z">2019-03-24</time><span class="level-item"><a class="link-muted" href="/categories/Java/">Java</a></span><span class="level-item">32 åˆ†é’Ÿ è¯»å®Œ (å¤§çº¦ 4809 ä¸ªå­—)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2019/03/24/%E3%80%8AJava%208%20in%20Action%E3%80%8B%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/%E3%80%8AJava%208%20in%20Action%E3%80%8BChapter%2011%EF%BC%9ACompletableFuture%EF%BC%9A%E7%BB%84%E5%90%88%E5%BC%8F%E5%BC%82%E6%AD%A5%E7%BC%96%E7%A8%8B/">ã€ŠJava 8 in Actionã€‹Chapter 11ï¼šCompletableFutureï¼šç»„åˆå¼å¼‚æ­¥ç¼–ç¨‹</a></h1><div class="content"><p>æŸä¸ªç½‘ç«™çš„æ•°æ®æ¥è‡ªFacebookã€Twitterå’ŒGoogleï¼Œè¿™å°±éœ€è¦ç½‘ç«™ä¸äº’è”ç½‘ä¸Šçš„å¤šä¸ªWebæœåŠ¡é€šä¿¡ã€‚å¯æ˜¯ï¼Œä½ å¹¶ä¸å¸Œæœ›å› ä¸ºç­‰å¾…æŸäº›æœåŠ¡çš„å“åº”ï¼Œé˜»å¡åº”ç”¨ç¨‹åºçš„è¿è¡Œï¼Œæµªè´¹æ•°åäº¿å®è´µçš„CPUæ—¶é’Ÿå‘¨æœŸã€‚æ¯”å¦‚ï¼Œä¸è¦å› ä¸ºç­‰å¾…Facebookçš„æ•°æ®ï¼Œæš‚åœå¯¹æ¥è‡ªTwitterçš„æ•°æ®å¤„ç†ã€‚<br><img src="https://raw.githubusercontent.com/lujiahao0708/PicRepo/master/blogPic/11.%E3%80%8AJava%208%20in%20Action%E3%80%8BChapter%2011%EF%BC%9ACompletableFuture%EF%BC%9A%E7%BB%84%E5%90%88%E5%BC%8F%E5%BC%82%E6%AD%A5%E7%BC%96%E7%A8%8B/%E5%85%B8%E5%9E%8B%E6%B7%B7%E8%81%9A%E5%BA%94%E7%94%A8.png" alt=""></p>
<p>ç¬¬7ç« ä¸­ä»‹ç»çš„åˆ†æ”¯/åˆå¹¶æ¡†æ¶ä»¥åŠå¹¶è¡Œæµæ˜¯å®ç°å¹¶è¡Œå¤„ç†çš„å®è´µå·¥å…·;å®ƒä»¬å°†ä¸€ä¸ªæ“ä½œåˆ‡åˆ†ä¸ºå¤šä¸ªå­æ“ä½œï¼Œåœ¨å¤šä¸ªä¸åŒçš„æ ¸ã€CPUç”šè‡³æ˜¯æœºå™¨ä¸Šå¹¶è¡Œåœ°æ‰§è¡Œè¿™äº›å­æ“ä½œã€‚ä¸æ­¤ç›¸åï¼Œå¦‚æœä½ çš„æ„å›¾æ˜¯å®ç°å¹¶å‘ï¼Œè€Œéå¹¶è¡Œï¼Œæˆ–è€…ä½ çš„ä¸»è¦ç›®æ ‡æ˜¯åœ¨åŒä¸€ä¸ªCPUä¸Šæ‰§è¡Œå‡ ä¸ªæ¾è€¦åˆçš„ä»»åŠ¡ï¼Œå……åˆ†åˆ©ç”¨CPUçš„æ ¸ï¼Œè®©å…¶è¶³å¤Ÿå¿™ç¢Œï¼Œä»è€Œæœ€å¤§åŒ–ç¨‹åºçš„ååé‡ï¼Œé‚£ä¹ˆä½ å…¶å®çœŸæ­£æƒ³åšçš„æ˜¯é¿å…å› ä¸ºç­‰å¾…è¿œç¨‹æœåŠ¡çš„è¿”å›ï¼Œæˆ–è€…å¯¹æ•°æ®åº“çš„æŸ¥è¯¢ï¼Œè€Œé˜»å¡çº¿ç¨‹çš„æ‰§è¡Œï¼Œæµªè´¹å®è´µçš„è®¡ç®—èµ„æºï¼Œå› ä¸ºè¿™ç§ç­‰å¾…çš„æ—¶é—´å¾ˆå¯èƒ½ç›¸å½“é•¿ã€‚<br><img src="https://raw.githubusercontent.com/lujiahao0708/PicRepo/master/blogPic/11.%E3%80%8AJava%208%20in%20Action%E3%80%8BChapter%2011%EF%BC%9ACompletableFuture%EF%BC%9A%E7%BB%84%E5%90%88%E5%BC%8F%E5%BC%82%E6%AD%A5%E7%BC%96%E7%A8%8B/%E5%B9%B6%E5%8F%91%E5%92%8C%E5%B9%B6%E8%A1%8C.png" alt=""></p>
<h1 id="1-Futureæ¥å£"><a href="#1-Futureæ¥å£" class="headerlink" title="1. Futureæ¥å£"></a>1. Futureæ¥å£</h1><p>Futureæ¥å£åœ¨Java 5ä¸­è¢«å¼•å…¥ï¼Œè®¾è®¡åˆè¡·æ˜¯å¯¹å°†æ¥æŸä¸ªæ—¶åˆ»ä¼šå‘ç”Ÿçš„ç»“æœè¿›è¡Œå»ºæ¨¡ã€‚å®ƒå»ºæ¨¡äº†ä¸€ç§å¼‚æ­¥è®¡ç®—ï¼Œè¿”å›ä¸€ä¸ªæ‰§è¡Œè¿ç®—ç»“æœçš„å¼•ç”¨ï¼Œå½“è¿ç®—ç»“æŸåï¼Œè¿™ä¸ªå¼•ç”¨è¢«è¿”å›ç»™è°ƒç”¨æ–¹ã€‚åœ¨Futureä¸­è§¦å‘é‚£äº›æ½œåœ¨è€—æ—¶çš„æ“ä½œæŠŠè°ƒç”¨çº¿ç¨‹è§£æ”¾å‡ºæ¥ï¼Œè®©å®ƒèƒ½ç»§ç»­æ‰§è¡Œå…¶ä»–æœ‰ä»·å€¼çš„å·¥ä½œï¼Œä¸å†éœ€è¦ç­‰å¾…è€—æ—¶çš„æ“ä½œå®Œæˆã€‚Futureçš„å¦ä¸€ä¸ªä¼˜ç‚¹æ˜¯å®ƒæ¯”æ›´åº•å±‚çš„Threadæ›´æ˜“ç”¨ã€‚è¦ä½¿ç”¨Futureï¼Œé€šå¸¸ä½ åªéœ€è¦å°†è€—æ—¶çš„æ“ä½œå°è£…åœ¨ä¸€ä¸ªCallableå¯¹è±¡ä¸­ï¼Œå†å°†å®ƒæäº¤ç»™ExecutorServiceã€‚ä½¿ç”¨Futureä»¥å¼‚æ­¥çš„æ–¹å¼æ‰§è¡Œä¸€ä¸ªè€—æ—¶çš„æ“ä½œ:<br><img src="https://raw.githubusercontent.com/lujiahao0708/PicRepo/master/blogPic/11.%E3%80%8AJava%208%20in%20Action%E3%80%8BChapter%2011%EF%BC%9ACompletableFuture%EF%BC%9A%E7%BB%84%E5%90%88%E5%BC%8F%E5%BC%82%E6%AD%A5%E7%BC%96%E7%A8%8B/%E4%BD%BF%E7%94%A8Future%E4%BB%A5%E5%BC%82%E6%AD%A5%E7%9A%84%E6%96%B9%E5%BC%8F%E6%89%A7%E8%A1%8C%E4%B8%80%E4%B8%AA%E8%80%97%E6%97%B6%E7%9A%84%E6%93%8D%E4%BD%9C.png" alt=""></p>
<p>çº¿ç¨‹å¯ä»¥åœ¨ExecutorServiceä»¥å¹¶å‘æ–¹å¼è°ƒç”¨å¦ä¸€ä¸ªçº¿ç¨‹æ‰§è¡Œè€—æ—¶æ“ä½œçš„åŒæ—¶ï¼Œå»æ‰§è¡Œä¸€äº›å…¶ä»–çš„ä»»åŠ¡ã€‚æ¥ç€ï¼Œå¦‚æœä½ å·²ç»è¿è¡Œåˆ°æ²¡æœ‰å¼‚æ­¥æ“ä½œçš„ç»“æœå°±æ— æ³•ç»§ç»­ä»»ä½•æœ‰æ„ä¹‰çš„å·¥ä½œæ—¶ï¼Œå¯ä»¥è°ƒç”¨å®ƒçš„getæ–¹æ³•å»è·å–æ“ä½œçš„ç»“æœã€‚å¦‚æœæ“ä½œå·²ç»å®Œæˆï¼Œè¯¥æ–¹æ³•ä¼šç«‹åˆ»è¿”å›æ“ä½œçš„ç»“æœï¼Œå¦åˆ™å®ƒä¼šé˜»å¡ä½ çš„çº¿ç¨‹ï¼Œç›´åˆ°æ“ä½œå®Œæˆï¼Œè¿”å›ç›¸åº”çš„ç»“æœã€‚å¦‚æœè¯¥é•¿æ—¶é—´è¿è¡Œçš„æ“ä½œæ°¸è¿œä¸è¿”å›äº†ä¼šæ€æ ·?Futureæä¾›äº†ä¸€ä¸ªæ— éœ€ä»»ä½•å‚æ•°çš„getæ–¹æ³•ï¼Œæ¨èä½¿ç”¨é‡è½½ç‰ˆæœ¬çš„getæ–¹æ³•ï¼Œå®ƒæ¥å—ä¸€ä¸ªè¶…æ—¶çš„å‚æ•°ï¼Œå¯ä»¥å®šä¹‰çº¿ç¨‹ç­‰å¾…Futureç»“æœçš„æœ€é•¿æ—¶é—´ï¼Œé¿å…æ— ä¼‘æ­¢çš„ç­‰å¾…ã€‚ä¸‹å›¾æ˜¯Futureå¼‚æ­¥æ‰§è¡Œçº¿ç¨‹åŸç†å›¾ã€‚<br><img src="https://raw.githubusercontent.com/lujiahao0708/PicRepo/master/blogPic/11.%E3%80%8AJava%208%20in%20Action%E3%80%8BChapter%2011%EF%BC%9ACompletableFuture%EF%BC%9A%E7%BB%84%E5%90%88%E5%BC%8F%E5%BC%82%E6%AD%A5%E7%BC%96%E7%A8%8B/Future%E5%BC%82%E6%AD%A5%E6%89%A7%E8%A1%8C%E7%BA%BF%E7%A8%8B%E5%8E%9F%E7%90%86%E5%9B%BE.png" alt=""></p>
<h1 id="2-ä½¿ç”¨CompletableFutureæ„å»ºå¼‚æ­¥åº”ç”¨"><a href="#2-ä½¿ç”¨CompletableFutureæ„å»ºå¼‚æ­¥åº”ç”¨" class="headerlink" title="2. ä½¿ç”¨CompletableFutureæ„å»ºå¼‚æ­¥åº”ç”¨"></a>2. ä½¿ç”¨CompletableFutureæ„å»ºå¼‚æ­¥åº”ç”¨</h1><p>Futureæ¥å£æœ‰ä¸€å®šçš„å±€é™æ€§ï¼Œæ¯”å¦‚ï¼Œæˆ‘ä»¬å¾ˆéš¾è¡¨è¿°Futureç»“æœä¹‹é—´çš„ä¾èµ–æ€§ã€‚å› æ­¤æˆ‘ä»¬å¼•å…¥äº†CompletableFutureã€‚æ¥ä¸‹æ¥é€šè¿‡ä¸€ä¸ªâ€œæœ€ä½³ä»·æ ¼æŸ¥è¯¢å™¨â€œçš„åº”ç”¨ï¼Œå®ƒä¼šæŸ¥è¯¢å¤šä¸ªåœ¨çº¿å•†åº—ï¼Œä¾æ®ç»™å®šçš„äº§å“æˆ–æœåŠ¡æ‰¾å‡ºæœ€ä½çš„ä»·æ ¼ï¼Œæ¥å±•ç°CompletableFutureå®ç°å¼‚æ­¥åº”ç”¨ã€‚é€šè¿‡æ­¤ä¾‹ä½ èƒ½å­¦åˆ°è¿™äº›ï¼š</p>
<ul>
<li>å¦‚ä½•ç¼–å†™å¼‚æ­¥API</li>
<li>å¦‚ä½•è®©ä½¿ç”¨åŒæ­¥APIçš„ä»£ç å˜ä¸ºéé˜»å¡ä»£ç </li>
<li>å¦‚ä½•ä½¿ç”¨æµæ°´çº¿å°†ä¸¤ä¸ªæ¥ç»­çš„å¼‚æ­¥æ“ä½œåˆå¹¶ä¸ºä¸€ä¸ªå¼‚æ­¥è®¡ç®—æ“ä½œ</li>
<li>å¦‚ä½•ä»¥å“åº”å¼çš„æ–¹å¼å¤„ç†å¼‚æ­¥æ“ä½œçš„å®Œæˆäº‹ä»¶</li>
</ul>
<p>åŒæ­¥APIå’Œå¼‚æ­¥APIï¼š</p>
<ul>
<li>åŒæ­¥APIå…¶å®åªæ˜¯å¯¹ä¼ ç»Ÿæ–¹æ³•è°ƒç”¨çš„å¦ä¸€ç§ç§°å‘¼:ä½ è°ƒç”¨äº†æŸä¸ªæ–¹æ³•ï¼Œè°ƒç”¨æ–¹åœ¨è¢«è°ƒç”¨æ–¹è¿è¡Œçš„è¿‡ç¨‹ä¸­ä¼šç­‰å¾…ï¼Œè¢«è°ƒç”¨æ–¹è¿è¡Œç»“æŸè¿”å›ï¼Œè°ƒç”¨æ–¹å–å¾—è¢«è°ƒç”¨æ–¹çš„è¿”å›å€¼å¹¶ç»§ç»­è¿è¡Œã€‚å³ä½¿è°ƒç”¨æ–¹å’Œè¢«è°ƒç”¨æ–¹åœ¨ä¸åŒçš„çº¿ç¨‹ä¸­è¿è¡Œï¼Œè°ƒç”¨æ–¹è¿˜æ˜¯éœ€è¦ç­‰å¾…è¢«è°ƒç”¨æ–¹ç»“æŸè¿è¡Œï¼Œè¿™å°±æ˜¯é˜»å¡å¼è°ƒç”¨è¿™ä¸ªåè¯çš„ç”±æ¥ã€‚</li>
<li>å¼‚æ­¥APIä¼šç›´æ¥è¿”å›ï¼Œæˆ–è€…è‡³å°‘åœ¨è¢«è°ƒç”¨æ–¹è®¡ç®—å®Œæˆä¹‹å‰ï¼Œå°†å®ƒå‰©ä½™çš„è®¡ç®—ä»»åŠ¡äº¤ç»™å¦ä¸€ä¸ªçº¿ç¨‹å»åšï¼Œè¯¥çº¿ç¨‹å’Œè°ƒç”¨æ–¹æ˜¯å¼‚æ­¥çš„â€”â€”è¿™å°±æ˜¯éé˜»å¡å¼è°ƒç”¨çš„ç”±æ¥ã€‚æ‰§è¡Œå‰©ä½™è®¡ç®—ä»»åŠ¡çš„çº¿ç¨‹ä¼šå°†å®ƒçš„è®¡ç®—ç»“æœè¿”å›ç»™è°ƒç”¨æ–¹ã€‚è¿”å›çš„æ–¹å¼è¦ä¹ˆæ˜¯é€šè¿‡å›è°ƒå‡½æ•°ï¼Œè¦ä¹ˆæ˜¯ç”±è°ƒç”¨æ–¹å†æ¬¡æ‰§è¡Œä¸€ä¸ªâ€œç­‰å¾…ï¼Œç›´åˆ°è®¡ç®—å®Œæˆâ€çš„æ–¹æ³•è°ƒç”¨ã€‚</li>
</ul>
<h2 id="2-1-å®æˆ˜ï¼šå®ç°å¼‚æ­¥API"><a href="#2-1-å®æˆ˜ï¼šå®ç°å¼‚æ­¥API" class="headerlink" title="2.1 å®æˆ˜ï¼šå®ç°å¼‚æ­¥API"></a>2.1 å®æˆ˜ï¼šå®ç°å¼‚æ­¥API</h2><h3 id="2-1-1-åŒæ­¥æ–¹æ³•"><a href="#2-1-1-åŒæ­¥æ–¹æ³•" class="headerlink" title="2.1.1 åŒæ­¥æ–¹æ³•"></a>2.1.1 åŒæ­¥æ–¹æ³•</h3><p><img src="https://raw.githubusercontent.com/lujiahao0708/PicRepo/master/blogPic/11.%E3%80%8AJava%208%20in%20Action%E3%80%8BChapter%2011%EF%BC%9ACompletableFuture%EF%BC%9A%E7%BB%84%E5%90%88%E5%BC%8F%E5%BC%82%E6%AD%A5%E7%BC%96%E7%A8%8B/%E5%90%8C%E6%AD%A5%E6%96%B9%E6%B3%95.png" alt=""></p>
<blockquote>
<p>åŒæ­¥æ“ä½œä¸­ä¼šä¸ºç­‰å¾…åŒæ­¥äº‹ä»¶å®Œæˆè€Œç­‰å¾…1sï¼Œè¿™ç§æ˜¯æ— æ³•æ¥å—çš„ï¼Œå¯¹äºç¨‹åºä½“éªŒæ¥è¯´æ˜¯éå¸¸ä¸å¥½çš„ã€‚</p>
</blockquote>
<h3 id="2-1-2-å°†åŒæ­¥æ–¹æ³•è½¬æ¢ä¸ºå¼‚æ­¥æ–¹æ³•"><a href="#2-1-2-å°†åŒæ­¥æ–¹æ³•è½¬æ¢ä¸ºå¼‚æ­¥æ–¹æ³•" class="headerlink" title="2.1.2 å°†åŒæ­¥æ–¹æ³•è½¬æ¢ä¸ºå¼‚æ­¥æ–¹æ³•"></a>2.1.2 å°†åŒæ­¥æ–¹æ³•è½¬æ¢ä¸ºå¼‚æ­¥æ–¹æ³•</h3><p><img src="https://raw.githubusercontent.com/lujiahao0708/PicRepo/master/blogPic/11.%E3%80%8AJava%208%20in%20Action%E3%80%8BChapter%2011%EF%BC%9ACompletableFuture%EF%BC%9A%E7%BB%84%E5%90%88%E5%BC%8F%E5%BC%82%E6%AD%A5%E7%BC%96%E7%A8%8B/%E5%BC%82%E6%AD%A5%E6%96%B9%E6%B3%95.png" alt=""></p>
<blockquote>
<p>Java 5å¼•å…¥äº†java.util.concurrent.Futureæ¥å£è¡¨ç¤ºä¸€ä¸ªå¼‚æ­¥è®¡ç®—(å³è°ƒç”¨çº¿ç¨‹å¯ä»¥ç»§ç»­è¿è¡Œï¼Œä¸ä¼šå› ä¸ºè°ƒç”¨æ–¹æ³•è€Œé˜»å¡)çš„ç»“æœã€‚è¿™æ„å‘³ç€Futureæ˜¯ä¸€ä¸ªæš‚æ—¶è¿˜ä¸å¯çŸ¥å€¼çš„å¤„ç†å™¨ï¼Œè¿™ä¸ªå€¼åœ¨è®¡ç®—å®Œæˆåï¼Œå¯ä»¥é€šè¿‡è°ƒç”¨å®ƒçš„getæ–¹æ³•å–å¾—ã€‚è¿™ç§æ–¹å¼ä¸‹ï¼Œåœ¨è¿›è¡Œä»·æ ¼æŸ¥è¯¢çš„åŒæ—¶ï¼Œè¿˜èƒ½æ‰§è¡Œä¸€äº›å…¶ä»–çš„ä»»åŠ¡ï¼Œæ¯”å¦‚æŸ¥è¯¢å…¶ä»–å•†åº—ä¸­å•†å“çš„ä»·æ ¼ï¼Œä¸ä¼šé˜»å¡åœ¨é‚£é‡Œç­‰å¾…ç¬¬ä¸€å®¶å•†åº—è¿”å›è¯·æ±‚çš„ç»“æœã€‚æœ€åï¼Œå¦‚æœæ‰€æœ‰æœ‰æ„ä¹‰çš„å·¥ä½œéƒ½å·²ç»å®Œæˆï¼Œæ‰€æœ‰è¦æ‰§è¡Œçš„å·¥ä½œéƒ½ä¾èµ–äºå•†å“ä»·æ ¼æ—¶ï¼Œå†è°ƒç”¨Futureçš„getæ–¹æ³•ã€‚æ‰§è¡Œäº†è¿™ä¸ªæ“ä½œåï¼Œè¦ä¹ˆè·å¾—Futureä¸­å°è£…çš„å€¼(å¦‚æœå¼‚æ­¥ä»»åŠ¡å·²ç»å®Œæˆ)ï¼Œè¦ä¹ˆå‘ç”Ÿé˜»å¡ï¼Œç›´åˆ°è¯¥å¼‚æ­¥ä»»åŠ¡å®Œæˆï¼ŒæœŸæœ›çš„å€¼èƒ½å¤Ÿè®¿é—®ã€‚åŒæ—¶ï¼Œå¦‚æœæŸä¸ªå•†å“ä»·æ ¼è®¡ç®—å‘ç”Ÿå¼‚å¸¸ï¼Œä¼šå°†å½“å‰çº¿ç¨‹æ€æ­»ï¼Œä»è€Œå¯¼è‡´ç­‰å¾…getæ–¹æ³•è¿”å›ç»“æœçš„å®¢æˆ·ç«¯æ°¸ä¹…åœ°è¢«é˜»å¡ã€‚å®¢æˆ·ç«¯å¯ä»¥ä½¿ç”¨é‡è½½ç‰ˆæœ¬çš„getæ–¹æ³•ï¼Œè®¾ç½®è¶…æ—¶å‚æ•°æ¥é¿å…ã€‚ä¸ºäº†è®©å®¢æˆ·ç«¯èƒ½äº†è§£æ— æ³•æä¾›è¯·æ±‚å•†å“ä»·æ ¼çš„åŸå› ï¼Œä½ éœ€è¦ä½¿ç”¨CompletableFutureçš„completeExceptionallyæ–¹æ³•å°†å¯¼è‡´CompletableFutureå†…å‘ç”Ÿé—®é¢˜çš„å¼‚å¸¸æŠ›å‡ºã€‚</p>
</blockquote>
<h2 id="2-1-3-ä½¿ç”¨å·¥å‚æ–¹æ³•supplyAsyncåˆ›å»ºCompletableFutureå¯¹è±¡"><a href="#2-1-3-ä½¿ç”¨å·¥å‚æ–¹æ³•supplyAsyncåˆ›å»ºCompletableFutureå¯¹è±¡" class="headerlink" title="2.1.3 ä½¿ç”¨å·¥å‚æ–¹æ³•supplyAsyncåˆ›å»ºCompletableFutureå¯¹è±¡"></a>2.1.3 ä½¿ç”¨å·¥å‚æ–¹æ³•supplyAsyncåˆ›å»ºCompletableFutureå¯¹è±¡</h2><p><img src="https://raw.githubusercontent.com/lujiahao0708/PicRepo/master/blogPic/11.%E3%80%8AJava%208%20in%20Action%E3%80%8BChapter%2011%EF%BC%9ACompletableFuture%EF%BC%9A%E7%BB%84%E5%90%88%E5%BC%8F%E5%BC%82%E6%AD%A5%E7%BC%96%E7%A8%8B/%E5%BC%82%E6%AD%A5%E6%96%B9%E6%B3%95(%E4%BD%BF%E7%94%A8%E5%B7%A5%E5%8E%82%E6%96%B9%E6%B3%95).png" alt=""></p>
<blockquote>
<p>supplyAsyncæ–¹æ³•æ¥å—ä¸€ä¸ªç”Ÿäº§è€…(Supplier)ä½œä¸ºå‚æ•°ï¼Œè¿”å›ä¸€ä¸ªCompletableFutureå¯¹è±¡ï¼Œè¯¥å¯¹è±¡å®Œæˆå¼‚æ­¥æ‰§è¡Œåä¼šè¯»å–è°ƒç”¨ç”Ÿäº§è€…æ–¹æ³•çš„è¿”å›å€¼ã€‚ç”Ÿäº§è€…æ–¹æ³•ä¼šäº¤ç”±ForkJoinPoolæ± ä¸­çš„æŸä¸ªæ‰§è¡Œçº¿ç¨‹(Executor)è¿è¡Œï¼Œä½†æ˜¯ä½ ä¹Ÿå¯ä»¥ä½¿ç”¨supplyAsyncæ–¹æ³•çš„é‡è½½ç‰ˆæœ¬ï¼Œä¼ é€’ç¬¬äºŒä¸ªå‚æ•°æŒ‡å®šä¸åŒçš„æ‰§è¡Œçº¿ç¨‹æ‰§è¡Œç”Ÿäº§è€…æ–¹æ³•ã€‚</p>
</blockquote>
<h1 id="3-æ¶ˆé™¤ä»£ç é˜»å¡é—®é¢˜"><a href="#3-æ¶ˆé™¤ä»£ç é˜»å¡é—®é¢˜" class="headerlink" title="3. æ¶ˆé™¤ä»£ç é˜»å¡é—®é¢˜"></a>3. æ¶ˆé™¤ä»£ç é˜»å¡é—®é¢˜</h1><h2 id="3-1-é¡ºåºåŒæ­¥è¯·æ±‚"><a href="#3-1-é¡ºåºåŒæ­¥è¯·æ±‚" class="headerlink" title="3.1 é¡ºåºåŒæ­¥è¯·æ±‚"></a>3.1 é¡ºåºåŒæ­¥è¯·æ±‚</h2><p><img src="https://raw.githubusercontent.com/lujiahao0708/PicRepo/master/blogPic/11.%E3%80%8AJava%208%20in%20Action%E3%80%8BChapter%2011%EF%BC%9ACompletableFuture%EF%BC%9A%E7%BB%84%E5%90%88%E5%BC%8F%E5%BC%82%E6%AD%A5%E7%BC%96%E7%A8%8B/11.3/%E9%A1%BA%E5%BA%8F%E5%90%8C%E6%AD%A5%E8%AF%B7%E6%B1%82.png" alt=""></p>
<h2 id="3-2-ä½¿ç”¨å¹¶è¡Œæµå¯¹è¯·æ±‚è¿›è¡Œå¹¶è¡Œæ“ä½œ"><a href="#3-2-ä½¿ç”¨å¹¶è¡Œæµå¯¹è¯·æ±‚è¿›è¡Œå¹¶è¡Œæ“ä½œ" class="headerlink" title="3.2 ä½¿ç”¨å¹¶è¡Œæµå¯¹è¯·æ±‚è¿›è¡Œå¹¶è¡Œæ“ä½œ"></a>3.2 ä½¿ç”¨å¹¶è¡Œæµå¯¹è¯·æ±‚è¿›è¡Œå¹¶è¡Œæ“ä½œ</h2><p><img src="https://raw.githubusercontent.com/lujiahao0708/PicRepo/master/blogPic/11.%E3%80%8AJava%208%20in%20Action%E3%80%8BChapter%2011%EF%BC%9ACompletableFuture%EF%BC%9A%E7%BB%84%E5%90%88%E5%BC%8F%E5%BC%82%E6%AD%A5%E7%BC%96%E7%A8%8B/11.3/%E4%BD%BF%E7%94%A8%E5%B9%B6%E8%A1%8C%E6%B5%81%E5%AF%B9%E8%AF%B7%E6%B1%82%E8%BF%9B%E8%A1%8C%E5%B9%B6%E8%A1%8C%E6%93%8D%E4%BD%9C.png" alt=""></p>
<h2 id="3-3-ä½¿ç”¨CompletableFutureå‘èµ·å¼‚æ­¥è¯·æ±‚"><a href="#3-3-ä½¿ç”¨CompletableFutureå‘èµ·å¼‚æ­¥è¯·æ±‚" class="headerlink" title="3.3 ä½¿ç”¨CompletableFutureå‘èµ·å¼‚æ­¥è¯·æ±‚"></a>3.3 ä½¿ç”¨CompletableFutureå‘èµ·å¼‚æ­¥è¯·æ±‚</h2><p><img src="https://raw.githubusercontent.com/lujiahao0708/PicRepo/master/blogPic/11.%E3%80%8AJava%208%20in%20Action%E3%80%8BChapter%2011%EF%BC%9ACompletableFuture%EF%BC%9A%E7%BB%84%E5%90%88%E5%BC%8F%E5%BC%82%E6%AD%A5%E7%BC%96%E7%A8%8B/11.3/%E4%BD%BF%E7%94%A8CompletableFuture%E5%8F%91%E8%B5%B7%E5%BC%82%E6%AD%A5%E8%AF%B7%E6%B1%82.png" alt=""></p>
<p>CompletableFutureç‰ˆæœ¬çš„ç¨‹åºä¼¼ä¹æ¯”å¹¶è¡Œæµç‰ˆæœ¬çš„ç¨‹åºè¿˜å¿«é‚£ä¹ˆä¸€ç‚¹å„¿ã€‚ä½†æ˜¯æœ€åè¿™ä¸ªç‰ˆæœ¬ä¹Ÿä¸å¤ªä»¤äººæ»¡æ„ã€‚å®ƒä»¬çœ‹èµ·æ¥ä¸ç›¸ä¼¯ä»²ï¼Œç©¶å…¶åŸå› éƒ½ä¸€æ ·:å®ƒä»¬å†…éƒ¨é‡‡ç”¨çš„æ˜¯åŒæ ·çš„é€šç”¨çº¿ç¨‹æ± ï¼Œé»˜è®¤éƒ½ä½¿ç”¨å›ºå®šæ•°ç›®çš„çº¿ç¨‹ï¼Œå…·ä½“çº¿ç¨‹æ•°å–å†³äºRuntime.getRuntime().availableProcessors()çš„è¿”å›å€¼ã€‚ç„¶è€Œï¼ŒCompletableFutureå…·æœ‰ä¸€å®šçš„ä¼˜åŠ¿ï¼Œå› ä¸ºå®ƒå…è®¸ä½ å¯¹æ‰§è¡Œå™¨(Executor)è¿›è¡Œé…ç½®ï¼Œå°¤å…¶æ˜¯çº¿ç¨‹æ± çš„å¤§å°ï¼Œè®©å®ƒä»¥æ›´é€‚åˆåº”ç”¨éœ€æ±‚çš„æ–¹å¼è¿›è¡Œé…ç½®ï¼Œæ»¡è¶³ç¨‹åºçš„è¦æ±‚ï¼Œè€Œè¿™æ˜¯å¹¶è¡ŒæµAPIæ— æ³•æä¾›çš„ã€‚<br>é¡ºåºæ‰§è¡Œå’Œå¹¶è¡Œæ‰§è¡Œçš„åŸç†å¯¹æ¯”ï¼š<br><img src="https://raw.githubusercontent.com/lujiahao0708/PicRepo/master/blogPic/11.%E3%80%8AJava%208%20in%20Action%E3%80%8BChapter%2011%EF%BC%9ACompletableFuture%EF%BC%9A%E7%BB%84%E5%90%88%E5%BC%8F%E5%BC%82%E6%AD%A5%E7%BC%96%E7%A8%8B/11.3/%E9%A1%BA%E5%BA%8F%E6%89%A7%E8%A1%8C%E5%92%8C%E5%B9%B6%E8%A1%8C%E6%89%A7%E8%A1%8C%E7%9A%84%E5%8E%9F%E7%90%86%E5%AF%B9%E6%AF%94.png" alt=""></p>
<p>å›¾11-4çš„ä¸ŠåŠéƒ¨åˆ†å±•ç¤ºäº†ä½¿ç”¨å•ä¸€æµæ°´çº¿å¤„ç†æµçš„è¿‡ç¨‹ï¼Œæˆ‘ä»¬çœ‹åˆ°ï¼Œæ‰§è¡Œçš„æµç¨‹(ä»¥è™šçº¿æ ‡è¯†)æ˜¯é¡ºåºçš„ã€‚äº‹å®ä¸Šï¼Œæ–°çš„CompletableFutureå¯¹è±¡åªæœ‰åœ¨å‰ä¸€ä¸ªæ“ä½œå®Œå…¨ç»“æŸä¹‹åï¼Œæ‰èƒ½åˆ›å»ºã€‚ä¸æ­¤ç›¸åï¼Œå›¾çš„ä¸‹åŠéƒ¨åˆ†å±•ç¤ºäº†å¦‚ä½•å…ˆå°†CompletableFutureså¯¹è±¡èšé›†åˆ°ä¸€ä¸ªåˆ—è¡¨ä¸­(å³å›¾ä¸­ä»¥æ¤­åœ†è¡¨ç¤ºçš„éƒ¨åˆ†)ï¼Œè®©å¯¹è±¡ä»¬å¯ä»¥åœ¨ç­‰å¾…å…¶ä»–å¯¹è±¡å®Œæˆæ“ä½œä¹‹å‰å°±èƒ½å¯åŠ¨ã€‚</p>
<h2 id="3-4-ä½¿ç”¨CompletableFutureå‘èµ·å¼‚æ­¥è¯·æ±‚WithExecutor"><a href="#3-4-ä½¿ç”¨CompletableFutureå‘èµ·å¼‚æ­¥è¯·æ±‚WithExecutor" class="headerlink" title="3.4 ä½¿ç”¨CompletableFutureå‘èµ·å¼‚æ­¥è¯·æ±‚WithExecutor"></a>3.4 ä½¿ç”¨CompletableFutureå‘èµ·å¼‚æ­¥è¯·æ±‚WithExecutor</h2><p><img src="https://raw.githubusercontent.com/lujiahao0708/PicRepo/master/blogPic/11.%E3%80%8AJava%208%20in%20Action%E3%80%8BChapter%2011%EF%BC%9ACompletableFuture%EF%BC%9A%E7%BB%84%E5%90%88%E5%BC%8F%E5%BC%82%E6%AD%A5%E7%BC%96%E7%A8%8B/11.3/%E4%BD%BF%E7%94%A8CompletableFuture%E5%8F%91%E8%B5%B7%E5%BC%82%E6%AD%A5%E8%AF%B7%E6%B1%82WithExecutor.png" alt=""></p>
<h2 id="3-5-è°ƒç”¨ç»“æœ"><a href="#3-5-è°ƒç”¨ç»“æœ" class="headerlink" title="3.5 è°ƒç”¨ç»“æœ:"></a>3.5 è°ƒç”¨ç»“æœ:</h2><p><img src="https://raw.githubusercontent.com/lujiahao0708/PicRepo/master/blogPic/11.%E3%80%8AJava%208%20in%20Action%E3%80%8BChapter%2011%EF%BC%9ACompletableFuture%EF%BC%9A%E7%BB%84%E5%90%88%E5%BC%8F%E5%BC%82%E6%AD%A5%E7%BC%96%E7%A8%8B/11.3/%E8%B0%83%E7%94%A8%E7%BB%93%E6%9E%9C.png" alt=""></p>
<h2 id="3-6-å¹¶è¡Œâ€”â€”ä½¿ç”¨æµè¿˜æ˜¯CompletableFutures"><a href="#3-6-å¹¶è¡Œâ€”â€”ä½¿ç”¨æµè¿˜æ˜¯CompletableFutures" class="headerlink" title="3.6 å¹¶è¡Œâ€”â€”ä½¿ç”¨æµè¿˜æ˜¯CompletableFutures"></a>3.6 å¹¶è¡Œâ€”â€”ä½¿ç”¨æµè¿˜æ˜¯CompletableFutures</h2><p>ç›®å‰ä¸ºæ­¢ï¼Œä½ å·²ç»çŸ¥é“å¯¹é›†åˆè¿›è¡Œå¹¶è¡Œè®¡ç®—æœ‰ä¸¤ç§æ–¹å¼:è¦ä¹ˆå°†å…¶è½¬åŒ–ä¸ºå¹¶è¡Œæµï¼Œåˆ©ç”¨mapè¿™æ ·çš„æ“ä½œå¼€å±•å·¥ä½œï¼Œè¦ä¹ˆæšä¸¾å‡ºé›†åˆä¸­çš„æ¯ä¸€ä¸ªå…ƒç´ ï¼Œåˆ›å»ºæ–°çš„çº¿ç¨‹ï¼Œåœ¨CompletableFutureå†…å¯¹å…¶è¿›è¡Œæ“ä½œã€‚åè€…æä¾›äº†æ›´å¤šçš„çµæ´»æ€§ï¼Œä½ å¯ä»¥è°ƒæ•´çº¿ç¨‹æ± çš„å¤§å°ï¼Œè€Œè¿™èƒ½å¸®åŠ©ä½ ç¡®ä¿æ•´ä½“çš„è®¡ç®—ä¸ä¼šå› ä¸ºçº¿ç¨‹éƒ½åœ¨ç­‰å¾…I/Oè€Œå‘ç”Ÿé˜»å¡ã€‚</p>
<ul>
<li>å¦‚æœä½ è¿›è¡Œçš„æ˜¯è®¡ç®—å¯†é›†å‹çš„æ“ä½œï¼Œå¹¶ä¸”æ²¡æœ‰I/Oï¼Œé‚£ä¹ˆæ¨èä½¿ç”¨Streamæ¥å£ï¼Œå› ä¸ºå®ç°ç®€å•ï¼ŒåŒæ—¶æ•ˆç‡ä¹Ÿå¯èƒ½æ˜¯æœ€é«˜çš„(å¦‚æœæ‰€æœ‰çš„çº¿ç¨‹éƒ½æ˜¯è®¡ç®—å¯†é›†å‹çš„ï¼Œé‚£å°±æ²¡æœ‰å¿…è¦åˆ›å»ºæ¯”å¤„ç†å™¨æ ¸æ•°æ›´å¤šçš„çº¿ç¨‹)ã€‚ </li>
<li>å¦‚æœä½ å¹¶è¡Œçš„å·¥ä½œå•å…ƒè¿˜æ¶‰åŠç­‰å¾…I/Oçš„æ“ä½œ(åŒ…æ‹¬ç½‘ç»œè¿æ¥ç­‰å¾…)ï¼Œé‚£ä¹ˆä½¿ç”¨CompletableFutureçµæ´»æ€§æ›´å¥½ï¼Œä½ å¯ä»¥åƒå‰æ–‡è®¨è®ºçš„é‚£æ ·ï¼Œä¾æ®ç­‰å¾…/è®¡ç®—ï¼Œæˆ–è€… W/Cçš„æ¯”ç‡è®¾å®šéœ€è¦ä½¿ç”¨çš„çº¿ç¨‹æ•°ã€‚è¿™ç§æƒ…å†µä¸ä½¿ç”¨å¹¶è¡Œæµçš„å¦ä¸€ä¸ªåŸå› æ˜¯ï¼Œå¤„ç†æµçš„æµæ°´çº¿ä¸­å¦‚æœå‘ç”ŸI/Oç­‰å¾…ï¼Œæµçš„å»¶è¿Ÿæ€§ä¼šè®©æˆ‘ä»¬å¾ˆéš¾åˆ¤æ–­åˆ°åº•ä»€ä¹ˆæ—¶å€™è§¦å‘äº†ç­‰å¾…ã€‚</li>
</ul>
<h1 id="4-å¯¹å¤šä¸ªå¼‚æ­¥ä»»åŠ¡è¿›è¡Œæµæ°´çº¿æ“ä½œ"><a href="#4-å¯¹å¤šä¸ªå¼‚æ­¥ä»»åŠ¡è¿›è¡Œæµæ°´çº¿æ“ä½œ" class="headerlink" title="4. å¯¹å¤šä¸ªå¼‚æ­¥ä»»åŠ¡è¿›è¡Œæµæ°´çº¿æ“ä½œ"></a>4. å¯¹å¤šä¸ªå¼‚æ­¥ä»»åŠ¡è¿›è¡Œæµæ°´çº¿æ“ä½œ</h1><h2 id="4-1-æ¡ˆä¾‹"><a href="#4-1-æ¡ˆä¾‹" class="headerlink" title="4.1 æ¡ˆä¾‹"></a>4.1 æ¡ˆä¾‹</h2><p>é€šè¿‡åœ¨shopæ„æˆçš„æµä¸Šé‡‡ç”¨æµæ°´çº¿æ–¹å¼æ‰§è¡Œä¸‰æ¬¡mapæ“ä½œï¼Œæˆ‘ä»¬å¾—åˆ°äº†ç»“æœã€‚</p>
<ul>
<li>ç¬¬ä¸€ä¸ªæ“ä½œå°†æ¯ä¸ªshopå¯¹è±¡è½¬æ¢æˆäº†ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œè¯¥å­—ç¬¦ä¸²åŒ…å«äº†è¯¥ shopä¸­æŒ‡å®šå•†å“çš„ä»·æ ¼å’ŒæŠ˜æ‰£ä»£ç ã€‚</li>
<li>ç¬¬äºŒä¸ªæ“ä½œå¯¹è¿™äº›å­—ç¬¦ä¸²è¿›è¡Œäº†è§£æï¼Œåœ¨Quoteå¯¹è±¡ä¸­å¯¹å®ƒä»¬è¿›è¡Œè½¬æ¢ã€‚</li>
<li>ç¬¬ä¸‰ä¸ªmapä¼šæ“ä½œè”ç³»è¿œç¨‹çš„DiscountæœåŠ¡ï¼Œè®¡ç®—å‡ºæœ€ç»ˆçš„æŠ˜æ‰£ä»·æ ¼ï¼Œå¹¶è¿”å›è¯¥ä»·æ ¼åŠæä¾›è¯¥ä»·æ ¼å•†å“çš„shopã€‚</li>
</ul>
<p>ä»£ç å¦‚å›¾:<br><img src="https://raw.githubusercontent.com/lujiahao0708/PicRepo/master/blogPic/11.%E3%80%8AJava%208%20in%20Action%E3%80%8BChapter%2011%EF%BC%9ACompletableFuture%EF%BC%9A%E7%BB%84%E5%90%88%E5%BC%8F%E5%BC%82%E6%AD%A5%E7%BC%96%E7%A8%8B/11.4/Discount.png" alt=""><br><img src="https://raw.githubusercontent.com/lujiahao0708/PicRepo/master/blogPic/11.%E3%80%8AJava%208%20in%20Action%E3%80%8BChapter%2011%EF%BC%9ACompletableFuture%EF%BC%9A%E7%BB%84%E5%90%88%E5%BC%8F%E5%BC%82%E6%AD%A5%E7%BC%96%E7%A8%8B/11.4/Quote.png" alt=""><br><img src="https://raw.githubusercontent.com/lujiahao0708/PicRepo/master/blogPic/11.%E3%80%8AJava%208%20in%20Action%E3%80%8BChapter%2011%EF%BC%9ACompletableFuture%EF%BC%9A%E7%BB%84%E5%90%88%E5%BC%8F%E5%BC%82%E6%AD%A5%E7%BC%96%E7%A8%8B/11.4/Shop11_4.png" alt=""><br><img src="https://raw.githubusercontent.com/lujiahao0708/PicRepo/master/blogPic/11.%E3%80%8AJava%208%20in%20Action%E3%80%8BChapter%2011%EF%BC%9ACompletableFuture%EF%BC%9A%E7%BB%84%E5%90%88%E5%BC%8F%E5%BC%82%E6%AD%A5%E7%BC%96%E7%A8%8B/11.4/Test.png" alt=""></p>
<p>åŸç†å›¾ï¼š<br><img src="https://raw.githubusercontent.com/lujiahao0708/PicRepo/master/blogPic/11.%E3%80%8AJava%208%20in%20Action%E3%80%8BChapter%2011%EF%BC%9ACompletableFuture%EF%BC%9A%E7%BB%84%E5%90%88%E5%BC%8F%E5%BC%82%E6%AD%A5%E7%BC%96%E7%A8%8B/11.4/Discount%E5%8E%9F%E7%90%86%E5%9B%BE.png" alt=""></p>
<p>Java 8çš„CompletableFuture APIæä¾›äº†åä¸ºthenComposeçš„æ–¹æ³•ï¼Œå®ƒå°±æ˜¯ä¸“é—¨ä¸ºè¿™ä¸€ç›®çš„è€Œè®¾è®¡çš„ï¼ŒthenComposeæ–¹æ³•å…è®¸ä½ å¯¹ä¸¤ä¸ªå¼‚æ­¥æ“ä½œè¿›è¡Œæµæ°´çº¿ï¼Œç¬¬ä¸€ä¸ªæ“ä½œå®Œæˆæ—¶ï¼Œå°†å…¶ç»“æœä½œä¸ºå‚æ•°ä¼ é€’ç»™ç¬¬äºŒä¸ªæ“ä½œã€‚æ¢å¥è¯è¯´ï¼Œä½ å¯ä»¥åˆ›å»ºä¸¤ä¸ªCompletableFutureså¯¹è±¡ï¼Œå¯¹ç¬¬ä¸€ä¸ªCompletableFutureå¯¹è±¡è°ƒç”¨thenComposeï¼Œå¹¶å‘å…¶ä¼ é€’ä¸€ä¸ªå‡½æ•°ã€‚å½“ç¬¬ä¸€ä¸ª CompletableFutureæ‰§è¡Œå®Œæ¯•åï¼Œå®ƒçš„ç»“æœå°†ä½œä¸ºè¯¥å‡½æ•°çš„å‚æ•°ï¼Œè¿™ä¸ªå‡½æ•°çš„è¿”å›å€¼æ˜¯ä»¥ç¬¬ä¸€ ä¸ªCompletableFutureçš„è¿”å›åšè¾“å…¥è®¡ç®—å‡ºçš„ç¬¬äºŒä¸ªCompletableFutureå¯¹è±¡ã€‚thenComposeæ–¹æ³•åƒCompletableFutureç±»ä¸­çš„å…¶ä»–æ–¹æ³•ä¸€æ ·ï¼Œä¹Ÿæä¾›äº†ä¸€ä¸ªä»¥Asyncåç¼€ç»“å°¾çš„ç‰ˆæœ¬thenComposeAsyncã€‚é€šå¸¸è€Œè¨€ï¼Œåç§°ä¸­ä¸å¸¦Asyncçš„æ–¹æ³•å’Œå®ƒçš„å‰ä¸€ä¸ªä»»åŠ¡ä¸€æ ·ï¼Œåœ¨åŒä¸€ä¸ªçº¿ç¨‹ä¸­è¿è¡Œ;è€Œåç§°ä»¥Asyncç»“å°¾çš„æ–¹æ³•ä¼šå°†åç»­çš„ä»»åŠ¡æäº¤åˆ°ä¸€ä¸ªçº¿ç¨‹æ± ï¼Œæ‰€ä»¥æ¯ä¸ªä»»åŠ¡æ˜¯ç”±ä¸åŒçš„çº¿ç¨‹å¤„ç†çš„ã€‚</p>
<h2 id="4-2-thenCombineæ–¹æ³•"><a href="#4-2-thenCombineæ–¹æ³•" class="headerlink" title="4.2 thenCombineæ–¹æ³•"></a>4.2 thenCombineæ–¹æ³•</h2><p>å°†ä¸¤ä¸ªCompletableFutureå¯¹è±¡ç»“åˆèµ·æ¥ï¼Œæ— è®ºä»–ä»¬æ˜¯å¦å­˜åœ¨ä¾èµ–ã€‚thenCombineæ–¹æ³•ï¼Œå®ƒæ¥æ”¶åä¸ºBiFunctionçš„ç¬¬äºŒå‚æ•°ï¼Œè¿™ä¸ªå‚æ•° å®šä¹‰äº†å½“ä¸¤ä¸ªCompletableFutureå¯¹è±¡å®Œæˆè®¡ç®—åï¼Œç»“æœå¦‚ä½•åˆå¹¶ã€‚åŒthenComposeæ–¹æ³•ä¸€æ ·ï¼Œ thenCombineæ–¹æ³•ä¹Ÿæä¾›æœ‰ä¸€ä¸ªAsyncçš„ç‰ˆæœ¬ã€‚è¿™é‡Œï¼Œå¦‚æœä½¿ç”¨thenCombineAsyncä¼šå¯¼è‡´BiFunctionä¸­å®šä¹‰çš„åˆå¹¶æ“ä½œè¢«æäº¤åˆ°çº¿ç¨‹æ± ä¸­ï¼Œç”±å¦ä¸€ä¸ªä»»åŠ¡ä»¥å¼‚æ­¥çš„æ–¹å¼æ‰§è¡Œã€‚</p>
<p>ä»£ç å›¾ï¼š<br><img src="https://raw.githubusercontent.com/lujiahao0708/PicRepo/master/blogPic/11.%E3%80%8AJava%208%20in%20Action%E3%80%8BChapter%2011%EF%BC%9ACompletableFuture%EF%BC%9A%E7%BB%84%E5%90%88%E5%BC%8F%E5%BC%82%E6%AD%A5%E7%BC%96%E7%A8%8B/11.5/thenCombine.png" alt=""></p>
<p>åŸç†å›¾ï¼š<br><img src="https://raw.githubusercontent.com/lujiahao0708/PicRepo/master/blogPic/11.%E3%80%8AJava%208%20in%20Action%E3%80%8BChapter%2011%EF%BC%9ACompletableFuture%EF%BC%9A%E7%BB%84%E5%90%88%E5%BC%8F%E5%BC%82%E6%AD%A5%E7%BC%96%E7%A8%8B/11.5/thenCombine%E5%8E%9F%E7%90%86%E5%9B%BE.png" alt=""></p>
<h2 id="4-3-å“åº”CompletableFutureçš„completionäº‹ä»¶"><a href="#4-3-å“åº”CompletableFutureçš„completionäº‹ä»¶" class="headerlink" title="4.3 å“åº”CompletableFutureçš„completionäº‹ä»¶"></a>4.3 å“åº”CompletableFutureçš„completionäº‹ä»¶</h2><p>Java 8çš„CompletableFutureé€šè¿‡thenAcceptæ–¹æ³•æä¾›äº†è¿™ä¸€åŠŸèƒ½ï¼Œå®ƒæ¥æ”¶ CompletableFutureæ‰§è¡Œå®Œæ¯•åçš„è¿”å›å€¼åšå‚æ•°ã€‚thenAcceptæ–¹æ³•ä¹Ÿæä¾› äº†ä¸€ä¸ªå¼‚æ­¥ç‰ˆæœ¬ï¼Œåä¸ºthenAcceptAsyncã€‚å¼‚æ­¥ç‰ˆæœ¬çš„æ–¹æ³•ä¼šå¯¹å¤„ç†ç»“æœçš„æ¶ˆè´¹è€…è¿›è¡Œè°ƒåº¦ï¼Œ ä»çº¿ç¨‹æ± ä¸­é€‰æ‹©ä¸€ä¸ªæ–°çš„çº¿ç¨‹ç»§ç»­æ‰§è¡Œï¼Œä¸å†ç”±åŒä¸€ä¸ªçº¿ç¨‹å®ŒæˆCompletableFutureçš„æ‰€æœ‰ä»» åŠ¡ã€‚å› ä¸ºä½ æƒ³è¦é¿å…ä¸å¿…è¦çš„ä¸Šä¸‹æ–‡åˆ‡æ¢ï¼Œæ›´é‡è¦çš„æ˜¯ä½ å¸Œæœ›é¿å…åœ¨ç­‰å¾…çº¿ç¨‹ä¸Šæµªè´¹æ—¶é—´ï¼Œå°½å¿«å“åº”CompletableFutureçš„completionäº‹ä»¶ï¼Œæ‰€ä»¥è¿™é‡Œæ²¡æœ‰é‡‡ç”¨å¼‚æ­¥ç‰ˆæœ¬ã€‚</p>
<h2 id="4-3-1-å®æˆ˜"><a href="#4-3-1-å®æˆ˜" class="headerlink" title="4.3.1 å®æˆ˜"></a>4.3.1 å®æˆ˜</h2><p><img src="https://raw.githubusercontent.com/lujiahao0708/PicRepo/master/blogPic/11.%E3%80%8AJava%208%20in%20Action%E3%80%8BChapter%2011%EF%BC%9ACompletableFuture%EF%BC%9A%E7%BB%84%E5%90%88%E5%BC%8F%E5%BC%82%E6%AD%A5%E7%BC%96%E7%A8%8B/11.5/thenAccept%E5%AE%9E%E6%88%98.png" alt=""></p>
<h1 id="5-å°ç»“"><a href="#5-å°ç»“" class="headerlink" title="5. å°ç»“"></a>5. å°ç»“</h1><ul>
<li>æ‰§è¡Œæ¯”è¾ƒæ“ä½œæ—¶,å°¤å…¶æ˜¯é‚£äº›ä¾èµ–ä¸€ä¸ªæˆ–å¤šä¸ªè¿œç¨‹æœåŠ¡çš„æ“ä½œï¼Œä½¿ç”¨å¼‚æ­¥ä»»åŠ¡å¯ä»¥æ”¹å–„ç¨‹åºçš„æ€§èƒ½ï¼ŒåŠ å¿«ç¨‹åºçš„å“åº”é€Ÿåº¦ã€‚</li>
<li>ä½ åº”è¯¥å°½å¯èƒ½åœ°ä¸ºå®¢æˆ·æä¾›å¼‚æ­¥APIã€‚ä½¿ç”¨CompletableFutureç±»æä¾›çš„ç‰¹æ€§ï¼Œä½ èƒ½å¤Ÿè½»æ¾åœ°å®ç°è¿™ä¸€ç›®æ ‡ã€‚</li>
<li>CompletableFutureç±»è¿˜æä¾›äº†å¼‚å¸¸ç®¡ç†çš„æœºåˆ¶ï¼Œè®©ä½ æœ‰æœºä¼šæŠ›å‡º/ç®¡ç†å¼‚æ­¥ä»»åŠ¡æ‰§è¡Œä¸­å‘ç”Ÿçš„å¼‚å¸¸ã€‚</li>
<li>å°†åŒæ­¥APIçš„è°ƒç”¨å°è£…åˆ°ä¸€ä¸ªCompletableFutureä¸­ï¼Œä½ èƒ½å¤Ÿä»¥å¼‚æ­¥çš„æ–¹å¼ä½¿ç”¨å…¶ç»“æœã€‚</li>
<li>å¦‚æœå¼‚æ­¥ä»»åŠ¡ä¹‹é—´ç›¸äº’ç‹¬ç«‹ï¼Œæˆ–è€…å®ƒä»¬ä¹‹é—´æŸä¸€äº›çš„ç»“æœæ˜¯å¦ä¸€äº›çš„è¾“å…¥ï¼Œä½ å¯ä»¥å°†è¿™äº›å¼‚æ­¥ä»»åŠ¡æ„é€ æˆ–è€…åˆå¹¶æˆä¸€ä¸ªã€‚</li>
<li>ä½ å¯ä»¥ä¸ºCompletableFutureæ³¨å†Œä¸€ä¸ªå›è°ƒå‡½æ•°ï¼Œåœ¨Futureæ‰§è¡Œå®Œæ¯•æˆ–è€…å®ƒä»¬è®¡ç®—çš„ç»“æœå¯ç”¨æ—¶ï¼Œé’ˆå¯¹æ€§åœ°æ‰§è¡Œä¸€äº›ç¨‹åºã€‚</li>
<li>ä½ å¯ä»¥å†³å®šåœ¨ä»€ä¹ˆæ—¶å€™ç»“æŸç¨‹åºçš„è¿è¡Œï¼Œæ˜¯ç­‰å¾…ç”±CompletableFutureå¯¹è±¡æ„æˆçš„åˆ—è¡¨ä¸­æ‰€æœ‰çš„å¯¹è±¡éƒ½æ‰§è¡Œå®Œæ¯•ï¼Œè¿˜æ˜¯åªè¦å…¶ä¸­ä»»ä½•ä¸€ä¸ªé¦–å…ˆå®Œæˆå°±ä¸­æ­¢ç¨‹åºçš„è¿è¡Œã€‚</li>
</ul>
<h2 id="èµ„æºè·å–"><a href="#èµ„æºè·å–" class="headerlink" title="èµ„æºè·å–"></a>èµ„æºè·å–</h2><ul>
<li>å…¬ä¼—å·å›å¤ : Java8 å³å¯è·å–ã€ŠJava 8 in Actionã€‹ä¸­è‹±æ–‡ç‰ˆ!</li>
</ul>
<h2 id="Tips"><a href="#Tips" class="headerlink" title="Tips"></a>Tips</h2><ul>
<li>æ¬¢è¿æ”¶è—å’Œè½¬å‘ï¼Œæ„Ÿè°¢ä½ çš„æ”¯æŒï¼(à¹‘â€¢Ì€ã…‚â€¢Ì)Ùˆâœ§ </li>
<li>æ¬¢è¿å…³æ³¨æˆ‘çš„å…¬ä¼—å·ï¼šåç«¯å°å“¥ï¼Œä¸“æ³¨åç«¯å¼€å‘ï¼Œå¸Œæœ›å’Œä½ ä¸€èµ·è¿›æ­¥ï¼</li>
</ul>
</div></article></div><nav class="pagination is-centered mt-4" role="navigation" aria-label="pagination"><div class="pagination-previous"><a href="/page/4/">ä¸Šä¸€é¡µ</a></div><div class="pagination-next"><a href="/page/6/">ä¸‹ä¸€é¡µ</a></div><ul class="pagination-list is-hidden-mobile"><li><a class="pagination-link" href="/">1</a></li><li><span class="pagination-ellipsis">&hellip;</span></li><li><a class="pagination-link" href="/page/4/">4</a></li><li><a class="pagination-link is-current" href="/page/5/">5</a></li><li><a class="pagination-link" href="/page/6/">6</a></li><li><span class="pagination-ellipsis">&hellip;</span></li><li><a class="pagination-link" href="/page/11/">11</a></li></ul></nav></div><!--!--><div class="column column-right is-3-tablet is-3-desktop is-3-widescreen  order-3"><!--!--><div class="card widget"><div class="card-content"><nav class="level"><div class="level-item has-text-centered flex-shrink-1"><div><figure class="image is-128x128 mx-auto mb-2"><img class="is-rounded" src="/img/avatar.png" alt="åç«¯å°å“¥"></figure><p class="title is-size-4 is-block line-height-inherit">åç«¯å°å“¥</p><p class="is-size-6 is-block">Coder</p><p class="is-size-6 is-flex justify-content-center"><i class="fas fa-map-marker-alt mr-1"></i><span>Shijiazhuang, China</span></p></div></div></nav><nav class="level is-mobile"><div class="level-item has-text-centered is-marginless"><div><p class="heading">æ–‡ç« </p><a href="/archives"><p class="title">107</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">åˆ†ç±»</p><a href="/categories"><p class="title">20</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">æ ‡ç­¾</p><a href="/tags"><p class="title">65</p></a></div></div></nav><div class="level"><a class="level-item button is-primary is-rounded" href="https://github.com/lujiahao0708" target="_blank" rel="noopener">å…³æ³¨æˆ‘</a></div></div></div><div class="card widget"><div class="card-content"><div class="menu"><h3 class="menu-label">é“¾æ¥</h3><ul class="menu-list"><li><a class="level is-mobile is-mobile" href="https://juejin.im/user/59239002570c350069c5f0bb" target="_blank" rel="noopener"><span class="level-left"><span class="level-item">æ˜é‡‘</span></span><span class="level-right"><span class="level-item tag">juejin.im</span></span></a></li><li><a class="level is-mobile is-mobile" href="https://blog.csdn.net/xinruodingshui" target="_blank" rel="noopener"><span class="level-left"><span class="level-item">CSDN</span></span><span class="level-right"><span class="level-item tag">blog.csdn.net</span></span></a></li><li><a class="level is-mobile is-mobile" href="https://space.bilibili.com/302086424/" target="_blank" rel="noopener"><span class="level-left"><span class="level-item">Bç«™</span></span><span class="level-right"><span class="level-item tag">space.bilibili.com</span></span></a></li></ul></div></div></div><div class="card widget"><div class="card-content"><div class="menu"><h3 class="menu-label">åˆ†ç±»</h3><ul class="menu-list"><li><a class="level is-mobile is-marginless" href="/categories/Android/"><span class="level-start"><span class="level-item">Android</span></span><span class="level-end"><span class="level-item tag">7</span></span></a></li><li><a class="level is-mobile is-marginless" href="/categories/Chrome/"><span class="level-start"><span class="level-item">Chrome</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile is-marginless" href="/categories/Docker/"><span class="level-start"><span class="level-item">Docker</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile is-marginless" href="/categories/Flutter/"><span class="level-start"><span class="level-item">Flutter</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile is-marginless" href="/categories/Hexo/"><span class="level-start"><span class="level-item">Hexo</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile is-marginless" href="/categories/JVM/"><span class="level-start"><span class="level-item">JVM</span></span><span class="level-end"><span class="level-item tag">3</span></span></a></li><li><a class="level is-mobile is-marginless" href="/categories/Java/"><span class="level-start"><span class="level-item">Java</span></span><span class="level-end"><span class="level-item tag">17</span></span></a></li><li><a class="level is-mobile is-marginless" href="/categories/JavaEE/"><span class="level-start"><span class="level-item">JavaEE</span></span><span class="level-end"><span class="level-item tag">27</span></span></a></li><li><a class="level is-mobile is-marginless" href="/categories/Mac/"><span class="level-start"><span class="level-item">Mac</span></span><span class="level-end"><span class="level-item tag">3</span></span></a></li><li><a class="level is-mobile is-marginless" href="/categories/MySQL%E5%BF%85%E7%9F%A5%E5%BF%85%E4%BC%9A/"><span class="level-start"><span class="level-item">MySQLå¿…çŸ¥å¿…ä¼š</span></span><span class="level-end"><span class="level-item tag">3</span></span></a></li><li><a class="level is-mobile is-marginless" href="/categories/Redis/"><span class="level-start"><span class="level-item">Redis</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile is-marginless" href="/categories/Shiro/"><span class="level-start"><span class="level-item">Shiro</span></span><span class="level-end"><span class="level-item tag">7</span></span></a></li><li><a class="level is-mobile is-marginless" href="/categories/Simpleblog%E5%8D%9A%E5%AE%A2%E7%B3%BB%E7%BB%9F/"><span class="level-start"><span class="level-item">Simpleblogåšå®¢ç³»ç»Ÿ</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile is-marginless" href="/categories/SpringCloud/"><span class="level-start"><span class="level-item">SpringCloud</span></span><span class="level-end"><span class="level-item tag">21</span></span></a></li><li><a class="level is-mobile is-marginless" href="/categories/%E5%B7%A5%E5%85%B7%E6%95%99%E7%A8%8B/"><span class="level-start"><span class="level-item">å·¥å…·æ•™ç¨‹</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile is-marginless" href="/categories/%E5%B9%B6%E5%8F%91/"><span class="level-start"><span class="level-item">å¹¶å‘</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile is-marginless" href="/categories/%E6%8C%81%E7%BB%AD%E9%9B%86%E6%88%90/"><span class="level-start"><span class="level-item">æŒç»­é›†æˆ</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile is-marginless" href="/categories/%E6%97%A5%E5%BF%97/"><span class="level-start"><span class="level-item">æ—¥å¿—</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile is-marginless" href="/categories/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"><span class="level-start"><span class="level-item">è®¾è®¡æ¨¡å¼</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile is-marginless" href="/categories/%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/"><span class="level-start"><span class="level-item">è¯»ä¹¦ç¬”è®°</span></span><span class="level-end"><span class="level-item tag">4</span></span></a></li></ul></div></div></div><div class="card widget"><div class="card-content"><h3 class="menu-label">æœ€æ–°æ–‡ç« </h3><article class="media"><div class="media-content size-small"><p><time dateTime="2020-04-11T14:03:59.000Z">2020-04-11</time></p><p class="title is-6"><a class="link-muted" href="/2020/04/11/%E6%9C%8D%E5%8A%A1%E5%99%A8%E7%9B%B8%E5%85%B3/GitHub%20Actions%20%E8%87%AA%E5%8A%A8%E9%83%A8%E7%BD%B2%20Hexo/">GitHub Actions è‡ªåŠ¨éƒ¨ç½² Hexo</a></p><p class="is-uppercase"><a class="link-muted" href="/categories/Hexo/">Hexo</a></p></div></article><article class="media"><div class="media-content size-small"><p><time dateTime="2020-04-11T09:28:08.000Z">2020-04-11</time></p><p class="title is-6"><a class="link-muted" href="/2020/04/11/Redis/Redis%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/">Rediså­¦ä¹ ç¬”è®°</a></p><p class="is-uppercase"><a class="link-muted" href="/categories/Redis/">Redis</a></p></div></article><article class="media"><div class="media-content size-small"><p><time dateTime="2020-04-11T09:25:40.000Z">2020-04-11</time></p><p class="title is-6"><a class="link-muted" href="/2020/04/11/Redis/Redis%E5%AE%89%E8%A3%85-%E6%90%AD%E5%BB%BA%E6%9C%AC%E5%9C%B0%E7%8E%AF%E5%A2%83-%E5%A4%87%E4%BB%BD%E6%81%A2%E5%A4%8D/">Rediså®‰è£…&amp;æ­å»ºæœ¬åœ°ç¯å¢ƒ&amp;å¤‡ä»½æ¢å¤</a></p><p class="is-uppercase"><a class="link-muted" href="/categories/Redis/">Redis</a></p></div></article><article class="media"><div class="media-content size-small"><p><time dateTime="2019-12-20T12:54:41.000Z">2019-12-20</time></p><p class="title is-6"><a class="link-muted" href="/2019/12/20/MySQL/%E3%80%8AMySQL%E5%BF%85%E7%9F%A5%E5%BF%85%E4%BC%9A%E3%80%8B%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/%E7%AC%AC6-7%E7%AB%A0%20%E8%BF%87%E6%BB%A4%E6%95%B0%E6%8D%AE%E4%B8%8E%E6%95%B0%E6%8D%AE%E8%BF%87%E6%BB%A4/">ã€ŠMySQLå¿…çŸ¥å¿…ä¼šã€‹ç¬¬6-7ç«  è¿‡æ»¤æ•°æ®ä¸æ•°æ®è¿‡æ»¤</a></p><p class="is-uppercase"><a class="link-muted" href="/categories/MySQL%E5%BF%85%E7%9F%A5%E5%BF%85%E4%BC%9A/">MySQLå¿…çŸ¥å¿…ä¼š</a></p></div></article><article class="media"><div class="media-content size-small"><p><time dateTime="2019-12-19T14:54:41.000Z">2019-12-19</time></p><p class="title is-6"><a class="link-muted" href="/2019/12/19/MySQL/%E3%80%8AMySQL%E5%BF%85%E7%9F%A5%E5%BF%85%E4%BC%9A%E3%80%8B%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/%E7%AC%AC4-5%E7%AB%A0%20SELECT%E6%A3%80%E7%B4%A2%E4%B8%8E%E6%8E%92%E5%BA%8F/">ã€ŠMySQLå¿…çŸ¥å¿…ä¼šã€‹ç¬¬4-5ç«  SELECTæ£€ç´¢ä¸æ’åº</a></p><p class="is-uppercase"><a class="link-muted" href="/categories/MySQL%E5%BF%85%E7%9F%A5%E5%BF%85%E4%BC%9A/">MySQLå¿…çŸ¥å¿…ä¼š</a></p></div></article></div></div></div></div></div></section><footer class="footer"><div class="container"><div class="level"><div class="level-start"><a class="footer-logo is-block mb-2" href="/"><img src="/img/logo.png" alt="åç«¯å°å“¥åšå®¢" height="28"></a><p class="size-small"><span>&copy; 2020 åç«¯å°å“¥</span>Â Â Powered by <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a>Â &amp;Â <a href="https://github.com/ppoffice/hexo-theme-icarus" target="_blank" rel="noopener">Icarus</a></p></div><div class="level-end"><div class="field has-addons"><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Download on GitHub" href="https://github.com/lujiahao0708"><i class="fab fa-github"></i></a></p></div></div></div></div></footer><script src="https://cdn.jsdelivr.net/npm/jquery@3.3.1/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/moment@2.22.2/min/moment-with-locales.min.js"></script><script>moment.locale("zh-CN");</script><script>var IcarusThemeSettings = {
            site: {
                url: 'http://lujiahao0708.github.io',
                external_link: {"enable":true,"exclude":[]}
            },
            article: {
                highlight: {
                    clipboard: true,
                    fold: ''
                }
            }
        };</script><script src="https://cdn.jsdelivr.net/npm/clipboard@2.0.4/dist/clipboard.min.js" defer></script><a id="back-to-top" title="å›åˆ°é¡¶ç«¯" href="javascript:;"><i class="fas fa-chevron-up"></i></a><script src="/js/back_to_top.js" defer></script><!--!--><!--!--><script src="https://cdn.jsdelivr.net/npm/lightgallery@1.6.8/dist/js/lightgallery.min.js" defer></script><script src="https://cdn.jsdelivr.net/npm/justifiedGallery@3.7.0/dist/js/jquery.justifiedGallery.min.js" defer></script><script>window.addEventListener("load", () => {
            if (typeof $.fn.lightGallery === 'function') {
                $('.article').lightGallery({ selector: '.gallery-item' });
            }
            if (typeof $.fn.justifiedGallery === 'function') {
                if ($('.justified-gallery > p > .gallery-item').length) {
                    $('.justified-gallery > p > .gallery-item').unwrap();
                }
                $('.justified-gallery').justifiedGallery();
            }
        });</script><!--!--><!--!--><!--!--><script src="/js/main.js" defer></script><div class="searchbox"><div class="searchbox-container"><div class="searchbox-header"><div class="searchbox-input-container"><input class="searchbox-input" type="text" placeholder="æƒ³è¦æŸ¥æ‰¾ä»€ä¹ˆ..."></div><a class="searchbox-close" href="javascript:;">Ã—</a></div><div class="searchbox-body"></div></div></div><script src="/js/insight.js" defer></script><script>document.addEventListener('DOMContentLoaded', function () {
            loadInsight({"contentUrl":"/content.json"}, {"hint":"æƒ³è¦æŸ¥æ‰¾ä»€ä¹ˆ...","untitled":"(æ— æ ‡é¢˜)","posts":"æ–‡ç« ","pages":"é¡µé¢","categories":"åˆ†ç±»","tags":"æ ‡ç­¾"});
        });</script></body></html>