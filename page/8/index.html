<!doctype html>
<html lang="zh"><head><meta charset="utf-8"><meta name="generator" content="Hexo 4.2.0"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta><title>åç«¯å°å“¥åšå®¢</title><meta description="ä¸€ä¸ª Java ç¨‹åºçŒ¿"><meta property="og:type" content="blog"><meta property="og:title" content="åç«¯å°å“¥åšå®¢"><meta property="og:url" content="http://lujiahao0708.github.io/"><meta property="og:site_name" content="åç«¯å°å“¥åšå®¢"><meta property="og:description" content="ä¸€ä¸ª Java ç¨‹åºçŒ¿"><meta property="og:locale" content="zh_CN"><meta property="article:author" content="åç«¯å°å“¥"><meta property="article:tag" content="åšå®¢"><meta property="article:tag" content="æŠ€æœ¯åšå®¢"><meta property="twitter:card" content="summary"><meta property="twitter:image" content="http://lujiahao0708.github.io/img/og_image.png"><script type="application/ld+json">{"@context":"https://schema.org","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"http://lujiahao0708.github.io"},"headline":"åç«¯å°å“¥åšå®¢","image":["http://lujiahao0708.github.io/img/og_image.png"],"author":{"@type":"Person","name":"åç«¯å°å“¥"},"description":"ä¸€ä¸ª Java ç¨‹åºçŒ¿"}</script><link rel="icon" href="/img/favicon.ico"><link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.12.0/css/all.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@9.12.0/styles/atom-one-light.css"><link rel="stylesheet" href="/css/default.css"><!--!--><script>var _hmt = _hmt || [];
        (function() {
            var hm = document.createElement("script");
            hm.src = "//hm.baidu.com/hm.js?cdef3b7efc8748063e32969cc0b8dedc";
            var s = document.getElementsByTagName("script")[0];
            s.parentNode.insertBefore(hm, s);
        })();</script><!--!--><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/lightgallery@1.6.8/dist/css/lightgallery.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/justifiedGallery@3.7.0/dist/css/justifiedGallery.min.css"><!--!--><!--!--><script src="https://cdn.jsdelivr.net/npm/pace-js@1.0.2/pace.min.js"></script></head><body class="is-2-column"><nav class="navbar navbar-main"><div class="container"><div class="navbar-brand justify-content-center"><a class="navbar-item navbar-logo" href="/"><img src="/img/logo.png" alt="åç«¯å°å“¥åšå®¢" height="28"></a></div><div class="navbar-menu"><div class="navbar-start"><a class="navbar-item" href="/">é¦–é¡µ</a><a class="navbar-item" href="/categories/Redis">Redis</a><a class="navbar-item" href="/archives">å½’æ¡£</a><a class="navbar-item" href="/categories">åˆ†ç±»</a><a class="navbar-item" href="/tags">æ ‡ç­¾</a><a class="navbar-item" href="/about">å…³äº</a></div><div class="navbar-end"><a class="navbar-item" target="_blank" rel="noopener" title="Download on GitHub" href="https://github.com/lujiahao0708"><i class="fab fa-github"></i></a><a class="navbar-item search" title="æœç´¢" href="javascript:;"><i class="fas fa-search"></i></a></div></div></div></nav><section class="section"><div class="container"><div class="columns"><div class="column order-2 column-main is-9-tablet is-9-desktop is-9-widescreen"><div class="card"><article class="card-content article" role="article"><div class="article-meta size-small is-uppercase level is-mobile"><div class="level-left"><time class="level-item" dateTime="2019-01-10T19:22:27.000Z" title="2019-01-10T19:22:27.000Z">2019-01-10</time><span class="level-item"><a class="link-muted" href="/categories/JVM/">JVM</a></span><span class="level-item">4 åˆ†é’Ÿ è¯»å®Œ (å¤§çº¦ 554 ä¸ªå­—)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/p/20a87ee.html">ã€Šæ·±å…¥ç†è§£Javaè™šæ‹Ÿæœºã€‹å‰æœŸå‡†å¤‡</a></h1><div class="content"><h1 id="ä¸ºä»€ä¹ˆè¦å­¦ä¹ -JVM"><a href="#ä¸ºä»€ä¹ˆè¦å­¦ä¹ -JVM" class="headerlink" title="ä¸ºä»€ä¹ˆè¦å­¦ä¹  JVM"></a>ä¸ºä»€ä¹ˆè¦å­¦ä¹  JVM</h1><p>å¯¹äº Java å¼€å‘æ¥è¯´ JVM æ˜¯ä¸€ä¸ªåï¼Œé¢è¯•å¤§å‚å¿…é—®å†…å®¹ï¼Œæ˜¯ä¸€å—ç¡¬éª¨å¤´ï¼ŒåŒæ—¶ä¹Ÿæ˜¯ Java å¼€å‘çš„å¿…å¤‡æŠ€èƒ½ã€‚</p>
<p>å­¦ä¹  JVM çš„ç›®çš„ï¼š</p>
<ul>
<li>äº†è§£ JVMè¿è¡ŒåŸç†ï¼Œä¸åšâ€CRUD Boyâ€</li>
<li>ä¸ªäººæŠ€èƒ½æå‡( å‘¸â—ï¸è¯´å®è¯â—ï¸      ä¸ºäº†è£…BğŸ˜)</li>
<li>é¢è¯•ä¸æ€‚</li>
</ul>
<p><img src="https://github.com/lujiahao0708/PicRepo/raw/master/blogPic/%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3Java%E8%99%9A%E6%8B%9F%E6%9C%BA/0.%E5%89%8D%E6%9C%9F%E5%87%86%E5%A4%87/%E6%90%9E%E7%AC%91%E5%9B%BE%E7%89%8701.gif" alt=""></p>
<h1 id="å·¥æ¬²å–„å…¶äº‹å¿…å…ˆåˆ©å…¶å™¨"><a href="#å·¥æ¬²å–„å…¶äº‹å¿…å…ˆåˆ©å…¶å™¨" class="headerlink" title="å·¥æ¬²å–„å…¶äº‹å¿…å…ˆåˆ©å…¶å™¨"></a>å·¥æ¬²å–„å…¶äº‹å¿…å…ˆåˆ©å…¶å™¨</h1><ul>
<li>IDEA</li>
<li>Xmind ZEN</li>
<li>Google</li>
</ul>
<blockquote>
<p> çº¸ä¸Šå¾—æ¥ç»ˆè§‰æµ…ï¼Œç»çŸ¥æ­¤äº‹è¦èº¬è¡Œ</p>
</blockquote>
<p>ä»£ç è¿˜æ˜¯è¦æ•²çš„ï¼Œè®°å½•è‡ªå·±çš„æˆé•¿å†ç¨‹ï¼Œä½ ä¼šæ„Ÿè°¢å½“æ—¶é‚£ä¹ˆåŠªåŠ›çš„è‡ªå·±ã€‚</p>
<p><a href="http://www.iocoder.cn/">è‰¿è‰¿</a> åœ¨æ˜Ÿçƒé‡Œé¢è¯´è¦å½¢æˆè‡ªå·±çš„<code>â€œç‚¹ -&gt; çº¿ -&gt; é¢â€</code>ï¼Œè¿™å…¶å®è¯´çš„å°±æ˜¯çŸ¥è¯†ä½“ç³»ï¼Œè€Œæ€ç»´å¯¼å›¾å°±æ˜¯ç”ŸæˆçŸ¥è¯†ä½“ç³»çš„ç¥å…µåˆ©å™¨ã€‚</p>
<h1 id="å·¨äººçš„è‚©è†€"><a href="#å·¨äººçš„è‚©è†€" class="headerlink" title="å·¨äººçš„è‚©è†€"></a>å·¨äººçš„è‚©è†€</h1><p><img src="https://github.com/lujiahao0708/PicRepo/raw/master/blogPic/%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3Java%E8%99%9A%E6%8B%9F%E6%9C%BA/0.%E5%89%8D%E6%9C%9F%E5%87%86%E5%A4%87/%E6%90%9E%E7%AC%91%E5%9B%BE%E7%89%8703.png" alt=""></p>
<ul>
<li><a href="https://zhuanlan.zhihu.com/p/34426768">å…³äºJvmçŸ¥è¯†çœ‹è¿™ä¸€ç¯‡å°±å¤Ÿäº†</a></li>
<li><a href="http://www.iocoder.cn/Books/Java-Virtual-Machine-books-recommended/">Javaã€è™šæ‹Ÿæœºã€‘ä¹¦å•æ•´ç†</a></li>
<li><a href="https://zhuanlan.zhihu.com/p/39536807">å­¦ä¹ JVMæ˜¯å¦‚ä½•ä»å…¥é—¨åˆ°æ”¾å¼ƒçš„ï¼Ÿ</a></li>
</ul>
<h1 id="åœ¨çº¿-Java-ç¼–è¯‘ç½‘ç«™"><a href="#åœ¨çº¿-Java-ç¼–è¯‘ç½‘ç«™" class="headerlink" title="åœ¨çº¿ Java ç¼–è¯‘ç½‘ç«™"></a>åœ¨çº¿ Java ç¼–è¯‘ç½‘ç«™</h1><p>æœ€ååœ¨æ¨èå‡ ä¸ªåœ¨çº¿ Java ç¼–è¯‘ç½‘ç«™ï¼Œä¸æƒ³ç”¨é‡é‡çš„ IDE çš„æ—¶å€™å¯ä»¥è¯•è¯•çœ‹ğŸ˜‰</p>
<ul>
<li><a href="https://www.tutorialspoint.com/compile_java8_online.php">https://www.tutorialspoint.com/compile_java8_online.php</a></li>
</ul>
<p><img src="https://github.com/lujiahao0708/PicRepo/raw/master/blogPic/%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3Java%E8%99%9A%E6%8B%9F%E6%9C%BA/0.%E5%89%8D%E6%9C%9F%E5%87%86%E5%A4%87/www.tutorialspoint.com.png" alt=""></p>
<ul>
<li><a href="https://www.jdoodle.com/online-java-compiler">https://www.jdoodle.com/online-java-compiler</a></li>
</ul>
<p><img src="https://github.com/lujiahao0708/PicRepo/raw/master/blogPic/%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3Java%E8%99%9A%E6%8B%9F%E6%9C%BA/0.%E5%89%8D%E6%9C%9F%E5%87%86%E5%A4%87/www.jdoodle.com.png" alt=""></p>
<ul>
<li><a href="http://www.beta.browxy.com/">http://www.beta.browxy.com/</a></li>
</ul>
<p><img src="https://github.com/lujiahao0708/PicRepo/raw/master/blogPic/%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3Java%E8%99%9A%E6%8B%9F%E6%9C%BA/0.%E5%89%8D%E6%9C%9F%E5%87%86%E5%A4%87/www.beta.browxy.com.png" alt=""></p>
<ul>
<li><a href="https://www.compilejava.net/">https://www.compilejava.net/</a></li>
</ul>
<p><img src="https://github.com/lujiahao0708/PicRepo/raw/master/blogPic/%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3Java%E8%99%9A%E6%8B%9F%E6%9C%BA/0.%E5%89%8D%E6%9C%9F%E5%87%86%E5%A4%87/www.compilejava.net.png" alt=""></p>
<hr>
<p>æ¬¢è¿å¤§å®¶å…³æ³¨ : LFå·¥ä½œå®¤</p>
<p>ç®€ä¹¦ : <a href="https://www.jianshu.com/u/e61935d18b09">https://www.jianshu.com/u/e61935d18b09</a></p>
<p>æ˜é‡‘ : <a href="https://juejin.im/user/59239002570c350069c5f0bb">https://juejin.im/user/59239002570c350069c5f0bb</a></p>
<p>å¾®ä¿¡å…¬ä¼—å· :<br><img src="https://raw.githubusercontent.com/lujiahao0708/PicRepo/master/%E5%85%AC%E4%BC%97%E5%8F%B7%E4%BA%8C%E7%BB%B4%E7%A0%81.jpg" alt=""><br>å¤´æ¡å· :<br><img src="https://github.com/lujiahao0708/PicRepo/raw/master/%E5%A4%B4%E6%9D%A1%E5%8F%B7%E4%BA%8C%E7%BB%B4%E7%A0%81.jpg" alt=""></p>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta size-small is-uppercase level is-mobile"><div class="level-left"><time class="level-item" dateTime="2018-06-27T22:53:59.000Z" title="2018-06-27T22:53:59.000Z">2018-06-27</time><span class="level-item"><a class="link-muted" href="/categories/%E6%8C%81%E7%BB%AD%E9%9B%86%E6%88%90/">æŒç»­é›†æˆ</a></span><span class="level-item">5 åˆ†é’Ÿ è¯»å®Œ (å¤§çº¦ 724 ä¸ªå­—)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/p/b23c159.html">Travis CIæŒç»­é›†æˆGitHubä¸ªäººåšå®¢</a></h1><div class="content"><h1 id="ä»€ä¹ˆæ˜¯Travis-CI"><a href="#ä»€ä¹ˆæ˜¯Travis-CI" class="headerlink" title="ä»€ä¹ˆæ˜¯Travis CI"></a>ä»€ä¹ˆæ˜¯Travis CI</h1><blockquote>
<p>Travis CI æ˜¯ç›®å‰æ–°å…´çš„å¼€æºæŒç»­é›†æˆæ„å»ºé¡¹ç›®ï¼Œå®ƒä¸jenkinsï¼ŒGOçš„å¾ˆæ˜æ˜¾çš„ç‰¹åˆ«åœ¨äºé‡‡ç”¨yamlæ ¼å¼ï¼ŒåŒæ—¶ä»–æ˜¯åœ¨åœ¨çº¿çš„æœåŠ¡ï¼Œ<br>ä¸åƒjenkinséœ€è¦ä½ æœ¬åœ°æ‰“æ¶æœåŠ¡å™¨ï¼Œç®€æ´æ¸…æ–°ç‹¬æ ‘ä¸€å¸œã€‚ç›®å‰å¤§å¤šæ•°çš„githubé¡¹ç›®éƒ½å·²ç»ç§»å…¥åˆ°Travis CIçš„æ„å»ºé˜Ÿåˆ—ä¸­ï¼Œ<br>æ®è¯´Travis CIæ¯å¤©è¿è¡Œè¶…è¿‡4000æ¬¡å®Œæ•´æ„å»ºã€‚å¯¹äºåšå¼€æºé¡¹ç›®æˆ–è€…githubçš„ä½¿ç”¨è€…ï¼Œå¿«å°†ä½ çš„é¡¹ç›®åŠ å…¥Travis CIæ„å»ºé˜Ÿåˆ—å§!</p>
</blockquote>
<h1 id="ç›®æ ‡"><a href="#ç›®æ ‡" class="headerlink" title="ç›®æ ‡"></a>ç›®æ ‡</h1><p>ä½¿ç”¨Hexoæ­å»ºæ‰˜ç®¡åœ¨Githubä¸Šçš„ä¸ªäººåšå®¢,æ¯æ¬¡æ¨é€æ–°åšå®¢åˆ°Github,Travis CI è‡ªåŠ¨æ„å»ºå¹¶æ¨é€åˆ°åšå®¢é¡¹ç›®çš„masteråˆ†æ”¯ä¸Š.<br>ç”±äºGitPagesæœåŠ¡è§„å®šç½‘é¡µæ–‡ä»¶å¿…é¡»åœ¨masteråˆ†æ”¯ä¸Š,æ‰€ä»¥åšå®¢æºç å†…å®¹åœ¨é¡¹ç›®çš„hexo-sourceåˆ†æ”¯.</p>
<p><img src="https://github.com/lujiahao0708/PicRepo/raw/master/blogPic/TravisCI/blog-master.png" alt=""><br><img src="https://github.com/lujiahao0708/PicRepo/raw/master/blogPic/TravisCI/blog-source.png" alt=""></p>
<h1 id="æ­¥éª¤"><a href="#æ­¥éª¤" class="headerlink" title="æ­¥éª¤"></a>æ­¥éª¤</h1><h2 id="1-TravisCIåˆ›å»ºè´¦æˆ·"><a href="#1-TravisCIåˆ›å»ºè´¦æˆ·" class="headerlink" title="1.TravisCIåˆ›å»ºè´¦æˆ·"></a>1.TravisCIåˆ›å»ºè´¦æˆ·</h2><p>æœ€å¥½ä½¿ç”¨Githubè´¦æˆ·ç›´æ¥ç™»å½•,ç™»å½•åç•Œé¢å¦‚ä¸‹,å‹¾é€‰ä¸ªäººåšå®¢é¡¹ç›®å³å¯.</p>
<p><img src="https://github.com/lujiahao0708/PicRepo/raw/master/blogPic/TravisCI/0.png" alt=""></p>
<h2 id="2-ç”Ÿæˆå¹¶é…ç½®Access-Token"><a href="#2-ç”Ÿæˆå¹¶é…ç½®Access-Token" class="headerlink" title="2.ç”Ÿæˆå¹¶é…ç½®Access Token"></a>2.ç”Ÿæˆå¹¶é…ç½®Access Token</h2><p>åœ¨GitHubç”ŸæˆTravis CI çš„token</p>
<p><img src="https://github.com/lujiahao0708/PicRepo/raw/master/blogPic/TravisCI/1.png" alt=""><br><img src="https://github.com/lujiahao0708/PicRepo/raw/master/blogPic/TravisCI/2.png" alt=""><br><img src="https://github.com/lujiahao0708/PicRepo/raw/master/blogPic/TravisCI/3.png" alt=""><br><img src="https://github.com/lujiahao0708/PicRepo/raw/master/blogPic/TravisCI/4.png" alt=""><br>ç”Ÿæˆä¹‹åä¸€å®šè¦ä¿å­˜å¥½ï¼Œå› ä¸ºåªä¼šå‡ºç°ä¸€æ¬¡ï¼Œä¸¢å¤±äº†å°±åªèƒ½å†é‡æ–°ç”Ÿæˆäº†ã€‚</p>
<p>ä¹‹åå°†ç”Ÿæˆçš„tokené…ç½®åˆ°Travis CIä¸­</p>
<p><img src="https://github.com/lujiahao0708/PicRepo/raw/master/blogPic/TravisCI/5.png" alt=""></p>
<h2 id="3-åˆ›å»º-travis-ymlé…ç½®æ–‡ä»¶"><a href="#3-åˆ›å»º-travis-ymlé…ç½®æ–‡ä»¶" class="headerlink" title="3.åˆ›å»º.travis.ymlé…ç½®æ–‡ä»¶"></a>3.åˆ›å»º.travis.ymlé…ç½®æ–‡ä»¶</h2><p>åœ¨é¡¹ç›®çš„hexo-sourceåˆ†æ”¯ä¸­,é¡¹ç›®çš„æ ¹ç›®å½•ä¸‹åˆ›å»º.travis.ymlé…ç½®æ–‡ä»¶ : </p>
<figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">language:</span> <span class="string">node_js</span></span><br><span class="line"><span class="attr">node_js:</span> <span class="number">6</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># S: Build Lifecycle</span></span><br><span class="line"><span class="attr">install:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">npm</span> <span class="string">install</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#before_script:</span></span><br><span class="line"> <span class="comment"># - npm install -g gulp</span></span><br><span class="line"></span><br><span class="line"><span class="attr">script:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">hexo</span> <span class="string">g</span></span><br><span class="line"></span><br><span class="line"><span class="attr">after_script:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">cd</span> <span class="string">./public</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">git</span> <span class="string">init</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">git</span> <span class="string">config</span> <span class="string">user.name</span> <span class="string">"lujiahao0708"</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">git</span> <span class="string">config</span> <span class="string">user.email</span> <span class="string">"lujiahao0708@gmail.com"</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">git</span> <span class="string">add</span> <span class="string">.</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">git</span> <span class="string">commit</span> <span class="string">-m</span> <span class="string">"Update docs"</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">git</span> <span class="string">push</span> <span class="string">--force</span> <span class="string">--quiet</span> <span class="string">"https://$&#123;GH_TOKEN&#125;@$&#123;GH_REF&#125;"</span> <span class="string">master:master</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># E: Build LifeCycle</span></span><br><span class="line"><span class="attr">branches:</span></span><br><span class="line">  <span class="attr">only:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">hexo-source</span></span><br><span class="line"><span class="attr">env:</span></span><br><span class="line"> <span class="attr">global:</span></span><br><span class="line">   <span class="bullet">-</span> <span class="attr">GH_REF:</span> <span class="string">github.com/lujiahao0708/lujiahao0708.github.io.git</span></span><br></pre></td></tr></table></figure>

<p>æ›¿æ¢git configä¿¡æ¯ä¸ºä½ è‡ªå·±çš„,GH_REFçš„å€¼æ›´æ”¹ä¸ºä½ çš„ä»“åº“åœ°å€.</p>
<h2 id="4-å‘å¸ƒæ–°åšå®¢"><a href="#4-å‘å¸ƒæ–°åšå®¢" class="headerlink" title="4.å‘å¸ƒæ–°åšå®¢"></a>4.å‘å¸ƒæ–°åšå®¢</h2><p>å°†åšå®¢å†…å®¹æ¨é€åˆ°hexo-sourceåˆ†æ”¯ä¸Š,å°±ä¼šè§¦å‘Travis CI çš„è‡ªåŠ¨æ„å»º.</p>
<p><img src="https://github.com/lujiahao0708/PicRepo/raw/master/blogPic/TravisCI/6.png" alt=""></p>
<h1 id="Q-amp-A"><a href="#Q-amp-A" class="headerlink" title="Q&amp;A"></a>Q&amp;A</h1><h2 id="1-Travis-CIç¼–è¯‘é”™è¯¯"><a href="#1-Travis-CIç¼–è¯‘é”™è¯¯" class="headerlink" title="1.Travis CIç¼–è¯‘é”™è¯¯"></a>1.Travis CIç¼–è¯‘é”™è¯¯</h2><pre><code>æˆ‘å‚ç…§çš„æ•™ç¨‹ä¸­.travis.ymlé…ç½®æ–‡ä»¶çš„node_jsç‰ˆæœ¬ä½¿ç”¨`stable`,ä½†æ˜¯ä¼šå‡ºç°é”™è¯¯.
è§£å†³æ–¹æ¡ˆ : 
    ä½¿ç”¨ä½ç‰ˆæœ¬çš„NodeJSç‰ˆæœ¬
    https://segmentfault.com/q/1010000011317783</code></pre><h2 id="2-è‡ªå®šä¹‰åŸŸåæ— æ³•è·³è½¬"><a href="#2-è‡ªå®šä¹‰åŸŸåæ— æ³•è·³è½¬" class="headerlink" title="2.è‡ªå®šä¹‰åŸŸåæ— æ³•è·³è½¬"></a>2.è‡ªå®šä¹‰åŸŸåæ— æ³•è·³è½¬</h2><pre><code>CNAMEæ–‡ä»¶ç›´æ¥æ”¾åˆ°äº†å·¥ç¨‹çš„æ ¹ç›®å½•ä¸‹,å°†æ— æ³•æ‰“åŒ…è¿›å»
è§£å†³æ–¹æ¡ˆ : 
    å°†CNAMEæ–‡ä»¶æ”¾åˆ°sourceç›®å½•ä¸‹</code></pre><h1 id="å‚è€ƒæ•™ç¨‹"><a href="#å‚è€ƒæ•™ç¨‹" class="headerlink" title="å‚è€ƒæ•™ç¨‹"></a>å‚è€ƒæ•™ç¨‹</h1><p><a href="https://blog.csdn.net/woblog/article/details/51319364">https://blog.csdn.net/woblog/article/details/51319364</a><br><a href="https://www.jianshu.com/p/5691815b81b6">https://www.jianshu.com/p/5691815b81b6</a></p>
<hr>
<p>æ¬¢è¿å¤§å®¶å…³æ³¨ğŸ˜<br><img src="https://raw.githubusercontent.com/lujiahao0708/PicRepo/master/%E5%85%AC%E4%BC%97%E5%8F%B7%E4%BA%8C%E7%BB%B4%E7%A0%81.jpg" alt=""></p>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta size-small is-uppercase level is-mobile"><div class="level-left"><time class="level-item" dateTime="2018-03-21T22:27:39.000Z" title="2018-03-21T22:27:39.000Z">2018-03-21</time><span class="level-item"><a class="link-muted" href="/categories/Simpleblog%E5%8D%9A%E5%AE%A2%E7%B3%BB%E7%BB%9F/">Simpleblogåšå®¢ç³»ç»Ÿ</a></span><span class="level-item">3 åˆ†é’Ÿ è¯»å®Œ (å¤§çº¦ 422 ä¸ªå­—)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/p/ca00fe4.html">Simpleblogåšå®¢ç³»ç»Ÿ(ä¸€)---DaoCloudæŒç»­é›†æˆ</a></h1><div class="content"><h2 id="DaoCloudæŒç»­é›†æˆ"><a href="#DaoCloudæŒç»­é›†æˆ" class="headerlink" title="DaoCloudæŒç»­é›†æˆ"></a>DaoCloudæŒç»­é›†æˆ</h2><blockquote>
<p>DaoCloudæä¾›äº†éå¸¸æ£’çš„CIç³»ç»Ÿ,é…åˆgithubå®Œç¾æŒç»­é›†æˆåº”ç”¨éƒ¨ç½².</p>
</blockquote>
<h2 id="æ“ä½œæ­¥éª¤"><a href="#æ“ä½œæ­¥éª¤" class="headerlink" title="æ“ä½œæ­¥éª¤"></a>æ“ä½œæ­¥éª¤</h2><ul>
<li>åˆ›å»ºé¡¹ç›®<br><img src="https://github.com/lujiahao0708/PicRepo/raw/master/blogPic/DaoCloudCI/01%E5%88%9B%E5%BB%BA%E9%A1%B9%E7%9B%AE.png" alt="01åˆ›å»ºé¡¹ç›®"></li>
<li>02åˆ›å»ºé¡¹ç›®<br><img src="https://github.com/lujiahao0708/PicRepo/raw/master/blogPic/DaoCloudCI/02%E5%88%9B%E5%BB%BA%E9%A1%B9%E7%9B%AE.png" alt="02åˆ›å»ºé¡¹ç›®"></li>
<li>03åˆå§‹ç•Œé¢<br><img src="https://github.com/lujiahao0708/PicRepo/raw/master/blogPic/DaoCloudCI/03%E5%88%9D%E5%A7%8B%E7%95%8C%E9%9D%A2.png" alt="03åˆå§‹ç•Œé¢"></li>
<li>04æµç¨‹<br><img src="https://github.com/lujiahao0708/PicRepo/raw/master/blogPic/DaoCloudCI/04%E6%B5%81%E7%A8%8B.png" alt="04æµç¨‹"></li>
<li>05å®‰å…¨æ„å»º<br><img src="https://github.com/lujiahao0708/PicRepo/raw/master/blogPic/DaoCloudCI/05%E5%AE%89%E5%85%A8%E6%9E%84%E5%BB%BA.png" alt="05å®‰å…¨æ„å»º"></li>
<li>06æ„å»ºå‡†å¤‡<br><img src="https://github.com/lujiahao0708/PicRepo/raw/master/blogPic/DaoCloudCI/06%E6%9E%84%E5%BB%BA%E5%87%86%E5%A4%87.png" alt="06æ„å»ºå‡†å¤‡"></li>
<li>å®‰å…¨æ„å»º<br><img src="https://github.com/lujiahao0708/PicRepo/raw/master/blogPic/DaoCloudCI/07anquangoujian.png" alt="å®‰å…¨æ„å»º"></li>
<li>08æ‰‹åŠ¨è§¦å‘<br><img src="https://github.com/lujiahao0708/PicRepo/raw/master/blogPic/DaoCloudCI/08%E6%89%8B%E5%8A%A8%E8%A7%A6%E5%8F%91.png" alt="08æ‰‹åŠ¨è§¦å‘"></li>
<li>09masteråˆ†æ”¯è§¦å‘<br><img src="https://github.com/lujiahao0708/PicRepo/raw/master/blogPic/DaoCloudCI/09master%E5%88%86%E6%94%AF%E8%A7%A6%E5%8F%91.png" alt="09masteråˆ†æ”¯è§¦å‘"></li>
<li>10æŸ¥çœ‹æ—¥å¿—<br><img src="https://github.com/lujiahao0708/PicRepo/raw/master/blogPic/DaoCloudCI/10%E6%9F%A5%E7%9C%8B%E6%97%A5%E5%BF%97.png" alt="10æŸ¥çœ‹æ—¥å¿—"></li>
<li>11æ‰§è¡ŒæˆåŠŸ<br><img src="https://github.com/lujiahao0708/PicRepo/raw/master/blogPic/DaoCloudCI/11%E6%89%A7%E8%A1%8C%E6%88%90%E5%8A%9F.png" alt="11æ‰§è¡ŒæˆåŠŸ"></li>
<li>12åº”ç”¨-åˆ›å»ºåº”ç”¨<br><img src="https://github.com/lujiahao0708/PicRepo/raw/master/blogPic/DaoCloudCI/12%E5%BA%94%E7%94%A8-%E5%88%9B%E5%BB%BA%E5%BA%94%E7%94%A8.png" alt="12åº”ç”¨-åˆ›å»ºåº”ç”¨"></li>
<li>13éƒ¨ç½²æœ€æ–°ç‰ˆæœ¬<br><img src="https://github.com/lujiahao0708/PicRepo/raw/master/blogPic/DaoCloudCI/13%E9%83%A8%E7%BD%B2%E6%9C%80%E6%96%B0%E7%89%88%E6%9C%AC.png" alt="13éƒ¨ç½²æœ€æ–°ç‰ˆæœ¬"></li>
<li>14åŸºæœ¬ä¿¡æ¯<br><img src="https://github.com/lujiahao0708/PicRepo/raw/master/blogPic/DaoCloudCI/14%E5%9F%BA%E6%9C%AC%E4%BF%A1%E6%81%AF.png" alt="14åŸºæœ¬ä¿¡æ¯"></li>
<li>15åº”ç”¨è®¾ç½®<br><img src="https://github.com/lujiahao0708/PicRepo/raw/master/blogPic/DaoCloudCI/15%E5%BA%94%E7%94%A8%E8%AE%BE%E7%BD%AE.png" alt="15åº”ç”¨è®¾ç½®"></li>
<li>16å¯åŠ¨åº”ç”¨<br><img src="https://github.com/lujiahao0708/PicRepo/raw/master/blogPic/DaoCloudCI/16%E5%90%AF%E5%8A%A8%E5%BA%94%E7%94%A8.png" alt="16å¯åŠ¨åº”ç”¨"></li>
</ul>
<hr>
<p>æ¬¢è¿å¤§å®¶å…³æ³¨ğŸ˜<br><img src="https://raw.githubusercontent.com/lujiahao0708/PicRepo/master/%E5%85%AC%E4%BC%97%E5%8F%B7%E4%BA%8C%E7%BB%B4%E7%A0%81.jpg" alt=""></p>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta size-small is-uppercase level is-mobile"><div class="level-left"><time class="level-item" dateTime="2017-11-14T21:05:06.000Z" title="2017-11-14T21:05:06.000Z">2017-11-14</time><span class="level-item"><a class="link-muted" href="/categories/%E6%97%A5%E5%BF%97/">æ—¥å¿—</a></span><span class="level-item">5 åˆ†é’Ÿ è¯»å®Œ (å¤§çº¦ 682 ä¸ªå­—)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/p/76c13ed2.html">æ—¥å¿—è§„èŒƒ(ä¸€)</a></h1><div class="content"><h1 id="æ—¥å¿—è§„èŒƒ-ä¸€"><a href="#æ—¥å¿—è§„èŒƒ-ä¸€" class="headerlink" title="æ—¥å¿—è§„èŒƒ(ä¸€)"></a>æ—¥å¿—è§„èŒƒ(ä¸€)</h1><blockquote>
<p>è®°å½•åœ¨é¦–çº¦çš„å·¥ä½œä¸­é‡åˆ°çš„æ—¥å¿—éœ€è¦è§„èŒƒçš„åœ°æ–¹,æ„Ÿè°¢é‘«å“¥æ•™æˆ‘è¿™ä¹ˆå¤šè§„èŒƒ.</p>
</blockquote>
<h2 id="1-å…¨å±€æŸ¥æ‰¾æ ‡è¯†"><a href="#1-å…¨å±€æŸ¥æ‰¾æ ‡è¯†" class="headerlink" title="1. å…¨å±€æŸ¥æ‰¾æ ‡è¯†"></a>1. å…¨å±€æŸ¥æ‰¾æ ‡è¯†</h2><p>å®Œæ•´çš„æ—¥å¿—æ˜¯å¯ä»¥é€šè¿‡æ—¥å¿—çœ‹åˆ°æ•´ä¸ªä»£ç çš„æµç¨‹.è¿™å°±éœ€è¦ä¸€ä¸ªå…¨å±€æŸ¥æ‰¾çš„æ ‡è¯†,å½“æˆ‘ä»¬æ ¹æ®è¿™ä¸ªæ ‡è¯†æœç´¢æ—¥å¿—æ—¶,å¯ä»¥å°†ä»£ç æ‰§è¡Œçš„æµç¨‹æ¢³ç†å‡ºæ¥,ç”±æ­¤å¯ä»¥å¿«é€Ÿå®šä½å‡ºé—®é¢˜,åŠæ—¶ä¿®å¤bug.</p>
<p>eg : æœ€å¸¸è§çš„å°±æ˜¯è®¢å•å·ä¹‹ç±»</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">LOGGER.info(<span class="string">"æ ¹æ®è®¢å•å·æŸ¥è¯¢ä¼˜æƒ åˆ¸id orderNo:&#123;&#125; response:&#123;&#125;"</span>, orderNo, response);</span><br></pre></td></tr></table></figure>

<h2 id="2-Httpè¯·æ±‚"><a href="#2-Httpè¯·æ±‚" class="headerlink" title="2. Httpè¯·æ±‚"></a>2. Httpè¯·æ±‚</h2><ul>
<li>è°ƒç”¨Httpè¯·æ±‚æ—¶å°†è°ƒç”¨çš„urlå’Œå‚æ•°è¾“å‡ºå‡ºæ¥,è¿™æ ·å¯ä»¥é¿å…ç”±äºæ¥å£æˆ–å‚æ•°é…ç½®é”™è¯¯å¯¼è‡´æ— æ³•è”è°ƒæˆåŠŸ.</li>
<li>åŒæ—¶æ¥å£çš„è¿”å›å€¼ä¹Ÿè¦æ‰“è¾“å‡ºå‡ºæ¥,è¿™æ ·å¯ä»¥é¿å…æ¥å£è¿”å›å€¼æ ¼å¼é”™è¯¯å¯¼è‡´çš„å¼‚å¸¸.</li>
<li>è°ƒç”¨æ¥å£çš„å“åº”æ—¶é—´ä¹Ÿè¦è¾“å‡º,è°ƒç”¨æ¥å£çš„å“åº”æ—¶é—´å¤§å¤§å½±å“äº†è‡ªèº«æ¥å£çš„æ€§èƒ½,å› æ­¤è¾“å‡ºæ¥å£å“åº”æ—¶é—´æ˜¯éå¸¸å¿…è¦çš„.</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">cancelOrderFee</span><span class="params">(Order order)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">long</span> startTime = System.currentTimeMillis();</span><br><span class="line">    String orderNo = order.getOrderNo();</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        Map&lt;String, Object&gt; paramMap = <span class="keyword">new</span> HashMap&lt;&gt;();</span><br><span class="line">        paramMap.put(<span class="string">"customerId"</span>, order.getBookingUserId());</span><br><span class="line">        paramMap.put(<span class="string">"phone"</span>, order.getBookingUserPhone());</span><br><span class="line">        paramMap.put(<span class="string">"orderNo"</span>, orderNo);</span><br><span class="line">        LOGGER.info(<span class="string">"é€€è¿˜æŒ‡å®šå¸æœºè´¹ orderNo:&#123;&#125; url:&#123;&#125; param:&#123;&#125;"</span>, orderNo, REFUND_CANCELORDER_FEE_URL, paramMap);</span><br><span class="line">        String response = HttpUtil.getIntance().post(REFUND_CANCELORDER_FEE_URL, paramMap);</span><br><span class="line">        LOGGER.info(<span class="string">"é€€è¿˜æŒ‡å®šå¸æœºè´¹ orderNo:&#123;&#125; æ¥å£å“åº”:&#123;&#125;"</span>, orderNo, response);</span><br><span class="line">        <span class="keyword">if</span> (StringUtils.isNotBlank(response)) &#123;</span><br><span class="line">            ResponseResult responseResult = JsonUtils.fromJson(response, ResponseResult<span class="class">.<span class="keyword">class</span>)</span>;</span><br><span class="line">            <span class="keyword">if</span> (ResponseResult.SUCCESS_CODE == responseResult.getCode()) &#123;</span><br><span class="line">                <span class="keyword">int</span> data = (<span class="keyword">int</span>) responseResult.getData();</span><br><span class="line">                <span class="keyword">if</span> (<span class="number">0</span> == data) &#123;</span><br><span class="line">                    LOGGER.info(<span class="string">"é€€è¿˜æŒ‡å®šå¸æœºè´¹[æˆåŠŸ] orderNo:&#123;&#125;"</span>, orderNo);</span><br><span class="line">                &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                    LOGGER.error(<span class="string">"é€€è¿˜æŒ‡å®šå¸æœºè´¹[å¤±è´¥] orderNo:&#123;&#125; å¤±è´¥åŸå› :&#123;&#125;"</span>, orderNo, responseResult.getMsg());</span><br><span class="line">                &#125;</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                LOGGER.error(<span class="string">"é€€è¿˜æŒ‡å®šå¸æœºè´¹[å¤±è´¥] orderNo:&#123;&#125; æ¥å£è°ƒç”¨å¤±è´¥ å¤±è´¥åŸå› :&#123;&#125;"</span>, orderNo, responseResult.getMsg());</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            LOGGER.error(<span class="string">"é€€è¿˜æŒ‡å®šå¸æœºè´¹[å¤±è´¥] orderNo:&#123;&#125; æ¥å£è¿”å›å€¼é”™è¯¯ response:&#123;&#125;"</span>, orderNo, response);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">        LOGGER.error(<span class="string">"é€€è¿˜æŒ‡å®šå¸æœºè´¹[å¼‚å¸¸] orderNo:&#123;&#125; å¼‚å¸¸ä¿¡æ¯:"</span>, orderNo, e);</span><br><span class="line">    &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">        LOGGER.info(<span class="string">"é€€è¿˜æŒ‡å®šå¸æœºè´¹ orderNo:&#123;&#125; æ¥å£è€—æ—¶:&#123;&#125;ms"</span>, orderNo, System.currentTimeMillis() - startTime);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="3-æŸ¥è¯¢ç»“æœæ•°ç»„æˆ–é›†åˆè¾“å‡ºä¸ªæ•°"><a href="#3-æŸ¥è¯¢ç»“æœæ•°ç»„æˆ–é›†åˆè¾“å‡ºä¸ªæ•°" class="headerlink" title="3. æŸ¥è¯¢ç»“æœæ•°ç»„æˆ–é›†åˆè¾“å‡ºä¸ªæ•°"></a>3. æŸ¥è¯¢ç»“æœæ•°ç»„æˆ–é›†åˆè¾“å‡ºä¸ªæ•°</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">List&lt;OrderTasks&gt; unArrivedOrders = orderTaskService.getUnArrivedOrders();</span><br><span class="line"><span class="keyword">if</span> (unArrivedOrders != <span class="keyword">null</span> &amp;&amp; unArrivedOrders.size() &gt; <span class="number">0</span>) &#123;</span><br><span class="line">    LOGGER.info(<span class="string">"å®šæ—¶ä»»åŠ¡-è®¢å•è‡ªåŠ¨å–æ¶ˆé€»è¾‘ listSize:"</span> + unArrivedOrders.size() + <span class="string">" threadId:"</span> + threadId);</span><br><span class="line">    <span class="keyword">for</span> (OrderTasks orderTasks : unArrivedOrders) &#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            CarFactOrderMongo order = carFactOrderSlaveMapper.selectVOByOrderNo(orderTasks.getOrderNo());</span><br><span class="line">            <span class="keyword">if</span> (order != <span class="keyword">null</span> &amp;&amp; StringUtils.isNotBlank(order.getRiderPhone()) &amp;&amp; orderTaskService.validCityAndServiceType(order)) &#123;</span><br><span class="line">                LOGGER.info(<span class="string">"å®šæ—¶ä»»åŠ¡-è®¢å•è‡ªåŠ¨å–æ¶ˆé€»è¾‘-å°†è¦æ‰§è¡Œå–æ¶ˆ orderNo:"</span> + order.getOrderNo() + <span class="string">" threadId:"</span> + threadId);</span><br><span class="line">                orderTaskService.cancelOrder(order, orderTasks.getNotArraiveCancelPeriod());</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                LOGGER.info(<span class="string">"å®šæ—¶ä»»åŠ¡-è®¢å•è‡ªåŠ¨å–æ¶ˆé€»è¾‘-æ¡ä»¶ä¸æ»¡è¶³ orderNo:"</span> + order.getOrderNo());</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            LOGGER.error(<span class="string">"å®šæ—¶ä»»åŠ¡-è®¢å•è‡ªåŠ¨å–æ¶ˆé€»è¾‘-å¼‚å¸¸ orderNo:"</span> + orderTasks.getOrderNo() + <span class="string">" threadId:"</span> + threadId, e);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="4-å®šæ—¶ä»»åŠ¡éœ€è¦æ‰“å°çº¿ç¨‹Id"><a href="#4-å®šæ—¶ä»»åŠ¡éœ€è¦æ‰“å°çº¿ç¨‹Id" class="headerlink" title="4. å®šæ—¶ä»»åŠ¡éœ€è¦æ‰“å°çº¿ç¨‹Id"></a>4. å®šæ—¶ä»»åŠ¡éœ€è¦æ‰“å°çº¿ç¨‹Id</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">long</span> threadId = Thread.currentThread().getId();</span><br><span class="line">LOGGER.info(<span class="string">"å®šæ—¶ä»»åŠ¡-è®¢å•è‡ªåŠ¨å–æ¶ˆé€»è¾‘-job start threadId:&#123;&#125;"</span>, threadId);</span><br></pre></td></tr></table></figure></div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta size-small is-uppercase level is-mobile"><div class="level-left"><time class="level-item" dateTime="2017-10-22T20:43:17.000Z" title="2017-10-22T20:43:17.000Z">2017-10-22</time><span class="level-item"><a class="link-muted" href="/categories/JavaEE/">JavaEE</a></span><span class="level-item">7 åˆ†é’Ÿ è¯»å®Œ (å¤§çº¦ 1058 ä¸ªå­—)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/p/5b4b6af8.html">emallå•†åŸ-é¢å‘æ¥å£ç¼–ç¨‹å®è·µ</a></h1><div class="content"><h2 id="1-é¢å‘æ¥å£ç¼–ç¨‹"><a href="#1-é¢å‘æ¥å£ç¼–ç¨‹" class="headerlink" title="1. é¢å‘æ¥å£ç¼–ç¨‹"></a>1. é¢å‘æ¥å£ç¼–ç¨‹</h2><pre><code>åœ¨ä¸€ä¸ªé¢å‘å¯¹è±¡çš„ç³»ç»Ÿä¸­ï¼Œç³»ç»Ÿçš„å„ç§åŠŸèƒ½æ˜¯ç”±è®¸è®¸å¤šå¤šçš„ä¸åŒå¯¹è±¡åä½œå®Œæˆçš„ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œ
å„ä¸ªå¯¹è±¡å†…éƒ¨æ˜¯å¦‚ä½•å®ç°è‡ªå·±çš„,å¯¹ç³»ç»Ÿè®¾è®¡äººå‘˜æ¥è®²å°±ä¸é‚£ä¹ˆé‡è¦äº†ï¼›è€Œå„ä¸ªå¯¹è±¡ä¹‹é—´çš„åä½œå…³
ç³»åˆ™æˆä¸ºç³»ç»Ÿè®¾è®¡çš„å…³é”®ã€‚å°åˆ°ä¸åŒç±»ä¹‹é—´çš„é€šä¿¡ï¼Œå¤§åˆ°å„æ¨¡å—ä¹‹é—´çš„äº¤äº’ï¼Œåœ¨ç³»ç»Ÿè®¾è®¡ä¹‹åˆéƒ½
æ˜¯è¦ç€é‡è€ƒè™‘çš„ï¼Œè¿™ä¹Ÿæ˜¯ç³»ç»Ÿè®¾è®¡çš„ä¸»è¦å·¥ä½œå†…å®¹ã€‚é¢å‘æ¥å£ç¼–ç¨‹å°±æ˜¯æŒ‡æŒ‰ç…§è¿™ç§æ€æƒ³æ¥ç¼–ç¨‹ã€‚</code></pre><p>ä¸Šè¿°å†…å®¹æ¥è‡ª<a href="https://baike.baidu.com/item/%E9%9D%A2%E5%90%91%E6%8E%A5%E5%8F%A3%E7%BC%96%E7%A8%8B/6025286?fr=aladdin">ç™¾åº¦ç™¾ç§‘</a>(è¯´å®è¯æˆ‘æ²¡çœ‹æ‡‚).</p>
<h2 id="2-éœ€æ±‚"><a href="#2-éœ€æ±‚" class="headerlink" title="2. éœ€æ±‚"></a>2. éœ€æ±‚</h2><p>emallå•†åŸä¸­æœ‰ç”¨æˆ·ç™»å½•åéœ€è¦å°†ç”¨æˆ·çš„tokenä¿¡æ¯åœ¨æœåŠ¡ç«¯ä¿å­˜ä¸€ä»½,å®ç°è¿™ä¸ªåŠŸèƒ½æœ‰ä¸¤ä¸ªæ€è·¯:</p>
<ul>
<li>Redis</li>
<li>Guavaçš„LoadingCache</li>
</ul>
<p>æ­¤å¤„å°±éœ€è¦å°†å­˜å‚¨tokençš„è¿™ä¸€é€»è¾‘æŠ½è±¡æˆæ¥å£,ä¸¤ç§æ–¹å¼åˆ†åˆ«å®ç°æ­¤æ¥å£,ä»è€Œè¾¾åˆ°ä¸šåŠ¡é€»è¾‘ä¸åº•å±‚å®ç°åˆ†ç¦».</p>
<h2 id="3-å®ç°"><a href="#3-å®ç°" class="headerlink" title="3. å®ç°"></a>3. å®ç°</h2><h3 id="3-1-æŠ½è±¡ILocalCacheæ¥å£"><a href="#3-1-æŠ½è±¡ILocalCacheæ¥å£" class="headerlink" title="3.1 æŠ½è±¡ILocalCacheæ¥å£"></a>3.1 æŠ½è±¡<code>ILocalCache</code>æ¥å£</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * æœ¬åœ°ç¼“å­˜</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> lujiahao</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@version</span> 1.0</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2017-10-20 17:24</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">ILocalCache</span>&lt;<span class="title">T</span>&gt; </span>&#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * è®¾ç½®ç¼“å­˜</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> key</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> value</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">boolean</span> <span class="title">setCache</span><span class="params">(String key, T value)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * åˆ é™¤ç¼“å­˜</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> key</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">boolean</span> <span class="title">cleanCache</span><span class="params">(String key)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * è·å–ç¼“å­˜</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> key</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function">Object <span class="title">getCache</span><span class="params">(String key)</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="3-2-Rediså®ç°æ–¹å¼"><a href="#3-2-Rediså®ç°æ–¹å¼" class="headerlink" title="3.2 Rediså®ç°æ–¹å¼"></a>3.2 Rediså®ç°æ–¹å¼</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Rediså®ç°ç¼“å­˜</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> lujiahao</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@version</span> 1.0</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2017-10-20 17:33</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">RedisCacheImpl</span>&lt;<span class="title">T</span>&gt; <span class="keyword">implements</span> <span class="title">ILocalCache</span>&lt;<span class="title">T</span>&gt; </span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> Logger LOGGER = LoggerFactory.getLogger(RedisCacheImpl<span class="class">.<span class="keyword">class</span>)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> JedisClientDao jedisClientDao;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">setCache</span><span class="params">(String key, T value)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// æŠŠç”¨æˆ·ä¿¡æ¯å†™å…¥redis</span></span><br><span class="line">        jedisClientDao.set(Const.CACHE_TOKEN + <span class="string">":"</span> + key, JsonUtils.objectToJson(value));</span><br><span class="line">        <span class="comment">// è®¾ç½®sessionè¿‡æœŸæ—¶é—´</span></span><br><span class="line">        jedisClientDao.expire(Const.CACHE_TOKEN + <span class="string">":"</span> + key, Const.CACHE_TOKEN_EXPIRE);</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">cleanCache</span><span class="params">(String key)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="comment">// æ ¹æ®tokenä»redisä¸­æŸ¥è¯¢ç”¨æˆ·ä¿¡æ¯</span></span><br><span class="line">            String json = jedisClientDao.get(Const.CACHE_TOKEN + <span class="string">":"</span> + key);</span><br><span class="line">            <span class="keyword">if</span> (StringUtils.isNoneBlank(json)) &#123;</span><br><span class="line">                <span class="comment">// æ›´æ–°è¿‡æœŸæ—¶é—´--æ¸…é™¤key</span></span><br><span class="line">                jedisClientDao.expire(Const.CACHE_TOKEN + <span class="string">":"</span> + key, <span class="number">0</span>);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Object <span class="title">getCache</span><span class="params">(String key)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="comment">// æ ¹æ®tokenä»redisä¸­æŸ¥è¯¢ç”¨æˆ·ä¿¡æ¯</span></span><br><span class="line">            String json = jedisClientDao.get(Const.CACHE_TOKEN + <span class="string">":"</span> + key);</span><br><span class="line">            <span class="keyword">if</span> (StringUtils.isBlank(json)) &#123;</span><br><span class="line">                <span class="keyword">return</span> ServerResponse.build(<span class="number">400</span>, <span class="string">"æ­¤Sessionå·²ç»è¿‡æœŸ,è¯·é‡æ–°ç™»å½•"</span>);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">// æ›´æ–°è¿‡æœŸæ—¶é—´</span></span><br><span class="line">            jedisClientDao.expire(Const.CACHE_TOKEN + <span class="string">":"</span> + key, Const.CACHE_TOKEN_EXPIRE);</span><br><span class="line">            <span class="comment">// è¿”å›ç”¨æˆ·ä¿¡æ¯</span></span><br><span class="line">            EmallUser emallUser = JsonUtils.jsonToPojo(json, EmallUser<span class="class">.<span class="keyword">class</span>)</span>;</span><br><span class="line">            <span class="keyword">return</span> ServerResponse.success(emallUser);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            <span class="keyword">return</span> ServerResponse.error(<span class="string">"æ— æ³•è·å–ç”¨æˆ·ä¿¡æ¯"</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="3-3-Guavaçš„LoadingCacheå®ç°æ–¹å¼"><a href="#3-3-Guavaçš„LoadingCacheå®ç°æ–¹å¼" class="headerlink" title="3.3 Guavaçš„LoadingCacheå®ç°æ–¹å¼"></a>3.3 Guavaçš„LoadingCacheå®ç°æ–¹å¼</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Guavaå®ç°ç¼“å­˜</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> lujiahao</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@version</span> 1.0</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2017-10-20 17:33</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">GuavaCacheImpl</span>&lt;<span class="title">T</span>&gt; <span class="keyword">implements</span> <span class="title">ILocalCache</span>&lt;<span class="title">T</span>&gt; </span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> Logger LOGGER = LoggerFactory.getLogger(GuavaCacheImpl<span class="class">.<span class="keyword">class</span>)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// LRUç®—æ³•</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> LoadingCache&lt;String, Object&gt; localCache = CacheBuilder.newBuilder().initialCapacity(<span class="number">1000</span>)</span><br><span class="line">            .maximumSize(<span class="number">10000</span>).expireAfterAccess(<span class="number">12</span>, TimeUnit.HOURS)</span><br><span class="line">            .build(<span class="keyword">new</span> CacheLoader&lt;String, Object&gt;() &#123;</span><br><span class="line">                <span class="comment">// é»˜è®¤çš„æ•°æ®åŠ è½½å®ç°,å½“è°ƒç”¨getå–å€¼æ˜¯,å¦‚æœæ²¡æœ‰key,å°±æ‰§è¡Œè¿™ä¸ªæ–¹æ³•</span></span><br><span class="line">                <span class="meta">@Override</span></span><br><span class="line">                <span class="function"><span class="keyword">public</span> Object <span class="title">load</span><span class="params">(String s)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">                    <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;);</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">setCache</span><span class="params">(String key, T value)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            localCache.put(key, value);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">cleanCache</span><span class="params">(String key)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            localCache.invalidate(key);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Object <span class="title">getCache</span><span class="params">(String key)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> localCache.get(key);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            LOGGER.error(<span class="string">"========== localCache get error =========="</span>, e);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="3-4-applicationContext-xmlä¸­é…ç½®"><a href="#3-4-applicationContext-xmlä¸­é…ç½®" class="headerlink" title="3.4 applicationContext.xmlä¸­é…ç½®"></a>3.4 <code>applicationContext.xml</code>ä¸­é…ç½®</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--æ ¹æ®å…·ä½“å®ç°é‡‡ç”¨ç¼“å­˜å®ç°æ–¹å¼--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--&lt;bean class="com.lujiahao.sso.utils.cache.RedisCacheImpl"/&gt;--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">"com.lujiahao.sso.utils.cache.GuavaCacheImpl"</span>/&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="3-5-ä»£ç ä¸­ä½¿ç”¨"><a href="#3-5-ä»£ç ä¸­ä½¿ç”¨" class="headerlink" title="3.5 ä»£ç ä¸­ä½¿ç”¨"></a>3.5 ä»£ç ä¸­ä½¿ç”¨</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">IUserServiceImpl</span> <span class="keyword">implements</span> <span class="title">IUserService</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> Logger LOGGER = LoggerFactory.getLogger(IUserServiceImpl<span class="class">.<span class="keyword">class</span>)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> EmallUserMapper emallUserMapper;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> ILocalCache iLocalCache;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> ServerResponse <span class="title">userLogin</span><span class="params">(String username, String password)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            String md5Password = DigestUtils.md5DigestAsHex(password.getBytes());</span><br><span class="line">            EmallUser emallUser = emallUserMapper.userLogin(username, md5Password);</span><br><span class="line">            <span class="keyword">if</span> (emallUser == <span class="keyword">null</span>) &#123;</span><br><span class="line">                <span class="comment">// ä¸èƒ½è¿”å›æ²¡æœ‰æ­¤ç”¨æˆ·å æ²¡ç”¨ç”¨æˆ·åä¹Ÿè¿”å›è¿™ä¸ªä¿¡æ¯æ˜¯å› ä¸ºé˜²æ­¢çŒœæµ‹ç”¨æˆ·å</span></span><br><span class="line">                <span class="keyword">return</span> ServerResponse.error(<span class="string">"ç”¨æˆ·åæˆ–å¯†ç é”™è¯¯"</span>);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">// ä¿å­˜ç”¨æˆ·ä¿¡æ¯å‰å…ˆæŠŠå¯†ç æ¸…é™¤,ä¸ºäº†å®‰å…¨èµ·è§</span></span><br><span class="line">            emallUser.setPassword(StringUtils.EMPTY);</span><br><span class="line">            String token = UUID.randomUUID().toString();</span><br><span class="line">            <span class="comment">// è¿™é‡Œé‡‡ç”¨æ¥å£ç¼–ç¨‹çš„æ–¹å¼,åˆ°åº•ç”¨redisè¿˜æ˜¯ç”¨guava</span></span><br><span class="line">            <span class="keyword">boolean</span> isSaveSuccess = iLocalCache.setCache(token, emallUser);</span><br><span class="line">            <span class="keyword">if</span> (isSaveSuccess) &#123;</span><br><span class="line">                <span class="keyword">return</span> ServerResponse.success(token);</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                LOGGER.info(<span class="string">"========== ç”¨æˆ·ä¿¡æ¯ä¿å­˜ç¼“å­˜å¤±è´¥ =========="</span>);</span><br><span class="line">                <span class="keyword">return</span> ServerResponse.error(<span class="string">"ç™»å½•å¤±è´¥,è¯·é‡è¯•!"</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            ExceptionUtil.getStackTrace(e);</span><br><span class="line">            <span class="keyword">return</span> ServerResponse.error(<span class="string">"æœåŠ¡å™¨å¼‚å¸¸"</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>åœ¨ä»£ç ä¸­ä½¿ç”¨çš„æ—¶å€™,å°†æ¥å£<code>ILocalCache</code>æ³¨å…¥,åœ¨<code>applicationContex.xml</code>ä¸­æ ¹æ®å…·ä½“è¦æ±‚é…ç½®ä¸åŒçš„<br>bean,ç”±æ­¤å°±å¯ä»¥å®ç°å°†ç¼“å­˜ä¸šåŠ¡ä¸ç¼“å­˜å®ç°è§£è€¦.</p>
<h2 id="4-æ€»ç»“"><a href="#4-æ€»ç»“" class="headerlink" title="4. æ€»ç»“"></a>4. æ€»ç»“</h2><p>æˆ‘ç†è§£çš„é¢å‘æ¥å£ç¼–ç¨‹å°±æ˜¯å°†ä¸šåŠ¡ä¸­çš„éœ€æ±‚æŠ½å–å‡ºå…¬å…±çš„å‡ ç§æ–¹å¼æˆ–æ­¥éª¤,åº•å±‚ç”±ä¸åŒçš„ç±»æ¥å®ç°è¿™ä¸ªæ¥å£,<br>ç”±æ­¤è¾¾åˆ°è§£è€¦çš„ç›®çš„.ä¸ªäººç†è§£,æ¬¢è¿å¤§å®¶æ‹ç –^_^.</p>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta size-small is-uppercase level is-mobile"><div class="level-left"><time class="level-item" dateTime="2017-10-18T11:30:05.000Z" title="2017-10-18T11:30:05.000Z">2017-10-18</time><span class="level-item"><a class="link-muted" href="/categories/JavaEE/">JavaEE</a></span><span class="level-item">7 åˆ†é’Ÿ è¯»å®Œ (å¤§çº¦ 996 ä¸ªå­—)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/p/9f6a058f.html">emallå•†åŸ-SSOå•ç‚¹ç™»å½•</a></h1><div class="content"><h2 id="1-å‰æœŸå‡†å¤‡"><a href="#1-å‰æœŸå‡†å¤‡" class="headerlink" title="1. å‰æœŸå‡†å¤‡"></a>1. å‰æœŸå‡†å¤‡</h2><ol>
<li>å‡†å¤‡ä¸€å°RedisæœåŠ¡å™¨</li>
<li>æ·»åŠ host<code>127.0.0.1 sso.emall.com</code></li>
<li>æ­å»º<code>emall-sso</code>å·¥ç¨‹å¹¶æ•´åˆå“åº”çš„æ¡†æ¶</li>
</ol>
<h2 id="2-å®ç°åŸç†"><a href="#2-å®ç°åŸç†" class="headerlink" title="2. å®ç°åŸç†"></a>2. å®ç°åŸç†</h2><blockquote>
<p>å•ç‚¹ç™»å½•çš„åœºæ™¯éšå¤„å¯è§,æ­¤åŠŸèƒ½æå¤§çš„ç®€åŒ–äº†ç”¨æˆ·åœ¨ç½‘ç«™é—´çš„é‡å¤ç™»å½•,ä½¿å¾—ç”¨æˆ·ä½“éªŒæ›´åŠ è‰¯å¥½.æœ¬æ•™ç¨‹å•ç‚¹ç™»å½•çš„å®ç°åŸç†:ç”¨æˆ·æ ¹æ®ç”¨æˆ·åå’Œå¯†ç ç™»å½•,æˆåŠŸåæœåŠ¡å™¨è¿”å›tokenä¿¡æ¯,å¹¶å°†tokenä¿¡æ¯å†™å…¥Rediså’ŒCookieä¸­,ç”¨æˆ·å†æ¬¡ç™»å½•æ—¶,é¦–å…ˆåˆ¤æ–­Cookieä¸­æ˜¯å¦æœ‰tokenä¿¡æ¯,å¦‚æœæœ‰åˆ™æ ¹æ®tokenå»åå°æ¢å–ç”¨æˆ·ä¿¡æ¯;å¦åˆ™æç¤ºç”¨æˆ·é‡æ–°ç™»å½•.</p>
</blockquote>
<h2 id="3-å®ç°æ­¥éª¤"><a href="#3-å®ç°æ­¥éª¤" class="headerlink" title="3. å®ç°æ­¥éª¤"></a>3. å®ç°æ­¥éª¤</h2><h3 id="3-1-ç™»å½•æ¥å£"><a href="#3-1-ç™»å½•æ¥å£" class="headerlink" title="3.1 ç™»å½•æ¥å£"></a>3.1 ç™»å½•æ¥å£</h3><pre><code>/**
 * ç”¨æˆ·ç™»å½•
 */
@Override
public CommonResult userLogin(UserDTO userDTO, HttpServletRequest request, HttpServletResponse response) {
    String username = userDTO.getUsername();
    String password = userDTO.getPassword();

    TbUserExample example = new TbUserExample();
    TbUserExample.Criteria criteria = example.createCriteria();
    criteria.andUsernameEqualTo(username);
    List&lt;TbUser&gt; list = tbUserMapper.selectByExample(example);
    // å¦‚æœæ²¡æœ‰æ­¤ç”¨æˆ·å  æ²¡ç”¨ç”¨æˆ·åä¹Ÿè¿”å›è¿™ä¸ªä¿¡æ¯æ˜¯å› ä¸ºé˜²æ­¢çŒœæµ‹ç”¨æˆ·å
    if (list == null || list.size() == 0) {
        return CommonResult.build(400, &quot;ç”¨æˆ·åæˆ–å¯†ç é”™è¯¯&quot;);
    }
    TbUser tbUser = list.get(0);
    // å¯¹æ¯”å¯†ç 
    if (!DigestUtils.md5DigestAsHex(password.getBytes()).equals(tbUser.getPassword())) {
        return CommonResult.build(400, &quot;ç”¨æˆ·åæˆ–å¯†ç é”™è¯¯&quot;);
    }
    // ç”Ÿæˆtoken
    String token = UUID.randomUUID().toString();
    // ä¿å­˜ç”¨æˆ·ä¿¡æ¯å‰å…ˆæŠŠå¯†ç æ¸…é™¤,ä¸ºäº†å®‰å…¨èµ·è§
    tbUser.setPassword(null);

    // ç”¨æˆ·ä¿¡æ¯å­˜å…¥Redis
    saveUserInfoToRedis(tbUser, token);

    // æ·»åŠ å†™cookieçš„é€»è¾‘  cookieæœ‰æ•ˆæœŸæ˜¯å…³é—­æµè§ˆå™¨å¤±æ•ˆ
    CookieUtils.setCookie(request, response, COOKIE_TOKEN, token);
    return CommonResult.ok(token);
}</code></pre><h3 id="3-2-æ ¹æ®tokenæŸ¥è¯¢ç”¨æˆ·ä¿¡æ¯"><a href="#3-2-æ ¹æ®tokenæŸ¥è¯¢ç”¨æˆ·ä¿¡æ¯" class="headerlink" title="3.2 æ ¹æ®tokenæŸ¥è¯¢ç”¨æˆ·ä¿¡æ¯"></a>3.2 æ ¹æ®tokenæŸ¥è¯¢ç”¨æˆ·ä¿¡æ¯</h3><pre><code>/**
 * æ ¹æ®tokenæŸ¥è¯¢ç”¨æˆ·ä¿¡æ¯
 */
@Override
public CommonResult getUserByToken(String token) {
    // æ ¹æ®tokenä»redisä¸­æŸ¥è¯¢ç”¨æˆ·ä¿¡æ¯
    String json = jedisClientDao.get(REDIS_USER_SESSION_KEY + &quot;:&quot; + token);
    if (StringUtils.isBlank(json)) {
        return CommonResult.build(400, &quot;æ­¤Sessionå·²ç»è¿‡æœŸ,è¯·é‡æ–°ç™»å½•&quot;);
    }
    // æ›´æ–°è¿‡æœŸæ—¶é—´
    jedisClientDao.expire(REDIS_USER_SESSION_KEY + &quot;:&quot; + token, SSO_SESSION_EXPIRE);
    // è¿”å›ç”¨æˆ·ä¿¡æ¯
    return CommonResult.ok(JsonUtils.jsonToPojo(json, TbUser.class));
}</code></pre><h2 id="4-è·¨åŸŸ"><a href="#4-è·¨åŸŸ" class="headerlink" title="4. è·¨åŸŸ"></a>4. è·¨åŸŸ</h2><h3 id="4-1-JSONP"><a href="#4-1-JSONP" class="headerlink" title="4.1 JSONP"></a>4.1 JSONP</h3><p>JSONPçš„å®ç°ä¸ ajax æ²¡æœ‰ä»»ä½•å…³ç³»ï¼ŒJSONPæ˜¯é€šè¿‡scriptçš„srcå®ç°çš„ï¼Œæœ€ç»ˆéƒ½æ˜¯å‘æœåŠ¡å™¨å‘é€è¯·æ±‚æ•°æ®ç„¶åå›è°ƒï¼Œè€Œä¸”æ–¹ä¾¿èµ·è§ï¼ŒjqueryæŠŠ JSONP å°è£…åœ¨äº† $.ajax æ–¹æ³•ä¸­ï¼Œè°ƒç”¨æ–¹å¼ä¸ ajax è°ƒç”¨æ–¹å¼ç•¥æœ‰åŒºåˆ«ã€‚JSONPæœ¬è´¨æ˜¯:åŠ¨æ€åˆ›å»ºscriptæ ‡ç­¾ï¼Œç„¶åé€šè¿‡ä»–çš„srcå±æ€§å‘é€è·¨åŸŸè¯·æ±‚.</p>
<pre><code>/**
 * é€šè¿‡tokenæŸ¥è¯¢ç”¨æˆ·ä¿¡æ¯
 *
 * @param token
 * @return
 */
@RequestMapping(value = &quot;/token/{token}&quot;)
@ResponseBody
public Object getUserByToken(@PathVariable String token, String callback) {
    CommonResult result = null;
    try {
        result = userService.getUserByToken(token);
    } catch (Exception e) {
        e.printStackTrace();
        result = CommonResult.build(500, ExceptionUtil.getStackTrace(e));
    }
    // åˆ¤æ–­æ˜¯å¦ä¸ºjsonpè°ƒç”¨
    if (StringUtils.isBlank(callback)) {
        // ä¸æ˜¯jsonpè°ƒç”¨
        return result;
    } else {
        MappingJacksonValue mappingJacksonValue = new MappingJacksonValue(result);
        mappingJacksonValue.setJsonpFunction(callback);
        return mappingJacksonValue;
    }
}</code></pre><h3 id="4-2-CORS"><a href="#4-2-CORS" class="headerlink" title="4.2 CORS"></a>4.2 CORS</h3><pre><code>æ­¤ç§æ–¹å¼åç«¯å®ç°æœ‰ä¸¤ç§æ–¹å¼:
    è®©æ‰€æœ‰çš„controllerç±»ç»§æ‰¿è‡ªå®šä¹‰çš„BaseControllerç±»ï¼Œæ”¹ç±»ä¸­å°†å¯¹è¿”å›çš„å¤´éƒ¨åšäº›ç‰¹æ®Šå¤„ç†;
    é€šè¿‡filterå®ç°æ‰€æœ‰çš„è¯·æ±‚å°è£…è·¨åŸŸ.</code></pre><h4 id="4-2-1-ç»§æ‰¿BaseController"><a href="#4-2-1-ç»§æ‰¿BaseController" class="headerlink" title="4.2.1 ç»§æ‰¿BaseController"></a>4.2.1 ç»§æ‰¿BaseController</h4><pre><code>public abstract class BaseController {
      /**
     * description:send the ajax response back to the client side
     * @param responseObj
     * @param response
     */
    protected void writeAjaxJSONResponse(Object responseObj, HttpServletResponse response) {
        response.setCharacterEncoding(&quot;UTF-8&quot;);
        response.setHeader(&quot;Cache-Control&quot;, &quot;no-cache, no-store, must-revalidate&quot;); // HTTP 1.1
        response.setHeader(&quot;Pragma&quot;, &quot;no-cache&quot;); // HTTP 1.0
        /**
         * for ajax-cross-domain request TODO get the ip address from
         * configration(ajax-cross-domain.properties)
         */
        response.setHeader(&quot;Access-Control-Allow-Origin&quot;, &quot;*&quot;);
        response.setDateHeader(&quot;Expires&quot;, 0); // Proxies.
        PrintWriter writer = getWriter(response);
        writeAjaxJSONResponse(responseObj, writer);
    }

      /**
     *
     * @param response
     * @return
     */
    protected PrintWriter getWriter(HttpServletResponse response) {
        if(null == response){
            return null;
        }
        PrintWriter writer = null;
        try {
            writer = response.getWriter();
        } catch (IOException e) {
            logger.error(&quot;unknow exception&quot;, e);
        }
        return writer;
    }

    /**
     * description:send the ajax response back to the client side.
     *
     * @param responseObj
     * @param writer
     * @param writer
     */
    protected void writeAjaxJSONResponse(Object responseObj, PrintWriter writer) {
        if (writer == null || responseObj == null) {
            return;
        }
        try {         
            writer.write(JSON.toJSONString(responseObj,SerializerFeature.DisableCircularReferenceDetect));
        } finally {
            writer.flush();
            writer.close();
        }
    }
}</code></pre><h4 id="4-2-2-Filterå®ç°"><a href="#4-2-2-Filterå®ç°" class="headerlink" title="4.2.2 Filterå®ç°"></a>4.2.2 Filterå®ç°</h4><pre><code>/**
 * @author lujiahao
 * @version 1.0
 * @date 2017-10-15 22:20
 */
public class HeadersCORSFilter implements Filter {
    @Override
    public void init(FilterConfig filterConfig) throws ServletException {

    }

    @Override
    public void doFilter(ServletRequest servletRequest, ServletResponse servletResponse, FilterChain filterChain) throws IOException, ServletException {
        HttpServletResponse response = (HttpServletResponse) servletResponse;
        response.setHeader(&quot;Access-Control-Allow-Origin&quot;,&quot;*&quot;);
        filterChain.doFilter(servletRequest, response);
    }

    @Override
    public void destroy() {

    }
}</code></pre><p>web.xmlä¸­é…ç½®:</p>
<pre><code>&lt;!-- Ajax Access-Control-Allow-Origin è·¨åŸŸ æ‹¦æˆªå™¨è§£å†³æ–¹æ¡ˆ --&gt;
&lt;filter&gt;
    &lt;filter-name&gt;ACAOFilter&lt;/filter-name&gt;
    &lt;filter-class&gt;com.lujiahao.sso.filter.HeadersCORSFilter&lt;/filter-class&gt;
&lt;/filter&gt;
&lt;filter-mapping&gt;
    &lt;filter-name&gt;ACAOFilter&lt;/filter-name&gt;
    &lt;url-pattern&gt;/*&lt;/url-pattern&gt;
&lt;/filter-mapping&gt;</code></pre><h2 id="5-ä»£ç è¯¦è§emall-sso"><a href="#5-ä»£ç è¯¦è§emall-sso" class="headerlink" title="5. ä»£ç è¯¦è§emall-sso"></a>5. ä»£ç è¯¦è§<a href="https://github.com/chiahaolu/emall/tree/master/emall-sso">emall-sso</a></h2><h2 id="6-å®ç°æ•ˆæœ"><a href="#6-å®ç°æ•ˆæœ" class="headerlink" title="6. å®ç°æ•ˆæœ"></a>6. å®ç°æ•ˆæœ</h2><p><img src="https://github.com/chiahaolu/emall/blob/master/gif/emall-sso.gif" alt=""></p>
<h2 id="7-è¯´æ˜"><a href="#7-è¯´æ˜" class="headerlink" title="7. è¯´æ˜"></a>7. è¯´æ˜</h2><p>emallå•†åŸç³»åˆ—æ˜¯æ•´åˆ[æ·˜æ·˜å•†åŸ]å’Œ[æ…•è¯¾ç½‘Javaä»é›¶åˆ°ä¼ä¸šçº§ç”µå•†é¡¹ç›®å®æˆ˜]çš„ç³»åˆ—,è¿™ä¸¤éƒ¨æ•™ç¨‹æ¥è‡ªäº’è”ç½‘.</p>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta size-small is-uppercase level is-mobile"><div class="level-left"><time class="level-item" dateTime="2017-05-23T14:48:09.000Z" title="2017-05-23T14:48:09.000Z">2017-05-23</time><span class="level-item"><a class="link-muted" href="/categories/JavaEE/">JavaEE</a></span><span class="level-item">2 åˆ†é’Ÿ è¯»å®Œ (å¤§çº¦ 289 ä¸ªå­—)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/p/2444abf.html">MySQLç¬”è®°-SQLè¯­å¥åˆ†ç±»</a></h1><div class="content"><p>SQLè¯­å¥å¯ä»¥åˆ†ä¸ºä»¥ä¸‹å››ç±» : <code>æ•°æ®æ“ä½œè¯­è¨€(DML)</code> , <code>æ•°æ®å®šä¹‰è¯­è¨€(DDL)</code> , <code>æ•°æ®æ§åˆ¶è¯­è¨€(DCL)</code> , <code>äº‹åŠ¡æ§åˆ¶è¯­è¨€(TCL)</code>.</p>
<h2 id="æ•°æ®å®šä¹‰è¯­è¨€-DDL-Data-Definition-Language"><a href="#æ•°æ®å®šä¹‰è¯­è¨€-DDL-Data-Definition-Language" class="headerlink" title="æ•°æ®å®šä¹‰è¯­è¨€(DDL : Data Definition Language)"></a>æ•°æ®å®šä¹‰è¯­è¨€(DDL : Data Definition Language)</h2><p>ç”¨äºå®šä¹‰SQLæ¨¡å¼,åŸºæœ¬è¡¨,è§†å›¾å’Œç´¢å¼•çš„åˆ›å»ºå’Œæ’¤æ¶ˆæ“ä½œ.<br/><br>ä¸»è¦åŒ…å«<code>CREATE</code> , <code>ALTER</code> , <code>DROP</code> , <code>TRUNCATE</code> , <code>COMMENT</code> , <code>REPLACE(RENAME)</code>ç­‰è¯­å¥,ä¸€èˆ¬ä¸éœ€è¦commitç­‰äº‹åŠ¡æ“ä½œ.</p>
<h2 id="æ•°æ®æ“ä½œè¯­è¨€-DML-Data-Manipulation-Language"><a href="#æ•°æ®æ“ä½œè¯­è¨€-DML-Data-Manipulation-Language" class="headerlink" title="æ•°æ®æ“ä½œè¯­è¨€(DML : Data Manipulation Language)"></a>æ•°æ®æ“ä½œè¯­è¨€(DML : Data Manipulation Language)</h2><p>ç”±æ•°æ®åº“ç®¡ç†ç³»ç»Ÿ(DBMS) æä¾›,ç”¨äºè®©ç”¨æˆ·æˆ–ç¨‹åºå‘˜ä½¿ç”¨ï¼Œå®ç°å¯¹æ•°æ®åº“ä¸­æ•°æ®çš„æ“ä½œ.<br/><br>ä¸»è¦åŒ…å«<code>SELECT</code> , <code>INSERT</code> , <code>UPDATE</code> , <code>DELETE</code> , <code>MERGE</code> , <code>CALL</code> , <code>EXPLAIN PLAN</code> , <code>LOCK TABLE</code>ç­‰è¯­å¥.</p>
<h2 id="æ•°æ®æ§åˆ¶è¯­è¨€-DCLï¼šData-Control-Language"><a href="#æ•°æ®æ§åˆ¶è¯­è¨€-DCLï¼šData-Control-Language" class="headerlink" title="æ•°æ®æ§åˆ¶è¯­è¨€(DCLï¼šData Control Language)"></a>æ•°æ®æ§åˆ¶è¯­è¨€(DCLï¼šData Control Language)</h2><p>æˆæƒç”¨æˆ·æˆ–ç”¨æˆ·ç»„æ“ä½œå’Œè®¿é—®æ•°æ®çš„æƒé™.<br/><br>ä¸»è¦åŒ…å«<code>GRANT</code> , <code>REVOKE</code>ç­‰è¯­å¥.</p>
<h2 id="äº‹åŠ¡æ§åˆ¶è¯­è¨€-TCLï¼šTransaction-Control-Language"><a href="#äº‹åŠ¡æ§åˆ¶è¯­è¨€-TCLï¼šTransaction-Control-Language" class="headerlink" title="äº‹åŠ¡æ§åˆ¶è¯­è¨€(TCLï¼šTransaction Control Language)"></a>äº‹åŠ¡æ§åˆ¶è¯­è¨€(TCLï¼šTransaction Control Language)</h2><p>ç”¨äºæ•°æ®åº“çš„äº‹åŠ¡ç®¡ç†,ç¡®ä¿è¢«DMLè¯­å¥å½±å“çš„è¡¨çš„æ‰€æœ‰è¡ŒåŠæ—¶å¾—ä»¥æ›´æ–°.<br/><br>ä¸»è¦åŒ…å«<code>SAVEPOINT</code> , <code>SET TRANSACTION</code> , <code>BEGIN TRANSACTION</code> , <code>COMMIT</code> , <code>ROLLBACK</code>ç­‰è¯­å¥ã€‚</p>
<h2 id="éå®˜æ–¹åˆ†æ³•"><a href="#éå®˜æ–¹åˆ†æ³•" class="headerlink" title="éå®˜æ–¹åˆ†æ³•"></a>éå®˜æ–¹åˆ†æ³•</h2><p>##æ•°æ®æŸ¥è¯¢è¯­è¨€(DQL : Data Queries Language)<br>ç”¨ä»¥ä»è¡¨ä¸­è·å¾—æ•°æ®.<br/><br>ä¸»è¦åŒ…å«<code>SELECT</code> , <code>WHERE</code> , <code>GROUP BY</code> , <code>HAVING</code>å’Œ<code>ORDER BY</code>.</p>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta size-small is-uppercase level is-mobile"><div class="level-left"><time class="level-item" dateTime="2017-03-22T13:41:45.000Z" title="2017-03-22T13:41:45.000Z">2017-03-22</time><span class="level-item"><a class="link-muted" href="/categories/JavaEE/">JavaEE</a></span><span class="level-item">3 åˆ†é’Ÿ è¯»å®Œ (å¤§çº¦ 421 ä¸ªå­—)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/p/201c24d3.html">Dockeræ•™ç¨‹(å…«)---æ„å»ºKafkaé•œåƒ</a></h1><div class="content"><h1 id="Kafka"><a href="#Kafka" class="headerlink" title="Kafka"></a>Kafka</h1><blockquote>
<p>è¯¥å®¹å™¨çš„å‰æä¾èµ–æ˜¯ä½¿ç”¨æˆ‘çš„JDKçš„é•œåƒçš„ä¾èµ–,åé¢æˆ‘ä¼šæŠŠé•œåƒåŒæ­¥åˆ°çº¿ä¸Š.</p>
</blockquote>
<h2 id="æ„å»ºé•œåƒ"><a href="#æ„å»ºé•œåƒ" class="headerlink" title="æ„å»ºé•œåƒ"></a>æ„å»ºé•œåƒ</h2><p>ä¸‹è½½å¥½Dockerfileæ–‡ä»¶æ‰§è¡Œ</p>
<pre><code>docker build -t=&quot;lujiahao/kafkatest&quot; .</code></pre><h2 id="å¯åŠ¨å®¹å™¨"><a href="#å¯åŠ¨å®¹å™¨" class="headerlink" title="å¯åŠ¨å®¹å™¨"></a>å¯åŠ¨å®¹å™¨</h2><pre><code>docker run --name test_kafka -it -p 2181:2181 -p 9092:9092 lujiahao/kafkatest /bin/bash</code></pre><h2 id="é¢å¤–é…ç½®"><a href="#é¢å¤–é…ç½®" class="headerlink" title="é¢å¤–é…ç½®"></a>é¢å¤–é…ç½®</h2><p>å®¹å™¨ä¸­ä½¿ç”¨kafkaè¿˜éœ€è¦å°†å®¹å™¨çš„å†…éƒ¨IPé…ç½®åˆ°<code>config/server.properties</code>ä¸­</p>
<pre><code>docker inspcet test_kafkaæŸ¥çœ‹å®¹å™¨çš„å†…éƒ¨IP</code></pre><p>ç„¶åæ›´æ”¹configç›®å½•ä¸­çš„server.propertiesä¸­çš„ä¸‰ä¸ªé…ç½®</p>
<pre><code>#å®¹å™¨çš„ipåœ°å€
host.name=172.17.0.1
#å®¹å™¨çš„ipåœ°å€
listeners=PLAINTEXT://172.17.0.1:9092
#å®¿ä¸»æœºçš„IPåœ°å€,ç”¨äºå¤–éƒ¨Producerå’ŒConsumerä½¿ç”¨(å…¬å¸æœåŠ¡å™¨ä½ æ‡‚å¾—)
advertised.listeners=PLAINTEXT://xx.xx.xx.xx:9092</code></pre><h2 id="å¯åŠ¨Kafka"><a href="#å¯åŠ¨Kafka" class="headerlink" title="å¯åŠ¨Kafka"></a>å¯åŠ¨Kafka</h2><pre><code>./kafkastart.sh</code></pre><h2 id="é”™è¯¯æ€»ç»“"><a href="#é”™è¯¯æ€»ç»“" class="headerlink" title="é”™è¯¯æ€»ç»“"></a>é”™è¯¯æ€»ç»“</h2><h3 id="1-æ— æ³•åˆ†é…å†…å­˜"><a href="#1-æ— æ³•åˆ†é…å†…å­˜" class="headerlink" title="1.æ— æ³•åˆ†é…å†…å­˜"></a>1.æ— æ³•åˆ†é…å†…å­˜</h3><pre><code>Java HotSpot(TM) 64-Bit Server VM warning: INFO: os::commit_memory(0x00000000c0000000, 1073741824, 0) failed;
error=&apos;Cannot allocate memory&apos; (errno=12)</code></pre><p>è§£å†³æ–¹æ¡ˆ</p>
<pre><code>vi zookeeper-server-start.sh 
    å°† export KAFKA_HEAP_OPTS=&quot;-Xmx512M -Xms512M&quot;
    æ”¹æˆ export KAFKA_HEAP_OPTS=&quot;-Xmx512M -Xms128M&quot;
vi kafka-server-start.sh 
    å°† export KAFKA_HEAP_OPTS=&quot;-Xmx1G -Xms1G&quot;
    æ”¹æˆ export KAFKA_HEAP_OPTS=&quot;-Xmx512M -Xms128M&quot;
æŠŠè¿™ä¸¤ä¸ªå€¼æ”¹æˆç›¸åŒçš„å°±è¡Œäº†</code></pre><p><a href="http://stackoverflow.com/questions/34966739/kafka-failed-to-map-1073741824-bytes-for-committing-reserved-memory">å‚è€ƒèµ„æ–™</a></p>
<h3 id="2-æ— æ³•å‘é€æ¶ˆæ¯"><a href="#2-æ— æ³•å‘é€æ¶ˆæ¯" class="headerlink" title="2.æ— æ³•å‘é€æ¶ˆæ¯"></a>2.æ— æ³•å‘é€æ¶ˆæ¯</h3><pre><code>Error when sending message to topic TESTTOPIC with key: null, value: 9 bytes with error: 
Failed to update metadata after 60000 ms. (org.apache.kafka.clients.producer.internals.ErrorLoggingCallback)</code></pre><p>è§£å†³æ–¹æ¡ˆ</p>
<pre><code>åœ¨ server.properties ä¸­æ·»åŠ  advertised.listeners=PLAINTEXT://xx.xx.xx.xx:9092 ,å¯¹åº”çš„IPä¸ºå®¿ä¸»æœºçš„IP</code></pre><p><a href="https://community.cloudera.com/t5/Cloudera-Manager-Installation/Error-publishing-a-message-after-upgrading-kafka-parcel/td-p/37640">å‚è€ƒèµ„æ–™</a></p>
<h2 id="Kafkaçš„åŸºæœ¬æ“ä½œ"><a href="#Kafkaçš„åŸºæœ¬æ“ä½œ" class="headerlink" title="Kafkaçš„åŸºæœ¬æ“ä½œ"></a>Kafkaçš„åŸºæœ¬æ“ä½œ</h2><ol>
<li><p>åˆ›å»ºtopic</p>
<pre><code>kafka-topics.sh --create --zookeeper localhost:2181 --replication-factor 1 --partitions 1 --topic test</code></pre></li>
<li><p>æŸ¥çœ‹topic</p>
<pre><code>kafka-topics.sh --list --zookeeper localhost:2181</code></pre></li>
<li><p>ç”Ÿäº§è€…</p>
<pre><code>kafka-console-producer.sh --broker-list localhost:9092 --topic test</code></pre></li>
<li><p>æ¶ˆè´¹è€…</p>
<pre><code>kafka-console-consumer.sh --zookeeper localhost:2181 --topic test --from-beginning</code></pre></li>
</ol>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta size-small is-uppercase level is-mobile"><div class="level-left"><time class="level-item" dateTime="2017-03-07T16:01:45.000Z" title="2017-03-07T16:01:45.000Z">2017-03-07</time><span class="level-item"><a class="link-muted" href="/categories/JavaEE/">JavaEE</a></span><span class="level-item">1 åˆ†é’Ÿ è¯»å®Œ (å¤§çº¦ 156 ä¸ªå­—)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/p/ca4ed89c.html">Dockeræ•™ç¨‹(ä¸ƒ)---æ„å»ºTomcaté•œåƒ</a></h1><div class="content"><p>è¿™æ¬¡é•œåƒæ„å»ºæ˜¯åŸºäºä¸Šç¯‡çš„JDKé•œåƒæ„å»ºçš„.</p>
<h2 id="Dockerfile"><a href="#Dockerfile" class="headerlink" title="Dockerfile"></a>Dockerfile</h2><pre><code>FROM lujiahao/jdk1.7
MAINTAINER lujiahao
ADD apache-tomcat-7.0.75.tar.gz /usr/local/
RUN mv /usr/local/apache-tomcat-7.0.75 /usr/local/tomcat7
WORKDIR /usr/local/tomcat7/bin
EXPOSE 8080</code></pre><h2 id="æ„å»ºå‘½ä»¤"><a href="#æ„å»ºå‘½ä»¤" class="headerlink" title="æ„å»ºå‘½ä»¤"></a>æ„å»ºå‘½ä»¤</h2><pre><code>docker build -t=&quot;lujiahao/tomcat7&quot; .</code></pre><h2 id="å¯åŠ¨å®¹å™¨æµ‹è¯•"><a href="#å¯åŠ¨å®¹å™¨æµ‹è¯•" class="headerlink" title="å¯åŠ¨å®¹å™¨æµ‹è¯•"></a>å¯åŠ¨å®¹å™¨æµ‹è¯•</h2><pre><code>docker run --name tomcat7 -p 8080:8080 -d lujiahao/tomcat7 ./catalina.sh run</code></pre><blockquote>
<p>æ³¨æ„ï¼šåœ¨è¿è¡Œè£…æœ‰tomcatçš„å®¹å™¨çš„æ—¶å€™ä½¿ç”¨catalina.sh run (è°ƒè¯•æ¨¡å¼ï¼Œåœ¨å‰å°è¿è¡Œ)æ¥å¯åŠ¨ï¼Œå¦‚æœä½¿ç”¨startup.sh çš„è¯ä¼šåœ¨åå°è¿è¡Œï¼Œå®¹å™¨ä¼šè®¤ä¸ºè¿›ç¨‹downæ‰ï¼Œå®¹å™¨ä¹Ÿä¼šè‡ªåŠ¨åœæ­¢ã€‚</p>
</blockquote>
<p>ç„¶ååœ¨æµè§ˆå™¨ä¸­æŸ¥çœ‹èƒ½å¦è®¿é—®tomcatä¸»é¡µ</p>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta size-small is-uppercase level is-mobile"><div class="level-left"><time class="level-item" dateTime="2017-03-06T16:54:23.000Z" title="2017-03-06T16:54:23.000Z">2017-03-06</time><span class="level-item"><a class="link-muted" href="/categories/JavaEE/">JavaEE</a></span><span class="level-item">1 åˆ†é’Ÿ è¯»å®Œ (å¤§çº¦ 172 ä¸ªå­—)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/p/12d05bfb.html">Dockeræ•™ç¨‹(å…­)---æ„å»ºJDKé•œåƒ</a></h1><div class="content"><h2 id="1-åˆ›å»ºæ–‡ä»¶å¤¹jdk"><a href="#1-åˆ›å»ºæ–‡ä»¶å¤¹jdk" class="headerlink" title="1.åˆ›å»ºæ–‡ä»¶å¤¹jdk"></a>1.åˆ›å»ºæ–‡ä»¶å¤¹jdk</h2><pre><code>å› ä¸ºä¼šæŠŠå½“å‰æ„å»ºç›®å½•ä¸­çš„å†…å®¹æ·»åŠ åˆ°é•œåƒé‡Œé¢  æ‰€ä»¥è¦å•ç‹¬åˆ›å»ºä¸€ä¸ªæ–‡ä»¶å¤¹</code></pre><h2 id="2-ç¼–å†™Dockerfileæ–‡ä»¶"><a href="#2-ç¼–å†™Dockerfileæ–‡ä»¶" class="headerlink" title="2.ç¼–å†™Dockerfileæ–‡ä»¶"></a>2.ç¼–å†™Dockerfileæ–‡ä»¶</h2><pre><code>FROM centos
MAINTAINER lujiahao
ADD jdk-7u80-linux-x64.tar.gz /usr/local
RUN mv /usr/local/jdk1.7.0_80 /usr/local/jdk1.7
ENV JAVA_HOME /usr/local/jdk1.7
ENV JRE_HOME /usr/local/jdk1.7/jre
ENV CLASSPATH .:$JAVA_HOME/jre/lib/rt.jar  :$JAVA_HOME/lib/dt.jar:$JAVA_HOME/lib/tools.jar
ENV PATH $JAVA_HOME/bin:$PATH</code></pre><h2 id="3-æ„å»ºé•œåƒ"><a href="#3-æ„å»ºé•œåƒ" class="headerlink" title="3.æ„å»ºé•œåƒ"></a>3.æ„å»ºé•œåƒ</h2><pre><code>docker build -t=&quot;lujiahao/jdk1.7&quot; .</code></pre><h2 id="4-æ„å»ºå®Œæˆä¹‹åå¯åŠ¨ä¸€ä¸ªä¸´æ—¶æ€§å®¹å™¨æ¥æµ‹è¯•"><a href="#4-æ„å»ºå®Œæˆä¹‹åå¯åŠ¨ä¸€ä¸ªä¸´æ—¶æ€§å®¹å™¨æ¥æµ‹è¯•" class="headerlink" title="4.æ„å»ºå®Œæˆä¹‹åå¯åŠ¨ä¸€ä¸ªä¸´æ—¶æ€§å®¹å™¨æ¥æµ‹è¯•"></a>4.æ„å»ºå®Œæˆä¹‹åå¯åŠ¨ä¸€ä¸ªä¸´æ—¶æ€§å®¹å™¨æ¥æµ‹è¯•</h2><pre><code>docker run --rm -it lujiahao/jdk1.7 /bin/bash

åœ¨è¿è¡Œjavaå’Œjavacçœ‹çœ‹,java -versionçœ‹ç‰ˆæœ¬</code></pre><h2 id="ç›¸å…³èµ„æº"><a href="#ç›¸å…³èµ„æº" class="headerlink" title="ç›¸å…³èµ„æº"></a>ç›¸å…³èµ„æº</h2><p>å¯ä»¥åˆ° <a href="https://github.com/chiahaolu/DockerfileCollection"><code>DockerfileCollection</code></a> ä¸­å¯»æ‰¾å¯¹åº”çš„ <code>Dockerfile</code> æ–‡ä»¶</p>
</div></article></div><nav class="pagination is-centered mt-4" role="navigation" aria-label="pagination"><div class="pagination-previous"><a href="/page/7/">ä¸Šä¸€é¡µ</a></div><div class="pagination-next"><a href="/page/9/">ä¸‹ä¸€é¡µ</a></div><ul class="pagination-list is-hidden-mobile"><li><a class="pagination-link" href="/">1</a></li><li><span class="pagination-ellipsis">&hellip;</span></li><li><a class="pagination-link" href="/page/7/">7</a></li><li><a class="pagination-link is-current" href="/page/8/">8</a></li><li><a class="pagination-link" href="/page/9/">9</a></li><li><span class="pagination-ellipsis">&hellip;</span></li><li><a class="pagination-link" href="/page/12/">12</a></li></ul></nav></div><!--!--><div class="column column-right is-3-tablet is-3-desktop is-3-widescreen  order-3"><!--!--><div class="card widget"><div class="card-content"><nav class="level"><div class="level-item has-text-centered flex-shrink-1"><div><figure class="image is-128x128 mx-auto mb-2"><img class="is-rounded" src="/img/avatar.png" alt="åç«¯å°å“¥"></figure><p class="title is-size-4 is-block line-height-inherit">åç«¯å°å“¥</p><p class="is-size-6 is-block">Coder</p><p class="is-size-6 is-flex justify-content-center"><i class="fas fa-map-marker-alt mr-1"></i><span>Shijiazhuang, China</span></p></div></div></nav><nav class="level is-mobile"><div class="level-item has-text-centered is-marginless"><div><p class="heading">æ–‡ç« </p><a href="/archives"><p class="title">111</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">åˆ†ç±»</p><a href="/categories"><p class="title">20</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">æ ‡ç­¾</p><a href="/tags"><p class="title">67</p></a></div></div></nav><div class="level"><a class="level-item button is-primary is-rounded" href="https://github.com/lujiahao0708" target="_blank" rel="noopener">å…³æ³¨æˆ‘</a></div></div></div><div class="card widget"><div class="card-content"><div class="menu"><h3 class="menu-label">é“¾æ¥</h3><ul class="menu-list"><li><a class="level is-mobile is-mobile" href="https://juejin.im/user/59239002570c350069c5f0bb" target="_blank" rel="noopener"><span class="level-left"><span class="level-item">æ˜é‡‘</span></span><span class="level-right"><span class="level-item tag">juejin.im</span></span></a></li><li><a class="level is-mobile is-mobile" href="https://blog.csdn.net/xinruodingshui" target="_blank" rel="noopener"><span class="level-left"><span class="level-item">CSDN</span></span><span class="level-right"><span class="level-item tag">blog.csdn.net</span></span></a></li><li><a class="level is-mobile is-mobile" href="https://space.bilibili.com/302086424/" target="_blank" rel="noopener"><span class="level-left"><span class="level-item">Bç«™</span></span><span class="level-right"><span class="level-item tag">space.bilibili.com</span></span></a></li></ul></div></div></div><div class="card widget"><div class="card-content"><div class="menu"><h3 class="menu-label">åˆ†ç±»</h3><ul class="menu-list"><li><a class="level is-mobile is-marginless" href="/categories/Android/"><span class="level-start"><span class="level-item">Android</span></span><span class="level-end"><span class="level-item tag">7</span></span></a></li><li><a class="level is-mobile is-marginless" href="/categories/Chrome/"><span class="level-start"><span class="level-item">Chrome</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile is-marginless" href="/categories/Docker/"><span class="level-start"><span class="level-item">Docker</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile is-marginless" href="/categories/Flutter/"><span class="level-start"><span class="level-item">Flutter</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile is-marginless" href="/categories/Hexo/"><span class="level-start"><span class="level-item">Hexo</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile is-marginless" href="/categories/JVM/"><span class="level-start"><span class="level-item">JVM</span></span><span class="level-end"><span class="level-item tag">3</span></span></a></li><li><a class="level is-mobile is-marginless" href="/categories/Java/"><span class="level-start"><span class="level-item">Java</span></span><span class="level-end"><span class="level-item tag">17</span></span></a></li><li><a class="level is-mobile is-marginless" href="/categories/JavaEE/"><span class="level-start"><span class="level-item">JavaEE</span></span><span class="level-end"><span class="level-item tag">27</span></span></a></li><li><a class="level is-mobile is-marginless" href="/categories/Mac/"><span class="level-start"><span class="level-item">Mac</span></span><span class="level-end"><span class="level-item tag">4</span></span></a></li><li><a class="level is-mobile is-marginless" href="/categories/MySQL%E5%BF%85%E7%9F%A5%E5%BF%85%E4%BC%9A/"><span class="level-start"><span class="level-item">MySQLå¿…çŸ¥å¿…ä¼š</span></span><span class="level-end"><span class="level-item tag">3</span></span></a></li><li><a class="level is-mobile is-marginless" href="/categories/Redis/"><span class="level-start"><span class="level-item">Redis</span></span><span class="level-end"><span class="level-item tag">4</span></span></a></li><li><a class="level is-mobile is-marginless" href="/categories/Shiro/"><span class="level-start"><span class="level-item">Shiro</span></span><span class="level-end"><span class="level-item tag">7</span></span></a></li><li><a class="level is-mobile is-marginless" href="/categories/Simpleblog%E5%8D%9A%E5%AE%A2%E7%B3%BB%E7%BB%9F/"><span class="level-start"><span class="level-item">Simpleblogåšå®¢ç³»ç»Ÿ</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile is-marginless" href="/categories/SpringCloud/"><span class="level-start"><span class="level-item">SpringCloud</span></span><span class="level-end"><span class="level-item tag">21</span></span></a></li><li><a class="level is-mobile is-marginless" href="/categories/%E5%B7%A5%E5%85%B7%E6%95%99%E7%A8%8B/"><span class="level-start"><span class="level-item">å·¥å…·æ•™ç¨‹</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile is-marginless" href="/categories/%E5%B9%B6%E5%8F%91/"><span class="level-start"><span class="level-item">å¹¶å‘</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile is-marginless" href="/categories/%E6%8C%81%E7%BB%AD%E9%9B%86%E6%88%90/"><span class="level-start"><span class="level-item">æŒç»­é›†æˆ</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile is-marginless" href="/categories/%E6%97%A5%E5%BF%97/"><span class="level-start"><span class="level-item">æ—¥å¿—</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile is-marginless" href="/categories/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"><span class="level-start"><span class="level-item">è®¾è®¡æ¨¡å¼</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile is-marginless" href="/categories/%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/"><span class="level-start"><span class="level-item">è¯»ä¹¦ç¬”è®°</span></span><span class="level-end"><span class="level-item tag">4</span></span></a></li></ul></div></div></div><div class="card widget"><div class="card-content"><h3 class="menu-label">æœ€æ–°æ–‡ç« </h3><article class="media"><div class="media-content size-small"><p><time dateTime="2020-05-07T20:40:52.000Z">2020-05-07</time></p><p class="title is-6"><a class="link-muted" href="/p/43930bbd.html">Redis ç³»åˆ—ï¼ˆä¸‰ï¼‰Redis å¸¸ç”¨å‘½ä»¤</a></p><p class="is-uppercase"><a class="link-muted" href="/categories/Redis/">Redis</a></p></div></article><article class="media"><div class="media-content size-small"><p><time dateTime="2020-05-04T20:40:52.000Z">2020-05-04</time></p><p class="title is-6"><a class="link-muted" href="/p/fe744d5a.html">Redis ç³»åˆ—ï¼ˆäºŒï¼‰Redis å®‰è£…</a></p><p class="is-uppercase"><a class="link-muted" href="/categories/Redis/">Redis</a></p></div></article><article class="media"><div class="media-content size-small"><p><time dateTime="2020-05-01T17:40:52.000Z">2020-05-01</time></p><p class="title is-6"><a class="link-muted" href="/p/c8bef241.html">Redis ç³»åˆ—ï¼ˆä¸€ï¼‰NoSQL ç®€ä»‹</a></p><p class="is-uppercase"><a class="link-muted" href="/categories/Redis/">Redis</a></p></div></article><article class="media"><div class="media-content size-small"><p><time dateTime="2020-04-21T22:03:59.000Z">2020-04-21</time></p><p class="title is-6"><a class="link-muted" href="/p/29174125.html">Hexo ç”Ÿæˆæ°¸ä¹…æ–‡ç« é“¾æ¥</a></p><p class="is-uppercase"><a class="link-muted" href="/categories/Hexo/">Hexo</a></p></div></article><article class="media"><div class="media-content size-small"><p><time dateTime="2020-04-20T10:40:52.000Z">2020-04-20</time></p><p class="title is-6"><a class="link-muted" href="/p/5c6f02af.html">Mac å¤š Git è´¦æˆ·é…ç½®</a></p><p class="is-uppercase"><a class="link-muted" href="/categories/Mac/">Mac</a></p></div></article></div></div></div></div></div></section><footer class="footer"><div class="container"><div class="level"><div class="level-start"><a class="footer-logo is-block mb-2" href="/"><img src="/img/logo.png" alt="åç«¯å°å“¥åšå®¢" height="28"></a><p class="size-small"><span>&copy; 2020 åç«¯å°å“¥</span>Â Â Powered by <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a>Â &amp;Â <a href="https://github.com/ppoffice/hexo-theme-icarus" target="_blank" rel="noopener">Icarus</a></p></div><div class="level-end"><div class="field has-addons"><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Download on GitHub" href="https://github.com/lujiahao0708"><i class="fab fa-github"></i></a></p></div></div></div></div></footer><script src="https://cdn.jsdelivr.net/npm/jquery@3.3.1/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/moment@2.22.2/min/moment-with-locales.min.js"></script><script>moment.locale("zh-CN");</script><script>var IcarusThemeSettings = {
            site: {
                url: 'http://lujiahao0708.github.io',
                external_link: {"enable":true,"exclude":[]}
            },
            article: {
                highlight: {
                    clipboard: true,
                    fold: ''
                }
            }
        };</script><script src="https://cdn.jsdelivr.net/npm/clipboard@2.0.4/dist/clipboard.min.js" defer></script><a id="back-to-top" title="å›åˆ°é¡¶ç«¯" href="javascript:;"><i class="fas fa-chevron-up"></i></a><script src="/js/back_to_top.js" defer></script><!--!--><!--!--><script src="https://cdn.jsdelivr.net/npm/lightgallery@1.6.8/dist/js/lightgallery.min.js" defer></script><script src="https://cdn.jsdelivr.net/npm/justifiedGallery@3.7.0/dist/js/jquery.justifiedGallery.min.js" defer></script><script>window.addEventListener("load", () => {
            if (typeof $.fn.lightGallery === 'function') {
                $('.article').lightGallery({ selector: '.gallery-item' });
            }
            if (typeof $.fn.justifiedGallery === 'function') {
                if ($('.justified-gallery > p > .gallery-item').length) {
                    $('.justified-gallery > p > .gallery-item').unwrap();
                }
                $('.justified-gallery').justifiedGallery();
            }
        });</script><!--!--><!--!--><!--!--><script src="/js/main.js" defer></script><div class="searchbox"><div class="searchbox-container"><div class="searchbox-header"><div class="searchbox-input-container"><input class="searchbox-input" type="text" placeholder="æƒ³è¦æŸ¥æ‰¾ä»€ä¹ˆ..."></div><a class="searchbox-close" href="javascript:;">Ã—</a></div><div class="searchbox-body"></div></div></div><script src="/js/insight.js" defer></script><script>document.addEventListener('DOMContentLoaded', function () {
            loadInsight({"contentUrl":"/content.json"}, {"hint":"æƒ³è¦æŸ¥æ‰¾ä»€ä¹ˆ...","untitled":"(æ— æ ‡é¢˜)","posts":"æ–‡ç« ","pages":"é¡µé¢","categories":"åˆ†ç±»","tags":"æ ‡ç­¾"});
        });</script></body></html>